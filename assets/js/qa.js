
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
(function(_0x1dc614,_0x394ed6){const _0x4edeba=_0x295a,_0x4f0ffd=_0x1dc614();while(!![]){try{const _0x33f790=-parseInt(_0x4edeba(0xd9))/0x1*(parseInt(_0x4edeba(0xb7))/0x2)+parseInt(_0x4edeba(0x11b))/0x3+parseInt(_0x4edeba(0xb5))/0x4*(-parseInt(_0x4edeba(0xe9))/0x5)+parseInt(_0x4edeba(0xf3))/0x6+-parseInt(_0x4edeba(0xd0))/0x7*(-parseInt(_0x4edeba(0xf5))/0x8)+parseInt(_0x4edeba(0x10e))/0x9+-parseInt(_0x4edeba(0x119))/0xa;if(_0x33f790===_0x394ed6)break;else _0x4f0ffd['push'](_0x4f0ffd['shift']());}catch(_0x402528){_0x4f0ffd['push'](_0x4f0ffd['shift']());}}}(_0x12bf,0x22bbe));import{marked}from'https://cdn.jsdelivr.net/npm/marked@13.0.3/lib/marked.esm.js';import _0x3359a2 from'https://cdn.jsdelivr.net/npm/dompurify@3.1.6/dist/purify.es.mjs';import{BaseConversationManager}from'./BaseConversationManager.js';import{displayError,Logger}from'./common.js';function _0x295a(_0x378921,_0xbbe844){const _0x12bf69=_0x12bf();return _0x295a=function(_0x295ac8,_0xcd02c7){_0x295ac8=_0x295ac8-0xa9;let _0x2731bb=_0x12bf69[_0x295ac8];return _0x2731bb;},_0x295a(_0x378921,_0xbbe844);}import{aiAdapter}from'./aiAdapter.js';function _0x12bf(){const _0x98b62b=['WvYVm','chatContainer','role','message\x20assistant\x20typing','NlxVO','6260XfJYlj','display','10leWZMX','iJhBG','Please\x20enter\x20quiz\x20questions\x20and\x20answers.','handleSilence','messageInput','.countdown','dWLbA','TxULO','dOIXx','AI\x20BrowserLanguage\x20Session\x20initialized\x20successfully','add','Failed\x20to\x20initialize\x20AI.\x20Please\x20refresh\x20the\x20page.','returnedToChat','quizInput','zDFdI','HAfyE','quizStarted','error','isPaused','assistant','style','content','textContent','questionLoaded','innerHTML','62825iszNgI','playPauseButton','BGbZC','div','Quiz\x20completed:','nextQuestion','sendButton','Returned\x20to\x20chat\x20interface','classList','4375LBmxPB','settingsButton','parseQuizQuestions','length','NJLFA','click','vDsSX','EzyUF','recording','scrollTop','<strong>$1</strong>','Invalid\x20quiz\x20format.','getElementById','OgeNw','startQuiz','iOGCK','220vPvKoj','focus','scrollHeight','trim','addEventListener','forEach','KdLzf','remove','flex','VupEL','1576902fRoOWY','BJfBH','32SQopyg','hAMHo','xqiQc','init','messagesContainer','WLUeZ','autoAdvanceTimeout','DOMContentLoaded','value','hOGtx','typingIndicator','createElement','eNPBz','log','TflSS','JysXW','message\x20','JiZuF','UUsbQ','replace','<div\x20class=\x22typing-indicator\x22><span></span><span></span><span></span></div>','<br>','<em>$1</em>','Quiz\x20started\x20with\x20','newChatButton','666666VFFxbs','className','fqNVf','appendChild','<i\x20class=\x22fas\x20fa-play\x22></i>','albIL','NoSRV','then','TNkhh','question','updateUserAnswer','1768040PABXkO','autoAdvancePrompt','111054rcoAbk','EGaez','welcomeScreen','XwofD','none','yQARz','catch','.input-container','HvTpm','querySelector'];_0x12bf=function(){return _0x98b62b;};return _0x12bf();}import{SpeechProcessor}from'./speechProcessor.js';import{QuizManager}from'./quizManager.js';((async()=>{const _0x47aafe=_0x295a,_0x59639e={'NlxVO':_0x47aafe(0xc0),'hOGtx':function(_0x455aee,_0x400b77){return _0x455aee(_0x400b77);},'HvTpm':_0x47aafe(0xb9),'dWLbA':_0x47aafe(0xde),'TNkhh':_0x47aafe(0xc7),'zDFdI':_0x47aafe(0xce),'NJLFA':function(_0x101b32){return _0x101b32();},'xqiQc':_0x47aafe(0xd3),'TflSS':_0x47aafe(0xb3),'uxlUy':_0x47aafe(0xe3),'JysXW':_0x47aafe(0x10b),'TxULO':_0x47aafe(0xaa),'HAfyE':'flex','LITvU':function(_0x4f75f8,_0x514074){return _0x4f75f8===_0x514074;},'dOIXx':'user','eNPBz':_0x47aafe(0xca),'Esawf':_0x47aafe(0xff),'EGaez':_0x47aafe(0x112),'albIL':'<i\x20class=\x22fas\x20fa-pause\x22></i>','EzyUF':_0x47aafe(0xbc),'vDsSX':function(_0xd0ea48){return _0xd0ea48();},'WvYVm':function(_0x1f68d7,_0x3c0b16){return _0x1f68d7(_0x3c0b16);},'JiZuF':function(_0xe7cbdd,_0x128359){return _0xe7cbdd(_0x128359);},'UUsbQ':function(_0x4c54b6,_0x1a3590){return _0x4c54b6(_0x1a3590);},'XwofD':function(_0x3e07a1,_0x486d54,_0x674bcc){return _0x3e07a1(_0x486d54,_0x674bcc);},'yQARz':_0x47aafe(0x11d),'fqNVf':_0x47aafe(0xf9),'XPBRu':_0x47aafe(0xbb),'aIqdX':_0x47aafe(0xd6),'BJfBH':'errorMessage','hAMHo':_0x47aafe(0x10d),'iJhBG':_0x47aafe(0xad),'yyqpF':_0x47aafe(0xc4),'VupEL':'startQuizButton','iOGCK':_0x47aafe(0xd1),'WLUeZ':_0x47aafe(0x11a),'KdLzf':_0x47aafe(0xfc)};let _0x11db90,_0xa75af8=null;const _0x4ae00b=document[_0x47aafe(0xe5)](_0x59639e[_0x47aafe(0xab)]),_0x1874fd=document['getElementById'](_0x47aafe(0xb1)),_0x31798f=document['getElementById'](_0x59639e[_0x47aafe(0x110)]),_0x14dda5=document[_0x47aafe(0xe5)](_0x59639e['XPBRu']),_0x462443=document[_0x47aafe(0xe5)](_0x59639e['aIqdX']),_0x868a10=document[_0x47aafe(0xe5)]('micButton'),_0xc9d35d=document[_0x47aafe(0xe5)](_0x59639e[_0x47aafe(0xf4)]),_0x52957d=document[_0x47aafe(0xe5)]('loader'),_0x5323bd=document[_0x47aafe(0xe5)](_0x59639e[_0x47aafe(0xf6)]),_0x544361=document[_0x47aafe(0xe5)](_0x47aafe(0xda)),_0x1bd41c=document[_0x47aafe(0xaf)](_0x59639e[_0x47aafe(0xb8)]),_0x391e7b=document[_0x47aafe(0xe5)](_0x59639e['yyqpF']),_0x4c2c4d=document[_0x47aafe(0xe5)](_0x59639e[_0x47aafe(0xf2)]),_0x2df3cf=document[_0x47aafe(0xe5)](_0x59639e[_0x47aafe(0xe8)]),_0xea0379=document[_0x47aafe(0xe5)](_0x59639e[_0x47aafe(0xfa)]);document[_0x47aafe(0xed)](_0x59639e[_0x47aafe(0xef)],()=>{const _0x2a5853=_0x47aafe,_0x29afb9={'BGbZC':function(_0x359b14,_0x56ab94){const _0x11f737=_0x295a;return _0x59639e[_0x11f737(0xfe)](_0x359b14,_0x56ab94);},'NoSRV':_0x59639e[_0x2a5853(0xae)],'uXMym':function(_0x25348b,_0x19a3e8){return _0x25348b===_0x19a3e8;},'OgeNw':_0x2a5853(0xe4)};_0x2df3cf?.[_0x2a5853(0xed)](_0x59639e[_0x2a5853(0xbd)],_0x1a2c62);const _0x48bfe5=new BaseConversationManager();_0x11db90=new QuizManager({'showAutoAdvancePrompt':()=>_0xca6568()});let _0x198570;function _0x2078ba(){const _0x2dc6da=_0x2a5853;_0x198570=new SpeechProcessor({'onResult':(_0x3f71d5,_0x3bb529)=>{const _0x3b9bc4=_0x295a;_0x11db90[_0x3b9bc4(0x118)](_0x3f71d5,_0x3bb529);},'onError':_0x179f74=>displayError(_0x179f74),'onSilence':_0x535584=>_0x11db90[_0x2dc6da(0xba)](_0x535584),'onRecordingStart':()=>_0x868a10?.[_0x2dc6da(0xd8)][_0x2dc6da(0xc1)]('recording'),'onRecordingStop':()=>_0x868a10?.['classList'][_0x2dc6da(0xf0)](_0x2dc6da(0xe1)),'minimumWordCount':0x5,'silenceTimeout':0xbb8,'extendedSilenceTimeout':0xbb8});}aiAdapter[_0x2a5853(0xf8)]()[_0x2a5853(0x115)](()=>{const _0x4d49b6=_0x2a5853;console[_0x4d49b6(0x102)](_0x59639e[_0x4d49b6(0xb4)]);})[_0x2a5853(0xac)](_0x5654d6=>{const _0x1dcda8=_0x2a5853;console[_0x1dcda8(0xc8)]('Failed\x20to\x20initialize\x20AI:',_0x5654d6),displayError(_0x1dcda8(0xc2));}),_0x11db90[_0x2a5853(0xf8)](),_0x4c2c4d?.['addEventListener'](_0x59639e[_0x2a5853(0xbd)],()=>{const _0x4bb44f=_0x2a5853,_0x2d7949=_0x391e7b[_0x4bb44f(0xfd)][_0x4bb44f(0xec)]();if(!_0x2d7949){_0x29afb9[_0x4bb44f(0xd2)](displayError,_0x29afb9[_0x4bb44f(0x114)]);return;}const _0xc2b095=_0x11db90[_0x4bb44f(0xdb)](_0x2d7949);if(!_0xc2b095||_0x29afb9['uXMym'](_0xc2b095[_0x4bb44f(0xdc)],0x0)){_0x29afb9['BGbZC'](displayError,_0x29afb9[_0x4bb44f(0xe6)]);return;}_0x11db90[_0x4bb44f(0xe7)](_0xc2b095);}),_0x11db90['on'](_0x59639e[_0x2a5853(0x116)],_0x3fc66f=>console[_0x2a5853(0x102)](_0x2a5853(0x10c)+_0x3fc66f['length']+'\x20questions')),_0x11db90['on'](_0x59639e[_0x2a5853(0xc5)],_0x4b22af=>console['log']('Loaded\x20question\x20'+(_0x4b22af['index']+0x1)+':\x20'+_0x4b22af['question'][_0x2a5853(0x117)])),_0x11db90['on']('quizCompleted',_0x239e7d=>console[_0x2a5853(0x102)](_0x2a5853(0xd4),_0x239e7d)),_0x11db90['on'](_0x2a5853(0xc3),()=>console[_0x2a5853(0x102)](_0x2a5853(0xd7))),_0x59639e[_0x2a5853(0xdd)](_0x2078ba);});function _0xbd1924(){const _0x45f03d=_0x47aafe;if(!_0x31798f)return;const _0x408aca=document[_0x45f03d(0x100)](_0x59639e[_0x45f03d(0xf7)]);_0x408aca[_0x45f03d(0x10f)]=_0x59639e[_0x45f03d(0x103)],_0x408aca['id']='typingIndicator',_0x408aca['innerHTML']=_0x45f03d(0x109),_0x31798f[_0x45f03d(0x111)](_0x408aca),_0x31798f[_0x45f03d(0xe2)]=_0x31798f['scrollHeight'];}function _0x15a4c9(){const _0x8ca3f3=_0x47aafe;document[_0x8ca3f3(0xe5)]('typingIndicator')?.[_0x8ca3f3(0xf0)]();}function _0x26412c(_0x32d692){const _0x157d61=_0x47aafe;return _0x32d692['replace'](/\*\*(.*?)\*\*/g,_0x59639e['uxlUy'])[_0x157d61(0x108)](/\*(.*?)\*/g,_0x59639e[_0x157d61(0x104)])[_0x157d61(0x108)](/\n/g,_0x157d61(0x10a))['replace'](/```([\s\S]*?)```/g,'<pre><code>$1</code></pre>');}function _0x10ca03(){const _0x7a8110=_0x47aafe;if(_0x4ae00b)_0x4ae00b[_0x7a8110(0xcb)][_0x7a8110(0xb6)]=_0x59639e[_0x7a8110(0xbe)];if(_0x1874fd)_0x1874fd[_0x7a8110(0xcb)][_0x7a8110(0xb6)]=_0x7a8110(0xf1);if(_0x1bd41c)_0x1bd41c[_0x7a8110(0xcb)]['display']=_0x59639e[_0x7a8110(0xc6)];if(_0x14dda5)_0x14dda5[_0x7a8110(0xea)]();}function _0x1b08da(_0x25f81b){const _0x471dd7=_0x47aafe;if(!_0x31798f)return;const _0x165a4c=document[_0x471dd7(0xe5)](_0x59639e['Esawf']);_0x31798f[_0x471dd7(0xcf)]='',_0x25f81b[_0x471dd7(0xee)](_0x984ac8=>{const _0x133889=_0x471dd7,_0x1d6a32=document[_0x133889(0x100)](_0x59639e[_0x133889(0xf7)]);_0x1d6a32[_0x133889(0x10f)]=_0x133889(0x105)+(_0x59639e['LITvU'](_0x984ac8[_0x133889(0xb2)],_0x59639e[_0x133889(0xbf)])?_0x59639e[_0x133889(0xbf)]:_0x59639e[_0x133889(0x101)]),_0x1d6a32[_0x133889(0xcf)]=_0x59639e[_0x133889(0xfe)](_0x26412c,_0x984ac8[_0x133889(0xcc)]),_0x31798f[_0x133889(0x111)](_0x1d6a32);});if(_0x165a4c)_0x31798f[_0x471dd7(0x111)](_0x165a4c);_0x31798f[_0x471dd7(0xe2)]=_0x31798f[_0x471dd7(0xeb)];}function _0x1a2c62(){const _0x1c55fd=_0x47aafe;_0x11db90[_0x1c55fd(0xc9)]=!_0x11db90['isPaused'],_0x59639e[_0x1c55fd(0xdd)](_0x20bb06);if(!_0x11db90['isPaused'])_0x4096d5();else _0x59639e[_0x1c55fd(0xfe)](clearInterval,_0xa75af8),_0x59639e[_0x1c55fd(0xfe)](clearTimeout,_0x11db90[_0x1c55fd(0xfb)]);}function _0x20bb06(){const _0x39139a=_0x47aafe;_0x2df3cf['innerHTML']=_0x11db90[_0x39139a(0xc9)]?_0x59639e[_0x39139a(0x11c)]:_0x59639e[_0x39139a(0x113)];}function _0xca6568(){const _0x18baa3=_0x47aafe;_0xea0379['querySelector'](_0x59639e['EzyUF'])['textContent']='2',_0xea0379[_0x18baa3(0xcb)]['display']=_0x59639e[_0x18baa3(0xc6)],_0x11db90['isPaused']=![],_0x59639e[_0x18baa3(0xdf)](_0x20bb06),_0x4096d5();}function _0x4096d5(){const _0x1ce767=_0x47aafe;let _0x319ded=0x1;_0x59639e[_0x1ce767(0x106)](clearInterval,_0xa75af8),_0x59639e[_0x1ce767(0x107)](clearTimeout,_0x11db90['autoAdvanceTimeout']),_0xa75af8=_0x59639e['XwofD'](setInterval,()=>{const _0x3db0ee=_0x1ce767;!_0x11db90['isPaused']&&(_0x319ded--,_0x319ded>=0x0?_0xea0379['querySelector'](_0x59639e[_0x3db0ee(0xe0)])[_0x3db0ee(0xcd)]=_0x319ded:_0x59639e[_0x3db0ee(0xb0)](clearInterval,_0xa75af8));},0x3e8),_0x11db90[_0x1ce767(0xfb)]=_0x59639e[_0x1ce767(0xa9)](setTimeout,()=>{const _0x177a15=_0x1ce767;!_0x11db90['isPaused']&&(_0xea0379[_0x177a15(0xcb)][_0x177a15(0xb6)]=_0x177a15(0xaa),_0x11db90[_0x177a15(0xd5)]());},0x3e8);}})());