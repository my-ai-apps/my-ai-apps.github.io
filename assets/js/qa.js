
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
(function(_0x2ce2f4,_0x4c5bc6){const _0x17a27f=_0x3064,_0x564587=_0x2ce2f4();while(!![]){try{const _0x45cbac=-parseInt(_0x17a27f(0x19c))/0x1+-parseInt(_0x17a27f(0x1cd))/0x2+-parseInt(_0x17a27f(0x19a))/0x3+-parseInt(_0x17a27f(0x18a))/0x4+parseInt(_0x17a27f(0x198))/0x5*(-parseInt(_0x17a27f(0x1df))/0x6)+-parseInt(_0x17a27f(0x1c4))/0x7*(parseInt(_0x17a27f(0x1b7))/0x8)+parseInt(_0x17a27f(0x195))/0x9;if(_0x45cbac===_0x4c5bc6)break;else _0x564587['push'](_0x564587['shift']());}catch(_0x27c32c){_0x564587['push'](_0x564587['shift']());}}}(_0x16bb,0x7f7b9));import{marked}from'https://cdn.jsdelivr.net/npm/marked@13.0.3/lib/marked.esm.js';import _0x4d6fe8 from'https://cdn.jsdelivr.net/npm/dompurify@3.1.6/dist/purify.es.mjs';import{BaseConversationManager}from'./BaseConversationManager.js';import{displayError,Logger}from'./common.js';function _0x3064(_0x4300e4,_0xd222ba){const _0x16bba5=_0x16bb();return _0x3064=function(_0x3064a2,_0x14cd43){_0x3064a2=_0x3064a2-0x170;let _0xd8740d=_0x16bba5[_0x3064a2];return _0xd8740d;},_0x3064(_0x4300e4,_0xd222ba);}function _0x16bb(){const _0x135a37=['Returned\x20to\x20chat\x20interface','updateUserAnswer','handleSilence','gRgsT','SgzsQ','<pre><code>$1</code></pre>','4|2|1|3|0','SkXio','BJqmX','epqEo','startQuiz','bNLyc','startQuizButton','GARlT','JFzdJ','messagesContainer','addEventListener','Quiz\x20completed:','.input-container','ZXZfu','sKRBH','role','question','error','<br>','isPaused','Quiz\x20started\x20with\x20','errorMessage','klBtC','VxSGS','catch','SOKBg','appendChild','.countdown','parseQuizQuestions','2154980LCCZsZ','add','getElementById','message\x20','DYXPk','yOmeW','log','newChatButton','querySelector','Failed\x20to\x20initialize\x20AI.\x20Please\x20refresh\x20the\x20page.','zlbiy','46520775LxkoYH','eaqTl','PiwfJ','474235lUbJap','<div\x20class=\x22typing-indicator\x22><span></span><span></span><span></span></div>','2787747bVtLZM','messageInput','982092XPYsHx','none','textContent','fsXmR','remove','GujjD','div','micButton','typingIndicator','then','GNeRt','BCVYj','NGkQW','flex','quizCompleted','MgnTY','classList','value','DMtJF','assistant','createElement','Failed\x20to\x20initialize\x20AI:','<i\x20class=\x22fas\x20fa-play\x22></i>','click','DOMContentLoaded','forEach','OacFT','1784YFDpyl','AI\x20Language\x20Session\x20initialized\x20successfully','returnedToChat','rVGYl','user','quizInput','\x20questions','ZlboX','length','YXTzs','replace','sendButton','loader','29141mpWAAh','content','SsCYK','UFLNY','<i\x20class=\x22fas\x20fa-pause\x22></i>','scrollHeight','dAbvt','init','VViYB','1777966JgABAK','autoAdvanceTimeout','settingsButton','MdhVt','welcomeScreen','questionLoaded','style','OEHya','WPbbx','display','Invalid\x20quiz\x20format.','JDeEf','autoAdvancePrompt','innerHTML','playPauseButton','nextQuestion','recording','WOYxC','24DMSazC'];_0x16bb=function(){return _0x135a37;};return _0x16bb();}import{aiLanguageSession,initializeLanguageSession}from'./aiCommon.js';import{SpeechProcessor}from'./speechProcessor.js';import{QuizManager}from'./quizManager.js';((async()=>{const _0x5282a3=_0x3064,_0x319acd={'WPbbx':_0x5282a3(0x1b1),'zlbiy':function(_0x1adf22,_0x129409){return _0x1adf22(_0x129409);},'IVNIC':_0x5282a3(0x193),'klBtC':_0x5282a3(0x1b8),'DMtJF':'Please\x20enter\x20quiz\x20questions\x20and\x20answers.','VViYB':_0x5282a3(0x1b3),'yOmeW':function(_0x3899d6){return _0x3899d6();},'lYGvm':'quizStarted','NzGWq':_0x5282a3(0x1d2),'BCVYj':_0x5282a3(0x1aa),'MdhVt':_0x5282a3(0x1b9),'MgnTY':_0x5282a3(0x1a2),'BJqmX':'message\x20assistant\x20typing','SsCYK':_0x5282a3(0x199),'gRgsT':'<strong>$1</strong>','hKOIg':_0x5282a3(0x17f),'GARlT':_0x5282a3(0x1e5),'rVGYl':_0x5282a3(0x1a9),'epqEo':function(_0x3f390c,_0xf253f3){return _0x3f390c===_0xf253f3;},'VxSGS':function(_0x373286,_0x184f7c){return _0x373286(_0x184f7c);},'OacFT':_0x5282a3(0x1a4),'WOYxC':function(_0x51b235,_0x5d2fd1){return _0x51b235(_0x5d2fd1);},'lFWUp':_0x5282a3(0x1b2),'kTrbS':_0x5282a3(0x1c8),'cliMB':_0x5282a3(0x1e6),'bNLyc':function(_0x1a985d){return _0x1a985d();},'NGkQW':_0x5282a3(0x188),'SkXio':function(_0x5a7e84,_0x3a385e){return _0x5a7e84(_0x3a385e);},'GNeRt':_0x5282a3(0x19d),'PiwfJ':function(_0x251bda,_0x1333f2,_0x464cd8){return _0x251bda(_0x1333f2,_0x464cd8);},'GujjD':function(_0x130e32,_0x108e6a,_0xd93f38){return _0x130e32(_0x108e6a,_0xd93f38);},'DYXPk':_0x5282a3(0x1d1),'YXTzs':'chatContainer','ZXZfu':_0x5282a3(0x176),'SgzsQ':_0x5282a3(0x19b),'UFLNY':_0x5282a3(0x1a3),'fsXmR':_0x5282a3(0x182),'kUOxY':_0x5282a3(0x1c3),'dAbvt':_0x5282a3(0x191),'niPOg':_0x5282a3(0x1cf),'JDeEf':_0x5282a3(0x179),'AoSRw':_0x5282a3(0x1db),'XwHrK':_0x5282a3(0x1d9),'OEHya':_0x5282a3(0x1b4)};let _0x1a8a39,_0x75a20=null;const _0x5e7baf=document[_0x5282a3(0x18c)](_0x319acd[_0x5282a3(0x18e)]),_0x128c1f=document[_0x5282a3(0x18c)](_0x319acd[_0x5282a3(0x1c0)]),_0x4f4171=document[_0x5282a3(0x18c)](_0x319acd[_0x5282a3(0x17a)]),_0x5623b3=document[_0x5282a3(0x18c)](_0x319acd[_0x5282a3(0x1e4)]),_0x21006c=document[_0x5282a3(0x18c)](_0x5282a3(0x1c2)),_0x4bf723=document['getElementById'](_0x319acd[_0x5282a3(0x1c7)]),_0x1b4efc=document['getElementById'](_0x319acd[_0x5282a3(0x19f)]),_0x3cfa75=document[_0x5282a3(0x18c)](_0x319acd['kUOxY']),_0x33de9f=document[_0x5282a3(0x18c)](_0x319acd[_0x5282a3(0x1ca)]),_0x41c8cb=document[_0x5282a3(0x18c)](_0x319acd['niPOg']),_0x41dadc=document['querySelector'](_0x319acd[_0x5282a3(0x1d8)]),_0x5122cd=document[_0x5282a3(0x18c)](_0x5282a3(0x1bc)),_0x534026=document[_0x5282a3(0x18c)](_0x5282a3(0x173)),_0x50e2a7=document[_0x5282a3(0x18c)](_0x319acd['AoSRw']),_0x2253d4=document[_0x5282a3(0x18c)](_0x319acd['XwHrK']);document[_0x5282a3(0x177)](_0x319acd[_0x5282a3(0x1d4)],()=>{const _0x5be768=_0x5282a3,_0x4b1e11={'SOKBg':_0x319acd[_0x5be768(0x183)],'JFzdJ':_0x319acd[_0x5be768(0x1ae)],'sNkWN':function(_0x5c746a,_0xcad1bc){return _0x5c746a===_0xcad1bc;},'eaqTl':function(_0x26a491,_0x354949){const _0x1c9754=_0x5be768;return _0x319acd[_0x1c9754(0x194)](_0x26a491,_0x354949);}};_0x50e2a7?.[_0x5be768(0x177)](_0x319acd['VViYB'],_0x1f6600);const _0x33e896=new BaseConversationManager();_0x1a8a39=new QuizManager({'showAutoAdvancePrompt':()=>_0x43cfab()});let _0x270c76;function _0x1c2f4d(){const _0x3f6ff3=_0x5be768;_0x270c76=new SpeechProcessor({'onResult':(_0x2839de,_0x4f0cd9)=>{const _0x4ff290=_0x3064;_0x1a8a39[_0x4ff290(0x1e1)](_0x2839de,_0x4f0cd9);},'onError':_0x51a31c=>displayError(_0x51a31c),'onSilence':_0x1bb81a=>_0x1a8a39[_0x3f6ff3(0x1e2)](_0x1bb81a),'onRecordingStart':()=>_0x4bf723?.['classList'][_0x3f6ff3(0x18b)](_0x3f6ff3(0x1dd)),'onRecordingStop':()=>_0x4bf723?.[_0x3f6ff3(0x1ac)]['remove'](_0x3f6ff3(0x1dd)),'minimumWordCount':0x5,'silenceTimeout':0xbb8,'extendedSilenceTimeout':0xbb8});}_0x319acd[_0x5be768(0x18f)](initializeLanguageSession)[_0x5be768(0x1a5)](()=>{const _0x48fe33=_0x5be768;console['log'](_0x4b1e11[_0x48fe33(0x186)]);})[_0x5be768(0x185)](_0x3653ed=>{const _0x93f1a=_0x5be768;console[_0x93f1a(0x17e)](_0x319acd[_0x93f1a(0x1d5)],_0x3653ed),_0x319acd['zlbiy'](displayError,_0x319acd['IVNIC']);}),_0x1a8a39[_0x5be768(0x1cb)](),_0x534026?.['addEventListener'](_0x319acd[_0x5be768(0x1cc)],()=>{const _0x14e7b6=_0x5be768,_0x38a209=_0x5122cd[_0x14e7b6(0x1ad)]['trim']();if(!_0x38a209){displayError(_0x4b1e11[_0x14e7b6(0x175)]);return;}const _0x493c2b=_0x1a8a39[_0x14e7b6(0x189)](_0x38a209);if(!_0x493c2b||_0x4b1e11['sNkWN'](_0x493c2b[_0x14e7b6(0x1bf)],0x0)){_0x4b1e11[_0x14e7b6(0x196)](displayError,_0x14e7b6(0x1d7));return;}_0x1a8a39[_0x14e7b6(0x171)](_0x493c2b);}),_0x1a8a39['on'](_0x319acd['lYGvm'],_0x93a140=>console['log'](_0x5be768(0x181)+_0x93a140[_0x5be768(0x1bf)]+_0x5be768(0x1bd))),_0x1a8a39['on'](_0x319acd['NzGWq'],_0x1382db=>console[_0x5be768(0x190)]('Loaded\x20question\x20'+(_0x1382db['index']+0x1)+':\x20'+_0x1382db[_0x5be768(0x17d)][_0x5be768(0x17d)])),_0x1a8a39['on'](_0x319acd[_0x5be768(0x1a7)],_0x4d7833=>console[_0x5be768(0x190)](_0x5be768(0x178),_0x4d7833)),_0x1a8a39['on'](_0x319acd[_0x5be768(0x1d0)],()=>console[_0x5be768(0x190)](_0x5be768(0x1e0))),_0x319acd[_0x5be768(0x18f)](_0x1c2f4d);});function _0x5a5ae8(){const _0x64589a=_0x5282a3;if(!_0x4f4171)return;const _0x4ae5ed=document[_0x64589a(0x1b0)](_0x319acd['MgnTY']);_0x4ae5ed['className']=_0x319acd[_0x64589a(0x1e8)],_0x4ae5ed['id']='typingIndicator',_0x4ae5ed['innerHTML']=_0x319acd[_0x64589a(0x1c6)],_0x4f4171['appendChild'](_0x4ae5ed),_0x4f4171['scrollTop']=_0x4f4171[_0x64589a(0x1c9)];}function _0x2b2361(){const _0x57d556=_0x5282a3;document[_0x57d556(0x18c)](_0x57d556(0x1a4))?.[_0x57d556(0x1a0)]();}function _0x395b81(_0x18ec42){const _0x1145b5=_0x5282a3;return _0x18ec42[_0x1145b5(0x1c1)](/\*\*(.*?)\*\*/g,_0x319acd[_0x1145b5(0x1e3)])[_0x1145b5(0x1c1)](/\*(.*?)\*/g,'<em>$1</em>')['replace'](/\n/g,_0x319acd['hKOIg'])[_0x1145b5(0x1c1)](/```([\s\S]*?)```/g,_0x319acd[_0x1145b5(0x174)]);}function _0x1c6368(){const _0x335862=_0x5282a3;if(_0x5e7baf)_0x5e7baf[_0x335862(0x1d3)][_0x335862(0x1d6)]=_0x335862(0x19d);if(_0x128c1f)_0x128c1f[_0x335862(0x1d3)][_0x335862(0x1d6)]=_0x335862(0x1a9);if(_0x41dadc)_0x41dadc[_0x335862(0x1d3)][_0x335862(0x1d6)]=_0x319acd[_0x335862(0x1ba)];if(_0x5623b3)_0x5623b3['focus']();}function _0x2606d6(_0x3a44f8){const _0x12e77c=_0x5282a3,_0x3b4664={'kEuDY':_0x319acd[_0x12e77c(0x1ab)],'sKRBH':function(_0x10071e,_0x57a10f){const _0x566c99=_0x12e77c;return _0x319acd[_0x566c99(0x170)](_0x10071e,_0x57a10f);},'ZlboX':function(_0x310b0c,_0x2d05e8){return _0x319acd['VxSGS'](_0x310b0c,_0x2d05e8);}};if(!_0x4f4171)return;const _0x1e9fd1=document[_0x12e77c(0x18c)](_0x319acd[_0x12e77c(0x1b6)]);_0x4f4171[_0x12e77c(0x1da)]='',_0x3a44f8[_0x12e77c(0x1b5)](_0x31eb32=>{const _0x386ccc=_0x12e77c,_0x361057=document[_0x386ccc(0x1b0)](_0x3b4664['kEuDY']);_0x361057['className']=_0x386ccc(0x18d)+(_0x3b4664[_0x386ccc(0x17b)](_0x31eb32[_0x386ccc(0x17c)],_0x386ccc(0x1bb))?'user':_0x386ccc(0x1af)),_0x361057[_0x386ccc(0x1da)]=_0x3b4664[_0x386ccc(0x1be)](_0x395b81,_0x31eb32[_0x386ccc(0x1c5)]),_0x4f4171[_0x386ccc(0x187)](_0x361057);});if(_0x1e9fd1)_0x4f4171[_0x12e77c(0x187)](_0x1e9fd1);_0x4f4171['scrollTop']=_0x4f4171[_0x12e77c(0x1c9)];}function _0x1f6600(){const _0x4d8a2a=_0x5282a3;_0x1a8a39['isPaused']=!_0x1a8a39[_0x4d8a2a(0x180)],_0x2944a4();if(!_0x1a8a39[_0x4d8a2a(0x180)])_0x319acd[_0x4d8a2a(0x18f)](_0x2be0a0);else _0x319acd[_0x4d8a2a(0x1de)](clearInterval,_0x75a20),_0x319acd[_0x4d8a2a(0x184)](clearTimeout,_0x1a8a39[_0x4d8a2a(0x1ce)]);}function _0x2944a4(){const _0x413a6e=_0x5282a3;_0x50e2a7[_0x413a6e(0x1da)]=_0x1a8a39[_0x413a6e(0x180)]?_0x319acd['lFWUp']:_0x319acd['kTrbS'];}function _0x43cfab(){const _0x318877=_0x5282a3,_0x460d4d=_0x319acd['cliMB']['split']('|');let _0x3fb58b=0x0;while(!![]){switch(_0x460d4d[_0x3fb58b++]){case'0':_0x319acd[_0x318877(0x172)](_0x2be0a0);continue;case'1':_0x1a8a39['isPaused']=![];continue;case'2':_0x2253d4['style']['display']=_0x319acd[_0x318877(0x1ba)];continue;case'3':_0x319acd[_0x318877(0x172)](_0x2944a4);continue;case'4':_0x2253d4[_0x318877(0x192)](_0x319acd[_0x318877(0x1a8)])[_0x318877(0x19e)]='2';continue;}break;}}function _0x2be0a0(){const _0x165821=_0x5282a3;let _0x1c0162=0x1;_0x319acd[_0x165821(0x1e7)](clearInterval,_0x75a20),_0x319acd[_0x165821(0x1e7)](clearTimeout,_0x1a8a39[_0x165821(0x1ce)]),_0x75a20=_0x319acd[_0x165821(0x197)](setInterval,()=>{const _0x4a2d5b=_0x165821;!_0x1a8a39['isPaused']&&(_0x1c0162--,_0x1c0162>=0x0?_0x2253d4[_0x4a2d5b(0x192)](_0x319acd[_0x4a2d5b(0x1a8)])[_0x4a2d5b(0x19e)]=_0x1c0162:_0x319acd[_0x4a2d5b(0x1e7)](clearInterval,_0x75a20));},0x3e8),_0x1a8a39['autoAdvanceTimeout']=_0x319acd[_0x165821(0x1a1)](setTimeout,()=>{const _0x15a2bb=_0x165821;!_0x1a8a39[_0x15a2bb(0x180)]&&(_0x2253d4[_0x15a2bb(0x1d3)][_0x15a2bb(0x1d6)]=_0x319acd[_0x15a2bb(0x1a6)],_0x1a8a39[_0x15a2bb(0x1dc)]());},0x3e8);}})());