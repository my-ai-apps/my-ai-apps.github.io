
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
(function(_0x565b78,_0x2d3e2a){const _0x21d7a0=_0x3142,_0x1e4594=_0x565b78();while(!![]){try{const _0x45ff8f=parseInt(_0x21d7a0(0x190))/0x1+parseInt(_0x21d7a0(0x17b))/0x2+parseInt(_0x21d7a0(0x1a2))/0x3+-parseInt(_0x21d7a0(0x18c))/0x4+-parseInt(_0x21d7a0(0x154))/0x5*(-parseInt(_0x21d7a0(0x1b4))/0x6)+-parseInt(_0x21d7a0(0x18e))/0x7*(-parseInt(_0x21d7a0(0x192))/0x8)+parseInt(_0x21d7a0(0x157))/0x9*(-parseInt(_0x21d7a0(0x168))/0xa);if(_0x45ff8f===_0x2d3e2a)break;else _0x1e4594['push'](_0x1e4594['shift']());}catch(_0x5d1a6e){_0x1e4594['push'](_0x1e4594['shift']());}}}(_0x50ed,0x557d4));function _0x3142(_0x442f28,_0x3fa68e){const _0x50ed0c=_0x50ed();return _0x3142=function(_0x314281,_0x1500ff){_0x314281=_0x314281-0x144;let _0x32bfda=_0x50ed0c[_0x314281];return _0x32bfda;},_0x3142(_0x442f28,_0x3fa68e);}import{marked}from'https://cdn.jsdelivr.net/npm/marked@13.0.3/lib/marked.esm.js';import _0x50ea5e from'https://cdn.jsdelivr.net/npm/dompurify@3.1.6/dist/purify.es.mjs';import{BaseConversationManager}from'./BaseConversationManager.js';import{displayError,Logger}from'./common.js';import{aiAdapter}from'./aiAdapter.js';import{SpeechProcessor}from'./speechProcessor.js';import{QuizManager}from'./quizManager.js';function _0x50ed(){const _0xdb28cf=['.input-container','style','remove','scrollTop','WNsUZ','nhvRb','catch','AI\x20BrowserLanguage\x20Session\x20initialized\x20successfully','log','messageInput','42vjEacH','innerHTML','init','querySelector','autoAdvanceTimeout','click','VkPWs','returnedToChat','autoAdvancePrompt','display','pgukx','Loaded\x20question\x20','<i\x20class=\x22fas\x20fa-play\x22></i>','<strong>$1</strong>','add','newChatButton','xvnUq','focus','xWyan','typingIndicator','dKBTL','questionLoaded','isPaused','ibnuD','57745QSFeMz','sendButton','messagesContainer','1779795PSJxdD','addEventListener','QaoZi','errorMessage','iApjq','Failed\x20to\x20initialize\x20AI.\x20Please\x20refresh\x20the\x20page.','nextQuestion','eKYmT','<div\x20class=\x22typing-indicator\x22><span></span><span></span><span></span></div>','xEkDZ','startQuizButton','classList','createElement','updateUserAnswer','recording','flex','FuOYm','70FgIJmY','<pre><code>$1</code></pre>','message\x20','then','div','yxHVd','micButton','hKPJa','loader','Quiz\x20completed:','Returned\x20to\x20chat\x20interface','content','cRkKa','split','scrollHeight','user','className','hwPEg','cbEPn','1239008ubuSlw','appendChild','aphWe','YRKlD','nNAAw','wFPUw','LCIeW','playPauseButton','value','lNHwO','getElementById','length','forEach','dfWdQ','HeNNm','index','replace','1672256mBodOQ','eNVxh','42595ajRgHX','<br>','673543CLBmfj','Please\x20enter\x20quiz\x20questions\x20and\x20answers.','600FwJAGq','quizCompleted','textContent','chatContainer','none','handleSilence','mpqjc','Failed\x20to\x20initialize\x20AI:','Quiz\x20started\x20with\x20','wzPky','Invalid\x20quiz\x20format.','message\x20assistant\x20typing','WkTxv','rJexk','<em>$1</em>','EKHvZ','966744obSBup','quizStarted','parseQuizQuestions','role','NKlCJ','KhmAs','question','dvaoz'];_0x50ed=function(){return _0xdb28cf;};return _0x50ed();}((async()=>{const _0x5521b8=_0x3142,_0x5cbe7b={'cRkKa':function(_0x4da548,_0x2daa0e){return _0x4da548(_0x2daa0e);},'WmHar':_0x5521b8(0x191),'wzPky':function(_0x2e0027,_0x51757d){return _0x2e0027===_0x51757d;},'hKPJa':function(_0x146f41,_0x6997d5){return _0x146f41(_0x6997d5);},'WiDEc':_0x5521b8(0x1b1),'mkbnW':_0x5521b8(0x199),'lNHwO':_0x5521b8(0x15c),'KSBzp':_0x5521b8(0x1b9),'AQPbG':_0x5521b8(0x151),'xvnUq':_0x5521b8(0x193),'FuOYm':_0x5521b8(0x1bb),'zWshA':function(_0x5c516a){return _0x5c516a();},'KhmAs':_0x5521b8(0x19d),'eKYmT':_0x5521b8(0x15f),'QqQjX':_0x5521b8(0x14f),'admaN':_0x5521b8(0x149),'xEkDZ':_0x5521b8(0x1a0),'aphWe':_0x5521b8(0x169),'WkTxv':_0x5521b8(0x166),'bAERq':_0x5521b8(0x177),'nhvRb':function(_0x1ef334,_0x29a007){return _0x1ef334(_0x29a007);},'eNVxh':function(_0x2a619d,_0x4be4e7){return _0x2a619d(_0x4be4e7);},'iApjq':_0x5521b8(0x148),'kqNHm':'<i\x20class=\x22fas\x20fa-pause\x22></i>','NKlCJ':function(_0x247d20){return _0x247d20();},'hwPEg':_0x5521b8(0x196),'bsiOs':function(_0x169db7,_0x365204){return _0x169db7>=_0x365204;},'pgukx':function(_0x328997,_0x4d9117){return _0x328997(_0x4d9117);},'EKHvZ':function(_0x17c81e,_0x40a19e,_0x515649){return _0x17c81e(_0x40a19e,_0x515649);},'rJexk':function(_0x2a95ae,_0x35a6b9,_0x1e5ddb){return _0x2a95ae(_0x35a6b9,_0x1e5ddb);},'YRKlD':'welcomeScreen','QfMkM':_0x5521b8(0x195),'WNsUZ':_0x5521b8(0x156),'QaoZi':_0x5521b8(0x1b3),'dfWdQ':_0x5521b8(0x16e),'nNAAw':_0x5521b8(0x170),'LCIeW':'settingsButton','HeNNm':_0x5521b8(0x1aa),'dKBTL':'quizInput','rHZGj':_0x5521b8(0x161),'bvEas':_0x5521b8(0x182),'dvaoz':_0x5521b8(0x144),'wFPUw':'DOMContentLoaded'};let _0x48fd05,_0xb8856b=null;const _0x529a0c=document[_0x5521b8(0x185)](_0x5cbe7b[_0x5521b8(0x17e)]),_0x130af0=document['getElementById'](_0x5cbe7b['QfMkM']),_0xa859ac=document[_0x5521b8(0x185)](_0x5cbe7b[_0x5521b8(0x1ae)]),_0x3e6ffb=document[_0x5521b8(0x185)](_0x5cbe7b[_0x5521b8(0x159)]),_0x5de96b=document[_0x5521b8(0x185)](_0x5521b8(0x155)),_0x5ebf3b=document[_0x5521b8(0x185)](_0x5cbe7b[_0x5521b8(0x188)]),_0x3d89c7=document[_0x5521b8(0x185)](_0x5521b8(0x15a)),_0x89dfa0=document[_0x5521b8(0x185)](_0x5cbe7b[_0x5521b8(0x17f)]),_0x32f4de=document['getElementById'](_0x5521b8(0x14b)),_0x5a03a7=document[_0x5521b8(0x185)](_0x5cbe7b[_0x5521b8(0x181)]),_0x14b4f3=document[_0x5521b8(0x1b7)](_0x5cbe7b[_0x5521b8(0x189)]),_0x248a61=document[_0x5521b8(0x185)](_0x5cbe7b[_0x5521b8(0x150)]),_0x12c4ae=document['getElementById'](_0x5cbe7b['rHZGj']),_0x26b8aa=document[_0x5521b8(0x185)](_0x5cbe7b['bvEas']),_0x5a52d6=document['getElementById'](_0x5cbe7b[_0x5521b8(0x1a9)]);document['addEventListener'](_0x5cbe7b[_0x5521b8(0x180)],()=>{const _0x51a182=_0x5521b8,_0xf6e191={'HvWmd':_0x5cbe7b['WiDEc'],'cbEPn':_0x5cbe7b['mkbnW'],'xWyan':function(_0x5eca2a,_0x3ba75d){return _0x5eca2a(_0x3ba75d);},'VkPWs':_0x5cbe7b[_0x51a182(0x184)]};_0x26b8aa?.['addEventListener'](_0x5cbe7b['KSBzp'],_0x5f3390);const _0x3689b0=new BaseConversationManager();_0x48fd05=new QuizManager({'showAutoAdvancePrompt':()=>_0x4381ed()});let _0x562a4c;function _0x40564b(){const _0x33983e=_0x51a182;_0x562a4c=new SpeechProcessor({'onResult':(_0x62430e,_0x12a0e8)=>{const _0x41cc15=_0x3142;_0x48fd05[_0x41cc15(0x164)](_0x62430e,_0x12a0e8);},'onError':_0xce7819=>displayError(_0xce7819),'onSilence':_0x456f34=>_0x48fd05[_0x33983e(0x197)](_0x456f34),'onRecordingStart':()=>_0x5ebf3b?.[_0x33983e(0x162)][_0x33983e(0x14a)](_0x33983e(0x165)),'onRecordingStop':()=>_0x5ebf3b?.[_0x33983e(0x162)]['remove']('recording'),'minimumWordCount':0x5,'silenceTimeout':0xbb8,'extendedSilenceTimeout':0xbb8});}aiAdapter[_0x51a182(0x1b6)]()[_0x51a182(0x16b)](()=>{const _0x10e3dc=_0x51a182;console[_0x10e3dc(0x1b2)](_0xf6e191['HvWmd']);})[_0x51a182(0x1b0)](_0x2f6eac=>{const _0x23302b=_0x51a182;console['error'](_0xf6e191[_0x23302b(0x17a)],_0x2f6eac),_0xf6e191[_0x23302b(0x14e)](displayError,_0xf6e191[_0x23302b(0x1ba)]);}),_0x48fd05[_0x51a182(0x1b6)](),_0x12c4ae?.[_0x51a182(0x158)](_0x5cbe7b['KSBzp'],()=>{const _0x1f9552=_0x51a182,_0x189539=_0x248a61[_0x1f9552(0x183)]['trim']();if(!_0x189539){_0x5cbe7b[_0x1f9552(0x174)](displayError,_0x5cbe7b['WmHar']);return;}const _0xe102f3=_0x48fd05[_0x1f9552(0x1a4)](_0x189539);if(!_0xe102f3||_0x5cbe7b[_0x1f9552(0x19b)](_0xe102f3[_0x1f9552(0x186)],0x0)){_0x5cbe7b[_0x1f9552(0x16f)](displayError,_0x1f9552(0x19c));return;}_0x48fd05['startQuiz'](_0xe102f3);}),_0x48fd05['on'](_0x51a182(0x1a3),_0x27771e=>console['log'](_0x51a182(0x19a)+_0x27771e[_0x51a182(0x186)]+'\x20questions')),_0x48fd05['on'](_0x5cbe7b['AQPbG'],_0x25b09f=>console[_0x51a182(0x1b2)](_0x51a182(0x147)+(_0x25b09f[_0x51a182(0x18a)]+0x1)+':\x20'+_0x25b09f[_0x51a182(0x1a8)]['question'])),_0x48fd05['on'](_0x5cbe7b[_0x51a182(0x14c)],_0x6876b8=>console[_0x51a182(0x1b2)](_0x51a182(0x171),_0x6876b8)),_0x48fd05['on'](_0x5cbe7b[_0x51a182(0x167)],()=>console[_0x51a182(0x1b2)](_0x51a182(0x172))),_0x5cbe7b['zWshA'](_0x40564b);});function _0x2caed6(){const _0x292025=_0x5521b8;if(!_0xa859ac)return;const _0x54c86c=document['createElement'](_0x292025(0x16c));_0x54c86c[_0x292025(0x178)]=_0x5cbe7b[_0x292025(0x1a7)],_0x54c86c['id']=_0x292025(0x14f),_0x54c86c['innerHTML']=_0x5cbe7b[_0x292025(0x15e)],_0xa859ac[_0x292025(0x17c)](_0x54c86c),_0xa859ac[_0x292025(0x1ad)]=_0xa859ac[_0x292025(0x176)];}function _0x12d656(){const _0x379292=_0x5521b8;document[_0x379292(0x185)](_0x5cbe7b['QqQjX'])?.[_0x379292(0x1ac)]();}function _0x1da15c(_0x10a17b){const _0x3dbc29=_0x5521b8;return _0x10a17b[_0x3dbc29(0x18b)](/\*\*(.*?)\*\*/g,_0x5cbe7b['admaN'])[_0x3dbc29(0x18b)](/\*(.*?)\*/g,_0x5cbe7b[_0x3dbc29(0x160)])[_0x3dbc29(0x18b)](/\n/g,_0x3dbc29(0x18f))[_0x3dbc29(0x18b)](/```([\s\S]*?)```/g,_0x5cbe7b[_0x3dbc29(0x17d)]);}function _0x579123(){const _0x33fb04=_0x5521b8;if(_0x529a0c)_0x529a0c['style']['display']=_0x33fb04(0x196);if(_0x130af0)_0x130af0[_0x33fb04(0x1ab)]['display']=_0x5cbe7b['WkTxv'];if(_0x14b4f3)_0x14b4f3[_0x33fb04(0x1ab)]['display']=_0x5cbe7b[_0x33fb04(0x19e)];if(_0x3e6ffb)_0x3e6ffb[_0x33fb04(0x14d)]();}function _0x352228(_0x2618c0){const _0x2813f1=_0x5521b8;if(!_0xa859ac)return;const _0x4c9167=document[_0x2813f1(0x185)](_0x2813f1(0x14f));_0xa859ac[_0x2813f1(0x1b5)]='',_0x2618c0[_0x2813f1(0x187)](_0x539553=>{const _0x469ad9=_0x2813f1,_0x16f2d8=document[_0x469ad9(0x163)](_0x469ad9(0x16c));_0x16f2d8[_0x469ad9(0x178)]=_0x469ad9(0x16a)+(_0x539553[_0x469ad9(0x1a5)]===_0x5cbe7b['bAERq']?'user':'assistant'),_0x16f2d8['innerHTML']=_0x5cbe7b[_0x469ad9(0x174)](_0x1da15c,_0x539553[_0x469ad9(0x173)]),_0xa859ac[_0x469ad9(0x17c)](_0x16f2d8);});if(_0x4c9167)_0xa859ac[_0x2813f1(0x17c)](_0x4c9167);_0xa859ac['scrollTop']=_0xa859ac[_0x2813f1(0x176)];}function _0x5f3390(){const _0x1ff5d6=_0x5521b8;_0x48fd05[_0x1ff5d6(0x152)]=!_0x48fd05[_0x1ff5d6(0x152)],_0x5cbe7b['zWshA'](_0x476f4b);if(!_0x48fd05['isPaused'])_0x5cbe7b['zWshA'](_0x6a4d8d);else _0x5cbe7b[_0x1ff5d6(0x1af)](clearInterval,_0xb8856b),_0x5cbe7b[_0x1ff5d6(0x18d)](clearTimeout,_0x48fd05['autoAdvanceTimeout']);}function _0x476f4b(){const _0x52082d=_0x5521b8;_0x26b8aa[_0x52082d(0x1b5)]=_0x48fd05[_0x52082d(0x152)]?_0x5cbe7b[_0x52082d(0x15b)]:_0x5cbe7b['kqNHm'];}function _0x4381ed(){const _0x5632d6=_0x5521b8,_0x1fdb0a='3|2|4|1|0'[_0x5632d6(0x175)]('|');let _0x1ea8e5=0x0;while(!![]){switch(_0x1fdb0a[_0x1ea8e5++]){case'0':_0x6a4d8d();continue;case'1':_0x5cbe7b[_0x5632d6(0x1a6)](_0x476f4b);continue;case'2':_0x5a52d6[_0x5632d6(0x1ab)][_0x5632d6(0x145)]=_0x5cbe7b[_0x5632d6(0x19e)];continue;case'3':_0x5a52d6[_0x5632d6(0x1b7)]('.countdown')[_0x5632d6(0x194)]='2';continue;case'4':_0x48fd05['isPaused']=![];continue;}break;}}function _0x6a4d8d(){const _0x308a80=_0x5521b8,_0x1d0f5d={'ibnuD':function(_0xccbd2f,_0x35738c){return _0x5cbe7b['bsiOs'](_0xccbd2f,_0x35738c);},'yxHVd':'.countdown','mpqjc':function(_0x37824e,_0x217b67){const _0x12b25=_0x3142;return _0x5cbe7b[_0x12b25(0x1af)](_0x37824e,_0x217b67);}};let _0x2f7985=0x1;_0x5cbe7b[_0x308a80(0x18d)](clearInterval,_0xb8856b),_0x5cbe7b[_0x308a80(0x146)](clearTimeout,_0x48fd05[_0x308a80(0x1b8)]),_0xb8856b=_0x5cbe7b[_0x308a80(0x1a1)](setInterval,()=>{const _0x455459=_0x308a80;!_0x48fd05[_0x455459(0x152)]&&(_0x2f7985--,_0x1d0f5d[_0x455459(0x153)](_0x2f7985,0x0)?_0x5a52d6[_0x455459(0x1b7)](_0x1d0f5d[_0x455459(0x16d)])[_0x455459(0x194)]=_0x2f7985:_0x1d0f5d[_0x455459(0x198)](clearInterval,_0xb8856b));},0x3e8),_0x48fd05[_0x308a80(0x1b8)]=_0x5cbe7b[_0x308a80(0x19f)](setTimeout,()=>{const _0x27a787=_0x308a80;!_0x48fd05['isPaused']&&(_0x5a52d6[_0x27a787(0x1ab)]['display']=_0x5cbe7b[_0x27a787(0x179)],_0x48fd05[_0x27a787(0x15d)]());},0x3e8);}})());