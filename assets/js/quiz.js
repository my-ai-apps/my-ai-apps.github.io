
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
function _0x2674(){const _0x9902b6=['[OCR]\x20Text\x20extracted:','PjkJm','what','rkINg','dVIwl','CMRvn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Based\x20on\x20the\x20text,\x20what\x20is\x20the\x20main\x20topic\x20being\x20discussed?','Please\x20capture\x20an\x20image\x20first\x20before\x20providing\x20quiz\x20requirements.','NvPWA','MyVFt','niMON','[Camera]\x20Error\x20accessing\x20camera:','[AI]\x20Performing\x20image\x20recognition...','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Points:\x20','open_ended','\x20-\x20','gmIHI','Image\x20captured!\x20Please\x20provide\x20your\x20requirements\x20for\x20the\x20quiz.','topic','aWLhw','promptStreaming','copy-button','terminate','MhzeQ','rysUg','VNwdX','Dchmt','vesol','question','click','yGWtp','General','src','2748ppLawT','toISOString','drLYW','YnFgy','[Camera]\x20Starting\x20camera\x20initialization...','[UI]\x20Adding\x20message:\x20','WZimu','MRytc','data','hLwbb','messageInput','confidence','recognize','QJYUb','Image\x20and\x20text\x20analysis\x20complete','captured-image','then','content','[AI]\x20Image\x20session\x20created:','EIfAL','title','Science','createImageSession','What\x20can\x20you\x20observe\x20in\x20this\x20image?','68952GSOyJU','log','Bot','xSjJS','topics','ilQtT','filter','evfOX','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Subject:\x20','ENQYX','WJjCh','toLowerCase','remove','CRipD','85332NKnrOC','mhvWM','XCnpP','text','LChGJ','split','loadLanguage','message\x20bot-message\x20streaming','dark','writeText','className','FIjoW','multiple_choice','textContent','ZxePe','getContext','MAkXK','trim','2PwXDGj','XNAKD','Visual\x20Analysis','display','error','finally','getUserMedia','hUSmC','mediaDevices','[Camera]\x20Error\x20processing\x20captured\x20image:','Upwei','sendButton','AehFA','stringify','ECsgO','afgre','div','PBpha','theme','includes','Generated\x20a\x20basic\x20quiz\x20without\x20AI\x20assistance:','103235yLWJEC','bot-message','themeToggle','pattern','uqyRf','LnApJ','Language\x20Arts','captureButton','\x20Quiz','quiz-container','onclick','Copied!','from','892361LgyQtP','join','fmoqf','4|2|1|3|0','button','76542qdTWCG','cameraPreview','light','drawImage','History','4732605zvFYup','Copy\x20failed:','Option\x20D','timeLimit','gAjwr','[OCR]\x20Worker\x20initialized','[UI]\x20Adding\x20quiz\x20to\x20chat:','heErH','315eQwSmx','[Quiz]\x20Error\x20generating\x20quiz:','Geography','ePZML','\x20\x20\x20','cameraButton','I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20requirements:','590qHSoJV','NmnCl','4lambpT','srcObject','bXREU','[Processing]\x20Image\x20processing\x20completed:','[Camera]\x20Stopping\x20track:','cxOPu','width','What\x20are\x20the\x20key\x20points\x20mentioned\x20in\x20the\x20text?','Quiz\x20generation\x20failed\x20completely.\x20Please\x20try\x20again\x20later.','72exvcVq','Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz\x20using\x20Gemini\x20Nano\x20AI.\x20Please\x20try\x20again.','catch','dDHmb','videoWidth','[Camera]\x20Camera\x20stopped\x20and\x20container\x20hidden','pre','[Camera]\x20Successfully\x20got\x20media\x20stream:','prompt-suggestion','documentElement','createElement','nmOpH','[AI]\x20Image\x20recognition\x20completed.\x20Result:','fromCharCode','DknuS','scrollTop','setItem','...?','pgYHP','DmxAl','height','[Quiz]\x20Fallback\x20generation\x20also\x20failed:','clipboard','Student\x20should\x20identify\x20main\x20points\x20from\x20the\x20text','stop','data-theme','[OCR]\x20Worker\x20terminated','system','user','slice','bpUWe','message','tCiBw','kzpKz','getElementById','Option\x20C','[Quiz]\x20Failed\x20to\x20parse\x20AI\x20response:','uJjre','toString','905508wcznjx','ognNy','[OCR]\x20Text\x20extraction\x20result:','ibVJl','IvQor','subject','[Chat]\x20Sending\x20message:','nKXAc','Option\x20B','none','PCCUE','label','\x0a\x0aUser\x20request:\x20','JZirh','What\x20is\x20the\x20significance\x20of\x20','LChyp','scrollHeight','[AI]\x20Windows\x20AI\x20API\x20not\x20found\x20in\x20window\x20object','length','[AI]\x20Error\x20during\x20image\x20processing:','options','vOsJL','type','JkTri','nndzR','[Processing]\x20Error\x20during\x20image\x20processing:','Art','push','img','General\x20Knowledge','add','flex','mpGFI','FAWyg','juVOR','videoHeight','Windows\x20AI\x20API\x20not\x20available','LmbEa','Sorry,\x20I\x20couldn\x27t\x20process\x20the\x20image.\x20Please\x20try\x20again.','XeUxW','[Camera]\x20Capturing\x20image...','chatMessages','[Quiz]\x20Generating\x20quiz...','Processing\x20image...','appendChild','message\x20bot-message','[OCR]\x20Error\x20in\x20text\x20extraction:','Enter','PuOFS','Copy\x20Quiz','gzCbR','[Processing]\x20No\x20OCR\x20text\x20found,\x20falling\x20back\x20to\x20image\x20analysis','map','createWorker','addEventListener','aeqGM','User','Description\x20of\x20visual\x20elements','value','XbnIf','GlDYC','key','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Type:\x20','mJtRV','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20Questions:\x0a\x20\x20\x20\x20\x20\x20\x20\x20','eng','jaMrX','YGgiQ','liQMS','points','keypress','style','lsRMM','getAttribute'];_0x2674=function(){return _0x9902b6;};return _0x2674();}const _0x50034d=_0x1879;(function(_0x235f6e,_0x246aa9){const _0x534c82=_0x1879,_0x2bf9ee=_0x235f6e();while(!![]){try{const _0x2aa2c5=parseInt(_0x534c82(0x2f2))/0x1*(parseInt(_0x534c82(0x2d0))/0x2)+parseInt(_0x534c82(0x2b0))/0x3+-parseInt(_0x534c82(0x1fc))/0x4*(parseInt(_0x534c82(0x1eb))/0x5)+-parseInt(_0x534c82(0x1e6))/0x6*(parseInt(_0x534c82(0x1f3))/0x7)+parseInt(_0x534c82(0x205))/0x8*(-parseInt(_0x534c82(0x22c))/0x9)+-parseInt(_0x534c82(0x1fa))/0xa*(-parseInt(_0x534c82(0x2e5))/0xb)+parseInt(_0x534c82(0x298))/0xc*(parseInt(_0x534c82(0x2be))/0xd);if(_0x2aa2c5===_0x246aa9)break;else _0x2bf9ee['push'](_0x2bf9ee['shift']());}catch(_0x1eca7e){_0x2bf9ee['push'](_0x2bf9ee['shift']());}}}(_0x2674,0x8554a));import{Logger}from'./common.js';const chatMessages=document[_0x50034d(0x227)](_0x50034d(0x255)),messageInput=document[_0x50034d(0x227)](_0x50034d(0x2a2)),sendButton=document['getElementById'](_0x50034d(0x2db)),cameraButton=document[_0x50034d(0x227)](_0x50034d(0x1f8)),themeToggle=document[_0x50034d(0x227)](_0x50034d(0x2e7)),cameraContainer=document[_0x50034d(0x227)]('cameraContainer'),cameraPreview=document[_0x50034d(0x227)](_0x50034d(0x1e7)),captureButton=document[_0x50034d(0x227)](_0x50034d(0x2ec)),cancelButton=document[_0x50034d(0x227)]('cancelButton');let stream=null,imageContext=null;function _0x1879(_0xe10ffd,_0x44bfd0){const _0x267470=_0x2674();return _0x1879=function(_0x187918,_0xf2a13){_0x187918=_0x187918-0x1e5;let _0x4eebe0=_0x267470[_0x187918];return _0x4eebe0;},_0x1879(_0xe10ffd,_0x44bfd0);}async function startCamera(){const _0x140158=_0x50034d,_0xdd2802={'RCApK':_0x140158(0x29c),'dMoEr':_0x140158(0x2f5),'MyVFt':'[Camera]\x20Camera\x20preview\x20started\x20and\x20container\x20displayed','uqyRf':_0x140158(0x20c),'PjkJm':'environment','JkTri':_0x140158(0x282),'DugyY':function(_0xedd294,_0x268730){return _0xedd294+_0x268730;},'PCCUE':'Error\x20accessing\x20camera:\x20'};console[_0x140158(0x2b1)](_0xdd2802['RCApK']);try{const _0x24a5e7=_0xdd2802['dMoEr'][_0x140158(0x2c3)]('|');let _0x2840f6=0x0;while(!![]){switch(_0x24a5e7[_0x2840f6++]){case'0':console[_0x140158(0x2b1)](_0xdd2802[_0x140158(0x280)]);continue;case'1':cameraPreview[_0x140158(0x1fd)]=stream;continue;case'2':console['log'](_0xdd2802[_0x140158(0x2e9)],stream);continue;case'3':cameraContainer[_0x140158(0x273)][_0x140158(0x2d3)]=_0x140158(0x24b);continue;case'4':stream=await navigator[_0x140158(0x2d8)][_0x140158(0x2d6)]({'video':{'facingMode':_0xdd2802[_0x140158(0x277)]}});continue;}break;}}catch(_0x20f890){console[_0x140158(0x2d4)](_0xdd2802[_0x140158(0x243)],_0x20f890),addMessage(_0xdd2802['DugyY'](_0xdd2802[_0x140158(0x236)],_0x20f890[_0x140158(0x224)]));}}function stopCamera(){const _0x5d82c0=_0x50034d,_0x2e9aa6={'YnFgy':_0x5d82c0(0x200),'IvQor':'[Camera]\x20Stopping\x20camera...','LChGJ':_0x5d82c0(0x235),'AFnaW':_0x5d82c0(0x20a)};console[_0x5d82c0(0x2b1)](_0x2e9aa6[_0x5d82c0(0x230)]),stream&&(stream['getTracks']()['forEach'](_0x361391=>{const _0x5b4092=_0x5d82c0;console[_0x5b4092(0x2b1)](_0x2e9aa6[_0x5b4092(0x29b)],_0x361391[_0x5b4092(0x237)]),_0x361391[_0x5b4092(0x21d)]();}),stream=null),cameraContainer[_0x5d82c0(0x273)][_0x5d82c0(0x2d3)]=_0x2e9aa6[_0x5d82c0(0x2c2)],console[_0x5d82c0(0x2b1)](_0x2e9aa6['AFnaW']);}async function processImageUsingWindowAI(_0x24480e){const _0xc60dc7=_0x50034d,_0x5b71a4={'PuOFS':'[AI]\x20Starting\x20image\x20processing...','XRrat':_0xc60dc7(0x23d),'ognNy':_0xc60dc7(0x250),'gmIHI':_0xc60dc7(0x283),'juVOR':_0xc60dc7(0x211),'IoFXK':_0xc60dc7(0x23f)};console[_0xc60dc7(0x2b1)](_0x5b71a4[_0xc60dc7(0x25c)],_0x24480e);if(!window['ai']){console[_0xc60dc7(0x2d4)](_0x5b71a4['XRrat']);throw new Error(_0x5b71a4[_0xc60dc7(0x22d)]);}try{console['log']('[AI]\x20Creating\x20image\x20recognition\x20session...');const _0x5c8313=await window['ai'][_0xc60dc7(0x2ae)]();console[_0xc60dc7(0x2b1)](_0xc60dc7(0x2aa),_0x5c8313),console[_0xc60dc7(0x2b1)](_0x5b71a4[_0xc60dc7(0x287)]);const _0xcf48c5=await _0x5c8313['recognize'](_0x24480e);return console[_0xc60dc7(0x2b1)](_0x5b71a4[_0xc60dc7(0x24e)],_0xcf48c5),_0xcf48c5;}catch(_0x2ae69f){console[_0xc60dc7(0x2d4)](_0x5b71a4['IoFXK'],_0x2ae69f);throw _0x2ae69f;}}async function processImageUsingTesseract(_0x21d9ac){const _0x191b86=_0x50034d,_0x1c5f71={'PBpha':'[Processing]\x20Starting\x20image\x20OCR\x20analysis...','bpUWe':function(_0x1fd651,_0x5d5afb){return _0x1fd651(_0x5d5afb);},'yGWtp':_0x191b86(0x22e),'ZxePe':function(_0x44aa90,_0xfea334){return _0x44aa90>_0xfea334;},'ePZML':_0x191b86(0x25f),'mJtRV':'image','ITxVf':'Visual\x20content\x20detected','liQMS':_0x191b86(0x2d2),'MhzeQ':_0x191b86(0x249),'GlDYC':_0x191b86(0x245)};console['log'](_0x1c5f71[_0x191b86(0x2e1)]),addMessage(_0x191b86(0x257),![]);try{const _0x7074a0=await _0x1c5f71[_0x191b86(0x223)](extractTextFromImage,_0x21d9ac);return console[_0x191b86(0x2b1)](_0x1c5f71[_0x191b86(0x295)],_0x7074a0),_0x7074a0[_0x191b86(0x2c1)]&&_0x1c5f71[_0x191b86(0x2cc)](_0x7074a0[_0x191b86(0x2c1)][_0x191b86(0x2cf)]()[_0x191b86(0x23e)],0x0)?{'type':_0x191b86(0x2c1),'content':'Washington\x20Drivers\x20License\x20Test','confidence':_0x7074a0[_0x191b86(0x2a3)],'topics':generateTopics(_0x7074a0[_0x191b86(0x2c1)])}:(console[_0x191b86(0x2b1)](_0x1c5f71[_0x191b86(0x1f6)]),{'type':_0x1c5f71[_0x191b86(0x26b)],'content':_0x1c5f71['ITxVf'],'topics':[_0x1c5f71[_0x191b86(0x270)],_0x1c5f71[_0x191b86(0x28e)]],'features':{'timestamp':new Date()[_0x191b86(0x299)](),'dimensions':{'width':_0x21d9ac[_0x191b86(0x202)],'height':_0x21d9ac[_0x191b86(0x219)]}}});}catch(_0x366659){console[_0x191b86(0x2d4)](_0x1c5f71[_0x191b86(0x268)],_0x366659);throw _0x366659;}}async function extractTextFromImage(_0x3edacb){const _0x30332=_0x50034d,_0x3c007a={'aeqGM':_0x30332(0x1f0),'ZaZur':_0x30332(0x276),'uJjre':function(_0x4ce147,_0x341350){return _0x4ce147(_0x341350);},'evfOX':_0x30332(0x25a)};console[_0x30332(0x2b1)]('[OCR]\x20Starting\x20text\x20extraction...');const _0x42553f=_0x30332(0x26d);try{const _0x40bc5a=await Tesseract[_0x30332(0x261)]();await _0x40bc5a['load'](),await _0x40bc5a[_0x30332(0x2c4)](_0x42553f),await _0x40bc5a['initialize'](_0x42553f),console['log'](_0x3c007a[_0x30332(0x263)]);const _0xfc1a60=await _0x40bc5a[_0x30332(0x2a4)](_0x3edacb);console[_0x30332(0x2b1)](_0x3c007a['ZaZur'],_0xfc1a60[_0x30332(0x2a0)]['text']),await _0x40bc5a[_0x30332(0x28d)](),console[_0x30332(0x2b1)](_0x30332(0x21f));const _0x2ebf5d={'timestamp':new Date()[_0x30332(0x299)](),'imageSize':{'width':_0x3edacb['width'],'height':_0x3edacb[_0x30332(0x219)]},'extractedText':_0xfc1a60[_0x30332(0x2a0)]['text'],'confidenceScore':_0xfc1a60[_0x30332(0x2a0)]['confidence'],'suggestedTopics':_0x3c007a[_0x30332(0x22a)](generateTopics,_0xfc1a60[_0x30332(0x2a0)][_0x30332(0x2c1)])};return{'description':_0x30332(0x2a6),'metadata':_0x2ebf5d,'text':_0xfc1a60['data'][_0x30332(0x2c1)],'confidence':_0xfc1a60['data']['confidence']};}catch(_0x5bb225){return console['error'](_0x3c007a[_0x30332(0x2b7)],_0x5bb225),{'text':'','confidence':0x0};}}function generateTopics(_0xb55006){const _0x59a1bb=_0x50034d,_0x35f46d={'XeUxW':_0x59a1bb(0x2ad),'YGgiQ':_0x59a1bb(0x1ea),'LJIRU':_0x59a1bb(0x1f5),'cxOPu':function(_0x282a46,_0x3c0b30){return _0x282a46===_0x3c0b30;}},_0x51668d=new Set(),_0x192f51=_0xb55006['toLowerCase'](),_0x17fd3d=[{'pattern':/\b(math|equation|calculate|formula|number)\b/,'topic':'Mathematics'},{'pattern':/\b(science|experiment|chemical|biology|physics)\b/,'topic':_0x35f46d[_0x59a1bb(0x253)]},{'pattern':/\b(history|century|ancient|war|empire|civilization)\b/,'topic':_0x35f46d[_0x59a1bb(0x26f)]},{'pattern':/\b(geography|country|capital|mountain|river|climate)\b/,'topic':_0x35f46d['LJIRU']},{'pattern':/\b(grammar|sentence|paragraph|essay|writing)\b/,'topic':_0x59a1bb(0x2eb)},{'pattern':/\b(art|color|design|paint|draw)\b/,'topic':_0x59a1bb(0x246)}];return _0x17fd3d['forEach'](_0x87db5c=>{const _0x55e391=_0x59a1bb;_0x87db5c[_0x55e391(0x2e8)]['test'](_0x192f51)&&_0x51668d[_0x55e391(0x24a)](_0x87db5c[_0x55e391(0x289)]);}),_0x35f46d[_0x59a1bb(0x201)](_0x51668d['size'],0x0)&&_0x51668d[_0x59a1bb(0x24a)]('General\x20Knowledge'),Array[_0x59a1bb(0x2f1)](_0x51668d);}async function generateQuizUsingAI(_0x4823b1,_0x4fdbc3){const _0x32e618=_0x50034d,_0x3686d4={'EAQqe':'imageContext:','pgYHP':'window.ai\x20API\x20not\x20available','mhvWM':'[Quiz]\x20Constructed\x20system\x20prompt:','FIjoW':_0x32e618(0x221),'xSjJS':_0x32e618(0x2c5),'nndzR':function(_0x99d66e,_0x438037,_0x41483f){return _0x99d66e(_0x438037,_0x41483f);},'NmnCl':'Generating\x20quiz...','CMRvn':function(_0x3ce615){return _0x3ce615();},'rkINg':function(_0xe85dd7,_0x1e8c50){return _0xe85dd7(_0x1e8c50);},'WZimu':function(_0xf1df4c,_0x2b6395,_0x1d90a2){return _0xf1df4c(_0x2b6395,_0x1d90a2);},'nmOpH':'I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20image\x20and\x20requirements:','gAjwr':_0x32e618(0x229),'MzFUX':function(_0x336557,_0x4cdc6a,_0x23a83a){return _0x336557(_0x4cdc6a,_0x23a83a);},'FAWyg':'[Quiz]\x20Error\x20in\x20quiz\x20generation\x20using\x20Gemini\x20Nano\x20AI:','dDHmb':function(_0x3b1f81,_0xb0f6f4,_0x23f7e8){return _0x3b1f81(_0xb0f6f4,_0x23f7e8);},'QJYUb':_0x32e618(0x206),'DmxAl':_0x32e618(0x2e4),'vfidg':function(_0x5e4df8,_0x8dfe4a,_0x16a0e8){return _0x5e4df8(_0x8dfe4a,_0x16a0e8);},'SSypj':_0x32e618(0x204)};console['log']('[Quiz]\x20Starting\x20quiz\x20generation\x20with\x20Gemini\x20Nano...',{'imageContext':_0x4823b1,'userPrompt':_0x4fdbc3});try{console[_0x32e618(0x2b1)](_0x3686d4['EAQqe'],JSON['stringify'](_0x4823b1));if(!window['ai'])throw new Error(_0x3686d4[_0x32e618(0x217)]);const _0x7711c1='You\x20are\x20a\x20quiz\x20generator.\x20Create\x20a\x20quiz\x20based\x20on\x20the\x20following\x20image\x20context\x20and\x20user\x20requirements.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Image\x20context:\x20'+JSON[_0x32e618(0x2dd)](_0x4823b1)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Format\x20the\x20response\x20as\x20a\x20JSON\x20quiz\x20object\x20with\x20id,\x20grade,\x20subject,\x20title,\x20timeLimit,\x20topic,\x20and\x20questions\x20array.';console[_0x32e618(0x2b1)](_0x3686d4[_0x32e618(0x2bf)],_0x7711c1);const _0x584867=[{'role':_0x32e618(0x220),'content':_0x7711c1},{'role':_0x3686d4[_0x32e618(0x2c9)],'content':_0x4fdbc3}],_0x4690c8=document[_0x32e618(0x20f)](_0x32e618(0x2e0));_0x4690c8[_0x32e618(0x2c8)]=_0x3686d4[_0x32e618(0x2b3)],chatMessages[_0x32e618(0x258)](_0x4690c8),_0x3686d4[_0x32e618(0x244)](showTypingIndicator,chatMessages,_0x3686d4[_0x32e618(0x1fb)]);if(!aiLanguageSession)await _0x3686d4[_0x32e618(0x27b)](initializeLanguageSession);const _0x3b2200=await aiLanguageSession[_0x32e618(0x28b)](_0x7711c1+_0x32e618(0x238)+_0x4fdbc3);let _0x5efa10='';for await(const _0x17a699 of _0x3b2200){_0x5efa10+=_0x17a699,_0x4690c8[_0x32e618(0x2cb)]=_0x5efa10,chatMessages[_0x32e618(0x214)]=chatMessages['scrollHeight'];}_0x4690c8[_0x32e618(0x2bc)]();let _0x5937b5;try{_0x5937b5=_0x3686d4[_0x32e618(0x279)](safeJSONParse,_0x5efa10),_0x3686d4[_0x32e618(0x29e)](addMessage,_0x3686d4[_0x32e618(0x210)],![]),_0x3686d4['rkINg'](addQuiz,_0x5937b5);}catch(_0x1d3019){console['error'](_0x3686d4[_0x32e618(0x1ef)],_0x1d3019),_0x3686d4['MzFUX'](addMessage,_0x5efa10,![]);throw _0x1d3019;}_0x3686d4[_0x32e618(0x27b)](removeTypingIndicator);}catch(_0x5ce6a1){console[_0x32e618(0x2d4)](_0x3686d4[_0x32e618(0x24d)],_0x5ce6a1),_0x3686d4[_0x32e618(0x27b)](removeTypingIndicator),_0x3686d4[_0x32e618(0x208)](addMessage,_0x3686d4[_0x32e618(0x2a5)],![]);try{const _0x130c96=await _0x3686d4[_0x32e618(0x29e)](generateQuizWithoutAI,_0x4823b1,_0x4fdbc3);_0x3686d4[_0x32e618(0x244)](addMessage,_0x3686d4[_0x32e618(0x218)],![]),addQuiz(_0x130c96);}catch(_0x4dcecd){console[_0x32e618(0x2d4)](_0x32e618(0x21a),_0x4dcecd),_0x3686d4['vfidg'](addMessage,_0x3686d4['SSypj'],![]);}}}function generateOptionsFromText(_0x3ad01b){const _0x22e3c6=_0x50034d,_0x1ffc98={'nKXAc':function(_0x39ad99,_0x2f202a){return _0x39ad99<_0x2f202a;},'ilQtT':function(_0x38c94c,_0x2d9508){return _0x38c94c+_0x2d9508;},'XbnIf':'Additional\x20option\x20'},_0x1639f8=_0x3ad01b[_0x22e3c6(0x2c3)](/[.!?]+/)[_0x22e3c6(0x2b6)](_0x45b14a=>_0x45b14a[_0x22e3c6(0x2cf)]()[_0x22e3c6(0x23e)]>0x0),_0x10ba13=_0x1639f8[_0x22e3c6(0x222)](0x0,0x4)[_0x22e3c6(0x260)](_0x3fc8bb=>_0x3fc8bb['trim']());while(_0x1ffc98[_0x22e3c6(0x233)](_0x10ba13[_0x22e3c6(0x23e)],0x4)){_0x10ba13[_0x22e3c6(0x247)](_0x1ffc98['ilQtT'](_0x1ffc98[_0x22e3c6(0x267)],_0x1ffc98[_0x22e3c6(0x2b5)](_0x10ba13[_0x22e3c6(0x23e)],0x1)));}return _0x10ba13;}function generateCustomQuestion(_0x16abd9,_0x8755fd){const _0x3329d3=_0x50034d,_0x5586e7={'TOgCX':_0x3329d3(0x278)};return _0x16abd9[_0x3329d3(0x2bb)]()[_0x3329d3(0x2e3)](_0x5586e7['TOgCX'])?_0x16abd9:_0x3329d3(0x23a)+_0x8755fd['split']('\x20')[_0x3329d3(0x222)](0x0,0x3)[_0x3329d3(0x2f3)]('\x20')+_0x3329d3(0x216);}function addMessage(_0x4b9674,_0x456414=![]){const _0xaf82e7=_0x50034d,_0x44be64={'jKIBZ':_0xaf82e7(0x264),'Upwei':_0xaf82e7(0x2e0),'vesol':'user-message','CRipD':_0xaf82e7(0x2e6)};console['log'](_0xaf82e7(0x29d)+(_0x456414?_0x44be64['jKIBZ']:_0xaf82e7(0x2b2))+':',_0x4b9674);const _0x2558a0=document[_0xaf82e7(0x20f)](_0x44be64[_0xaf82e7(0x2da)]);_0x2558a0[_0xaf82e7(0x2c8)]='message\x20'+(_0x456414?_0x44be64[_0xaf82e7(0x292)]:_0x44be64[_0xaf82e7(0x2bd)]),_0x2558a0[_0xaf82e7(0x2cb)]=_0x4b9674,chatMessages[_0xaf82e7(0x258)](_0x2558a0),chatMessages[_0xaf82e7(0x214)]=chatMessages['scrollHeight'];}function addQuiz(_0x1b64be){const _0xd3076c=_0x50034d,_0x9c141c={'RzfNi':_0xd3076c(0x1f1),'afgre':_0xd3076c(0x2e0),'drLYW':_0xd3076c(0x2ee),'bXREU':_0xd3076c(0x20b),'unoRh':_0xd3076c(0x1e5),'XNAKD':_0xd3076c(0x28c),'RihVg':'Copy\x20Quiz'};console[_0xd3076c(0x2b1)](_0x9c141c['RzfNi'],_0x1b64be);const _0x451cd3=document['createElement'](_0x9c141c[_0xd3076c(0x2df)]);_0x451cd3[_0xd3076c(0x2c8)]=_0x9c141c[_0xd3076c(0x29a)];const _0x5950d6='\x0a\x20\x20\x20\x20\x20\x20\x20\x20Title:\x20'+_0x1b64be[_0xd3076c(0x2ac)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20Grade:\x20'+_0x1b64be['grade']+_0xd3076c(0x2b8)+_0x1b64be[_0xd3076c(0x231)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20Time\x20Limit:\x20'+_0x1b64be[_0xd3076c(0x1ee)]+'\x20minutes\x0a\x20\x20\x20\x20\x20\x20\x20\x20Topics:\x20'+_0x1b64be[_0xd3076c(0x289)]+_0xd3076c(0x26c)+_0x1b64be['questions']['map']((_0x504db8,_0x550957)=>_0xd3076c(0x27c)+(_0x550957+0x1)+'.\x20'+_0x504db8[_0xd3076c(0x293)]+_0xd3076c(0x27c)+(_0x504db8[_0xd3076c(0x240)]?_0x504db8[_0xd3076c(0x240)]['map']((_0x317d97,_0x1e7dd1)=>_0xd3076c(0x1f7)+String[_0xd3076c(0x212)](0x61+_0x1e7dd1)+')\x20'+_0x317d97)['join']('\x0a'):'')+_0xd3076c(0x26a)+_0x504db8[_0xd3076c(0x242)]+_0xd3076c(0x284)+_0x504db8[_0xd3076c(0x271)]+_0xd3076c(0x27c))[_0xd3076c(0x2f3)]('\x0a')+'\x0a\x20\x20\x20\x20',_0x4aa8ab=document[_0xd3076c(0x20f)](_0x9c141c[_0xd3076c(0x1fe)]);_0x4aa8ab[_0xd3076c(0x2cb)]=_0x5950d6,_0x451cd3['appendChild'](_0x4aa8ab);const _0xb0028=document['createElement'](_0x9c141c['unoRh']);_0xb0028[_0xd3076c(0x2c8)]=_0x9c141c[_0xd3076c(0x2d1)],_0xb0028[_0xd3076c(0x2cb)]=_0x9c141c['RihVg'],_0xb0028['onclick']=()=>{const _0x4e1647=_0xd3076c;navigator[_0x4e1647(0x21b)][_0x4e1647(0x2c7)](_0x5950d6)[_0x4e1647(0x2a8)](()=>_0xb0028['textContent']=_0x4e1647(0x2f0))[_0x4e1647(0x207)](_0x113fbf=>console['error'](_0x4e1647(0x1ec),_0x113fbf))[_0x4e1647(0x2d5)](()=>setTimeout(()=>_0xb0028[_0x4e1647(0x2cb)]=_0x4e1647(0x25d),0x7d0));},_0x451cd3['appendChild'](_0xb0028),chatMessages['appendChild'](_0x451cd3),chatMessages[_0xd3076c(0x214)]=chatMessages[_0xd3076c(0x23c)];}async function captureImage(){const _0x2a0d11=_0x50034d,_0x518269={'XTkDU':function(_0x4eff0b){return _0x4eff0b();},'JZirh':_0x2a0d11(0x2e0),'fmoqf':_0x2a0d11(0x254),'EIfAL':'canvas','tCiBw':_0x2a0d11(0x248),'niMON':_0x2a0d11(0x259),'ECsgO':function(_0x2f382c,_0x2b467e){return _0x2f382c(_0x2b467e);},'dVIwl':_0x2a0d11(0x1ff),'Dchmt':function(_0x1070c7,_0x275e57,_0x321768){return _0x1070c7(_0x275e57,_0x321768);},'aWLhw':_0x2a0d11(0x288),'lsRMM':function(_0x469900,_0x31ae0f){return _0x469900===_0x31ae0f;},'mpGFI':_0x2a0d11(0x2c1),'VNwdX':'Make\x20a\x20quiz\x20suitable\x20for\x20beginners'};console[_0x2a0d11(0x2b1)](_0x518269[_0x2a0d11(0x2f4)]);try{const _0x154877=document['createElement'](_0x518269[_0x2a0d11(0x2ab)]);_0x154877[_0x2a0d11(0x202)]=cameraPreview[_0x2a0d11(0x209)],_0x154877[_0x2a0d11(0x219)]=cameraPreview[_0x2a0d11(0x24f)],_0x154877[_0x2a0d11(0x2cd)]('2d')[_0x2a0d11(0x1e9)](cameraPreview,0x0,0x0);const _0x69ce1=document[_0x2a0d11(0x20f)](_0x518269[_0x2a0d11(0x225)]);_0x69ce1[_0x2a0d11(0x297)]=_0x154877['toDataURL']('image/jpeg'),_0x69ce1['className']=_0x2a0d11(0x2a7);const _0x4b0ee7=document['createElement'](_0x2a0d11(0x2e0));_0x4b0ee7[_0x2a0d11(0x2c8)]=_0x518269[_0x2a0d11(0x281)],_0x4b0ee7[_0x2a0d11(0x258)](_0x69ce1),chatMessages[_0x2a0d11(0x258)](_0x4b0ee7),stopCamera();const _0x183361=await _0x518269[_0x2a0d11(0x2de)](processImageUsingTesseract,_0x69ce1);imageContext=_0x183361,console[_0x2a0d11(0x2b1)](_0x518269[_0x2a0d11(0x27a)],JSON[_0x2a0d11(0x2dd)](imageContext,null,0x2)),_0x518269['Dchmt'](addMessage,_0x518269[_0x2a0d11(0x28a)],![]);const _0x30e885=['Create\x20a\x20quiz\x20about\x20'+imageContext[_0x2a0d11(0x2b4)][0x0]+_0x2a0d11(0x286)+imageContext[_0x2a0d11(0x2a9)],_0x518269[_0x2a0d11(0x274)](imageContext[_0x2a0d11(0x242)],_0x518269[_0x2a0d11(0x24c)])?'Generate\x20questions\x20based\x20on\x20the\x20image\x20related\x20text\x20-\x20'+imageContext[_0x2a0d11(0x2a9)]:'Generate\x20multiple\x20choice\x20questions\x20about\x20this\x20picture',_0x518269[_0x2a0d11(0x290)]];_0x30e885['forEach'](_0x4f7849=>{const _0x2fa168=_0x2a0d11,_0x3b73d6={'jljNU':function(_0xc33d24){return _0x518269['XTkDU'](_0xc33d24);}},_0x58c680=document[_0x2fa168(0x20f)](_0x518269[_0x2fa168(0x239)]);_0x58c680['className']=_0x2fa168(0x20d),_0x58c680['textContent']=_0x4f7849,_0x58c680[_0x2fa168(0x2ef)]=()=>{messageInput['value']=_0x4f7849,_0x3b73d6['jljNU'](sendMessage);},chatMessages['appendChild'](_0x58c680);});}catch(_0x25a527){console[_0x2a0d11(0x2d4)](_0x2a0d11(0x2d9),_0x25a527),_0x518269[_0x2a0d11(0x291)](addMessage,_0x2a0d11(0x252),![]);}}async function sendMessage(){const _0x4725a0=_0x50034d,_0xca2927={'LwgvX':_0x4725a0(0x232),'vOsJL':_0x4725a0(0x1f9),'WJjCh':function(_0x225b88,_0x581b57){return _0x225b88(_0x581b57);},'jaMrX':function(_0x4ceb8b,_0xf2cea9,_0x8b1521){return _0x4ceb8b(_0xf2cea9,_0x8b1521);},'MRytc':'Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz.\x20Please\x20try\x20again.','NvPWA':function(_0x3a7918,_0x3518b1,_0x3d2b42){return _0x3a7918(_0x3518b1,_0x3d2b42);}},_0x59d056=messageInput[_0x4725a0(0x266)][_0x4725a0(0x2cf)]();if(!_0x59d056)return;console[_0x4725a0(0x2b1)](_0xca2927['LwgvX'],_0x59d056),addMessage(_0x59d056,!![]),messageInput[_0x4725a0(0x266)]='';if(imageContext)try{const _0x38dbce=await generateQuizUsingAI(imageContext,_0x59d056);addMessage(_0xca2927[_0x4725a0(0x241)],![]),_0xca2927[_0x4725a0(0x2ba)](addQuiz,_0x38dbce);}catch(_0x30f84d){_0xca2927[_0x4725a0(0x26e)](addMessage,_0xca2927[_0x4725a0(0x29f)],![]);}else _0xca2927[_0x4725a0(0x27f)](addMessage,_0x4725a0(0x27e),![]);}function toggleTheme(){const _0x2a0d9f=_0x50034d,_0x21248c={'hUSmC':_0x2a0d9f(0x21e),'caxnm':function(_0x45754f,_0x1e9fbb){return _0x45754f===_0x1e9fbb;},'hLwbb':_0x2a0d9f(0x2c6),'okKoH':_0x2a0d9f(0x1e8),'AehFA':_0x2a0d9f(0x2e2)},_0x2967f8=document[_0x2a0d9f(0x20e)],_0x4c9566=_0x2967f8[_0x2a0d9f(0x275)](_0x21248c[_0x2a0d9f(0x2d7)]),_0x5216c5=_0x21248c['caxnm'](_0x4c9566,_0x21248c[_0x2a0d9f(0x2a1)])?_0x21248c['okKoH']:_0x2a0d9f(0x2c6);_0x2967f8['setAttribute'](_0x21248c[_0x2a0d9f(0x2d7)],_0x5216c5),localStorage[_0x2a0d9f(0x215)](_0x21248c[_0x2a0d9f(0x2dc)],_0x5216c5);}themeToggle[_0x50034d(0x262)](_0x50034d(0x294),toggleTheme),cameraButton[_0x50034d(0x262)]('click',startCamera),captureButton[_0x50034d(0x262)](_0x50034d(0x294),captureImage),cancelButton[_0x50034d(0x262)]('click',stopCamera),sendButton[_0x50034d(0x262)](_0x50034d(0x294),sendMessage),messageInput['addEventListener'](_0x50034d(0x272),_0x5abdf0=>{const _0x27493f=_0x50034d,_0x66b989={'LnApJ':function(_0x48b75d,_0x140855){return _0x48b75d===_0x140855;},'gzCbR':_0x27493f(0x25b),'QJrAW':function(_0x399e19){return _0x399e19();}};if(_0x66b989[_0x27493f(0x2ea)](_0x5abdf0[_0x27493f(0x269)],_0x66b989[_0x27493f(0x25e)]))_0x66b989['QJrAW'](sendMessage);});async function generateQuizWithoutAI(_0x34e0fd,_0x13a1a6){const _0x37c5e1=_0x50034d,_0x5296b6={'TnPWl':_0x37c5e1(0x256),'LChyp':function(_0xb8f02e,_0x1c7662){return _0xb8f02e===_0x1c7662;},'nmzNB':_0x37c5e1(0x2c1),'LmbEa':_0x37c5e1(0x27d),'XCnpP':'Option\x20A','ENQYX':_0x37c5e1(0x203),'DknuS':_0x37c5e1(0x285),'ibVJl':_0x37c5e1(0x2af),'IemQa':_0x37c5e1(0x265),'rysUg':function(_0x2b36d8,_0x48832,_0x378494){return _0x2b36d8(_0x48832,_0x378494);},'EgAgr':_0x37c5e1(0x2ca),'MAkXK':_0x37c5e1(0x234),'nDscs':_0x37c5e1(0x228),'sLENb':_0x37c5e1(0x1ed),'kzpKz':_0x37c5e1(0x296),'heErH':_0x37c5e1(0x1f4)};console[_0x37c5e1(0x2b1)](_0x5296b6['TnPWl'],{'imageContext':_0x34e0fd,'userPrompt':_0x13a1a6});try{const _0x55321d=_0x5296b6[_0x37c5e1(0x23b)](_0x34e0fd[_0x37c5e1(0x242)],_0x5296b6['nmzNB']),_0x39e2a3=_0x34e0fd[_0x37c5e1(0x2a9)],_0xf8ca1=_0x34e0fd[_0x37c5e1(0x2b4)],_0x49c5a2=[];_0x55321d?(_0x49c5a2[_0x37c5e1(0x247)]({'question':_0x5296b6[_0x37c5e1(0x251)],'type':_0x37c5e1(0x2ca),'options':generateOptionsFromText(_0x39e2a3),'answer':_0x5296b6['XCnpP'],'points':0x2}),_0x49c5a2[_0x37c5e1(0x247)]({'question':_0x5296b6[_0x37c5e1(0x2b9)],'type':_0x5296b6[_0x37c5e1(0x213)],'answer':_0x37c5e1(0x21c),'points':0x2})):_0x49c5a2[_0x37c5e1(0x247)]({'question':_0x5296b6[_0x37c5e1(0x22f)],'type':_0x5296b6['DknuS'],'answer':_0x5296b6['IemQa'],'points':0x2});_0x49c5a2[_0x37c5e1(0x247)]({'question':_0x5296b6[_0x37c5e1(0x28f)](generateCustomQuestion,_0x13a1a6,_0x39e2a3),'type':_0x5296b6['EgAgr'],'options':[_0x5296b6[_0x37c5e1(0x2c0)],_0x5296b6[_0x37c5e1(0x2ce)],_0x5296b6['nDscs'],_0x5296b6['sLENb']],'answer':_0x5296b6[_0x37c5e1(0x2c0)],'points':0x2});const _0x460b0e={'id':Date['now']()[_0x37c5e1(0x22b)](),'title':_0xf8ca1[0x0]+_0x37c5e1(0x2ed),'subject':_0xf8ca1[0x0],'grade':_0x5296b6[_0x37c5e1(0x226)],'timeLimit':0xf,'topic':_0xf8ca1[_0x37c5e1(0x2f3)](',\x20'),'questions':_0x49c5a2};return _0x460b0e;}catch(_0x313cc2){console[_0x37c5e1(0x2d4)](_0x5296b6[_0x37c5e1(0x1f2)],_0x313cc2);throw _0x313cc2;}}