
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0xdaba48=_0x85a6;(function(_0x5ddcfe,_0x4740e7){const _0x3b0513=_0x85a6,_0x20fce0=_0x5ddcfe();while(!![]){try{const _0x4d3db4=parseInt(_0x3b0513(0x19c))/0x1+parseInt(_0x3b0513(0x1c4))/0x2*(parseInt(_0x3b0513(0x20a))/0x3)+parseInt(_0x3b0513(0x15b))/0x4+parseInt(_0x3b0513(0x199))/0x5+-parseInt(_0x3b0513(0x1c1))/0x6*(parseInt(_0x3b0513(0x19d))/0x7)+-parseInt(_0x3b0513(0x1e4))/0x8+parseInt(_0x3b0513(0x214))/0x9*(parseInt(_0x3b0513(0x222))/0xa);if(_0x4d3db4===_0x4740e7)break;else _0x20fce0['push'](_0x20fce0['shift']());}catch(_0xb2315b){_0x20fce0['push'](_0x20fce0['shift']());}}}(_0x339d,0x31695));import{Logger}from'./common.js';const chatMessages=document['getElementById']('chatMessages'),messageInput=document['getElementById'](_0xdaba48(0x1de)),sendButton=document[_0xdaba48(0x208)](_0xdaba48(0x174)),cameraButton=document[_0xdaba48(0x208)](_0xdaba48(0x247)),themeToggle=document['getElementById'](_0xdaba48(0x1e9)),cameraContainer=document[_0xdaba48(0x208)](_0xdaba48(0x1ed)),cameraPreview=document[_0xdaba48(0x208)](_0xdaba48(0x16a)),captureButton=document[_0xdaba48(0x208)](_0xdaba48(0x1dd)),cancelButton=document['getElementById'](_0xdaba48(0x1b7));let stream=null,imageContext=null;async function startCamera(){const _0x30d476=_0xdaba48,_0x5c893b={'KhwoP':_0x30d476(0x175),'LoLjf':'2|3|1|4|0','wCtfv':_0x30d476(0x22a),'BTGdd':'flex','QgPkw':_0x30d476(0x203),'sYOht':function(_0x3b4963,_0x5d948b){return _0x3b4963(_0x5d948b);},'ZhCSC':_0x30d476(0x1c3)};console['log'](_0x5c893b[_0x30d476(0x15f)]);try{const _0x3e7fff=_0x5c893b[_0x30d476(0x216)][_0x30d476(0x245)]('|');let _0x34dc35=0x0;while(!![]){switch(_0x3e7fff[_0x34dc35++]){case'0':console['log'](_0x30d476(0x233));continue;case'1':cameraPreview['srcObject']=stream;continue;case'2':stream=await navigator[_0x30d476(0x182)]['getUserMedia']({'video':{'facingMode':_0x30d476(0x24c)}});continue;case'3':console['log'](_0x5c893b[_0x30d476(0x207)],stream);continue;case'4':cameraContainer['style']['display']=_0x5c893b[_0x30d476(0x20c)];continue;}break;}}catch(_0x2ee36a){console[_0x30d476(0x21a)](_0x5c893b[_0x30d476(0x19e)],_0x2ee36a),_0x5c893b['sYOht'](addMessage,_0x5c893b[_0x30d476(0x1fa)]+_0x2ee36a['message']);}}function stopCamera(){const _0x43231d=_0xdaba48,_0x3b6154={'eIdhz':'[Camera]\x20Stopping\x20track:','ChgEG':_0x43231d(0x220),'KJqPo':_0x43231d(0x23b),'XoogK':_0x43231d(0x229)};console['log'](_0x3b6154['ChgEG']),stream&&(stream[_0x43231d(0x1fc)]()[_0x43231d(0x217)](_0x8c0846=>{const _0x579657=_0x43231d;console['log'](_0x3b6154[_0x579657(0x21b)],_0x8c0846[_0x579657(0x1b2)]),_0x8c0846['stop']();}),stream=null),cameraContainer[_0x43231d(0x251)]['display']=_0x3b6154[_0x43231d(0x17f)],console[_0x43231d(0x172)](_0x3b6154[_0x43231d(0x252)]);}async function processImageUsingWindowAI(_0x449117){const _0x9c4826=_0xdaba48,_0x276037={'MSnuK':_0x9c4826(0x150),'cnTzz':'Windows\x20AI\x20API\x20not\x20available','HzPcG':'[AI]\x20Creating\x20image\x20recognition\x20session...','evGCq':_0x9c4826(0x18b),'vrKNK':_0x9c4826(0x228)};console[_0x9c4826(0x172)](_0x276037[_0x9c4826(0x1a7)],_0x449117);if(!window['ai']){console['error'](_0x9c4826(0x211));throw new Error(_0x276037['cnTzz']);}try{console['log'](_0x276037[_0x9c4826(0x1a4)]);const _0x39c109=await window['ai'][_0x9c4826(0x18e)]();console['log'](_0x276037[_0x9c4826(0x1af)],_0x39c109),console['log'](_0x9c4826(0x1c6));const _0x21c482=await _0x39c109[_0x9c4826(0x1f1)](_0x449117);return console[_0x9c4826(0x172)](_0x276037[_0x9c4826(0x17e)],_0x21c482),_0x21c482;}catch(_0x26ba5d){console[_0x9c4826(0x21a)](_0x9c4826(0x1ea),_0x26ba5d);throw _0x26ba5d;}}async function processImageUsingTesseract(_0x4596f3){const _0x1022f4=_0xdaba48,_0x5acabf={'ROaVx':function(_0x1d7e15,_0x2110bc,_0x5b9175){return _0x1d7e15(_0x2110bc,_0x5b9175);},'pgAxG':'Processing\x20image...','NoYEu':function(_0x5559cd,_0x113e92){return _0x5559cd(_0x113e92);},'kdbEq':'[OCR]\x20Text\x20extraction\x20result:','wZYAk':'text','QCjjx':_0x1022f4(0x1b1),'svRWP':_0x1022f4(0x19a),'PuIGI':_0x1022f4(0x201),'bSHwN':_0x1022f4(0x231),'jYeVM':_0x1022f4(0x1dc),'nhSaR':_0x1022f4(0x249)};console[_0x1022f4(0x172)](_0x1022f4(0x1f3)),_0x5acabf[_0x1022f4(0x1a3)](addMessage,_0x5acabf[_0x1022f4(0x200)],![]);try{const _0x7f27d3=await _0x5acabf[_0x1022f4(0x169)](extractTextFromImage,_0x4596f3);return console[_0x1022f4(0x172)](_0x5acabf[_0x1022f4(0x20f)],_0x7f27d3),_0x7f27d3['text']&&_0x7f27d3[_0x1022f4(0x1d9)]['trim']()['length']>0x0?{'type':_0x5acabf[_0x1022f4(0x1c2)],'content':_0x5acabf['QCjjx'],'confidence':_0x7f27d3[_0x1022f4(0x255)],'topics':generateTopics(_0x7f27d3[_0x1022f4(0x1d9)])}:(console[_0x1022f4(0x172)](_0x5acabf[_0x1022f4(0x1a1)]),{'type':_0x5acabf['PuIGI'],'content':_0x5acabf['bSHwN'],'topics':[_0x5acabf['jYeVM'],_0x1022f4(0x1d5)],'features':{'timestamp':new Date()[_0x1022f4(0x224)](),'dimensions':{'width':_0x4596f3[_0x1022f4(0x1d8)],'height':_0x4596f3[_0x1022f4(0x235)]}}});}catch(_0x12f27a){console[_0x1022f4(0x21a)](_0x5acabf[_0x1022f4(0x16d)],_0x12f27a);throw _0x12f27a;}}async function extractTextFromImage(_0x2e92d8){const _0x30691a=_0xdaba48,_0x5f049b={'DHKOM':_0x30691a(0x168),'YcQum':_0x30691a(0x180),'sUDmn':_0x30691a(0x209),'AkEtI':_0x30691a(0x1e6),'EMoSu':function(_0x4b6236,_0x455697){return _0x4b6236(_0x455697);},'jbPnf':_0x30691a(0x22e),'iMiEY':'[OCR]\x20Error\x20in\x20text\x20extraction:'};console[_0x30691a(0x172)](_0x5f049b[_0x30691a(0x205)]);const _0x467ba5=_0x5f049b[_0x30691a(0x161)];try{const _0x506f22=await Tesseract[_0x30691a(0x1f5)]();await _0x506f22['load'](),await _0x506f22[_0x30691a(0x1ec)](_0x467ba5),await _0x506f22[_0x30691a(0x1d3)](_0x467ba5),console[_0x30691a(0x172)](_0x5f049b[_0x30691a(0x240)]);const _0x28b70b=await _0x506f22['recognize'](_0x2e92d8);console[_0x30691a(0x172)](_0x5f049b[_0x30691a(0x23a)],_0x28b70b[_0x30691a(0x1b8)]['text']),await _0x506f22[_0x30691a(0x237)](),console[_0x30691a(0x172)](_0x30691a(0x223));const _0x14446c={'timestamp':new Date()['toISOString'](),'imageSize':{'width':_0x2e92d8[_0x30691a(0x1d8)],'height':_0x2e92d8['height']},'extractedText':_0x28b70b[_0x30691a(0x1b8)][_0x30691a(0x1d9)],'confidenceScore':_0x28b70b['data']['confidence'],'suggestedTopics':_0x5f049b[_0x30691a(0x256)](generateTopics,_0x28b70b[_0x30691a(0x1b8)]['text'])};return{'description':_0x5f049b[_0x30691a(0x1a6)],'metadata':_0x14446c,'text':_0x28b70b['data']['text'],'confidence':_0x28b70b[_0x30691a(0x1b8)][_0x30691a(0x255)]};}catch(_0x2b2947){return console[_0x30691a(0x21a)](_0x5f049b[_0x30691a(0x1db)],_0x2b2947),{'text':'','confidence':0x0};}}function generateTopics(_0xeccced){const _0x1d52b1=_0xdaba48,_0x57f528={'MbqyM':_0x1d52b1(0x24a),'wlCFM':'Geography','aCbnR':_0x1d52b1(0x19f),'PiqRX':_0x1d52b1(0x179),'XMyjC':function(_0x3ec422,_0x3c721e){return _0x3ec422===_0x3c721e;},'ztmcg':_0x1d52b1(0x1d5)},_0x467a64=new Set(),_0x5d86ee=_0xeccced[_0x1d52b1(0x21f)](),_0x43456d=[{'pattern':/\b(math|equation|calculate|formula|number)\b/,'topic':_0x1d52b1(0x1f4)},{'pattern':/\b(science|experiment|chemical|biology|physics)\b/,'topic':_0x57f528['MbqyM']},{'pattern':/\b(history|century|ancient|war|empire|civilization)\b/,'topic':_0x1d52b1(0x1f7)},{'pattern':/\b(geography|country|capital|mountain|river|climate)\b/,'topic':_0x57f528['wlCFM']},{'pattern':/\b(grammar|sentence|paragraph|essay|writing)\b/,'topic':_0x57f528[_0x1d52b1(0x189)]},{'pattern':/\b(art|color|design|paint|draw)\b/,'topic':_0x57f528[_0x1d52b1(0x1d4)]}];return _0x43456d['forEach'](_0x3f745e=>{const _0x18b3f3=_0x1d52b1;_0x3f745e[_0x18b3f3(0x246)][_0x18b3f3(0x1c9)](_0x5d86ee)&&_0x467a64[_0x18b3f3(0x25b)](_0x3f745e[_0x18b3f3(0x1b0)]);}),_0x57f528[_0x1d52b1(0x157)](_0x467a64[_0x1d52b1(0x250)],0x0)&&_0x467a64[_0x1d52b1(0x25b)](_0x57f528[_0x1d52b1(0x15c)]),Array[_0x1d52b1(0x164)](_0x467a64);}async function generateQuizUsingAI(_0x1cd614,_0xf307a7){const _0x30a4dd=_0xdaba48,_0x6e06da={'DCSaN':_0x30a4dd(0x1ef),'wCjfq':_0x30a4dd(0x1c5),'FoFrv':_0x30a4dd(0x19b),'SFule':'[Quiz]\x20Constructed\x20system\x20prompt:','HtVxM':'system','NMAsz':_0x30a4dd(0x181),'FFKcM':_0x30a4dd(0x24f),'OsMGd':_0x30a4dd(0x173),'giDCq':function(_0x52f300,_0x5173ed,_0x5c0b68){return _0x52f300(_0x5173ed,_0x5c0b68);},'MZtws':_0x30a4dd(0x219),'DKdtw':function(_0x6fe792){return _0x6fe792();},'MofsB':function(_0x5274e3,_0x1dc2dd){return _0x5274e3(_0x1dc2dd);},'jPkHa':_0x30a4dd(0x14f),'hAWEE':_0x30a4dd(0x1ee),'ueHDb':_0x30a4dd(0x1eb),'gSIro':'[Quiz]\x20Fallback\x20generation\x20also\x20failed:','zjgnQ':'Quiz\x20generation\x20failed\x20completely.\x20Please\x20try\x20again\x20later.'};console['log'](_0x6e06da['DCSaN'],{'imageContext':_0x1cd614,'userPrompt':_0xf307a7});try{console['log'](_0x6e06da[_0x30a4dd(0x1aa)],JSON[_0x30a4dd(0x18f)](_0x1cd614));if(!window['ai'])throw new Error(_0x6e06da['FoFrv']);const _0x4586a9=_0x30a4dd(0x1f2)+JSON[_0x30a4dd(0x18f)](_0x1cd614)+_0x30a4dd(0x24e);console[_0x30a4dd(0x172)](_0x6e06da['SFule'],_0x4586a9);const _0x2334cf=[{'role':_0x6e06da[_0x30a4dd(0x152)],'content':_0x4586a9},{'role':_0x6e06da[_0x30a4dd(0x160)],'content':_0xf307a7}],_0xaa6491=document[_0x30a4dd(0x21c)](_0x6e06da[_0x30a4dd(0x23c)]);_0xaa6491['className']=_0x6e06da[_0x30a4dd(0x1b3)],chatMessages[_0x30a4dd(0x1bd)](_0xaa6491),_0x6e06da[_0x30a4dd(0x1d6)](showTypingIndicator,chatMessages,_0x6e06da[_0x30a4dd(0x1cf)]);if(!aiLanguageSession)await _0x6e06da[_0x30a4dd(0x167)](initializeLanguageSession);const _0x7a40e3=await aiLanguageSession['promptStreaming'](_0x4586a9+_0x30a4dd(0x1ae)+_0xf307a7);let _0xc3fbc5='';for await(const _0x34c030 of _0x7a40e3){_0xc3fbc5+=_0x34c030,_0xaa6491[_0x30a4dd(0x22f)]=_0xc3fbc5,chatMessages[_0x30a4dd(0x232)]=chatMessages['scrollHeight'];}_0xaa6491[_0x30a4dd(0x1df)]();let _0x5ddf18;try{_0x5ddf18=_0x6e06da[_0x30a4dd(0x225)](safeJSONParse,_0xc3fbc5),_0x6e06da[_0x30a4dd(0x1d6)](addMessage,_0x6e06da[_0x30a4dd(0x23e)],![]),addQuiz(_0x5ddf18);}catch(_0x210d95){console[_0x30a4dd(0x21a)](_0x6e06da[_0x30a4dd(0x151)],_0x210d95),addMessage(_0xc3fbc5,![]);throw _0x210d95;}_0x6e06da[_0x30a4dd(0x167)](removeTypingIndicator);}catch(_0x110897){console['error'](_0x30a4dd(0x215),_0x110897),removeTypingIndicator(),addMessage(_0x6e06da[_0x30a4dd(0x248)],![]);try{const _0x4c268c=await generateQuizWithoutAI(_0x1cd614,_0xf307a7);_0x6e06da['giDCq'](addMessage,_0x30a4dd(0x15d),![]),addQuiz(_0x4c268c);}catch(_0x129792){console[_0x30a4dd(0x21a)](_0x6e06da[_0x30a4dd(0x17c)],_0x129792),_0x6e06da[_0x30a4dd(0x1d6)](addMessage,_0x6e06da[_0x30a4dd(0x236)],![]);}}}function generateOptionsFromText(_0x20da3e){const _0x52c3e6=_0xdaba48,_0x5a2b41={'spnWm':function(_0x5e8e43,_0x30aa1a){return _0x5e8e43<_0x30aa1a;}},_0x2ceecc=_0x20da3e[_0x52c3e6(0x245)](/[.!?]+/)[_0x52c3e6(0x1fe)](_0x1fd36b=>_0x1fd36b['trim']()[_0x52c3e6(0x185)]>0x0),_0x531d33=_0x2ceecc[_0x52c3e6(0x188)](0x0,0x4)[_0x52c3e6(0x159)](_0xca1585=>_0xca1585[_0x52c3e6(0x1e3)]());while(_0x5a2b41[_0x52c3e6(0x1a5)](_0x531d33[_0x52c3e6(0x185)],0x4)){_0x531d33[_0x52c3e6(0x22d)](_0x52c3e6(0x153)+(_0x531d33[_0x52c3e6(0x185)]+0x1));}return _0x531d33;}function generateCustomQuestion(_0x401207,_0x492985){const _0x1f924e=_0xdaba48,_0x2a0433={'qjNIf':_0x1f924e(0x1d7)};return _0x401207[_0x1f924e(0x21f)]()['includes'](_0x2a0433[_0x1f924e(0x1c7)])?_0x401207:_0x1f924e(0x202)+_0x492985['split']('\x20')['slice'](0x0,0x3)['join']('\x20')+'...?';}function _0x85a6(_0x2017ed,_0x349d4f){const _0x339d70=_0x339d();return _0x85a6=function(_0x85a6da,_0x33d4fe){_0x85a6da=_0x85a6da-0x14f;let _0x1b1174=_0x339d70[_0x85a6da];return _0x1b1174;},_0x85a6(_0x2017ed,_0x349d4f);}function addMessage(_0x513bf2,_0x4b2904=![]){const _0x55c93f=_0xdaba48,_0x29af8e={'FHUrj':'div','GSqTw':_0x55c93f(0x1e2),'wxdnz':'bot-message'};console[_0x55c93f(0x172)](_0x55c93f(0x1a8)+(_0x4b2904?_0x55c93f(0x1bf):_0x55c93f(0x16e))+':',_0x513bf2);const _0x6add25=document[_0x55c93f(0x21c)](_0x29af8e[_0x55c93f(0x258)]);_0x6add25[_0x55c93f(0x1b4)]=_0x55c93f(0x1ba)+(_0x4b2904?_0x29af8e[_0x55c93f(0x20d)]:_0x29af8e[_0x55c93f(0x21d)]),_0x6add25[_0x55c93f(0x22f)]=_0x513bf2,chatMessages[_0x55c93f(0x1bd)](_0x6add25),chatMessages[_0x55c93f(0x232)]=chatMessages[_0x55c93f(0x226)];}function addQuiz(_0x4dba29){const _0x16a4b0=_0xdaba48,_0x4495bb={'KHfxi':_0x16a4b0(0x16f),'EEjRz':_0x16a4b0(0x24f),'PSHhE':_0x16a4b0(0x1b9),'GHiZk':_0x16a4b0(0x198)};console[_0x16a4b0(0x172)](_0x4495bb['KHfxi'],_0x4dba29);const _0x428d43=document[_0x16a4b0(0x21c)](_0x4495bb[_0x16a4b0(0x17d)]);_0x428d43[_0x16a4b0(0x1b4)]=_0x4495bb[_0x16a4b0(0x1e5)];const _0x307039='\x0a\x20\x20\x20\x20\x20\x20\x20\x20Title:\x20'+_0x4dba29[_0x16a4b0(0x1e1)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20Grade:\x20'+_0x4dba29[_0x16a4b0(0x1ff)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20Subject:\x20'+_0x4dba29['subject']+_0x16a4b0(0x192)+_0x4dba29['timeLimit']+_0x16a4b0(0x1cc)+_0x4dba29[_0x16a4b0(0x1b0)]+_0x16a4b0(0x155)+_0x4dba29[_0x16a4b0(0x193)]['map']((_0x3c4097,_0x1a1dbf)=>'\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1a1dbf+0x1)+'.\x20'+_0x3c4097[_0x16a4b0(0x238)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3c4097['options']?_0x3c4097[_0x16a4b0(0x163)][_0x16a4b0(0x159)]((_0x118d2a,_0x4a053d)=>_0x16a4b0(0x210)+String[_0x16a4b0(0x1cd)](0x61+_0x4a053d)+')\x20'+_0x118d2a)[_0x16a4b0(0x156)]('\x0a'):'')+_0x16a4b0(0x16c)+_0x3c4097[_0x16a4b0(0x1da)]+_0x16a4b0(0x184)+_0x3c4097[_0x16a4b0(0x171)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20')[_0x16a4b0(0x156)]('\x0a')+_0x16a4b0(0x15a),_0x2445bb=document[_0x16a4b0(0x21c)](_0x16a4b0(0x190));_0x2445bb[_0x16a4b0(0x22f)]=_0x307039,_0x428d43['appendChild'](_0x2445bb);const _0x3e7739=document[_0x16a4b0(0x21c)](_0x4495bb[_0x16a4b0(0x183)]);_0x3e7739[_0x16a4b0(0x1b4)]=_0x16a4b0(0x1e8),_0x3e7739[_0x16a4b0(0x22f)]='Copy\x20Quiz',_0x3e7739['onclick']=()=>{const _0x259d4f=_0x16a4b0;navigator['clipboard'][_0x259d4f(0x1f8)](_0x307039)[_0x259d4f(0x165)](()=>_0x3e7739[_0x259d4f(0x22f)]='Copied!')['catch'](_0x53d3bf=>console['error']('Copy\x20failed:',_0x53d3bf))['finally'](()=>setTimeout(()=>_0x3e7739['textContent']='Copy\x20Quiz',0x7d0));},_0x428d43[_0x16a4b0(0x1bd)](_0x3e7739),chatMessages[_0x16a4b0(0x1bd)](_0x428d43),chatMessages[_0x16a4b0(0x232)]=chatMessages[_0x16a4b0(0x226)];}async function captureImage(){const _0x4d066b=_0xdaba48,_0x5978af={'rKSWi':function(_0x42bd8d){return _0x42bd8d();},'SccSm':_0x4d066b(0x24f),'BngkI':_0x4d066b(0x20e),'QLeeE':'canvas','rBiKc':_0x4d066b(0x18c),'pHlZR':'image/jpeg','memEP':_0x4d066b(0x20b),'iNtpv':function(_0x1fba6b,_0x291871){return _0x1fba6b(_0x291871);},'mKHIh':_0x4d066b(0x239),'GelWz':_0x4d066b(0x18d),'Quqip':function(_0x19670c,_0x2fad8f){return _0x19670c===_0x2fad8f;},'RewZo':'text','ejfBh':'Generate\x20multiple\x20choice\x20questions\x20about\x20this\x20picture','SgcaD':_0x4d066b(0x158),'pwiBH':_0x4d066b(0x204),'UotbI':function(_0x2ff7c9,_0x2aa839,_0x7ac96a){return _0x2ff7c9(_0x2aa839,_0x7ac96a);},'WxfoV':'Sorry,\x20I\x20couldn\x27t\x20process\x20the\x20image.\x20Please\x20try\x20again.'};console[_0x4d066b(0x172)](_0x4d066b(0x257));try{const _0x3548ad=document[_0x4d066b(0x21c)](_0x5978af[_0x4d066b(0x166)]);_0x3548ad[_0x4d066b(0x1d8)]=cameraPreview[_0x4d066b(0x194)],_0x3548ad[_0x4d066b(0x235)]=cameraPreview[_0x4d066b(0x242)],_0x3548ad[_0x4d066b(0x178)]('2d')['drawImage'](cameraPreview,0x0,0x0);const _0x48f175=document['createElement'](_0x5978af['rBiKc']);_0x48f175[_0x4d066b(0x1ca)]=_0x3548ad['toDataURL'](_0x5978af['pHlZR']),_0x48f175[_0x4d066b(0x1b4)]=_0x5978af[_0x4d066b(0x23d)];const _0x3feb5b=document[_0x4d066b(0x21c)](_0x5978af['SccSm']);_0x3feb5b[_0x4d066b(0x1b4)]=_0x4d066b(0x23f),_0x3feb5b['appendChild'](_0x48f175),chatMessages['appendChild'](_0x3feb5b),stopCamera();const _0x4a66a1=await _0x5978af['iNtpv'](processImageUsingTesseract,_0x48f175);imageContext=_0x4a66a1,console['log'](_0x5978af['mKHIh'],JSON[_0x4d066b(0x18f)](imageContext,null,0x2)),addMessage(_0x5978af['GelWz'],![]);const _0x414732=['Create\x20a\x20quiz\x20about\x20'+imageContext[_0x4d066b(0x16b)][0x0]+_0x4d066b(0x243)+imageContext[_0x4d066b(0x162)],_0x5978af[_0x4d066b(0x1c0)](imageContext['type'],_0x5978af[_0x4d066b(0x186)])?_0x4d066b(0x197)+imageContext[_0x4d066b(0x162)]:_0x5978af[_0x4d066b(0x259)],_0x5978af[_0x4d066b(0x1ad)]];_0x414732[_0x4d066b(0x217)](_0x30e10d=>{const _0x547bd6=_0x4d066b,_0x43b272=document['createElement'](_0x5978af[_0x547bd6(0x191)]);_0x43b272[_0x547bd6(0x1b4)]=_0x5978af[_0x547bd6(0x1ce)],_0x43b272['textContent']=_0x30e10d,_0x43b272[_0x547bd6(0x1e0)]=()=>{const _0x37ec6d=_0x547bd6;messageInput[_0x37ec6d(0x1ac)]=_0x30e10d,_0x5978af[_0x37ec6d(0x187)](sendMessage);},chatMessages[_0x547bd6(0x1bd)](_0x43b272);});}catch(_0xa5317b){console[_0x4d066b(0x21a)](_0x5978af[_0x4d066b(0x1ab)],_0xa5317b),_0x5978af[_0x4d066b(0x1a0)](addMessage,_0x5978af[_0x4d066b(0x1f6)],![]);}}async function sendMessage(){const _0x25d382=_0xdaba48,_0x141442={'LHnGj':'[Chat]\x20Sending\x20message:','irQjH':function(_0x1c822d,_0x4dd656,_0x110e3e){return _0x1c822d(_0x4dd656,_0x110e3e);},'rSwdx':function(_0x3ad5c3,_0x27ea0a,_0x243f0d){return _0x3ad5c3(_0x27ea0a,_0x243f0d);},'kVkmQ':'I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20requirements:','wruur':function(_0x136fe1,_0x5db09e,_0x3f1320){return _0x136fe1(_0x5db09e,_0x3f1320);},'PYvDj':_0x25d382(0x22c),'uYNBZ':'Please\x20capture\x20an\x20image\x20first\x20before\x20providing\x20quiz\x20requirements.'},_0x10267f=messageInput[_0x25d382(0x1ac)]['trim']();if(!_0x10267f)return;console[_0x25d382(0x172)](_0x141442['LHnGj'],_0x10267f),addMessage(_0x10267f,!![]),messageInput[_0x25d382(0x1ac)]='';if(imageContext)try{const _0x1015ce=await _0x141442[_0x25d382(0x196)](generateQuizUsingAI,imageContext,_0x10267f);_0x141442['rSwdx'](addMessage,_0x141442[_0x25d382(0x1fd)],![]),addQuiz(_0x1015ce);}catch(_0x255e65){_0x141442[_0x25d382(0x176)](addMessage,_0x141442[_0x25d382(0x1b5)],![]);}else _0x141442[_0x25d382(0x15e)](addMessage,_0x141442[_0x25d382(0x244)],![]);}function toggleTheme(){const _0x9741e9=_0xdaba48,_0x5e48fb={'vzrTX':_0x9741e9(0x212),'AxCjw':function(_0x54ee40,_0x26e81d){return _0x54ee40===_0x26e81d;},'RqoeG':_0x9741e9(0x1f0),'tLxmG':_0x9741e9(0x221),'SuuJH':_0x9741e9(0x17a)},_0x510f6f=document['documentElement'],_0x5c8b52=_0x510f6f['getAttribute'](_0x5e48fb[_0x9741e9(0x24d)]),_0x4545e1=_0x5e48fb['AxCjw'](_0x5c8b52,_0x5e48fb[_0x9741e9(0x253)])?_0x5e48fb[_0x9741e9(0x1b6)]:_0x9741e9(0x1f0);_0x510f6f[_0x9741e9(0x1e7)](_0x5e48fb[_0x9741e9(0x24d)],_0x4545e1),localStorage['setItem'](_0x5e48fb['SuuJH'],_0x4545e1);}function _0x339d(){const _0x4ecaef=['uBdcu','5067kvvFDQ','[Quiz]\x20Error\x20in\x20quiz\x20generation\x20using\x20Gemini\x20Nano\x20AI:','LoLjf','forEach','What\x20can\x20you\x20observe\x20in\x20this\x20image?','Generating\x20quiz...','error','eIdhz','createElement','wxdnz','PKoEZ','toLowerCase','[Camera]\x20Stopping\x20camera...','light','3910OaaOmp','[OCR]\x20Worker\x20terminated','toISOString','MofsB','scrollHeight','What\x20are\x20the\x20key\x20points\x20mentioned\x20in\x20the\x20text?','[AI]\x20Image\x20recognition\x20completed.\x20Result:','[Camera]\x20Camera\x20stopped\x20and\x20container\x20hidden','[Camera]\x20Successfully\x20got\x20media\x20stream:','VKiDT','Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz.\x20Please\x20try\x20again.','push','Image\x20and\x20text\x20analysis\x20complete','textContent','yJlyh','Visual\x20content\x20detected','scrollTop','[Camera]\x20Camera\x20preview\x20started\x20and\x20container\x20displayed','iCdwa','height','zjgnQ','terminate','question','[Processing]\x20Image\x20processing\x20completed:','AkEtI','none','FFKcM','memEP','jPkHa','message\x20bot-message','sUDmn','addEventListener','videoHeight','\x20-\x20','uYNBZ','split','pattern','cameraButton','ueHDb','[Processing]\x20Error\x20during\x20image\x20processing:','Science','keypress','environment','vzrTX','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Format\x20the\x20response\x20as\x20a\x20JSON\x20quiz\x20object\x20with\x20id,\x20grade,\x20subject,\x20title,\x20timeLimit,\x20topic,\x20and\x20questions\x20array.','div','size','style','XoogK','RqoeG','PeSuR','confidence','EMoSu','[Camera]\x20Capturing\x20image...','FHUrj','ejfBh','YfstW','add','I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20image\x20and\x20requirements:','[AI]\x20Starting\x20image\x20processing...','hAWEE','HtVxM','Additional\x20option\x20','tiJUW','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20Questions:\x0a\x20\x20\x20\x20\x20\x20\x20\x20','join','XMyjC','Make\x20a\x20quiz\x20suitable\x20for\x20beginners','map','\x0a\x20\x20\x20\x20','161424kxXtPf','ztmcg','Generated\x20a\x20basic\x20quiz\x20without\x20AI\x20assistance:','rSwdx','KhwoP','NMAsz','YcQum','content','options','from','then','QLeeE','DKdtw','[OCR]\x20Starting\x20text\x20extraction...','NoYEu','cameraPreview','topics','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Type:\x20','nhSaR','Bot','[UI]\x20Adding\x20quiz\x20to\x20chat:','toString','points','log','message\x20bot-message\x20streaming','sendButton','[Camera]\x20Starting\x20camera\x20initialization...','wruur','suCNW','getContext','Art','theme','open_ended','gSIro','EEjRz','vrKNK','KJqPo','eng','user','mediaDevices','GHiZk','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Points:\x20','length','RewZo','rKSWi','slice','aCbnR','VwmbF','[AI]\x20Image\x20session\x20created:','img','Image\x20captured!\x20Please\x20provide\x20your\x20requirements\x20for\x20the\x20quiz.','createImageSession','stringify','pre','SccSm','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Time\x20Limit:\x20','questions','videoWidth','TiNCs','irQjH','Generate\x20questions\x20based\x20on\x20the\x20image\x20related\x20text\x20-\x20','button','1686625mDGIhI','[Processing]\x20No\x20OCR\x20text\x20found,\x20falling\x20back\x20to\x20image\x20analysis','window.ai\x20API\x20not\x20available','46593YZtenk','7uTnrZz','QgPkw','Language\x20Arts','UotbI','svRWP','Option\x20D','ROaVx','HzPcG','spnWm','jbPnf','MSnuK','[UI]\x20Adding\x20message:\x20','click','wCjfq','pwiBH','value','SgcaD','\x0a\x0aUser\x20request:\x20','evGCq','topic','Washington\x20Drivers\x20License\x20Test','label','OsMGd','className','PYvDj','tLxmG','cancelButton','data','quiz-container','message\x20','Option\x20A','Student\x20should\x20identify\x20main\x20points\x20from\x20the\x20text','appendChild','key','User','Quqip','1731498qluCTF','wZYAk','Error\x20accessing\x20camera:\x20','598qAwjAE','imageContext:','[AI]\x20Performing\x20image\x20recognition...','qjNIf','multiple_choice','test','src','[Quiz]\x20Error\x20generating\x20quiz:','\x20minutes\x0a\x20\x20\x20\x20\x20\x20\x20\x20Topics:\x20','fromCharCode','BngkI','MZtws','RwqSB','szksj','QlnCS','initialize','PiqRX','General\x20Knowledge','giDCq','what','width','text','type','iMiEY','Visual\x20Analysis','captureButton','messageInput','remove','onclick','title','user-message','trim','1308808nRDelc','PSHhE','[OCR]\x20Text\x20extracted:','setAttribute','copy-button','themeToggle','[AI]\x20Error\x20during\x20image\x20processing:','Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz\x20using\x20Gemini\x20Nano\x20AI.\x20Please\x20try\x20again.','loadLanguage','cameraContainer','[Quiz]\x20Failed\x20to\x20parse\x20AI\x20response:','[Quiz]\x20Starting\x20quiz\x20generation\x20with\x20Gemini\x20Nano...','dark','recognize','You\x20are\x20a\x20quiz\x20generator.\x20Create\x20a\x20quiz\x20based\x20on\x20the\x20following\x20image\x20context\x20and\x20user\x20requirements.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Image\x20context:\x20','[Processing]\x20Starting\x20image\x20OCR\x20analysis...','Mathematics','createWorker','WxfoV','History','writeText','Option\x20C','ZhCSC','General','getTracks','kVkmQ','filter','grade','pgAxG','image','What\x20is\x20the\x20significance\x20of\x20','[Camera]\x20Error\x20accessing\x20camera:','[Camera]\x20Error\x20processing\x20captured\x20image:','DHKOM','\x20Quiz','wCtfv','getElementById','[OCR]\x20Worker\x20initialized','102pDFfMt','captured-image','BTGdd','GSqTw','prompt-suggestion','kdbEq','\x20\x20\x20','[AI]\x20Windows\x20AI\x20API\x20not\x20found\x20in\x20window\x20object','data-theme'];_0x339d=function(){return _0x4ecaef;};return _0x339d();}themeToggle[_0xdaba48(0x241)](_0xdaba48(0x1a9),toggleTheme),cameraButton[_0xdaba48(0x241)](_0xdaba48(0x1a9),startCamera),captureButton['addEventListener'](_0xdaba48(0x1a9),captureImage),cancelButton['addEventListener'](_0xdaba48(0x1a9),stopCamera),sendButton['addEventListener'](_0xdaba48(0x1a9),sendMessage),messageInput[_0xdaba48(0x241)](_0xdaba48(0x24b),_0x35f7e9=>{const _0xfb9531=_0xdaba48,_0x2826a4={'VwmbF':'Enter','klHde':function(_0x563b30){return _0x563b30();}};if(_0x35f7e9[_0xfb9531(0x1be)]===_0x2826a4[_0xfb9531(0x18a)])_0x2826a4['klHde'](sendMessage);});async function generateQuizWithoutAI(_0x519ac9,_0x2e1213){const _0x32ff3f=_0xdaba48,_0x4acc16={'RwqSB':'[Quiz]\x20Generating\x20quiz...','APrgq':function(_0x40af33,_0x55ce64){return _0x40af33===_0x55ce64;},'suCNW':_0x32ff3f(0x1d9),'VKiDT':'Based\x20on\x20the\x20text,\x20what\x20is\x20the\x20main\x20topic\x20being\x20discussed?','yJlyh':_0x32ff3f(0x1c8),'PKoEZ':function(_0x455c8e,_0x9fdbd0){return _0x455c8e(_0x9fdbd0);},'dBlld':_0x32ff3f(0x227),'zAmcF':_0x32ff3f(0x218),'iCdwa':'Description\x20of\x20visual\x20elements','YfstW':function(_0x55489f,_0x206e4c,_0x2b4099){return _0x55489f(_0x206e4c,_0x2b4099);},'QlnCS':_0x32ff3f(0x1bb),'uBdcu':'Option\x20B','PeSuR':_0x32ff3f(0x1f9),'TiNCs':_0x32ff3f(0x1a2),'szksj':_0x32ff3f(0x1fb),'tiJUW':_0x32ff3f(0x1cb)};console[_0x32ff3f(0x172)](_0x4acc16[_0x32ff3f(0x1d0)],{'imageContext':_0x519ac9,'userPrompt':_0x2e1213});try{const _0x3b734b=_0x4acc16['APrgq'](_0x519ac9[_0x32ff3f(0x1da)],_0x4acc16[_0x32ff3f(0x177)]),_0x4323c7=_0x519ac9[_0x32ff3f(0x162)],_0x29b2f8=_0x519ac9[_0x32ff3f(0x16b)],_0xccb24d=[];_0x3b734b?(_0xccb24d['push']({'question':_0x4acc16[_0x32ff3f(0x22b)],'type':_0x4acc16[_0x32ff3f(0x230)],'options':_0x4acc16[_0x32ff3f(0x21e)](generateOptionsFromText,_0x4323c7),'answer':_0x32ff3f(0x1bb),'points':0x2}),_0xccb24d['push']({'question':_0x4acc16['dBlld'],'type':_0x32ff3f(0x17b),'answer':_0x32ff3f(0x1bc),'points':0x2})):_0xccb24d[_0x32ff3f(0x22d)]({'question':_0x4acc16['zAmcF'],'type':_0x32ff3f(0x17b),'answer':_0x4acc16[_0x32ff3f(0x234)],'points':0x2});_0xccb24d[_0x32ff3f(0x22d)]({'question':_0x4acc16[_0x32ff3f(0x25a)](generateCustomQuestion,_0x2e1213,_0x4323c7),'type':_0x32ff3f(0x1c8),'options':[_0x4acc16[_0x32ff3f(0x1d2)],_0x4acc16[_0x32ff3f(0x213)],_0x4acc16[_0x32ff3f(0x254)],_0x4acc16[_0x32ff3f(0x195)]],'answer':_0x32ff3f(0x1bb),'points':0x2});const _0x78b3fb={'id':Date['now']()[_0x32ff3f(0x170)](),'title':_0x29b2f8[0x0]+_0x32ff3f(0x206),'subject':_0x29b2f8[0x0],'grade':_0x4acc16[_0x32ff3f(0x1d1)],'timeLimit':0xf,'topic':_0x29b2f8['join'](',\x20'),'questions':_0xccb24d};return _0x78b3fb;}catch(_0x4f614c){console[_0x32ff3f(0x21a)](_0x4acc16[_0x32ff3f(0x154)],_0x4f614c);throw _0x4f614c;}}