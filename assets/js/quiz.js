
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x3d8fd1=_0x8434;(function(_0x2b1f8d,_0x3c4513){const _0x4ae7db=_0x8434,_0x3c29d3=_0x2b1f8d();while(!![]){try{const _0x1bdb2a=-parseInt(_0x4ae7db(0x255))/0x1+parseInt(_0x4ae7db(0x253))/0x2*(parseInt(_0x4ae7db(0x221))/0x3)+parseInt(_0x4ae7db(0x263))/0x4*(-parseInt(_0x4ae7db(0x218))/0x5)+parseInt(_0x4ae7db(0x1ca))/0x6*(parseInt(_0x4ae7db(0x289))/0x7)+parseInt(_0x4ae7db(0x1de))/0x8*(parseInt(_0x4ae7db(0x1f9))/0x9)+-parseInt(_0x4ae7db(0x1d9))/0xa+-parseInt(_0x4ae7db(0x201))/0xb*(parseInt(_0x4ae7db(0x232))/0xc);if(_0x1bdb2a===_0x3c4513)break;else _0x3c29d3['push'](_0x3c29d3['shift']());}catch(_0x1fa0ac){_0x3c29d3['push'](_0x3c29d3['shift']());}}}(_0x55c4,0xe7442));import{Logger}from'./common.js';const chatMessages=document[_0x3d8fd1(0x272)](_0x3d8fd1(0x1e2)),messageInput=document[_0x3d8fd1(0x272)](_0x3d8fd1(0x286)),sendButton=document[_0x3d8fd1(0x272)](_0x3d8fd1(0x25b)),cameraButton=document['getElementById'](_0x3d8fd1(0x213)),themeToggle=document[_0x3d8fd1(0x272)](_0x3d8fd1(0x208)),cameraContainer=document[_0x3d8fd1(0x272)](_0x3d8fd1(0x207)),cameraPreview=document[_0x3d8fd1(0x272)](_0x3d8fd1(0x2cc)),captureButton=document[_0x3d8fd1(0x272)](_0x3d8fd1(0x297)),cancelButton=document[_0x3d8fd1(0x272)](_0x3d8fd1(0x2a7));let stream=null,imageContext=null;async function startCamera(){const _0x5170ca=_0x3d8fd1,_0x4e38b9={'oRcKF':_0x5170ca(0x293),'jbnJH':_0x5170ca(0x2d2),'XVluo':_0x5170ca(0x2a2),'WmuUT':'[Camera]\x20Error\x20accessing\x20camera:','AxKcB':function(_0x14cfbf,_0x4a6ce2){return _0x14cfbf+_0x4a6ce2;}};console[_0x5170ca(0x212)](_0x5170ca(0x23d));try{const _0x3315ef=_0x4e38b9[_0x5170ca(0x29b)][_0x5170ca(0x25f)]('|');let _0x16fcf3=0x0;while(!![]){switch(_0x3315ef[_0x16fcf3++]){case'0':stream=await navigator['mediaDevices'][_0x5170ca(0x21e)]({'video':{'facingMode':_0x4e38b9['jbnJH']}});continue;case'1':console[_0x5170ca(0x212)](_0x5170ca(0x24a),stream);continue;case'2':cameraContainer[_0x5170ca(0x2ad)][_0x5170ca(0x23f)]=_0x5170ca(0x220);continue;case'3':cameraPreview[_0x5170ca(0x288)]=stream;continue;case'4':console[_0x5170ca(0x212)](_0x4e38b9[_0x5170ca(0x1f4)]);continue;}break;}}catch(_0x321d25){console[_0x5170ca(0x2b2)](_0x4e38b9['WmuUT'],_0x321d25),addMessage(_0x4e38b9[_0x5170ca(0x2ba)](_0x5170ca(0x2af),_0x321d25[_0x5170ca(0x214)]));}}function stopCamera(){const _0x589b72=_0x3d8fd1,_0x41be4f={'WOWoL':_0x589b72(0x26c),'rkCje':_0x589b72(0x2bd),'CIMEp':_0x589b72(0x1cd)};console[_0x589b72(0x212)](_0x41be4f[_0x589b72(0x290)]),stream&&(stream['getTracks']()[_0x589b72(0x1d8)](_0x22e00a=>{const _0x365010=_0x589b72;console[_0x365010(0x212)](_0x41be4f[_0x365010(0x205)],_0x22e00a[_0x365010(0x1e0)]),_0x22e00a['stop']();}),stream=null),cameraContainer[_0x589b72(0x2ad)][_0x589b72(0x23f)]=_0x41be4f[_0x589b72(0x1d4)],console[_0x589b72(0x212)](_0x589b72(0x22f));}async function processImageUsingWindowAI(_0x35288c){const _0x27beb7=_0x3d8fd1,_0x39a7bb={'tfdaP':_0x27beb7(0x1ce),'ihPjM':_0x27beb7(0x27a),'hlOzo':'[AI]\x20Performing\x20image\x20recognition...','BnqwM':_0x27beb7(0x1d1)};console[_0x27beb7(0x212)](_0x27beb7(0x28e),_0x35288c);if(!window['ai']){console[_0x27beb7(0x2b2)](_0x27beb7(0x1cc));throw new Error(_0x27beb7(0x1ef));}try{console[_0x27beb7(0x212)](_0x39a7bb[_0x27beb7(0x2ac)]);const _0x43142c=await window['ai'][_0x27beb7(0x2d4)]();console[_0x27beb7(0x212)](_0x39a7bb[_0x27beb7(0x222)],_0x43142c),console[_0x27beb7(0x212)](_0x39a7bb[_0x27beb7(0x2c2)]);const _0x43ee16=await _0x43142c[_0x27beb7(0x23c)](_0x35288c);return console[_0x27beb7(0x212)](_0x27beb7(0x27e),_0x43ee16),_0x43ee16;}catch(_0x919c8c){console['error'](_0x39a7bb['BnqwM'],_0x919c8c);throw _0x919c8c;}}async function processImageUsingTesseract(_0x436ab9){const _0x115dfa=_0x3d8fd1,_0x405bd2={'uCQIj':_0x115dfa(0x1f6),'gWYZG':function(_0x2ab9df,_0x67ced4,_0x21a31f){return _0x2ab9df(_0x67ced4,_0x21a31f);},'FfSHI':_0x115dfa(0x294),'WcRre':function(_0x403db7,_0x367149){return _0x403db7>_0x367149;},'yNTmN':_0x115dfa(0x235),'SYEGH':_0x115dfa(0x22a),'SGhZn':_0x115dfa(0x251),'Xsmlv':'image','yMqbm':_0x115dfa(0x243),'VcClA':'Visual\x20Analysis','njCNT':_0x115dfa(0x269),'moTMp':_0x115dfa(0x2cf)};console[_0x115dfa(0x212)](_0x405bd2['uCQIj']),_0x405bd2[_0x115dfa(0x200)](addMessage,_0x405bd2[_0x115dfa(0x1ea)],![]);try{const _0x23bc04=await extractTextFromImage(_0x436ab9);return console[_0x115dfa(0x212)](_0x115dfa(0x2a9),_0x23bc04),_0x23bc04[_0x115dfa(0x235)]&&_0x405bd2['WcRre'](_0x23bc04[_0x115dfa(0x235)][_0x115dfa(0x233)]()[_0x115dfa(0x281)],0x0)?{'type':_0x405bd2[_0x115dfa(0x24b)],'content':_0x405bd2['SYEGH'],'confidence':_0x23bc04['confidence'],'topics':generateTopics(_0x23bc04['text'])}:(console['log'](_0x405bd2[_0x115dfa(0x24e)]),{'type':_0x405bd2[_0x115dfa(0x237)],'content':_0x405bd2['yMqbm'],'topics':[_0x405bd2[_0x115dfa(0x25c)],_0x405bd2[_0x115dfa(0x267)]],'features':{'timestamp':new Date()[_0x115dfa(0x2ab)](),'dimensions':{'width':_0x436ab9[_0x115dfa(0x271)],'height':_0x436ab9[_0x115dfa(0x2b1)]}}});}catch(_0x2ac037){console['error'](_0x405bd2[_0x115dfa(0x1d6)],_0x2ac037);throw _0x2ac037;}}async function extractTextFromImage(_0x410ced){const _0x1e015b=_0x3d8fd1,_0x29802b={'HpHUg':_0x1e015b(0x1f1),'VhYZu':'[OCR]\x20Text\x20extracted:','HBZCn':_0x1e015b(0x25a),'DIcHc':function(_0x2366f7,_0x485e06){return _0x2366f7(_0x485e06);},'sogAP':_0x1e015b(0x1df),'sbBlN':'[OCR]\x20Error\x20in\x20text\x20extraction:'};console[_0x1e015b(0x212)](_0x29802b[_0x1e015b(0x256)]);const _0x53ef3e=_0x1e015b(0x299);try{const _0x535995=await Tesseract[_0x1e015b(0x224)]();await _0x535995[_0x1e015b(0x23a)](),await _0x535995[_0x1e015b(0x1c9)](_0x53ef3e),await _0x535995[_0x1e015b(0x283)](_0x53ef3e),console[_0x1e015b(0x212)](_0x1e015b(0x2c0));const _0x4829bc=await _0x535995[_0x1e015b(0x23c)](_0x410ced);console['log'](_0x29802b['VhYZu'],_0x4829bc[_0x1e015b(0x261)][_0x1e015b(0x235)]),await _0x535995[_0x1e015b(0x2aa)](),console['log'](_0x29802b[_0x1e015b(0x225)]);const _0x1c0297={'timestamp':new Date()[_0x1e015b(0x2ab)](),'imageSize':{'width':_0x410ced[_0x1e015b(0x271)],'height':_0x410ced[_0x1e015b(0x2b1)]},'extractedText':_0x4829bc[_0x1e015b(0x261)][_0x1e015b(0x235)],'confidenceScore':_0x4829bc['data'][_0x1e015b(0x1c8)],'suggestedTopics':_0x29802b[_0x1e015b(0x2a4)](generateTopics,_0x4829bc[_0x1e015b(0x261)]['text'])};return{'description':_0x29802b['sogAP'],'metadata':_0x1c0297,'text':_0x4829bc[_0x1e015b(0x261)][_0x1e015b(0x235)],'confidence':_0x4829bc[_0x1e015b(0x261)][_0x1e015b(0x1c8)]};}catch(_0x231cd2){return console[_0x1e015b(0x2b2)](_0x29802b['sbBlN'],_0x231cd2),{'text':'','confidence':0x0};}}function _0x8434(_0x31c662,_0xad5075){const _0x55c4a8=_0x55c4();return _0x8434=function(_0x84349c,_0xc0c626){_0x84349c=_0x84349c-0x1c4;let _0xbe8c1c=_0x55c4a8[_0x84349c];return _0xbe8c1c;},_0x8434(_0x31c662,_0xad5075);}function generateTopics(_0x599267){const _0x45f641=_0x3d8fd1,_0x572fd1={'xnweT':_0x45f641(0x23e),'PMpPV':_0x45f641(0x1d7),'qAhyK':_0x45f641(0x209),'ySBGM':_0x45f641(0x2be),'dAICA':function(_0x3a3e55,_0x42ff8a){return _0x3a3e55===_0x42ff8a;},'fzWoB':_0x45f641(0x269)},_0x50c24f=new Set(),_0x5c471f=_0x599267[_0x45f641(0x26e)](),_0xdd0801=[{'pattern':/\b(math|equation|calculate|formula|number)\b/,'topic':_0x572fd1['xnweT']},{'pattern':/\b(science|experiment|chemical|biology|physics)\b/,'topic':_0x45f641(0x29a)},{'pattern':/\b(history|century|ancient|war|empire|civilization)\b/,'topic':_0x572fd1['PMpPV']},{'pattern':/\b(geography|country|capital|mountain|river|climate)\b/,'topic':_0x572fd1[_0x45f641(0x2b8)]},{'pattern':/\b(grammar|sentence|paragraph|essay|writing)\b/,'topic':'Language\x20Arts'},{'pattern':/\b(art|color|design|paint|draw)\b/,'topic':_0x572fd1[_0x45f641(0x2c6)]}];return _0xdd0801[_0x45f641(0x1d8)](_0x33f105=>{const _0x3c1a09=_0x45f641;_0x33f105[_0x3c1a09(0x20c)][_0x3c1a09(0x282)](_0x5c471f)&&_0x50c24f[_0x3c1a09(0x1fd)](_0x33f105[_0x3c1a09(0x2cd)]);}),_0x572fd1['dAICA'](_0x50c24f['size'],0x0)&&_0x50c24f[_0x45f641(0x1fd)](_0x572fd1['fzWoB']),Array[_0x45f641(0x2d0)](_0x50c24f);}async function generateQuizUsingAI(_0x1a1c7f,_0x5369af){const _0xe7a000=_0x3d8fd1,_0x317cfc={'ODOcf':_0xe7a000(0x22e),'jtmEX':_0xe7a000(0x1c4),'PySMb':_0xe7a000(0x20a),'IcncH':'system','IiIqs':_0xe7a000(0x2c7),'BGOIt':_0xe7a000(0x247),'OFofG':_0xe7a000(0x245),'xVnrO':function(_0x355de7,_0x2740f8,_0x561e14){return _0x355de7(_0x2740f8,_0x561e14);},'mSQpb':_0xe7a000(0x227),'fInYY':function(_0x2d77ac){return _0x2d77ac();},'Occpd':function(_0x160f6b,_0x5b38fd){return _0x160f6b(_0x5b38fd);},'DreNK':_0xe7a000(0x20b),'SzOXz':_0xe7a000(0x229),'tcWra':function(_0x30bd33){return _0x30bd33();},'FXmAb':function(_0x14cfa5,_0x5c5a20,_0x2ba45a){return _0x14cfa5(_0x5c5a20,_0x2ba45a);},'JQjYP':'Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz\x20using\x20Gemini\x20Nano\x20AI.\x20Please\x20try\x20again.','QceGS':function(_0x2db740,_0x41558f,_0x4e0b4c){return _0x2db740(_0x41558f,_0x4e0b4c);},'DHvez':function(_0x53db99,_0x2745ac,_0x47e493){return _0x53db99(_0x2745ac,_0x47e493);},'uhwCe':_0xe7a000(0x226),'qbeJY':function(_0x120195,_0x61b6ba,_0x49fe7b){return _0x120195(_0x61b6ba,_0x49fe7b);}};console[_0xe7a000(0x212)](_0xe7a000(0x1cb),{'imageContext':_0x1a1c7f,'userPrompt':_0x5369af});try{console[_0xe7a000(0x212)](_0x317cfc[_0xe7a000(0x2bf)],JSON[_0xe7a000(0x278)](_0x1a1c7f));if(!window['ai'])throw new Error(_0x317cfc['jtmEX']);const _0x5eb871=_0xe7a000(0x2d1)+JSON[_0xe7a000(0x278)](_0x1a1c7f)+_0xe7a000(0x29e);console[_0xe7a000(0x212)](_0x317cfc[_0xe7a000(0x223)],_0x5eb871);const _0x236939=[{'role':_0x317cfc[_0xe7a000(0x276)],'content':_0x5eb871},{'role':_0x317cfc[_0xe7a000(0x22c)],'content':_0x5369af}],_0x591182=document[_0xe7a000(0x230)](_0x317cfc[_0xe7a000(0x24d)]);_0x591182['className']=_0x317cfc[_0xe7a000(0x274)],chatMessages['appendChild'](_0x591182),_0x317cfc[_0xe7a000(0x206)](showTypingIndicator,chatMessages,_0x317cfc[_0xe7a000(0x21b)]);if(!aiLanguageSession)await _0x317cfc['fInYY'](initializeLanguageSession);const _0x54c7d6=await aiLanguageSession['promptStreaming'](_0x5eb871+_0xe7a000(0x215)+_0x5369af);let _0x44d736='';for await(const _0x3f792a of _0x54c7d6){_0x44d736+=_0x3f792a,_0x591182[_0xe7a000(0x27d)]=_0x44d736,chatMessages[_0xe7a000(0x2a8)]=chatMessages[_0xe7a000(0x1f8)];}_0x591182[_0xe7a000(0x265)]();let _0x42a755;try{_0x42a755=_0x317cfc[_0xe7a000(0x2b6)](safeJSONParse,_0x44d736),_0x317cfc[_0xe7a000(0x206)](addMessage,_0x317cfc[_0xe7a000(0x1c7)],![]),addQuiz(_0x42a755);}catch(_0x4a9007){console[_0xe7a000(0x2b2)](_0x317cfc['SzOXz'],_0x4a9007),addMessage(_0x44d736,![]);throw _0x4a9007;}_0x317cfc[_0xe7a000(0x210)](removeTypingIndicator);}catch(_0x376c5e){console[_0xe7a000(0x2b2)]('[Quiz]\x20Error\x20in\x20quiz\x20generation\x20using\x20Gemini\x20Nano\x20AI:',_0x376c5e),_0x317cfc[_0xe7a000(0x244)](removeTypingIndicator),_0x317cfc[_0xe7a000(0x2b5)](addMessage,_0x317cfc[_0xe7a000(0x1ed)],![]);try{const _0x450940=await _0x317cfc[_0xe7a000(0x228)](generateQuizWithoutAI,_0x1a1c7f,_0x5369af);_0x317cfc[_0xe7a000(0x1ee)](addMessage,_0x317cfc[_0xe7a000(0x264)],![]),_0x317cfc[_0xe7a000(0x2b6)](addQuiz,_0x450940);}catch(_0x20643e){console[_0xe7a000(0x2b2)]('[Quiz]\x20Fallback\x20generation\x20also\x20failed:',_0x20643e),_0x317cfc[_0xe7a000(0x22d)](addMessage,_0xe7a000(0x2ae),![]);}}}function generateOptionsFromText(_0x56eb65){const _0x4415d2=_0x3d8fd1,_0x8d2381={'oSCck':function(_0x5c41be,_0x47cd39){return _0x5c41be+_0x47cd39;},'ajYMB':'Additional\x20option\x20'},_0x12fc2a=_0x56eb65[_0x4415d2(0x25f)](/[.!?]+/)[_0x4415d2(0x240)](_0x3e8429=>_0x3e8429[_0x4415d2(0x233)]()['length']>0x0),_0xc2e5e2=_0x12fc2a[_0x4415d2(0x292)](0x0,0x4)[_0x4415d2(0x1f3)](_0xb8fef2=>_0xb8fef2[_0x4415d2(0x233)]());while(_0xc2e5e2[_0x4415d2(0x281)]<0x4){_0xc2e5e2['push'](_0x8d2381[_0x4415d2(0x204)](_0x8d2381['ajYMB'],_0x8d2381['oSCck'](_0xc2e5e2[_0x4415d2(0x281)],0x1)));}return _0xc2e5e2;}function generateCustomQuestion(_0xbfc3f4,_0xcd61be){const _0x370343=_0x3d8fd1,_0x4d0c64={'GXIfW':_0x370343(0x20d)};return _0xbfc3f4[_0x370343(0x26e)]()['includes'](_0x4d0c64[_0x370343(0x1c5)])?_0xbfc3f4:_0x370343(0x219)+_0xcd61be['split']('\x20')[_0x370343(0x292)](0x0,0x3)[_0x370343(0x273)]('\x20')+_0x370343(0x26a);}function addMessage(_0x14ea99,_0x4dbf11=![]){const _0x360f67=_0x3d8fd1,_0x2392c0={'QRIop':_0x360f67(0x1e1),'LbJxU':_0x360f67(0x231),'WhWFJ':_0x360f67(0x2ce)};console[_0x360f67(0x212)]('[UI]\x20Adding\x20message:\x20'+(_0x4dbf11?_0x2392c0[_0x360f67(0x2b3)]:_0x2392c0[_0x360f67(0x1cf)])+':',_0x14ea99);const _0x24f831=document[_0x360f67(0x230)](_0x360f67(0x247));_0x24f831[_0x360f67(0x257)]='message\x20'+(_0x4dbf11?_0x360f67(0x239):_0x2392c0['WhWFJ']),_0x24f831[_0x360f67(0x27d)]=_0x14ea99,chatMessages[_0x360f67(0x2a0)](_0x24f831),chatMessages['scrollTop']=chatMessages[_0x360f67(0x1f8)];}function addQuiz(_0x50319d){const _0xcf4c94=_0x3d8fd1,_0x466993={'MBSKe':'[UI]\x20Adding\x20quiz\x20to\x20chat:','rFChx':_0xcf4c94(0x247),'QMJxr':_0xcf4c94(0x1fa),'rcFnU':'button','XHcRC':_0xcf4c94(0x2c5),'cAPxT':_0xcf4c94(0x1fb)};console[_0xcf4c94(0x212)](_0x466993[_0xcf4c94(0x20e)],_0x50319d);const _0x47519d=document['createElement'](_0x466993[_0xcf4c94(0x26f)]);_0x47519d[_0xcf4c94(0x257)]=_0x466993[_0xcf4c94(0x26d)];const _0xe3c36c='\x0a\x20\x20\x20\x20\x20\x20\x20\x20Title:\x20'+_0x50319d[_0xcf4c94(0x266)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20Grade:\x20'+_0x50319d['grade']+_0xcf4c94(0x1d2)+_0x50319d[_0xcf4c94(0x1c6)]+_0xcf4c94(0x27f)+_0x50319d['timeLimit']+'\x20minutes\x0a\x20\x20\x20\x20\x20\x20\x20\x20Topics:\x20'+_0x50319d[_0xcf4c94(0x2cd)]+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20Questions:\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x50319d[_0xcf4c94(0x295)][_0xcf4c94(0x1f3)]((_0x4e4010,_0x1554d2)=>_0xcf4c94(0x258)+(_0x1554d2+0x1)+'.\x20'+_0x4e4010[_0xcf4c94(0x24f)]+_0xcf4c94(0x258)+(_0x4e4010[_0xcf4c94(0x242)]?_0x4e4010['options']['map']((_0x5cdd6a,_0xa24002)=>_0xcf4c94(0x27b)+String['fromCharCode'](0x61+_0xa24002)+')\x20'+_0x5cdd6a)[_0xcf4c94(0x273)]('\x0a'):'')+_0xcf4c94(0x287)+_0x4e4010[_0xcf4c94(0x262)]+_0xcf4c94(0x2d3)+_0x4e4010['points']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20')[_0xcf4c94(0x273)]('\x0a')+'\x0a\x20\x20\x20\x20',_0x23d4cc=document['createElement'](_0xcf4c94(0x238));_0x23d4cc[_0xcf4c94(0x27d)]=_0xe3c36c,_0x47519d[_0xcf4c94(0x2a0)](_0x23d4cc);const _0x1e1635=document['createElement'](_0x466993[_0xcf4c94(0x2a6)]);_0x1e1635[_0xcf4c94(0x257)]=_0x466993[_0xcf4c94(0x296)],_0x1e1635['textContent']=_0x466993[_0xcf4c94(0x203)],_0x1e1635[_0xcf4c94(0x279)]=()=>{const _0x263b3a=_0xcf4c94;navigator[_0x263b3a(0x1ff)][_0x263b3a(0x2b9)](_0xe3c36c)[_0x263b3a(0x2cb)](()=>_0x1e1635[_0x263b3a(0x27d)]=_0x263b3a(0x2c1))[_0x263b3a(0x277)](_0x4a2b4e=>console[_0x263b3a(0x2b2)](_0x263b3a(0x246),_0x4a2b4e))['finally'](()=>setTimeout(()=>_0x1e1635['textContent']=_0x263b3a(0x1fb),0x7d0));},_0x47519d[_0xcf4c94(0x2a0)](_0x1e1635),chatMessages['appendChild'](_0x47519d),chatMessages[_0xcf4c94(0x2a8)]=chatMessages[_0xcf4c94(0x1f8)];}async function captureImage(){const _0x2ca358=_0x3d8fd1,_0x462378={'oyudq':_0x2ca358(0x247),'lZdMT':_0x2ca358(0x2a5),'UQWVi':_0x2ca358(0x1db),'fuPxT':_0x2ca358(0x1d5),'YOWXU':_0x2ca358(0x285),'YbEct':_0x2ca358(0x1da),'KwuzT':_0x2ca358(0x270),'UPhVF':function(_0x4c99e8){return _0x4c99e8();},'TIUDB':function(_0x550c7b,_0x919044){return _0x550c7b(_0x919044);},'xVHzV':_0x2ca358(0x1d0),'gKJuN':function(_0x1d8578,_0x2ee32d,_0x43bd48){return _0x1d8578(_0x2ee32d,_0x43bd48);},'WqOgX':_0x2ca358(0x202),'PmMME':function(_0x190d46,_0x18968a){return _0x190d46===_0x18968a;},'yDKzR':_0x2ca358(0x235),'JEcft':_0x2ca358(0x241),'ecMhP':_0x2ca358(0x25e),'jvVfg':_0x2ca358(0x1f0)};console[_0x2ca358(0x212)](_0x462378[_0x2ca358(0x1e6)]);try{const _0x4ebc42=document[_0x2ca358(0x230)](_0x462378[_0x2ca358(0x22b)]);_0x4ebc42[_0x2ca358(0x271)]=cameraPreview['videoWidth'],_0x4ebc42[_0x2ca358(0x2b1)]=cameraPreview['videoHeight'],_0x4ebc42[_0x2ca358(0x1e8)]('2d')['drawImage'](cameraPreview,0x0,0x0);const _0x1f33c7=document[_0x2ca358(0x230)](_0x462378[_0x2ca358(0x2b7)]);_0x1f33c7[_0x2ca358(0x1ec)]=_0x4ebc42[_0x2ca358(0x1fe)](_0x462378[_0x2ca358(0x280)]),_0x1f33c7[_0x2ca358(0x257)]=_0x462378[_0x2ca358(0x2c3)];const _0x308292=document[_0x2ca358(0x230)](_0x462378[_0x2ca358(0x1e4)]);_0x308292[_0x2ca358(0x257)]='message\x20bot-message',_0x308292[_0x2ca358(0x2a0)](_0x1f33c7),chatMessages[_0x2ca358(0x2a0)](_0x308292),_0x462378[_0x2ca358(0x298)](stopCamera);const _0x2f821d=await _0x462378['TIUDB'](processImageUsingTesseract,_0x1f33c7);imageContext=_0x2f821d,console[_0x2ca358(0x212)](_0x462378['xVHzV'],JSON[_0x2ca358(0x278)](imageContext,null,0x2)),_0x462378['gKJuN'](addMessage,_0x462378[_0x2ca358(0x2a1)],![]);const _0x2db2e2=['Create\x20a\x20quiz\x20about\x20'+imageContext[_0x2ca358(0x26b)][0x0]+_0x2ca358(0x2c8)+imageContext[_0x2ca358(0x1f5)],_0x462378[_0x2ca358(0x2b4)](imageContext['type'],_0x462378[_0x2ca358(0x2ca)])?_0x2ca358(0x29d)+imageContext[_0x2ca358(0x1f5)]:_0x462378['JEcft'],_0x462378[_0x2ca358(0x1dc)]];_0x2db2e2['forEach'](_0x4ae38c=>{const _0x503fdc=_0x2ca358,_0x1d5e68={'ELYVx':function(_0x59d6f8){return _0x59d6f8();}},_0x183342=document[_0x503fdc(0x230)](_0x462378[_0x503fdc(0x1e4)]);_0x183342['className']=_0x462378[_0x503fdc(0x27c)],_0x183342[_0x503fdc(0x27d)]=_0x4ae38c,_0x183342[_0x503fdc(0x279)]=()=>{const _0x1bf737=_0x503fdc;messageInput[_0x1bf737(0x24c)]=_0x4ae38c,_0x1d5e68[_0x1bf737(0x21f)](sendMessage);},chatMessages[_0x503fdc(0x2a0)](_0x183342);});}catch(_0x25a1bb){console[_0x2ca358(0x2b2)](_0x2ca358(0x21a),_0x25a1bb),addMessage(_0x462378[_0x2ca358(0x29c)],![]);}}async function sendMessage(){const _0x1c6a25=_0x3d8fd1,_0x3fe09f={'MXAEN':_0x1c6a25(0x21d),'BVKsJ':function(_0x5a3d86,_0xaf7281,_0x54765a){return _0x5a3d86(_0xaf7281,_0x54765a);},'LlDyD':function(_0x371ae4,_0x5a2a5f,_0x5c5979){return _0x371ae4(_0x5a2a5f,_0x5c5979);},'hKRCa':function(_0x407925,_0x4ee51a){return _0x407925(_0x4ee51a);},'MxXpt':function(_0x4f01c2,_0x13a638,_0x26bd4a){return _0x4f01c2(_0x13a638,_0x26bd4a);},'kuSuA':'Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz.\x20Please\x20try\x20again.','wtRIZ':function(_0x954fcf,_0xdbced,_0x53af89){return _0x954fcf(_0xdbced,_0x53af89);}},_0x34f39c=messageInput[_0x1c6a25(0x24c)]['trim']();if(!_0x34f39c)return;console['log'](_0x3fe09f[_0x1c6a25(0x250)],_0x34f39c),_0x3fe09f['BVKsJ'](addMessage,_0x34f39c,!![]),messageInput[_0x1c6a25(0x24c)]='';if(imageContext)try{const _0x33a0a5=await _0x3fe09f[_0x1c6a25(0x29f)](generateQuizUsingAI,imageContext,_0x34f39c);_0x3fe09f[_0x1c6a25(0x2c9)](addMessage,'I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20requirements:',![]),_0x3fe09f['hKRCa'](addQuiz,_0x33a0a5);}catch(_0x549c42){_0x3fe09f['MxXpt'](addMessage,_0x3fe09f['kuSuA'],![]);}else _0x3fe09f[_0x1c6a25(0x236)](addMessage,'Please\x20capture\x20an\x20image\x20first\x20before\x20providing\x20quiz\x20requirements.',![]);}function toggleTheme(){const _0x41f9a7=_0x3d8fd1,_0x3800b1={'bBOTc':_0x41f9a7(0x28b),'uWWsH':_0x41f9a7(0x2bb),'xToTB':'light','BHdMA':'theme'},_0x73d1f9=document[_0x41f9a7(0x1e9)],_0x57cb8e=_0x73d1f9[_0x41f9a7(0x1d3)](_0x3800b1['bBOTc']),_0x520f50=_0x57cb8e===_0x3800b1[_0x41f9a7(0x217)]?_0x3800b1[_0x41f9a7(0x1dd)]:_0x3800b1['uWWsH'];_0x73d1f9['setAttribute'](_0x3800b1['bBOTc'],_0x520f50),localStorage['setItem'](_0x3800b1[_0x41f9a7(0x2bc)],_0x520f50);}themeToggle['addEventListener'](_0x3d8fd1(0x291),toggleTheme),cameraButton[_0x3d8fd1(0x23b)](_0x3d8fd1(0x291),startCamera),captureButton[_0x3d8fd1(0x23b)]('click',captureImage),cancelButton[_0x3d8fd1(0x23b)](_0x3d8fd1(0x291),stopCamera),sendButton[_0x3d8fd1(0x23b)]('click',sendMessage),messageInput[_0x3d8fd1(0x23b)]('keypress',_0x50a143=>{const _0x1ddb51=_0x3d8fd1,_0x3a1c27={'GHTHH':function(_0x432398,_0x4ce2d5){return _0x432398===_0x4ce2d5;},'dLiig':'Enter','cYtaH':function(_0x17dee5){return _0x17dee5();}};if(_0x3a1c27['GHTHH'](_0x50a143[_0x1ddb51(0x259)],_0x3a1c27[_0x1ddb51(0x1fc)]))_0x3a1c27['cYtaH'](sendMessage);});async function generateQuizWithoutAI(_0x4fa45e,_0x1f6a77){const _0x5bbd19=_0x3d8fd1,_0x2ed7dc={'vXEbR':_0x5bbd19(0x1f7),'DKKcC':function(_0x493f5d,_0x1951fe){return _0x493f5d===_0x1951fe;},'lUknB':_0x5bbd19(0x235),'nSaNW':_0x5bbd19(0x1e5),'kafQx':function(_0x528a00,_0xe1124b){return _0x528a00(_0xe1124b);},'wKaOu':_0x5bbd19(0x254),'IaKpj':_0x5bbd19(0x248),'PlWhT':_0x5bbd19(0x2a3),'xicbH':_0x5bbd19(0x1f2),'DhbXc':_0x5bbd19(0x1e3),'MhoXk':function(_0x1a3320,_0x4c19c7,_0x596658){return _0x1a3320(_0x4c19c7,_0x596658);},'UYAIH':_0x5bbd19(0x284),'zFzsZ':_0x5bbd19(0x211),'YKhua':_0x5bbd19(0x268),'LTEcZ':'[Quiz]\x20Error\x20generating\x20quiz:'};console[_0x5bbd19(0x212)](_0x2ed7dc[_0x5bbd19(0x28f)],{'imageContext':_0x4fa45e,'userPrompt':_0x1f6a77});try{const _0x19ed73=_0x2ed7dc[_0x5bbd19(0x2b0)](_0x4fa45e[_0x5bbd19(0x262)],_0x2ed7dc[_0x5bbd19(0x1e7)]),_0x49b0d7=_0x4fa45e[_0x5bbd19(0x1f5)],_0x3924da=_0x4fa45e[_0x5bbd19(0x26b)],_0x4d595f=[];_0x19ed73?(_0x4d595f[_0x5bbd19(0x252)]({'question':_0x5bbd19(0x216),'type':_0x2ed7dc[_0x5bbd19(0x28d)],'options':_0x2ed7dc[_0x5bbd19(0x28a)](generateOptionsFromText,_0x49b0d7),'answer':_0x2ed7dc[_0x5bbd19(0x275)],'points':0x2}),_0x4d595f[_0x5bbd19(0x252)]({'question':_0x2ed7dc[_0x5bbd19(0x1eb)],'type':_0x2ed7dc[_0x5bbd19(0x25d)],'answer':_0x2ed7dc[_0x5bbd19(0x260)],'points':0x2})):_0x4d595f[_0x5bbd19(0x252)]({'question':'What\x20can\x20you\x20observe\x20in\x20this\x20image?','type':_0x2ed7dc['PlWhT'],'answer':_0x2ed7dc[_0x5bbd19(0x20f)],'points':0x2});_0x4d595f['push']({'question':_0x2ed7dc[_0x5bbd19(0x234)](generateCustomQuestion,_0x1f6a77,_0x49b0d7),'type':_0x5bbd19(0x1e5),'options':[_0x2ed7dc[_0x5bbd19(0x275)],_0x2ed7dc['UYAIH'],_0x2ed7dc[_0x5bbd19(0x2c4)],'Option\x20D'],'answer':_0x2ed7dc[_0x5bbd19(0x275)],'points':0x2});const _0x1abc67={'id':Date['now']()[_0x5bbd19(0x21c)](),'title':_0x3924da[0x0]+_0x5bbd19(0x249),'subject':_0x3924da[0x0],'grade':_0x2ed7dc['YKhua'],'timeLimit':0xf,'topic':_0x3924da['join'](',\x20'),'questions':_0x4d595f};return _0x1abc67;}catch(_0xdd9cb7){console[_0x5bbd19(0x2b2)](_0x2ed7dc[_0x5bbd19(0x28c)],_0xdd9cb7);throw _0xdd9cb7;}}function _0x55c4(){const _0x26aff9=['QceGS','[Quiz]\x20Failed\x20to\x20parse\x20AI\x20response:','Washington\x20Drivers\x20License\x20Test','fuPxT','IiIqs','qbeJY','imageContext:','[Camera]\x20Camera\x20stopped\x20and\x20container\x20hidden','createElement','Bot','7092XEgcLo','trim','MhoXk','text','wtRIZ','Xsmlv','pre','user-message','load','addEventListener','recognize','[Camera]\x20Starting\x20camera\x20initialization...','Mathematics','display','filter','Generate\x20multiple\x20choice\x20questions\x20about\x20this\x20picture','options','Visual\x20content\x20detected','tcWra','message\x20bot-message\x20streaming','Copy\x20failed:','div','What\x20are\x20the\x20key\x20points\x20mentioned\x20in\x20the\x20text?','\x20Quiz','[Camera]\x20Successfully\x20got\x20media\x20stream:','yNTmN','value','BGOIt','SGhZn','question','MXAEN','[Processing]\x20No\x20OCR\x20text\x20found,\x20falling\x20back\x20to\x20image\x20analysis','push','4MdCZnz','Option\x20A','1057526roWLNp','HpHUg','className','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','key','[OCR]\x20Worker\x20terminated','sendButton','VcClA','PlWhT','Make\x20a\x20quiz\x20suitable\x20for\x20beginners','split','xicbH','data','type','648104FAdIEE','uhwCe','remove','title','njCNT','General','General\x20Knowledge','...?','topics','[Camera]\x20Stopping\x20track:','QMJxr','toLowerCase','rFChx','captured-image','width','getElementById','join','OFofG','wKaOu','IcncH','catch','stringify','onclick','[AI]\x20Image\x20session\x20created:','\x20\x20\x20','lZdMT','textContent','[AI]\x20Image\x20recognition\x20completed.\x20Result:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Time\x20Limit:\x20','YbEct','length','test','initialize','Option\x20B','img','messageInput','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Type:\x20','srcObject','36330yAgHfj','kafQx','data-theme','LTEcZ','nSaNW','[AI]\x20Starting\x20image\x20processing...','vXEbR','rkCje','click','slice','0|1|3|2|4','Processing\x20image...','questions','XHcRC','captureButton','UPhVF','eng','Science','oRcKF','jvVfg','Generate\x20questions\x20based\x20on\x20the\x20image\x20related\x20text\x20-\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Format\x20the\x20response\x20as\x20a\x20JSON\x20quiz\x20object\x20with\x20id,\x20grade,\x20subject,\x20title,\x20timeLimit,\x20topic,\x20and\x20questions\x20array.','BVKsJ','appendChild','WqOgX','[Camera]\x20Camera\x20preview\x20started\x20and\x20container\x20displayed','open_ended','DIcHc','prompt-suggestion','rcFnU','cancelButton','scrollTop','[OCR]\x20Text\x20extraction\x20result:','terminate','toISOString','tfdaP','style','Quiz\x20generation\x20failed\x20completely.\x20Please\x20try\x20again\x20later.','Error\x20accessing\x20camera:\x20','DKKcC','height','error','QRIop','PmMME','FXmAb','Occpd','YOWXU','qAhyK','writeText','AxKcB','dark','BHdMA','[Camera]\x20Stopping\x20camera...','Art','ODOcf','[OCR]\x20Worker\x20initialized','Copied!','hlOzo','KwuzT','zFzsZ','copy-button','ySBGM','user','\x20-\x20','LlDyD','yDKzR','then','cameraPreview','topic','bot-message','[Processing]\x20Error\x20during\x20image\x20processing:','from','You\x20are\x20a\x20quiz\x20generator.\x20Create\x20a\x20quiz\x20based\x20on\x20the\x20following\x20image\x20context\x20and\x20user\x20requirements.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Image\x20context:\x20','environment','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Points:\x20','createImageSession','window.ai\x20API\x20not\x20available','GXIfW','subject','DreNK','confidence','loadLanguage','1374IHXjKA','[Quiz]\x20Starting\x20quiz\x20generation\x20with\x20Gemini\x20Nano...','[AI]\x20Windows\x20AI\x20API\x20not\x20found\x20in\x20window\x20object','none','[AI]\x20Creating\x20image\x20recognition\x20session...','LbJxU','[Processing]\x20Image\x20processing\x20completed:','[AI]\x20Error\x20during\x20image\x20processing:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Subject:\x20','getAttribute','CIMEp','canvas','moTMp','History','forEach','7227670jzzXtX','image/jpeg','[Camera]\x20Capturing\x20image...','ecMhP','xToTB','40AfueIZ','Image\x20and\x20text\x20analysis\x20complete','label','User','chatMessages','Description\x20of\x20visual\x20elements','oyudq','multiple_choice','UQWVi','lUknB','getContext','documentElement','FfSHI','IaKpj','src','JQjYP','DHvez','Windows\x20AI\x20API\x20not\x20available','Sorry,\x20I\x20couldn\x27t\x20process\x20the\x20image.\x20Please\x20try\x20again.','[OCR]\x20Starting\x20text\x20extraction...','Student\x20should\x20identify\x20main\x20points\x20from\x20the\x20text','map','XVluo','content','[Processing]\x20Starting\x20image\x20OCR\x20analysis...','[Quiz]\x20Generating\x20quiz...','scrollHeight','1044594LWEzQo','quiz-container','Copy\x20Quiz','dLiig','add','toDataURL','clipboard','gWYZG','9493YIPkyG','Image\x20captured!\x20Please\x20provide\x20your\x20requirements\x20for\x20the\x20quiz.','cAPxT','oSCck','WOWoL','xVnrO','cameraContainer','themeToggle','Geography','[Quiz]\x20Constructed\x20system\x20prompt:','I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20image\x20and\x20requirements:','pattern','what','MBSKe','DhbXc','fInYY','Option\x20C','log','cameraButton','message','\x0a\x0aUser\x20request:\x20','Based\x20on\x20the\x20text,\x20what\x20is\x20the\x20main\x20topic\x20being\x20discussed?','uWWsH','5RyLdgm','What\x20is\x20the\x20significance\x20of\x20','[Camera]\x20Error\x20processing\x20captured\x20image:','mSQpb','toString','[Chat]\x20Sending\x20message:','getUserMedia','ELYVx','flex','2446167WASJMQ','ihPjM','PySMb','createWorker','HBZCn','Generated\x20a\x20basic\x20quiz\x20without\x20AI\x20assistance:','Generating\x20quiz...'];_0x55c4=function(){return _0x26aff9;};return _0x55c4();}