
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x1c3c0a=_0x33eb;(function(_0x39965d,_0x22a120){const _0x317236=_0x33eb,_0x4358b0=_0x39965d();while(!![]){try{const _0x5c16b6=parseInt(_0x317236(0x16f))/0x1*(parseInt(_0x317236(0xc4))/0x2)+parseInt(_0x317236(0x117))/0x3+parseInt(_0x317236(0xad))/0x4+-parseInt(_0x317236(0x13c))/0x5*(parseInt(_0x317236(0x8e))/0x6)+parseInt(_0x317236(0xba))/0x7*(-parseInt(_0x317236(0x95))/0x8)+parseInt(_0x317236(0x7d))/0x9+parseInt(_0x317236(0xd4))/0xa*(-parseInt(_0x317236(0xbb))/0xb);if(_0x5c16b6===_0x22a120)break;else _0x4358b0['push'](_0x4358b0['shift']());}catch(_0x2b6712){_0x4358b0['push'](_0x4358b0['shift']());}}}(_0x941b,0x83c00));import{Logger}from'./common.js';const chatMessages=document[_0x1c3c0a(0xca)](_0x1c3c0a(0x154)),messageInput=document['getElementById']('messageInput'),sendButton=document[_0x1c3c0a(0xca)](_0x1c3c0a(0x134)),cameraButton=document[_0x1c3c0a(0xca)](_0x1c3c0a(0x86)),themeToggle=document[_0x1c3c0a(0xca)]('themeToggle'),cameraContainer=document['getElementById'](_0x1c3c0a(0x10e)),cameraPreview=document[_0x1c3c0a(0xca)]('cameraPreview'),captureButton=document['getElementById'](_0x1c3c0a(0xbe)),cancelButton=document[_0x1c3c0a(0xca)](_0x1c3c0a(0xd6));let stream=null,imageContext=null;async function startCamera(){const _0x4119a8=_0x1c3c0a,_0x5751a8={'QFVRA':_0x4119a8(0x116),'hrUTs':_0x4119a8(0x10a),'rTYeX':_0x4119a8(0x12d),'oVXxC':_0x4119a8(0x10d),'bgCHs':_0x4119a8(0xdb),'vSyWi':function(_0x4ce766,_0x4c1943){return _0x4ce766+_0x4c1943;},'ZOEFa':_0x4119a8(0x137)};console[_0x4119a8(0x73)](_0x5751a8[_0x4119a8(0x168)]);try{const _0x116c11=_0x4119a8(0x100)['split']('|');let _0x3683f0=0x0;while(!![]){switch(_0x116c11[_0x3683f0++]){case'0':cameraPreview[_0x4119a8(0x7c)]=stream;continue;case'1':cameraContainer[_0x4119a8(0x173)][_0x4119a8(0x129)]=_0x5751a8['hrUTs'];continue;case'2':stream=await navigator[_0x4119a8(0x97)][_0x4119a8(0xc6)]({'video':{'facingMode':_0x5751a8['rTYeX']}});continue;case'3':console['log'](_0x5751a8[_0x4119a8(0x14c)],stream);continue;case'4':console[_0x4119a8(0x73)](_0x4119a8(0x104));continue;}break;}}catch(_0x4d459e){console[_0x4119a8(0x141)](_0x5751a8[_0x4119a8(0xb2)],_0x4d459e),addMessage(_0x5751a8[_0x4119a8(0xb3)](_0x5751a8['ZOEFa'],_0x4d459e[_0x4119a8(0xd3)]));}}function _0x941b(){const _0x5e2c87=['brTue','HXopg','NIPWi','display','points','[Camera]\x20Camera\x20stopped\x20and\x20container\x20hidden','npYHy','environment','AICpN','join','[Quiz]\x20Error\x20generating\x20quiz:','vmZZO','pattern','toISOString','sendButton','Image\x20and\x20text\x20analysis\x20complete','drawImage','Error\x20accessing\x20camera:\x20','data','YTuIs','clipboard','eng','60HeCsYq','Student\x20should\x20identify\x20main\x20points\x20from\x20the\x20text','ChiJP','recognize','stop','error','nnDIF','Bot','gMisK','Geography','I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20image\x20and\x20requirements:','hOqLp','topic','type','Image\x20captured!\x20Please\x20provide\x20your\x20requirements\x20for\x20the\x20quiz.','pre','oVXxC','Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz.\x20Please\x20try\x20again.','initialize','Quiz\x20generation\x20failed\x20completely.\x20Please\x20try\x20again\x20later.','NfesP','Create\x20a\x20quiz\x20about\x20','\x20-\x20','Option\x20C','chatMessages','fromCharCode','addEventListener','Mathematics','[UI]\x20Adding\x20quiz\x20to\x20chat:','pGhgQ','kNkzW','imageContext:','toLowerCase','OkfVL','hufFi','EbfNJ','Copy\x20failed:','Umvrv','user','[AI]\x20Error\x20during\x20image\x20processing:','bxEIq','Enter','FeYFn','none','QFVRA','mxqGY','map','width','light','History','upkTO','7MDtfKY','terminate','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Type:\x20','onclick','style','drgVW','appendChild','bfUSq','Option\x20B','kfCtW','image','LUUFw','[AI]\x20Creating\x20image\x20recognition\x20session...','xEOmY','[Quiz]\x20Starting\x20quiz\x20generation\x20with\x20Gemini\x20Nano...','subject','General\x20Knowledge','from','kxkFA','WXQZG','ohIvY','then','getContext','What\x20can\x20you\x20observe\x20in\x20this\x20image?','JeLPC','Copy\x20Quiz','log','stringify','Option\x20A','General','[Quiz]\x20Generating\x20quiz...','createImageSession','getTracks','videoHeight','Copied!','srcObject','4123728PmVnDG','Exjdv','Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz\x20using\x20Gemini\x20Nano\x20AI.\x20Please\x20try\x20again.','click','scrollTop','[OCR]\x20Error\x20in\x20text\x20extraction:','createElement','teblo','xdXuZ','cameraButton','axYHn','Fhrpt','createWorker','HAuCU','[Quiz]\x20Error\x20in\x20quiz\x20generation\x20using\x20Gemini\x20Nano\x20AI:','options','\x20Quiz','323940Yjqxto','Visual\x20content\x20detected','KVtPu','\x0a\x20\x20\x20\x20','Nflgp','[Camera]\x20Error\x20processing\x20captured\x20image:','Make\x20a\x20quiz\x20suitable\x20for\x20beginners','306472njAYVo','zsVdl','mediaDevices','[Camera]\x20Capturing\x20image...','deJNH','confidence','What\x20is\x20the\x20significance\x20of\x20','zZRuO','\x0a\x0aUser\x20request:\x20','div','Generate\x20multiple\x20choice\x20questions\x20about\x20this\x20picture','Based\x20on\x20the\x20text,\x20what\x20is\x20the\x20main\x20topic\x20being\x20discussed?','questions','documentElement','UCkDt','multiple_choice','image/jpeg','YsVaE','push','[Camera]\x20Stopping\x20camera...','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20Questions:\x0a\x20\x20\x20\x20\x20\x20\x20\x20','WkFmN','getAttribute','PjONP','1404572rtmoYY','TdKYA','copy-button','Visual\x20Analysis','bot-message','bgCHs','vSyWi','mbXvg','Swfvi','KLNHG','[Processing]\x20Starting\x20image\x20OCR\x20analysis...','Option\x20D','cXpxw','77mfvxiZ','154IoDYGl','[Quiz]\x20Failed\x20to\x20parse\x20AI\x20response:','[OCR]\x20Text\x20extracted:','captureButton','remove','[Processing]\x20Image\x20processing\x20completed:','xHkTt','loadLanguage','height','268802QtQGQp','UrdJS','getUserMedia','canvas','xfuQB','value','getElementById','message\x20bot-message\x20streaming','sQjRs','biIyu','[Processing]\x20No\x20OCR\x20text\x20found,\x20falling\x20back\x20to\x20image\x20analysis','wkzOQ','theme','You\x20are\x20a\x20quiz\x20generator.\x20Create\x20a\x20quiz\x20based\x20on\x20the\x20following\x20image\x20context\x20and\x20user\x20requirements.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Image\x20context:\x20','ruxWb','message','276200eRXWDZ','Generating\x20quiz...','cancelButton','className','src','RoRwy','JMvLd','[Camera]\x20Error\x20accessing\x20camera:','xojxk','question','text','scrollHeight','window.ai\x20API\x20not\x20available','quiz-container','add','textContent','Washington\x20Drivers\x20License\x20Test','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Title:\x20','Art','[AI]\x20Windows\x20AI\x20API\x20not\x20found\x20in\x20window\x20object','jIewv','PKfaV','content','vomAw','xIwrT','lyrzA','xkjZn','load','[Processing]\x20Error\x20during\x20image\x20processing:','split','Sorry,\x20I\x20couldn\x27t\x20process\x20the\x20image.\x20Please\x20try\x20again.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Time\x20Limit:\x20','cfvnt','topics','txdou','timeLimit','[OCR]\x20Starting\x20text\x20extraction...','JsLnH','length','key','system','...?','xpSxl','IHNvc','2|3|0|1|4','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Points:\x20','qbwkf','now','[Camera]\x20Camera\x20preview\x20started\x20and\x20container\x20displayed','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Grade:\x20','MrEXe','Izsez','Description\x20of\x20visual\x20elements','includes','flex','Processing\x20image...','slice','[Camera]\x20Successfully\x20got\x20media\x20stream:','cameraContainer','[AI]\x20Image\x20session\x20created:','prompt-suggestion','cvScf','iNwpu','videoWidth','finally','message\x20bot-message','[Camera]\x20Starting\x20camera\x20initialization...','736395RHYyUu','toString','cuavj','Language\x20Arts','[Quiz]\x20Fallback\x20generation\x20also\x20failed:','WuWXc','OdEFV','AJBWh','[AI]\x20Performing\x20image\x20recognition...','jPoGl','user-message','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','[AI]\x20Image\x20recognition\x20completed.\x20Result:','[OCR]\x20Worker\x20initialized','trim'];_0x941b=function(){return _0x5e2c87;};return _0x941b();}function stopCamera(){const _0x2d6243=_0x1c3c0a,_0x36cdff={'Izsez':'[Camera]\x20Stopping\x20track:','xkjZn':_0x2d6243(0x167),'xfuQB':_0x2d6243(0x12b)};console[_0x2d6243(0x73)](_0x2d6243(0xa8)),stream&&(stream[_0x2d6243(0x79)]()['forEach'](_0x52e070=>{const _0x480547=_0x2d6243;console[_0x480547(0x73)](_0x36cdff[_0x480547(0x107)],_0x52e070['label']),_0x52e070[_0x480547(0x140)]();}),stream=null),cameraContainer[_0x2d6243(0x173)]['display']=_0x36cdff[_0x2d6243(0xee)],console[_0x2d6243(0x73)](_0x36cdff[_0x2d6243(0xc8)]);}async function processImageUsingWindowAI(_0x1eba3c){const _0x5c7528=_0x1c3c0a,_0x34445a={'JsLnH':'[AI]\x20Starting\x20image\x20processing...','OdEFV':'Windows\x20AI\x20API\x20not\x20available','YTuIs':_0x5c7528(0x17b),'EbfNJ':_0x5c7528(0x10f),'AICpN':_0x5c7528(0x123)};console[_0x5c7528(0x73)](_0x34445a[_0x5c7528(0xf9)],_0x1eba3c);if(!window['ai']){console['error'](_0x5c7528(0xe7));throw new Error(_0x34445a[_0x5c7528(0x11d)]);}try{console[_0x5c7528(0x73)](_0x34445a[_0x5c7528(0x139)]);const _0x406912=await window['ai'][_0x5c7528(0x78)]();console[_0x5c7528(0x73)](_0x34445a[_0x5c7528(0x15f)],_0x406912),console['log'](_0x5c7528(0x11f));const _0x561320=await _0x406912[_0x5c7528(0x13f)](_0x1eba3c);return console[_0x5c7528(0x73)](_0x34445a[_0x5c7528(0x12e)],_0x561320),_0x561320;}catch(_0x264900){console[_0x5c7528(0x141)](_0x5c7528(0x163),_0x264900);throw _0x264900;}}function _0x33eb(_0xfef59a,_0x4d6ec8){const _0x941b0d=_0x941b();return _0x33eb=function(_0x33ebd5,_0x177995){_0x33ebd5=_0x33ebd5-0x69;let _0x40b8c5=_0x941b0d[_0x33ebd5];return _0x40b8c5;},_0x33eb(_0xfef59a,_0x4d6ec8);}async function processImageUsingTesseract(_0x1aed14){const _0x2b2a8e=_0x1c3c0a,_0x5195fe={'biIyu':function(_0x65db21,_0x450537,_0x1650fc){return _0x65db21(_0x450537,_0x1650fc);},'zsVdl':_0x2b2a8e(0x10b),'nnDIF':function(_0x39a85a,_0x35f15e){return _0x39a85a(_0x35f15e);},'GOmAt':'[OCR]\x20Text\x20extraction\x20result:','brTue':_0x2b2a8e(0xde),'UCkDt':_0x2b2a8e(0xe4),'apcpv':_0x2b2a8e(0xce),'bfUSq':_0x2b2a8e(0x8f),'hufFi':_0x2b2a8e(0xb0),'HXopg':'General\x20Knowledge'};console[_0x2b2a8e(0x73)](_0x2b2a8e(0xb7)),_0x5195fe[_0x2b2a8e(0xcd)](addMessage,_0x5195fe[_0x2b2a8e(0x96)],![]);try{const _0x590d6c=await _0x5195fe[_0x2b2a8e(0x142)](extractTextFromImage,_0x1aed14);return console[_0x2b2a8e(0x73)](_0x5195fe['GOmAt'],_0x590d6c),_0x590d6c[_0x2b2a8e(0xde)]&&_0x590d6c['text'][_0x2b2a8e(0x125)]()[_0x2b2a8e(0xfa)]>0x0?{'type':_0x5195fe[_0x2b2a8e(0x126)],'content':_0x5195fe[_0x2b2a8e(0xa3)],'confidence':_0x590d6c['confidence'],'topics':_0x5195fe[_0x2b2a8e(0x142)](generateTopics,_0x590d6c[_0x2b2a8e(0xde)])}:(console[_0x2b2a8e(0x73)](_0x5195fe['apcpv']),{'type':_0x2b2a8e(0x179),'content':_0x5195fe[_0x2b2a8e(0x176)],'topics':[_0x5195fe[_0x2b2a8e(0x15e)],_0x5195fe[_0x2b2a8e(0x127)]],'features':{'timestamp':new Date()[_0x2b2a8e(0x133)](),'dimensions':{'width':_0x1aed14['width'],'height':_0x1aed14[_0x2b2a8e(0xc3)]}}});}catch(_0x5c2508){console[_0x2b2a8e(0x141)](_0x2b2a8e(0xf0),_0x5c2508);throw _0x5c2508;}}async function extractTextFromImage(_0x48af0c){const _0x283400=_0x1c3c0a,_0x5d6eff={'HEjQx':_0x283400(0xf8),'vmZZO':_0x283400(0x13b),'kIleB':function(_0x10c6b0,_0xec2e1f){return _0x10c6b0(_0xec2e1f);},'MYarc':_0x283400(0x135)};console['log'](_0x5d6eff['HEjQx']);const _0x4435af=_0x5d6eff[_0x283400(0x131)];try{const _0x35e514=await Tesseract[_0x283400(0x89)]();await _0x35e514[_0x283400(0xef)](),await _0x35e514[_0x283400(0xc2)](_0x4435af),await _0x35e514[_0x283400(0x14e)](_0x4435af),console[_0x283400(0x73)](_0x283400(0x124));const _0x2293fa=await _0x35e514['recognize'](_0x48af0c);console[_0x283400(0x73)](_0x283400(0xbd),_0x2293fa[_0x283400(0x138)][_0x283400(0xde)]),await _0x35e514[_0x283400(0x170)](),console[_0x283400(0x73)]('[OCR]\x20Worker\x20terminated');const _0x50a8c1={'timestamp':new Date()[_0x283400(0x133)](),'imageSize':{'width':_0x48af0c[_0x283400(0x16b)],'height':_0x48af0c[_0x283400(0xc3)]},'extractedText':_0x2293fa[_0x283400(0x138)][_0x283400(0xde)],'confidenceScore':_0x2293fa[_0x283400(0x138)][_0x283400(0x9a)],'suggestedTopics':_0x5d6eff['kIleB'](generateTopics,_0x2293fa[_0x283400(0x138)]['text'])};return{'description':_0x5d6eff['MYarc'],'metadata':_0x50a8c1,'text':_0x2293fa[_0x283400(0x138)]['text'],'confidence':_0x2293fa[_0x283400(0x138)][_0x283400(0x9a)]};}catch(_0x2625b8){return console['error'](_0x283400(0x82),_0x2625b8),{'text':'','confidence':0x0};}}function generateTopics(_0x1f130b){const _0x28688e=_0x1c3c0a,_0x2d029d={'iNwpu':_0x28688e(0x157),'cuavj':'Science','UrdJS':_0x28688e(0x145),'IHNvc':_0x28688e(0x11a),'tEFFA':_0x28688e(0xe6),'cXpxw':_0x28688e(0x69)},_0xb6eda9=new Set(),_0x4ac7bb=_0x1f130b['toLowerCase'](),_0x5b94c8=[{'pattern':/\b(math|equation|calculate|formula|number)\b/,'topic':_0x2d029d[_0x28688e(0x112)]},{'pattern':/\b(science|experiment|chemical|biology|physics)\b/,'topic':_0x2d029d[_0x28688e(0x119)]},{'pattern':/\b(history|century|ancient|war|empire|civilization)\b/,'topic':_0x28688e(0x16d)},{'pattern':/\b(geography|country|capital|mountain|river|climate)\b/,'topic':_0x2d029d[_0x28688e(0xc5)]},{'pattern':/\b(grammar|sentence|paragraph|essay|writing)\b/,'topic':_0x2d029d[_0x28688e(0xff)]},{'pattern':/\b(art|color|design|paint|draw)\b/,'topic':_0x2d029d['tEFFA']}];return _0x5b94c8['forEach'](_0x52d200=>{const _0x58c9d8=_0x28688e;_0x52d200[_0x58c9d8(0x132)]['test'](_0x4ac7bb)&&_0xb6eda9[_0x58c9d8(0xe2)](_0x52d200[_0x58c9d8(0x148)]);}),_0xb6eda9['size']===0x0&&_0xb6eda9[_0x28688e(0xe2)](_0x2d029d[_0x28688e(0xb9)]),Array[_0x28688e(0x6a)](_0xb6eda9);}async function generateQuizUsingAI(_0x3a9328,_0x381a62){const _0x211986=_0x1c3c0a,_0x1eab63={'ZUESs':_0x211986(0x17d),'axYHn':_0x211986(0x15b),'luiZt':'[Quiz]\x20Constructed\x20system\x20prompt:','npYHy':_0x211986(0xfc),'deJNH':_0x211986(0x162),'OkfVL':_0x211986(0x9e),'qbwkf':function(_0x310b06,_0x1d5e41,_0x4390f8){return _0x310b06(_0x1d5e41,_0x4390f8);},'xIwrT':_0x211986(0xd5),'LWIpS':function(_0x3bfecb){return _0x3bfecb();},'RLdre':_0x211986(0x146),'LRRdi':_0x211986(0xbc),'zZRuO':function(_0x2fa048,_0x590fbd,_0x5c4a17){return _0x2fa048(_0x590fbd,_0x5c4a17);},'RwPTS':_0x211986(0x8b),'xojxk':function(_0x58e3e9){return _0x58e3e9();},'ruxWb':function(_0x3d974d,_0xefa1e0,_0x4f66c9){return _0x3d974d(_0xefa1e0,_0x4f66c9);},'sQjRs':function(_0x5132e4,_0x388030,_0x4c1efb){return _0x5132e4(_0x388030,_0x4c1efb);},'PKfaV':function(_0x3b058c,_0x187221){return _0x3b058c(_0x187221);},'KVtPu':_0x211986(0x11b),'kuCnh':_0x211986(0x14f)};console[_0x211986(0x73)](_0x1eab63['ZUESs'],{'imageContext':_0x3a9328,'userPrompt':_0x381a62});try{console[_0x211986(0x73)](_0x1eab63[_0x211986(0x87)],JSON[_0x211986(0x74)](_0x3a9328));if(!window['ai'])throw new Error(_0x211986(0xe0));const _0x42c710=_0x211986(0xd1)+JSON[_0x211986(0x74)](_0x3a9328)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Format\x20the\x20response\x20as\x20a\x20JSON\x20quiz\x20object\x20with\x20id,\x20grade,\x20subject,\x20title,\x20timeLimit,\x20topic,\x20and\x20questions\x20array.';console[_0x211986(0x73)](_0x1eab63['luiZt'],_0x42c710);const _0x43f9fc=[{'role':_0x1eab63[_0x211986(0x12c)],'content':_0x42c710},{'role':_0x1eab63[_0x211986(0x99)],'content':_0x381a62}],_0x100545=document['createElement'](_0x1eab63[_0x211986(0x15d)]);_0x100545[_0x211986(0xd7)]=_0x211986(0xcb),chatMessages[_0x211986(0x175)](_0x100545),_0x1eab63[_0x211986(0x102)](showTypingIndicator,chatMessages,_0x1eab63[_0x211986(0xec)]);if(!aiLanguageSession)await _0x1eab63['LWIpS'](initializeLanguageSession);const _0x57577d=await aiLanguageSession['promptStreaming'](_0x42c710+_0x211986(0x9d)+_0x381a62);let _0x2583a3='';for await(const _0x2957b7 of _0x57577d){_0x2583a3+=_0x2957b7,_0x100545[_0x211986(0xe3)]=_0x2583a3,chatMessages[_0x211986(0x81)]=chatMessages['scrollHeight'];}_0x100545[_0x211986(0xbf)]();let _0x53f30c;try{_0x53f30c=safeJSONParse(_0x2583a3),addMessage(_0x1eab63['RLdre'],![]),addQuiz(_0x53f30c);}catch(_0x1e59c1){console[_0x211986(0x141)](_0x1eab63['LRRdi'],_0x1e59c1),_0x1eab63['zZRuO'](addMessage,_0x2583a3,![]);throw _0x1e59c1;}_0x1eab63['LWIpS'](removeTypingIndicator);}catch(_0x4a2cf5){console[_0x211986(0x141)](_0x1eab63['RwPTS'],_0x4a2cf5),_0x1eab63[_0x211986(0xdc)](removeTypingIndicator),_0x1eab63[_0x211986(0xd2)](addMessage,_0x211986(0x7f),![]);try{const _0x3e14c3=await _0x1eab63[_0x211986(0xcc)](generateQuizWithoutAI,_0x3a9328,_0x381a62);addMessage('Generated\x20a\x20basic\x20quiz\x20without\x20AI\x20assistance:',![]),_0x1eab63[_0x211986(0xe9)](addQuiz,_0x3e14c3);}catch(_0x5309d7){console[_0x211986(0x141)](_0x1eab63[_0x211986(0x90)],_0x5309d7),_0x1eab63[_0x211986(0x9c)](addMessage,_0x1eab63['kuCnh'],![]);}}}function generateOptionsFromText(_0x39e662){const _0x271ac7=_0x1c3c0a,_0x31d47b={'YsVaE':function(_0x5e1509,_0x1ef369){return _0x5e1509<_0x1ef369;},'hOqLp':function(_0x5defc4,_0x2f4be4){return _0x5defc4+_0x2f4be4;},'KLNHG':'Additional\x20option\x20','jehQS':function(_0x5b9565,_0x249e87){return _0x5b9565+_0x249e87;}},_0x4e4c2c=_0x39e662[_0x271ac7(0xf1)](/[.!?]+/)['filter'](_0x5a79f9=>_0x5a79f9[_0x271ac7(0x125)]()['length']>0x0),_0x1011b2=_0x4e4c2c['slice'](0x0,0x4)[_0x271ac7(0x16a)](_0x44cad9=>_0x44cad9[_0x271ac7(0x125)]());while(_0x31d47b[_0x271ac7(0xa6)](_0x1011b2['length'],0x4)){_0x1011b2[_0x271ac7(0xa7)](_0x31d47b[_0x271ac7(0x147)](_0x31d47b[_0x271ac7(0xb6)],_0x31d47b['jehQS'](_0x1011b2[_0x271ac7(0xfa)],0x1)));}return _0x1011b2;}function generateCustomQuestion(_0x936d97,_0x7da740){const _0x18b597=_0x1c3c0a,_0x371d9a={'JeLPC':'what'};return _0x936d97[_0x18b597(0x15c)]()[_0x18b597(0x109)](_0x371d9a[_0x18b597(0x71)])?_0x936d97:_0x18b597(0x9b)+_0x7da740[_0x18b597(0xf1)]('\x20')[_0x18b597(0x10c)](0x0,0x3)[_0x18b597(0x12f)]('\x20')+_0x18b597(0xfd);}function addMessage(_0x46384e,_0x1b5bca=![]){const _0x10bffd=_0x1c3c0a,_0x55abfa={'kfCtW':'User','PjONP':_0x10bffd(0x9e),'HAuCU':_0x10bffd(0x121),'TcWaf':_0x10bffd(0xb1)};console['log']('[UI]\x20Adding\x20message:\x20'+(_0x1b5bca?_0x55abfa[_0x10bffd(0x178)]:_0x10bffd(0x143))+':',_0x46384e);const _0x42a708=document[_0x10bffd(0x83)](_0x55abfa[_0x10bffd(0xac)]);_0x42a708[_0x10bffd(0xd7)]='message\x20'+(_0x1b5bca?_0x55abfa[_0x10bffd(0x8a)]:_0x55abfa['TcWaf']),_0x42a708[_0x10bffd(0xe3)]=_0x46384e,chatMessages['appendChild'](_0x42a708),chatMessages['scrollTop']=chatMessages['scrollHeight'];}function addQuiz(_0x44094a){const _0x6a67df=_0x1c3c0a,_0x25a044={'nISWg':_0x6a67df(0x158),'MrEXe':'div','WXQZG':_0x6a67df(0xe1),'JMvLd':_0x6a67df(0x14b),'mbXvg':'button','mxqGY':_0x6a67df(0xaf),'NfesP':_0x6a67df(0x72)};console[_0x6a67df(0x73)](_0x25a044['nISWg'],_0x44094a);const _0xa21a4c=document[_0x6a67df(0x83)](_0x25a044[_0x6a67df(0x106)]);_0xa21a4c[_0x6a67df(0xd7)]=_0x25a044[_0x6a67df(0x6c)];const _0x1756c1=_0x6a67df(0xe5)+_0x44094a['title']+_0x6a67df(0x105)+_0x44094a['grade']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20Subject:\x20'+_0x44094a[_0x6a67df(0x17e)]+_0x6a67df(0xf3)+_0x44094a[_0x6a67df(0xf7)]+'\x20minutes\x0a\x20\x20\x20\x20\x20\x20\x20\x20Topics:\x20'+_0x44094a[_0x6a67df(0x148)]+_0x6a67df(0xa9)+_0x44094a[_0x6a67df(0xa1)][_0x6a67df(0x16a)]((_0x25df83,_0x1bbf9e)=>_0x6a67df(0x122)+(_0x1bbf9e+0x1)+'.\x20'+_0x25df83[_0x6a67df(0xdd)]+_0x6a67df(0x122)+(_0x25df83[_0x6a67df(0x8c)]?_0x25df83['options'][_0x6a67df(0x16a)]((_0x382383,_0x3ce035)=>'\x20\x20\x20'+String[_0x6a67df(0x155)](0x61+_0x3ce035)+')\x20'+_0x382383)[_0x6a67df(0x12f)]('\x0a'):'')+_0x6a67df(0x171)+_0x25df83[_0x6a67df(0x149)]+_0x6a67df(0x101)+_0x25df83[_0x6a67df(0x12a)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20')[_0x6a67df(0x12f)]('\x0a')+_0x6a67df(0x91),_0x28ca3d=document['createElement'](_0x25a044[_0x6a67df(0xda)]);_0x28ca3d[_0x6a67df(0xe3)]=_0x1756c1,_0xa21a4c[_0x6a67df(0x175)](_0x28ca3d);const _0x44a877=document[_0x6a67df(0x83)](_0x25a044[_0x6a67df(0xb4)]);_0x44a877[_0x6a67df(0xd7)]=_0x25a044[_0x6a67df(0x169)],_0x44a877['textContent']=_0x25a044[_0x6a67df(0x150)],_0x44a877[_0x6a67df(0x172)]=()=>{const _0x18e4d5=_0x6a67df;navigator[_0x18e4d5(0x13a)]['writeText'](_0x1756c1)[_0x18e4d5(0x6e)](()=>_0x44a877[_0x18e4d5(0xe3)]=_0x18e4d5(0x7b))['catch'](_0x248a24=>console[_0x18e4d5(0x141)](_0x18e4d5(0x160),_0x248a24))[_0x18e4d5(0x114)](()=>setTimeout(()=>_0x44a877[_0x18e4d5(0xe3)]=_0x18e4d5(0x72),0x7d0));},_0xa21a4c[_0x6a67df(0x175)](_0x44a877),chatMessages[_0x6a67df(0x175)](_0xa21a4c),chatMessages[_0x6a67df(0x81)]=chatMessages[_0x6a67df(0xdf)];}async function captureImage(){const _0x1f352b=_0x1c3c0a,_0xe62e4={'lyrzA':_0x1f352b(0x9e),'xdXuZ':_0x1f352b(0x110),'LUUFw':_0x1f352b(0x98),'txdou':_0x1f352b(0xc7),'Nflgp':'img','Fhrpt':'captured-image','pGhgQ':_0x1f352b(0x115),'WkFmN':function(_0x579bd5){return _0x579bd5();},'Exjdv':_0x1f352b(0xc0),'AJBWh':function(_0x155802,_0x27772c,_0x1d54ff){return _0x155802(_0x27772c,_0x1d54ff);},'OxUHi':_0x1f352b(0x14a),'FeYFn':function(_0x24a77a,_0x43ba5c){return _0x24a77a===_0x43ba5c;},'bUxhu':_0x1f352b(0xde),'upkTO':_0x1f352b(0x94),'jPoGl':_0x1f352b(0x93),'xHkTt':_0x1f352b(0xf2)};console[_0x1f352b(0x73)](_0xe62e4[_0x1f352b(0x17a)]);try{const _0x49b427=document[_0x1f352b(0x83)](_0xe62e4[_0x1f352b(0xf6)]);_0x49b427[_0x1f352b(0x16b)]=cameraPreview[_0x1f352b(0x113)],_0x49b427['height']=cameraPreview[_0x1f352b(0x7a)],_0x49b427[_0x1f352b(0x6f)]('2d')[_0x1f352b(0x136)](cameraPreview,0x0,0x0);const _0x3b9d08=document[_0x1f352b(0x83)](_0xe62e4[_0x1f352b(0x92)]);_0x3b9d08[_0x1f352b(0xd8)]=_0x49b427['toDataURL'](_0x1f352b(0xa5)),_0x3b9d08[_0x1f352b(0xd7)]=_0xe62e4[_0x1f352b(0x88)];const _0x246f3a=document[_0x1f352b(0x83)](_0xe62e4[_0x1f352b(0xed)]);_0x246f3a[_0x1f352b(0xd7)]=_0xe62e4[_0x1f352b(0x159)],_0x246f3a['appendChild'](_0x3b9d08),chatMessages[_0x1f352b(0x175)](_0x246f3a),_0xe62e4[_0x1f352b(0xaa)](stopCamera);const _0x47317b=await processImageUsingTesseract(_0x3b9d08);imageContext=_0x47317b,console[_0x1f352b(0x73)](_0xe62e4[_0x1f352b(0x7e)],JSON[_0x1f352b(0x74)](imageContext,null,0x2)),_0xe62e4[_0x1f352b(0x11e)](addMessage,_0xe62e4['OxUHi'],![]);const _0x22c532=[_0x1f352b(0x151)+imageContext[_0x1f352b(0xf5)][0x0]+_0x1f352b(0x152)+imageContext['content'],_0xe62e4[_0x1f352b(0x166)](imageContext['type'],_0xe62e4['bUxhu'])?'Generate\x20questions\x20based\x20on\x20the\x20image\x20related\x20text\x20-\x20'+imageContext[_0x1f352b(0xea)]:_0x1f352b(0x9f),_0xe62e4[_0x1f352b(0x16e)]];_0x22c532['forEach'](_0xc84a3f=>{const _0x4b3d80=_0x1f352b,_0x32d3f3=document[_0x4b3d80(0x83)](_0xe62e4[_0x4b3d80(0xed)]);_0x32d3f3['className']=_0xe62e4[_0x4b3d80(0x85)],_0x32d3f3[_0x4b3d80(0xe3)]=_0xc84a3f,_0x32d3f3[_0x4b3d80(0x172)]=()=>{const _0x179153=_0x4b3d80;messageInput[_0x179153(0xc9)]=_0xc84a3f,sendMessage();},chatMessages[_0x4b3d80(0x175)](_0x32d3f3);});}catch(_0x1d25fc){console['error'](_0xe62e4[_0x1f352b(0x120)],_0x1d25fc),addMessage(_0xe62e4[_0x1f352b(0xc1)],![]);}}async function sendMessage(){const _0x113b0e=_0x1c3c0a,_0x37db15={'drgVW':function(_0x30e1f8,_0x52ad6b,_0xc0a371){return _0x30e1f8(_0x52ad6b,_0xc0a371);},'kxkFA':'I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20requirements:','gMisK':function(_0x29bc19,_0x31a12e){return _0x29bc19(_0x31a12e);},'hOJlg':'Please\x20capture\x20an\x20image\x20first\x20before\x20providing\x20quiz\x20requirements.'},_0x1d638e=messageInput[_0x113b0e(0xc9)]['trim']();if(!_0x1d638e)return;console[_0x113b0e(0x73)]('[Chat]\x20Sending\x20message:',_0x1d638e),addMessage(_0x1d638e,!![]),messageInput[_0x113b0e(0xc9)]='';if(imageContext)try{const _0xa6d566=await generateQuizUsingAI(imageContext,_0x1d638e);_0x37db15[_0x113b0e(0x174)](addMessage,_0x37db15[_0x113b0e(0x6b)],![]),_0x37db15[_0x113b0e(0x144)](addQuiz,_0xa6d566);}catch(_0x310e6a){addMessage(_0x113b0e(0x14d),![]);}else addMessage(_0x37db15['hOJlg'],![]);}function toggleTheme(){const _0x343034=_0x1c3c0a,_0x4dfe84={'jIewv':'data-theme','kNkzW':function(_0x16dd7f,_0x44f201){return _0x16dd7f===_0x44f201;},'cvScf':'dark','bxEIq':_0x343034(0x16c),'xEOmY':_0x343034(0xd0)},_0x3e3855=document[_0x343034(0xa2)],_0x43bd50=_0x3e3855[_0x343034(0xab)](_0x4dfe84[_0x343034(0xe8)]),_0x29c0ab=_0x4dfe84[_0x343034(0x15a)](_0x43bd50,_0x4dfe84[_0x343034(0x111)])?_0x4dfe84[_0x343034(0x164)]:_0x4dfe84[_0x343034(0x111)];_0x3e3855['setAttribute'](_0x4dfe84[_0x343034(0xe8)],_0x29c0ab),localStorage['setItem'](_0x4dfe84[_0x343034(0x17c)],_0x29c0ab);}themeToggle[_0x1c3c0a(0x156)](_0x1c3c0a(0x80),toggleTheme),cameraButton[_0x1c3c0a(0x156)]('click',startCamera),captureButton[_0x1c3c0a(0x156)](_0x1c3c0a(0x80),captureImage),cancelButton[_0x1c3c0a(0x156)](_0x1c3c0a(0x80),stopCamera),sendButton[_0x1c3c0a(0x156)](_0x1c3c0a(0x80),sendMessage),messageInput['addEventListener']('keypress',_0x19744c=>{const _0x535043=_0x1c3c0a,_0x435e27={'vomAw':function(_0x2e0671,_0x348b1f){return _0x2e0671===_0x348b1f;},'cfvnt':_0x535043(0x165),'sbpRE':function(_0x195825){return _0x195825();}};if(_0x435e27[_0x535043(0xeb)](_0x19744c[_0x535043(0xfb)],_0x435e27[_0x535043(0xf4)]))_0x435e27['sbpRE'](sendMessage);});async function generateQuizWithoutAI(_0x552306,_0x32057d){const _0x28cb28=_0x1c3c0a,_0x23a421={'xpSxl':function(_0x2fc552,_0x29a2d8){return _0x2fc552===_0x29a2d8;},'NIPWi':_0x28cb28(0xde),'teblo':_0x28cb28(0xa0),'TdKYA':_0x28cb28(0xa4),'RoRwy':function(_0x4bf9ad,_0x4b6603){return _0x4bf9ad(_0x4b6603);},'wkzOQ':_0x28cb28(0x75),'Swfvi':'What\x20are\x20the\x20key\x20points\x20mentioned\x20in\x20the\x20text?','WuWXc':'open_ended','DsFTU':_0x28cb28(0x13d),'jSZIW':_0x28cb28(0x70),'AVCXN':_0x28cb28(0x108),'Umvrv':_0x28cb28(0x177),'nqGEB':_0x28cb28(0x153),'ohIvY':_0x28cb28(0xb8),'ChiJP':_0x28cb28(0x130)};console[_0x28cb28(0x73)](_0x28cb28(0x77),{'imageContext':_0x552306,'userPrompt':_0x32057d});try{const _0x79d94e=_0x23a421[_0x28cb28(0xfe)](_0x552306[_0x28cb28(0x149)],_0x23a421[_0x28cb28(0x128)]),_0x374394=_0x552306[_0x28cb28(0xea)],_0x5d81ef=_0x552306[_0x28cb28(0xf5)],_0x49a16a=[];_0x79d94e?(_0x49a16a[_0x28cb28(0xa7)]({'question':_0x23a421[_0x28cb28(0x84)],'type':_0x23a421['TdKYA'],'options':_0x23a421[_0x28cb28(0xd9)](generateOptionsFromText,_0x374394),'answer':_0x23a421['wkzOQ'],'points':0x2}),_0x49a16a['push']({'question':_0x23a421[_0x28cb28(0xb5)],'type':_0x23a421[_0x28cb28(0x11c)],'answer':_0x23a421['DsFTU'],'points':0x2})):_0x49a16a[_0x28cb28(0xa7)]({'question':_0x23a421['jSZIW'],'type':_0x23a421[_0x28cb28(0x11c)],'answer':_0x23a421['AVCXN'],'points':0x2});_0x49a16a[_0x28cb28(0xa7)]({'question':generateCustomQuestion(_0x32057d,_0x374394),'type':_0x23a421[_0x28cb28(0xae)],'options':[_0x23a421[_0x28cb28(0xcf)],_0x23a421[_0x28cb28(0x161)],_0x23a421['nqGEB'],_0x23a421[_0x28cb28(0x6d)]],'answer':_0x28cb28(0x75),'points':0x2});const _0x30abe9={'id':Date[_0x28cb28(0x103)]()[_0x28cb28(0x118)](),'title':_0x5d81ef[0x0]+_0x28cb28(0x8d),'subject':_0x5d81ef[0x0],'grade':_0x28cb28(0x76),'timeLimit':0xf,'topic':_0x5d81ef[_0x28cb28(0x12f)](',\x20'),'questions':_0x49a16a};return _0x30abe9;}catch(_0x1ef28c){console[_0x28cb28(0x141)](_0x23a421[_0x28cb28(0x13e)],_0x1ef28c);throw _0x1ef28c;}}