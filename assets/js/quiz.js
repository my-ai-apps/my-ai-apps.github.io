
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x1a73a5=_0x23d8;(function(_0x5a833b,_0xc7bd8a){const _0x1a18ca=_0x23d8,_0x3b817f=_0x5a833b();while(!![]){try{const _0x29dc9a=parseInt(_0x1a18ca(0x193))/0x1+-parseInt(_0x1a18ca(0x257))/0x2*(parseInt(_0x1a18ca(0x243))/0x3)+parseInt(_0x1a18ca(0x21d))/0x4*(parseInt(_0x1a18ca(0x215))/0x5)+parseInt(_0x1a18ca(0x1ba))/0x6*(-parseInt(_0x1a18ca(0x27a))/0x7)+-parseInt(_0x1a18ca(0x24a))/0x8*(-parseInt(_0x1a18ca(0x286))/0x9)+-parseInt(_0x1a18ca(0x1b9))/0xa+-parseInt(_0x1a18ca(0x23f))/0xb;if(_0x29dc9a===_0xc7bd8a)break;else _0x3b817f['push'](_0x3b817f['shift']());}catch(_0x2be90b){_0x3b817f['push'](_0x3b817f['shift']());}}}(_0x3d96,0xc4e2a));import{Logger}from'./common.js';const chatMessages=document[_0x1a73a5(0x1dd)](_0x1a73a5(0x19f)),messageInput=document[_0x1a73a5(0x1dd)](_0x1a73a5(0x258)),sendButton=document['getElementById'](_0x1a73a5(0x1c1)),cameraButton=document['getElementById']('cameraButton'),themeToggle=document[_0x1a73a5(0x1dd)](_0x1a73a5(0x1cd)),cameraContainer=document['getElementById']('cameraContainer'),cameraPreview=document['getElementById'](_0x1a73a5(0x279)),captureButton=document[_0x1a73a5(0x1dd)]('captureButton'),cancelButton=document['getElementById'](_0x1a73a5(0x192));let stream=null,imageContext=null;async function startCamera(){const _0x42764e=_0x1a73a5,_0xbf53bc={'AYBeF':_0x42764e(0x261),'OeAaN':_0x42764e(0x282),'WnGig':_0x42764e(0x1c9),'DEgkI':_0x42764e(0x1d9),'iMCwE':_0x42764e(0x259),'MQOLl':function(_0x59a040,_0x4d505f){return _0x59a040(_0x4d505f);},'mhWVQ':function(_0x448e76,_0x118d1d){return _0x448e76+_0x118d1d;}};console[_0x42764e(0x22e)](_0xbf53bc[_0x42764e(0x1b4)]);try{const _0x2c054e=_0xbf53bc[_0x42764e(0x21a)][_0x42764e(0x1da)]('|');let _0x53d6b0=0x0;while(!![]){switch(_0x2c054e[_0x53d6b0++]){case'0':stream=await navigator[_0x42764e(0x1de)][_0x42764e(0x1f8)]({'video':{'facingMode':'environment'}});continue;case'1':console[_0x42764e(0x22e)]('[Camera]\x20Camera\x20preview\x20started\x20and\x20container\x20displayed');continue;case'2':cameraPreview[_0x42764e(0x293)]=stream;continue;case'3':cameraContainer[_0x42764e(0x22d)][_0x42764e(0x1cc)]=_0xbf53bc[_0x42764e(0x253)];continue;case'4':console[_0x42764e(0x22e)](_0xbf53bc[_0x42764e(0x1c7)],stream);continue;}break;}}catch(_0x490622){console['error'](_0xbf53bc[_0x42764e(0x1a4)],_0x490622),_0xbf53bc[_0x42764e(0x272)](addMessage,_0xbf53bc[_0x42764e(0x27c)](_0x42764e(0x196),_0x490622['message']));}}function stopCamera(){const _0x5a31a8=_0x1a73a5,_0x358256={'FXnur':_0x5a31a8(0x274),'PMqCI':_0x5a31a8(0x231),'IuGGx':_0x5a31a8(0x225)};console[_0x5a31a8(0x22e)](_0x358256[_0x5a31a8(0x1e6)]),stream&&(stream[_0x5a31a8(0x189)]()[_0x5a31a8(0x19a)](_0x3a65fc=>{const _0x3b844d=_0x5a31a8;console[_0x3b844d(0x22e)](_0x358256[_0x3b844d(0x24b)],_0x3a65fc[_0x3b844d(0x21f)]),_0x3a65fc[_0x3b844d(0x211)]();}),stream=null),cameraContainer[_0x5a31a8(0x22d)][_0x5a31a8(0x1cc)]=_0x358256['IuGGx'],console[_0x5a31a8(0x22e)](_0x5a31a8(0x19e));}async function processImageUsingWindowAI(_0xf6c85){const _0xf7631a=_0x1a73a5,_0x5a7930={'vDSim':_0xf7631a(0x195),'jzhik':'[AI]\x20Creating\x20image\x20recognition\x20session...','XTMjf':_0xf7631a(0x1f4),'mZuDI':'[AI]\x20Performing\x20image\x20recognition...','WMHEG':_0xf7631a(0x23d)};console[_0xf7631a(0x22e)]('[AI]\x20Starting\x20image\x20processing...',_0xf6c85);if(!window['ai']){console['error'](_0x5a7930[_0xf7631a(0x23b)]);throw new Error('Windows\x20AI\x20API\x20not\x20available');}try{console[_0xf7631a(0x22e)](_0x5a7930[_0xf7631a(0x1a3)]);const _0x1064f6=await window['ai'][_0xf7631a(0x1f9)]();console[_0xf7631a(0x22e)](_0x5a7930['XTMjf'],_0x1064f6),console['log'](_0x5a7930['mZuDI']);const _0x1e451c=await _0x1064f6[_0xf7631a(0x1d7)](_0xf6c85);return console[_0xf7631a(0x22e)]('[AI]\x20Image\x20recognition\x20completed.\x20Result:',_0x1e451c),_0x1e451c;}catch(_0x10071e){console[_0xf7631a(0x1eb)](_0x5a7930[_0xf7631a(0x246)],_0x10071e);throw _0x10071e;}}async function processImageUsingTesseract(_0x3f0514){const _0x1d1d99=_0x1a73a5,_0x1da482={'dwfeQ':_0x1d1d99(0x1d0),'IyILP':function(_0x38c3c5,_0x1a10de,_0x25f4c5){return _0x38c3c5(_0x1a10de,_0x25f4c5);},'VUpmT':function(_0x15a418,_0xf268d8){return _0x15a418(_0xf268d8);},'xhffe':_0x1d1d99(0x205),'HUJkV':function(_0x4f6a10,_0x1e027f){return _0x4f6a10>_0x1e027f;},'sfgkW':_0x1d1d99(0x235),'ruAuz':_0x1d1d99(0x1ab),'DixQL':_0x1d1d99(0x25f),'guCSF':_0x1d1d99(0x1d8),'uryKM':'[Processing]\x20Error\x20during\x20image\x20processing:'};console[_0x1d1d99(0x22e)](_0x1da482['dwfeQ']),_0x1da482[_0x1d1d99(0x270)](addMessage,'Processing\x20image...',![]);try{const _0x51e991=await _0x1da482[_0x1d1d99(0x23c)](extractTextFromImage,_0x3f0514);return console[_0x1d1d99(0x22e)](_0x1da482['xhffe'],_0x51e991),_0x51e991['text']&&_0x1da482[_0x1d1d99(0x1fd)](_0x51e991[_0x1d1d99(0x235)][_0x1d1d99(0x1c0)]()['length'],0x0)?{'type':_0x1da482[_0x1d1d99(0x1ed)],'content':_0x1da482[_0x1d1d99(0x27e)],'confidence':_0x51e991[_0x1d1d99(0x27d)],'topics':_0x1da482[_0x1d1d99(0x23c)](generateTopics,_0x51e991[_0x1d1d99(0x235)])}:(console['log'](_0x1d1d99(0x25e)),{'type':_0x1da482[_0x1d1d99(0x1aa)],'content':'Visual\x20content\x20detected','topics':[_0x1d1d99(0x278),_0x1da482[_0x1d1d99(0x25a)]],'features':{'timestamp':new Date()[_0x1d1d99(0x265)](),'dimensions':{'width':_0x3f0514['width'],'height':_0x3f0514['height']}}});}catch(_0x10589b){console[_0x1d1d99(0x1eb)](_0x1da482[_0x1d1d99(0x209)],_0x10589b);throw _0x10589b;}}async function extractTextFromImage(_0x311285){const _0x47a984=_0x1a73a5,_0x48793d={'BxhAv':'[OCR]\x20Starting\x20text\x20extraction...','hYfyQ':_0x47a984(0x295),'AVpat':_0x47a984(0x1a6),'dlWeu':'[OCR]\x20Text\x20extracted:','MivrR':'[OCR]\x20Worker\x20terminated','JFKLO':function(_0x587327,_0x3dcfb1){return _0x587327(_0x3dcfb1);},'eHafz':'Image\x20and\x20text\x20analysis\x20complete','KJgse':_0x47a984(0x223)};console['log'](_0x48793d[_0x47a984(0x203)]);const _0x208a48=_0x48793d['hYfyQ'];try{const _0x1758fe=await Tesseract['createWorker']();await _0x1758fe[_0x47a984(0x1ad)](),await _0x1758fe[_0x47a984(0x1ea)](_0x208a48),await _0x1758fe[_0x47a984(0x1c2)](_0x208a48),console['log'](_0x48793d[_0x47a984(0x188)]);const _0x568e9f=await _0x1758fe[_0x47a984(0x1d7)](_0x311285);console[_0x47a984(0x22e)](_0x48793d[_0x47a984(0x255)],_0x568e9f[_0x47a984(0x1b5)]['text']),await _0x1758fe[_0x47a984(0x1ee)](),console['log'](_0x48793d[_0x47a984(0x1c3)]);const _0x20ec54={'timestamp':new Date()[_0x47a984(0x265)](),'imageSize':{'width':_0x311285[_0x47a984(0x1e1)],'height':_0x311285[_0x47a984(0x277)]},'extractedText':_0x568e9f[_0x47a984(0x1b5)]['text'],'confidenceScore':_0x568e9f[_0x47a984(0x1b5)]['confidence'],'suggestedTopics':_0x48793d[_0x47a984(0x273)](generateTopics,_0x568e9f['data'][_0x47a984(0x235)])};return{'description':_0x48793d[_0x47a984(0x22c)],'metadata':_0x20ec54,'text':_0x568e9f[_0x47a984(0x1b5)][_0x47a984(0x235)],'confidence':_0x568e9f[_0x47a984(0x1b5)][_0x47a984(0x27d)]};}catch(_0x3693a9){return console[_0x47a984(0x1eb)](_0x48793d['KJgse'],_0x3693a9),{'text':'','confidence':0x0};}}function _0x3d96(){const _0x445857=['PMqCI','className','uxdzx','bmtaA','loadLanguage','error','You\x20are\x20a\x20quiz\x20generator.\x20Create\x20a\x20quiz\x20based\x20on\x20the\x20following\x20image\x20context\x20and\x20user\x20requirements.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Image\x20context:\x20','sfgkW','terminate','priEG','Geography','mfmwL','dYpNf','GDMYd','[AI]\x20Image\x20session\x20created:','General','Option\x20B','click','getUserMedia','createImageSession','\x0a\x0aUser\x20request:\x20','grNCL','GxABz','HUJkV','Copied!','hzuVy','dark','addEventListener','message\x20bot-message','BxhAv','vWNTN','[OCR]\x20Text\x20extraction\x20result:','ZeglY','rjwOZ','sWwrf','uryKM','user','getAttribute','user-message','tTdeM','length','qjAZR','topics','stop','includes','eJxHK','type','5gBQUvb','RrtMx','then','bQCvN','test','OeAaN','Bot','What\x20is\x20the\x20significance\x20of\x20','5532264HBKEIV','quiz-container','label','map','KdYfW','jvEWA','[OCR]\x20Error\x20in\x20text\x20extraction:','hGlkJ','none','data-theme','catch','clipboard','Create\x20a\x20quiz\x20about\x20','scrollTop','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Type:\x20','eHafz','style','log','Additional\x20option\x20','points','[Camera]\x20Stopping\x20camera...','pattern','Based\x20on\x20the\x20text,\x20what\x20is\x20the\x20main\x20topic\x20being\x20discussed?','eyYAw','text','Science','add','qUltv','FTFqf','[Quiz]\x20Error\x20in\x20quiz\x20generation\x20using\x20Gemini\x20Nano\x20AI:','vDSim','VUpmT','[AI]\x20Error\x20during\x20image\x20processing:','History','18706380KkXqHP','what','IlFbP','topic','51RsDyKh','YVPjF','Option\x20D','WMHEG','timeLimit','Please\x20capture\x20an\x20image\x20first\x20before\x20providing\x20quiz\x20requirements.','button','709840LHnmll','FXnur','src','PLcdr','Uhajv','img','I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20requirements:','push','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','WnGig','jWQzf','dlWeu','Student\x20should\x20identify\x20main\x20points\x20from\x20the\x20text','19106yPVnMw','messageInput','[Camera]\x20Error\x20accessing\x20camera:','guCSF','canvas','[Processing]\x20Image\x20processing\x20completed:','rGoYJ','[Processing]\x20No\x20OCR\x20text\x20found,\x20falling\x20back\x20to\x20image\x20analysis','image','system','[Camera]\x20Starting\x20camera\x20initialization...','textContent','Description\x20of\x20visual\x20elements','[Quiz]\x20Fallback\x20generation\x20also\x20failed:','toISOString','\x20\x20\x20','Generate\x20questions\x20based\x20on\x20the\x20image\x20related\x20text\x20-\x20','promptStreaming','setAttribute','[Chat]\x20Sending\x20message:','Yncbo','wVjTD','User','getContext','setItem','IyILP','aUnwf','MQOLl','JFKLO','[Camera]\x20Stopping\x20track:','image/jpeg','subject','height','Visual\x20Analysis','cameraPreview','10822RTqFIo','captured-image','mhWVQ','confidence','ruAuz','\x0a\x20\x20\x20\x20','options','appendChild','0|4|2|3|1','finally','oFtia','join','117SamJDt','[Camera]\x20Error\x20processing\x20captured\x20image:','nAvmw','unHCY','toDataURL','Quiz\x20generation\x20failed\x20completely.\x20Please\x20try\x20again\x20later.','GbEVC','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Points:\x20','SHfoD','BuXSB','QxFin','from','div','srcObject','\x20Quiz','eng','What\x20are\x20the\x20key\x20points\x20mentioned\x20in\x20the\x20text?','key','qEDTw','onclick','Copy\x20failed:','Image\x20captured!\x20Please\x20provide\x20your\x20requirements\x20for\x20the\x20quiz.','AVpat','getTracks','toLowerCase','GLCAN','icmkA','prpNp','[Quiz]\x20Error\x20generating\x20quiz:','createElement','PmDfw','title','cancelButton','1014894AJOZTi','[UI]\x20Adding\x20quiz\x20to\x20chat:','[AI]\x20Windows\x20AI\x20API\x20not\x20found\x20in\x20window\x20object','Error\x20accessing\x20camera:\x20','remove','drawImage','YIYKJ','forEach','scrollHeight','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Time\x20Limit:\x20','I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20image\x20and\x20requirements:','[Camera]\x20Camera\x20stopped\x20and\x20container\x20hidden','chatMessages','Option\x20A','slice','size','jzhik','iMCwE','wTJul','[OCR]\x20Worker\x20initialized','documentElement','ANqpq','USmkN','DixQL','Washington\x20Drivers\x20License\x20Test','RJNMG','load','[UI]\x20Adding\x20message:\x20','Mathematics','Generating\x20quiz...','content','fromCharCode','CNTit','AYBeF','data','nsxGw','Generate\x20multiple\x20choice\x20questions\x20about\x20this\x20picture','value','6238450xrrnKH','1002pfaRyw','LZOlS','videoHeight','message\x20bot-message\x20streaming','toString','pre','trim','sendButton','initialize','MivrR','stringify','question','questions','DEgkI','imageContext:','flex','\x20-\x20','nSSsP','display','themeToggle','vgjUu','filter','[Processing]\x20Starting\x20image\x20OCR\x20analysis...','bot-message','writeText','IVXWU','open_ended','What\x20can\x20you\x20observe\x20in\x20this\x20image?','window.ai\x20API\x20not\x20available','recognize','General\x20Knowledge','[Camera]\x20Successfully\x20got\x20media\x20stream:','split','prompt-suggestion','message\x20','getElementById','mediaDevices','now','VjPDT','width','rzVEX','multiple_choice','KWnWN','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Subject:\x20'];_0x3d96=function(){return _0x445857;};return _0x3d96();}function generateTopics(_0x497832){const _0x1c9819=_0x1a73a5,_0x1d2d87={'YVPjF':_0x1c9819(0x1af),'ZeglY':_0x1c9819(0x236),'prpNp':_0x1c9819(0x1f0),'bQCvN':'Language\x20Arts','grNCL':'Art'},_0xe4218=new Set(),_0x55ac85=_0x497832[_0x1c9819(0x18a)](),_0x50b3ea=[{'pattern':/\b(math|equation|calculate|formula|number)\b/,'topic':_0x1d2d87[_0x1c9819(0x244)]},{'pattern':/\b(science|experiment|chemical|biology|physics)\b/,'topic':_0x1d2d87[_0x1c9819(0x206)]},{'pattern':/\b(history|century|ancient|war|empire|civilization)\b/,'topic':_0x1c9819(0x23e)},{'pattern':/\b(geography|country|capital|mountain|river|climate)\b/,'topic':_0x1d2d87[_0x1c9819(0x18d)]},{'pattern':/\b(grammar|sentence|paragraph|essay|writing)\b/,'topic':_0x1d2d87[_0x1c9819(0x218)]},{'pattern':/\b(art|color|design|paint|draw)\b/,'topic':_0x1d2d87[_0x1c9819(0x1fb)]}];return _0x50b3ea[_0x1c9819(0x19a)](_0x914469=>{const _0x5cb95f=_0x1c9819;_0x914469[_0x5cb95f(0x232)][_0x5cb95f(0x219)](_0x55ac85)&&_0xe4218['add'](_0x914469[_0x5cb95f(0x242)]);}),_0xe4218[_0x1c9819(0x1a2)]===0x0&&_0xe4218[_0x1c9819(0x237)](_0x1c9819(0x1d8)),Array[_0x1c9819(0x291)](_0xe4218);}async function generateQuizUsingAI(_0x8e7aae,_0x348956){const _0x4c1c54=_0x1a73a5,_0x362965={'mfmwL':'[Quiz]\x20Starting\x20quiz\x20generation\x20with\x20Gemini\x20Nano...','hGlkJ':_0x4c1c54(0x1c8),'wnKjE':_0x4c1c54(0x1d6),'vWNTN':'[Quiz]\x20Constructed\x20system\x20prompt:','qEDTw':_0x4c1c54(0x260),'GxABz':_0x4c1c54(0x292),'nsxGw':_0x4c1c54(0x1bd),'rzVEX':_0x4c1c54(0x1b0),'IVXWU':function(_0x22b66f){return _0x22b66f();},'VTvfe':function(_0x4a7ef4,_0x49911b){return _0x4a7ef4(_0x49911b);},'eJxHK':function(_0x459fb7,_0x32b383,_0x2d9ce2){return _0x459fb7(_0x32b383,_0x2d9ce2);},'eyYAw':function(_0x2e4e45,_0x1a820f){return _0x2e4e45(_0x1a820f);},'nSSsP':_0x4c1c54(0x23a),'wTJul':'Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz\x20using\x20Gemini\x20Nano\x20AI.\x20Please\x20try\x20again.','unHCY':function(_0x3e3e53,_0x32977f,_0x2ce0c9){return _0x3e3e53(_0x32977f,_0x2ce0c9);},'gpVEK':function(_0x18b27c,_0x4f6fd2,_0x3551a9){return _0x18b27c(_0x4f6fd2,_0x3551a9);},'qUltv':'Generated\x20a\x20basic\x20quiz\x20without\x20AI\x20assistance:','vgjUu':function(_0xa67cc9,_0x416bf8,_0xaec0bf){return _0xa67cc9(_0x416bf8,_0xaec0bf);},'rGoYJ':_0x4c1c54(0x28b)};console[_0x4c1c54(0x22e)](_0x362965[_0x4c1c54(0x1f1)],{'imageContext':_0x8e7aae,'userPrompt':_0x348956});try{console[_0x4c1c54(0x22e)](_0x362965[_0x4c1c54(0x224)],JSON['stringify'](_0x8e7aae));if(!window['ai'])throw new Error(_0x362965['wnKjE']);const _0xfa9f5e=_0x4c1c54(0x1ec)+JSON[_0x4c1c54(0x1c4)](_0x8e7aae)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Format\x20the\x20response\x20as\x20a\x20JSON\x20quiz\x20object\x20with\x20id,\x20grade,\x20subject,\x20title,\x20timeLimit,\x20topic,\x20and\x20questions\x20array.';console[_0x4c1c54(0x22e)](_0x362965[_0x4c1c54(0x204)],_0xfa9f5e);const _0x4de531=[{'role':_0x362965[_0x4c1c54(0x184)],'content':_0xfa9f5e},{'role':_0x4c1c54(0x20a),'content':_0x348956}],_0x2c8623=document[_0x4c1c54(0x18f)](_0x362965[_0x4c1c54(0x1fc)]);_0x2c8623[_0x4c1c54(0x1e7)]=_0x362965[_0x4c1c54(0x1b6)],chatMessages['appendChild'](_0x2c8623),showTypingIndicator(chatMessages,_0x362965[_0x4c1c54(0x1e2)]);if(!aiLanguageSession)await _0x362965[_0x4c1c54(0x1d3)](initializeLanguageSession);const _0x210c39=await aiLanguageSession[_0x4c1c54(0x268)](_0xfa9f5e+_0x4c1c54(0x1fa)+_0x348956);let _0x1b4f88='';for await(const _0x540f0c of _0x210c39){_0x1b4f88+=_0x540f0c,_0x2c8623[_0x4c1c54(0x262)]=_0x1b4f88,chatMessages[_0x4c1c54(0x22a)]=chatMessages[_0x4c1c54(0x19b)];}_0x2c8623[_0x4c1c54(0x197)]();let _0x166bfa;try{_0x166bfa=_0x362965['VTvfe'](safeJSONParse,_0x1b4f88),_0x362965[_0x4c1c54(0x213)](addMessage,_0x4c1c54(0x19d),![]),_0x362965[_0x4c1c54(0x234)](addQuiz,_0x166bfa);}catch(_0x35074f){console[_0x4c1c54(0x1eb)]('[Quiz]\x20Failed\x20to\x20parse\x20AI\x20response:',_0x35074f),addMessage(_0x1b4f88,![]);throw _0x35074f;}removeTypingIndicator();}catch(_0x287b73){console[_0x4c1c54(0x1eb)](_0x362965[_0x4c1c54(0x1cb)],_0x287b73),removeTypingIndicator(),addMessage(_0x362965[_0x4c1c54(0x1a5)],![]);try{const _0x2c2439=await _0x362965[_0x4c1c54(0x289)](generateQuizWithoutAI,_0x8e7aae,_0x348956);_0x362965['gpVEK'](addMessage,_0x362965[_0x4c1c54(0x238)],![]),addQuiz(_0x2c2439);}catch(_0x50e6b8){console[_0x4c1c54(0x1eb)](_0x4c1c54(0x264),_0x50e6b8),_0x362965[_0x4c1c54(0x1ce)](addMessage,_0x362965[_0x4c1c54(0x25d)],![]);}}}function generateOptionsFromText(_0x27db1d){const _0xf8a503=_0x1a73a5,_0x16e0dd=_0x27db1d['split'](/[.!?]+/)[_0xf8a503(0x1cf)](_0x4bf20a=>_0x4bf20a['trim']()[_0xf8a503(0x20e)]>0x0),_0x2310e0=_0x16e0dd[_0xf8a503(0x1a1)](0x0,0x4)[_0xf8a503(0x220)](_0xd77ad=>_0xd77ad['trim']());while(_0x2310e0['length']<0x4){_0x2310e0['push'](_0xf8a503(0x22f)+(_0x2310e0[_0xf8a503(0x20e)]+0x1));}return _0x2310e0;}function generateCustomQuestion(_0x3f26f6,_0x309064){const _0x4f78bb=_0x1a73a5,_0x57d78b={'tTdeM':_0x4f78bb(0x240)};return _0x3f26f6[_0x4f78bb(0x18a)]()[_0x4f78bb(0x212)](_0x57d78b[_0x4f78bb(0x20d)])?_0x3f26f6:_0x4f78bb(0x21c)+_0x309064[_0x4f78bb(0x1da)]('\x20')[_0x4f78bb(0x1a1)](0x0,0x3)['join']('\x20')+'...?';}function addMessage(_0x48a222,_0x3def83=![]){const _0x307a9a=_0x1a73a5,_0x10863f={'EdQSZ':_0x307a9a(0x21b),'priEG':_0x307a9a(0x20c),'PmDfw':_0x307a9a(0x1d1)};console[_0x307a9a(0x22e)](_0x307a9a(0x1ae)+(_0x3def83?_0x307a9a(0x26d):_0x10863f['EdQSZ'])+':',_0x48a222);const _0x2f48e7=document[_0x307a9a(0x18f)]('div');_0x2f48e7[_0x307a9a(0x1e7)]=_0x307a9a(0x1dc)+(_0x3def83?_0x10863f[_0x307a9a(0x1ef)]:_0x10863f[_0x307a9a(0x190)]),_0x2f48e7[_0x307a9a(0x262)]=_0x48a222,chatMessages['appendChild'](_0x2f48e7),chatMessages[_0x307a9a(0x22a)]=chatMessages[_0x307a9a(0x19b)];}function addQuiz(_0xb1eebe){const _0x228f31=_0x1a73a5,_0x50e12f={'KdYfW':_0x228f31(0x194),'IlFbP':_0x228f31(0x292),'RrtMx':_0x228f31(0x21e),'CNTit':_0x228f31(0x1bf),'Yncbo':_0x228f31(0x249),'QxFin':'Copy\x20Quiz'};console[_0x228f31(0x22e)](_0x50e12f[_0x228f31(0x221)],_0xb1eebe);const _0x3ff3bc=document[_0x228f31(0x18f)](_0x50e12f[_0x228f31(0x241)]);_0x3ff3bc[_0x228f31(0x1e7)]=_0x50e12f[_0x228f31(0x216)];const _0x5a7d20='\x0a\x20\x20\x20\x20\x20\x20\x20\x20Title:\x20'+_0xb1eebe[_0x228f31(0x191)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20Grade:\x20'+_0xb1eebe['grade']+_0x228f31(0x1e5)+_0xb1eebe[_0x228f31(0x276)]+_0x228f31(0x19c)+_0xb1eebe[_0x228f31(0x247)]+'\x20minutes\x0a\x20\x20\x20\x20\x20\x20\x20\x20Topics:\x20'+_0xb1eebe[_0x228f31(0x242)]+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20Questions:\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0xb1eebe[_0x228f31(0x1c6)]['map']((_0x2788a3,_0x34c1b8)=>_0x228f31(0x252)+(_0x34c1b8+0x1)+'.\x20'+_0x2788a3[_0x228f31(0x1c5)]+_0x228f31(0x252)+(_0x2788a3[_0x228f31(0x280)]?_0x2788a3[_0x228f31(0x280)][_0x228f31(0x220)]((_0x19e6e7,_0x22b616)=>_0x228f31(0x266)+String[_0x228f31(0x1b2)](0x61+_0x22b616)+')\x20'+_0x19e6e7)['join']('\x0a'):'')+_0x228f31(0x22b)+_0x2788a3[_0x228f31(0x214)]+_0x228f31(0x28d)+_0x2788a3[_0x228f31(0x230)]+_0x228f31(0x252))[_0x228f31(0x285)]('\x0a')+_0x228f31(0x27f),_0x6adb1=document['createElement'](_0x50e12f[_0x228f31(0x1b3)]);_0x6adb1[_0x228f31(0x262)]=_0x5a7d20,_0x3ff3bc[_0x228f31(0x281)](_0x6adb1);const _0x3dd6e4=document['createElement'](_0x50e12f[_0x228f31(0x26b)]);_0x3dd6e4[_0x228f31(0x1e7)]='copy-button',_0x3dd6e4[_0x228f31(0x262)]=_0x50e12f[_0x228f31(0x290)],_0x3dd6e4[_0x228f31(0x185)]=()=>{const _0x12bc75=_0x228f31;navigator[_0x12bc75(0x228)][_0x12bc75(0x1d2)](_0x5a7d20)[_0x12bc75(0x217)](()=>_0x3dd6e4[_0x12bc75(0x262)]=_0x12bc75(0x1fe))[_0x12bc75(0x227)](_0x40d22a=>console[_0x12bc75(0x1eb)](_0x12bc75(0x186),_0x40d22a))[_0x12bc75(0x283)](()=>setTimeout(()=>_0x3dd6e4[_0x12bc75(0x262)]='Copy\x20Quiz',0x7d0));},_0x3ff3bc[_0x228f31(0x281)](_0x3dd6e4),chatMessages[_0x228f31(0x281)](_0x3ff3bc),chatMessages['scrollTop']=chatMessages[_0x228f31(0x19b)];}async function captureImage(){const _0x244ac3=_0x1a73a5,_0x3b6921={'oFtia':function(_0x1bb7e6){return _0x1bb7e6();},'ANqpq':_0x244ac3(0x292),'IEnZx':_0x244ac3(0x1db),'CYBWW':_0x244ac3(0x25b),'jvEWA':_0x244ac3(0x24f),'TpYhd':_0x244ac3(0x275),'zhfmp':_0x244ac3(0x27b),'hzuVy':function(_0x101027){return _0x101027();},'aUnwf':function(_0x4ec5b1,_0x45abbc){return _0x4ec5b1(_0x45abbc);},'YIYKJ':_0x244ac3(0x25c),'VjPDT':function(_0x53000a,_0x91c16c,_0x10a967){return _0x53000a(_0x91c16c,_0x10a967);},'FTFqf':_0x244ac3(0x187),'GbEVC':function(_0x5b2162,_0x518d86){return _0x5b2162===_0x518d86;},'Uhajv':_0x244ac3(0x1b7),'bmtaA':'Make\x20a\x20quiz\x20suitable\x20for\x20beginners','nAvmw':_0x244ac3(0x287)};console['log']('[Camera]\x20Capturing\x20image...');try{const _0x38b73f=document['createElement'](_0x3b6921['CYBWW']);_0x38b73f[_0x244ac3(0x1e1)]=cameraPreview['videoWidth'],_0x38b73f['height']=cameraPreview[_0x244ac3(0x1bc)],_0x38b73f[_0x244ac3(0x26e)]('2d')[_0x244ac3(0x198)](cameraPreview,0x0,0x0);const _0x95dd4=document['createElement'](_0x3b6921[_0x244ac3(0x222)]);_0x95dd4[_0x244ac3(0x24c)]=_0x38b73f[_0x244ac3(0x28a)](_0x3b6921['TpYhd']),_0x95dd4[_0x244ac3(0x1e7)]=_0x3b6921['zhfmp'];const _0x22146e=document['createElement'](_0x3b6921[_0x244ac3(0x1a8)]);_0x22146e['className']=_0x244ac3(0x202),_0x22146e[_0x244ac3(0x281)](_0x95dd4),chatMessages['appendChild'](_0x22146e),_0x3b6921[_0x244ac3(0x1ff)](stopCamera);const _0x3362fb=await _0x3b6921[_0x244ac3(0x271)](processImageUsingTesseract,_0x95dd4);imageContext=_0x3362fb,console[_0x244ac3(0x22e)](_0x3b6921[_0x244ac3(0x199)],JSON[_0x244ac3(0x1c4)](imageContext,null,0x2)),_0x3b6921[_0x244ac3(0x1e0)](addMessage,_0x3b6921[_0x244ac3(0x239)],![]);const _0x354ec4=[_0x244ac3(0x229)+imageContext[_0x244ac3(0x210)][0x0]+_0x244ac3(0x1ca)+imageContext[_0x244ac3(0x1b1)],_0x3b6921[_0x244ac3(0x28c)](imageContext['type'],_0x244ac3(0x235))?_0x244ac3(0x267)+imageContext[_0x244ac3(0x1b1)]:_0x3b6921[_0x244ac3(0x24e)],_0x3b6921[_0x244ac3(0x1e9)]];_0x354ec4['forEach'](_0x2bcc05=>{const _0x2a2587=_0x244ac3,_0x475a92=document[_0x2a2587(0x18f)](_0x3b6921[_0x2a2587(0x1a8)]);_0x475a92[_0x2a2587(0x1e7)]=_0x3b6921['IEnZx'],_0x475a92['textContent']=_0x2bcc05,_0x475a92[_0x2a2587(0x185)]=()=>{const _0x4c5ffc=_0x2a2587;messageInput[_0x4c5ffc(0x1b8)]=_0x2bcc05,_0x3b6921[_0x4c5ffc(0x284)](sendMessage);},chatMessages[_0x2a2587(0x281)](_0x475a92);});}catch(_0x50ae95){console['error'](_0x3b6921[_0x244ac3(0x288)],_0x50ae95),_0x3b6921[_0x244ac3(0x1e0)](addMessage,'Sorry,\x20I\x20couldn\x27t\x20process\x20the\x20image.\x20Please\x20try\x20again.',![]);}}async function sendMessage(){const _0x156541=_0x1a73a5,_0x21d414={'GUpWR':_0x156541(0x26a),'sWwrf':function(_0x57c49b,_0x4ed6de,_0x31e106){return _0x57c49b(_0x4ed6de,_0x31e106);},'jWQzf':function(_0x5dfacc,_0x17bbcd,_0x4216ca){return _0x5dfacc(_0x17bbcd,_0x4216ca);},'qjAZR':_0x156541(0x250),'dYpNf':function(_0x6302dc,_0x42d88d){return _0x6302dc(_0x42d88d);},'uyUDL':function(_0x10598f,_0x32ae5b,_0x56ca18){return _0x10598f(_0x32ae5b,_0x56ca18);}},_0x260d52=messageInput[_0x156541(0x1b8)][_0x156541(0x1c0)]();if(!_0x260d52)return;console['log'](_0x21d414['GUpWR'],_0x260d52),_0x21d414[_0x156541(0x208)](addMessage,_0x260d52,!![]),messageInput['value']='';if(imageContext)try{const _0x1bd839=await generateQuizUsingAI(imageContext,_0x260d52);_0x21d414[_0x156541(0x254)](addMessage,_0x21d414[_0x156541(0x20f)],![]),_0x21d414[_0x156541(0x1f2)](addQuiz,_0x1bd839);}catch(_0x360fb5){_0x21d414[_0x156541(0x254)](addMessage,'Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz.\x20Please\x20try\x20again.',![]);}else _0x21d414['uyUDL'](addMessage,_0x156541(0x248),![]);}function toggleTheme(){const _0x12b5b4=_0x1a73a5,_0x1c8860={'LZOlS':_0x12b5b4(0x226),'GDMYd':function(_0x56bd25,_0x380128){return _0x56bd25===_0x380128;},'wVjTD':_0x12b5b4(0x200),'USmkN':'light','rjwOZ':'theme'},_0x48b1e6=document[_0x12b5b4(0x1a7)],_0x6a1222=_0x48b1e6[_0x12b5b4(0x20b)](_0x1c8860[_0x12b5b4(0x1bb)]),_0x469d90=_0x1c8860[_0x12b5b4(0x1f3)](_0x6a1222,_0x1c8860['wVjTD'])?_0x1c8860[_0x12b5b4(0x1a9)]:_0x1c8860[_0x12b5b4(0x26c)];_0x48b1e6[_0x12b5b4(0x269)](_0x1c8860[_0x12b5b4(0x1bb)],_0x469d90),localStorage[_0x12b5b4(0x26f)](_0x1c8860[_0x12b5b4(0x207)],_0x469d90);}themeToggle['addEventListener']('click',toggleTheme),cameraButton[_0x1a73a5(0x201)](_0x1a73a5(0x1f7),startCamera),captureButton['addEventListener'](_0x1a73a5(0x1f7),captureImage),cancelButton['addEventListener'](_0x1a73a5(0x1f7),stopCamera),sendButton[_0x1a73a5(0x201)](_0x1a73a5(0x1f7),sendMessage),messageInput['addEventListener']('keypress',_0x1ec5c6=>{const _0x536bbb=_0x1a73a5,_0x42c6b8={'RJNMG':function(_0x33158d,_0x45afa1){return _0x33158d===_0x45afa1;},'HlDId':function(_0x5021da){return _0x5021da();}};if(_0x42c6b8[_0x536bbb(0x1ac)](_0x1ec5c6[_0x536bbb(0x183)],'Enter'))_0x42c6b8['HlDId'](sendMessage);});function _0x23d8(_0x5be6f4,_0x36f9b7){const _0x3d96d8=_0x3d96();return _0x23d8=function(_0x23d8e0,_0x530faf){_0x23d8e0=_0x23d8e0-0x183;let _0x2e048c=_0x3d96d8[_0x23d8e0];return _0x2e048c;},_0x23d8(_0x5be6f4,_0x36f9b7);}async function generateQuizWithoutAI(_0x1bb1cd,_0x180492){const _0x3d6432=_0x1a73a5,_0x4e0e05={'KWnWN':function(_0x2bb36f,_0x1ad2d6){return _0x2bb36f===_0x1ad2d6;},'SHfoD':_0x3d6432(0x233),'TyuTP':_0x3d6432(0x1e3),'uxdzx':function(_0x32f6eb,_0x5189e7){return _0x32f6eb(_0x5189e7);},'YQqcj':_0x3d6432(0x1d4),'TLKZN':_0x3d6432(0x1d5),'oMBxx':_0x3d6432(0x263),'BuXSB':function(_0x385528,_0x32bd93,_0x48d288){return _0x385528(_0x32bd93,_0x48d288);},'PLcdr':_0x3d6432(0x1a0),'xSUBs':_0x3d6432(0x1f6),'icmkA':_0x3d6432(0x245),'GLCAN':_0x3d6432(0x18e)};console['log']('[Quiz]\x20Generating\x20quiz...',{'imageContext':_0x1bb1cd,'userPrompt':_0x180492});try{const _0x5cb412=_0x4e0e05[_0x3d6432(0x1e4)](_0x1bb1cd[_0x3d6432(0x214)],_0x3d6432(0x235)),_0x344397=_0x1bb1cd[_0x3d6432(0x1b1)],_0xc11e5b=_0x1bb1cd[_0x3d6432(0x210)],_0x3fc1f4=[];_0x5cb412?(_0x3fc1f4[_0x3d6432(0x251)]({'question':_0x4e0e05[_0x3d6432(0x28e)],'type':_0x4e0e05['TyuTP'],'options':_0x4e0e05[_0x3d6432(0x1e8)](generateOptionsFromText,_0x344397),'answer':'Option\x20A','points':0x2}),_0x3fc1f4[_0x3d6432(0x251)]({'question':_0x3d6432(0x296),'type':_0x4e0e05['YQqcj'],'answer':_0x3d6432(0x256),'points':0x2})):_0x3fc1f4[_0x3d6432(0x251)]({'question':_0x4e0e05['TLKZN'],'type':_0x4e0e05['YQqcj'],'answer':_0x4e0e05['oMBxx'],'points':0x2});_0x3fc1f4['push']({'question':_0x4e0e05[_0x3d6432(0x28f)](generateCustomQuestion,_0x180492,_0x344397),'type':_0x3d6432(0x1e3),'options':[_0x4e0e05['PLcdr'],_0x4e0e05['xSUBs'],'Option\x20C',_0x4e0e05[_0x3d6432(0x18c)]],'answer':_0x4e0e05[_0x3d6432(0x24d)],'points':0x2});const _0x1ea5b8={'id':Date[_0x3d6432(0x1df)]()[_0x3d6432(0x1be)](),'title':_0xc11e5b[0x0]+_0x3d6432(0x294),'subject':_0xc11e5b[0x0],'grade':_0x3d6432(0x1f5),'timeLimit':0xf,'topic':_0xc11e5b[_0x3d6432(0x285)](',\x20'),'questions':_0x3fc1f4};return _0x1ea5b8;}catch(_0x37f524){console[_0x3d6432(0x1eb)](_0x4e0e05[_0x3d6432(0x18b)],_0x37f524);throw _0x37f524;}}