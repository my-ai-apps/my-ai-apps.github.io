
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x38cb1e=_0x4218;(function(_0x3ab483,_0x49bdb8){const _0x28038e=_0x4218,_0x32ea2f=_0x3ab483();while(!![]){try{const _0x3784e5=parseInt(_0x28038e(0x23e))/0x1+-parseInt(_0x28038e(0x161))/0x2*(parseInt(_0x28038e(0x21d))/0x3)+parseInt(_0x28038e(0x13d))/0x4+parseInt(_0x28038e(0x17e))/0x5+-parseInt(_0x28038e(0x1d1))/0x6+parseInt(_0x28038e(0x20a))/0x7+-parseInt(_0x28038e(0x235))/0x8;if(_0x3784e5===_0x49bdb8)break;else _0x32ea2f['push'](_0x32ea2f['shift']());}catch(_0x19df02){_0x32ea2f['push'](_0x32ea2f['shift']());}}}(_0x5f14,0x90cab));import{Logger}from'./common.js';const chatMessages=document[_0x38cb1e(0x173)](_0x38cb1e(0x182)),messageInput=document[_0x38cb1e(0x173)](_0x38cb1e(0x239)),sendButton=document[_0x38cb1e(0x173)]('sendButton'),cameraButton=document[_0x38cb1e(0x173)](_0x38cb1e(0x1b9)),themeToggle=document[_0x38cb1e(0x173)](_0x38cb1e(0x147)),cameraContainer=document[_0x38cb1e(0x173)]('cameraContainer'),cameraPreview=document[_0x38cb1e(0x173)](_0x38cb1e(0x199)),captureButton=document[_0x38cb1e(0x173)]('captureButton'),cancelButton=document['getElementById']('cancelButton');function _0x4218(_0x24bb63,_0x35377e){const _0x5f1468=_0x5f14();return _0x4218=function(_0x421890,_0x130a9){_0x421890=_0x421890-0x139;let _0x245a90=_0x5f1468[_0x421890];return _0x245a90;},_0x4218(_0x24bb63,_0x35377e);}let stream=null,imageContext=null;async function startCamera(){const _0x22d9ff=_0x38cb1e,_0x2d0391={'aNGpP':_0x22d9ff(0x232),'CRUJS':_0x22d9ff(0x16b),'Trbxp':_0x22d9ff(0x19c),'WNjYs':'[Camera]\x20Camera\x20preview\x20started\x20and\x20container\x20displayed','CHIaG':_0x22d9ff(0x23a),'HCmiS':_0x22d9ff(0x212),'CSTRs':function(_0xae29f2,_0x321cb1){return _0xae29f2+_0x321cb1;}};console[_0x22d9ff(0x230)](_0x2d0391[_0x22d9ff(0x1d4)]);try{const _0x4a2452=_0x2d0391[_0x22d9ff(0x1f1)][_0x22d9ff(0x23f)]('|');let _0xada470=0x0;while(!![]){switch(_0x4a2452[_0xada470++]){case'0':console[_0x22d9ff(0x230)](_0x2d0391[_0x22d9ff(0x1fc)],stream);continue;case'1':cameraContainer[_0x22d9ff(0x16e)][_0x22d9ff(0x200)]=_0x22d9ff(0x23c);continue;case'2':console[_0x22d9ff(0x230)](_0x2d0391['WNjYs']);continue;case'3':cameraPreview[_0x22d9ff(0x183)]=stream;continue;case'4':stream=await navigator[_0x22d9ff(0x1e9)][_0x22d9ff(0x1da)]({'video':{'facingMode':_0x2d0391[_0x22d9ff(0x1d3)]}});continue;}break;}}catch(_0x1c16a3){console['error'](_0x2d0391[_0x22d9ff(0x14f)],_0x1c16a3),addMessage(_0x2d0391[_0x22d9ff(0x1b5)](_0x22d9ff(0x180),_0x1c16a3[_0x22d9ff(0x1be)]));}}function _0x5f14(){const _0x17f17c=['Trbxp','subject','Geography','Copy\x20Quiz','display','[OCR]\x20Worker\x20initialized','Option\x20A','pHMwa','scrollTop','POPHj','[Quiz]\x20Fallback\x20generation\x20also\x20failed:','toLowerCase','Copied!','theme','5003439hNfJzf','[UI]\x20Adding\x20quiz\x20to\x20chat:','ltBIk','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Title:\x20','Art','Generate\x20questions\x20based\x20on\x20the\x20image\x20related\x20text\x20-\x20','[Camera]\x20Capturing\x20image...','[Quiz]\x20Generating\x20quiz...','[Camera]\x20Error\x20accessing\x20camera:','hsLhW','data-theme','toString','ADZKP','oCCqw','peozn','Ziueq','keypress','thrWe','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Points:\x20','117LlNmGL','Student\x20should\x20identify\x20main\x20points\x20from\x20the\x20text','Erpta','type','stop','skgPO','iSJTO','clzRY','question','NxOIN','trim','Please\x20capture\x20an\x20image\x20first\x20before\x20providing\x20quiz\x20requirements.','confidence','Create\x20a\x20quiz\x20about\x20','tKiKN','nIEeJ','cnYtm','[AI]\x20Starting\x20image\x20processing...','nSkoq','log','omWWX','[Camera]\x20Starting\x20camera\x20initialization...','Science','jFnaL','10318960eQfBJU','setItem','slice','Option\x20B','messageInput','environment','Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz\x20using\x20Gemini\x20Nano\x20AI.\x20Please\x20try\x20again.','flex','Image\x20and\x20text\x20analysis\x20complete','1017144HhNnon','split','width','MlhOp','BKsee','nLUVF','XcWXe','Option\x20C','iodub','error','click','dark','terminate','4261524XEmrdm','IynPG','key','[Camera]\x20Stopping\x20camera...','General','timeLimit','div','grade','KPsZi','General\x20Knowledge','themeToggle','bwDty','bjvvx','[Camera]\x20Stopping\x20track:','remove','Generating\x20quiz...','window.ai\x20API\x20not\x20available','[Processing]\x20Starting\x20image\x20OCR\x20analysis...','HCmiS','Copy\x20failed:','FKvIW','open_ended','\x20minutes\x0a\x20\x20\x20\x20\x20\x20\x20\x20Topics:\x20','Visual\x20content\x20detected','Image\x20captured!\x20Please\x20provide\x20your\x20requirements\x20for\x20the\x20quiz.','cvEtN','stringify','rCwvZ','copy-button','What\x20can\x20you\x20observe\x20in\x20this\x20image?','src','[UI]\x20Adding\x20message:\x20','LCDIv','Additional\x20option\x20','Enter','size','15676ayFKRX','GDubS','User','rmwJV','[AI]\x20Image\x20recognition\x20completed.\x20Result:','qrSwx','data','\x20\x20\x20','Windows\x20AI\x20API\x20not\x20available','test','4|0|3|1|2','ryMLi','textContent','style','kfWoJ','Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz.\x20Please\x20try\x20again.','Washington\x20Drivers\x20License\x20Test','value','getElementById','topic','content','\x20Quiz','points','add','[AI]\x20Creating\x20image\x20recognition\x20session...','getAttribute','Quiz\x20generation\x20failed\x20completely.\x20Please\x20try\x20again\x20later.','onclick','I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20image\x20and\x20requirements:','1122935TvHfwZ','system','Error\x20accessing\x20camera:\x20','load','chatMessages','srcObject','\x0a\x20\x20\x20\x20','writeText','fGAJq','Description\x20of\x20visual\x20elements','map','createElement','TYJPx','label','\x20-\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Format\x20the\x20response\x20as\x20a\x20JSON\x20quiz\x20object\x20with\x20id,\x20grade,\x20subject,\x20title,\x20timeLimit,\x20topic,\x20and\x20questions\x20array.','TEGMq','yrrtM','image/jpeg','zStNA','ZWDEj','SFXdg','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Time\x20Limit:\x20','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20Questions:\x0a\x20\x20\x20\x20\x20\x20\x20\x20','push','kkjfw','pbAyL','cameraPreview','fANAy','UqJiS','[Camera]\x20Successfully\x20got\x20media\x20stream:','getContext','user','join','topics','pattern','[Chat]\x20Sending\x20message:','appendChild','vkdiT','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','recognize','\x0a\x0aUser\x20request:\x20','Visual\x20Analysis','[OCR]\x20Text\x20extraction\x20result:','[Quiz]\x20Error\x20generating\x20quiz:','lpRry','none','[AI]\x20Image\x20session\x20created:','user-message','VbtbK','ZfNLx','aukwt','What\x20is\x20the\x20significance\x20of\x20','Processing\x20image...','createImageSession','CSTRs','IpKtg','History','What\x20are\x20the\x20key\x20points\x20mentioned\x20in\x20the\x20text?','cameraButton','forEach','IAosi','toDataURL','quiz-container','message','uBoJN','documentElement','questions','[Processing]\x20No\x20OCR\x20text\x20found,\x20falling\x20back\x20to\x20image\x20analysis','[OCR]\x20Worker\x20terminated','[OCR]\x20Error\x20in\x20text\x20extraction:','Based\x20on\x20the\x20text,\x20what\x20is\x20the\x20main\x20topic\x20being\x20discussed?','[Processing]\x20Error\x20during\x20image\x20processing:','iCSlC','vcStg','dSNOD','Mathematics','options','[Camera]\x20Camera\x20stopped\x20and\x20container\x20hidden','NvrNr','bxfyO','gHtHU','kAccC','4999620SNmcoo','dcndv','CHIaG','aNGpP','[Quiz]\x20Starting\x20quiz\x20generation\x20with\x20Gemini\x20Nano...','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Grade:\x20','HKAOW','bot-message','scrollHeight','getUserMedia','multiple_choice','prompt-suggestion','You\x20are\x20a\x20quiz\x20generator.\x20Create\x20a\x20quiz\x20based\x20on\x20the\x20following\x20image\x20context\x20and\x20user\x20requirements.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Image\x20context:\x20','[Quiz]\x20Constructed\x20system\x20prompt:','videoWidth','text','vbYdg','now','aHLLf','Sorry,\x20I\x20couldn\x27t\x20process\x20the\x20image.\x20Please\x20try\x20again.','ubMrz','addEventListener','clipboard','[AI]\x20Error\x20during\x20image\x20processing:','mediaDevices','CgLpP','fromCharCode','cbUCg','className','LOOcy','height','rgnaC','CRUJS','UgJaU','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Type:\x20','qJFpL','captured-image','hpWoy','length','createWorker','button','toISOString','GRwJA'];_0x5f14=function(){return _0x17f17c;};return _0x5f14();}function stopCamera(){const _0x433361=_0x38cb1e,_0x3a3f12={'zStNA':_0x433361(0x14a),'iodub':_0x433361(0x140),'IRDVz':_0x433361(0x1ac)};console[_0x433361(0x230)](_0x3a3f12[_0x433361(0x246)]),stream&&(stream['getTracks']()[_0x433361(0x1ba)](_0x4a85a5=>{const _0x202164=_0x433361;console[_0x202164(0x230)](_0x3a3f12[_0x202164(0x191)],_0x4a85a5[_0x202164(0x18b)]),_0x4a85a5[_0x202164(0x221)]();}),stream=null),cameraContainer[_0x433361(0x16e)][_0x433361(0x200)]=_0x3a3f12['IRDVz'],console[_0x433361(0x230)](_0x433361(0x1cc));}async function processImageUsingWindowAI(_0x153e55){const _0x4343fb=_0x38cb1e,_0x1ac780={'gHtHU':_0x4343fb(0x22e),'SFXdg':'[AI]\x20Windows\x20AI\x20API\x20not\x20found\x20in\x20window\x20object','rgnaC':_0x4343fb(0x169),'RiAYH':_0x4343fb(0x179),'iCOqy':_0x4343fb(0x1ad),'ltBIk':'[AI]\x20Performing\x20image\x20recognition...','KYrhp':_0x4343fb(0x165)};console[_0x4343fb(0x230)](_0x1ac780[_0x4343fb(0x1cf)],_0x153e55);if(!window['ai']){console['error'](_0x1ac780[_0x4343fb(0x193)]);throw new Error(_0x1ac780[_0x4343fb(0x1f0)]);}try{console[_0x4343fb(0x230)](_0x1ac780['RiAYH']);const _0x40226a=await window['ai'][_0x4343fb(0x1b4)]();console[_0x4343fb(0x230)](_0x1ac780['iCOqy'],_0x40226a),console[_0x4343fb(0x230)](_0x1ac780[_0x4343fb(0x20c)]);const _0x43f5b2=await _0x40226a[_0x4343fb(0x1a6)](_0x153e55);return console[_0x4343fb(0x230)](_0x1ac780['KYrhp'],_0x43f5b2),_0x43f5b2;}catch(_0x1dc12b){console[_0x4343fb(0x139)](_0x4343fb(0x1e8),_0x1dc12b);throw _0x1dc12b;}}async function processImageUsingTesseract(_0x585cd9){const _0xb2f794=_0x38cb1e,_0x4f952f={'pHMwa':_0xb2f794(0x14e),'dcndv':function(_0xfaebe8,_0x429e44,_0xbee65c){return _0xfaebe8(_0x429e44,_0xbee65c);},'tUZkH':_0xb2f794(0x1b3),'jkwFg':function(_0x29fbd6,_0x4cb66f){return _0x29fbd6(_0x4cb66f);},'TEGMq':_0xb2f794(0x1a9),'FKvIW':function(_0x33ed89,_0x56d512){return _0x33ed89>_0x56d512;},'hpWoy':_0xb2f794(0x1e0),'nLUVF':_0xb2f794(0x171),'jYUZY':function(_0x522ebe,_0x245349){return _0x522ebe(_0x245349);},'iSJTO':_0xb2f794(0x154),'rCwvZ':_0xb2f794(0x146),'nIEeJ':_0xb2f794(0x1c6)};console[_0xb2f794(0x230)](_0x4f952f[_0xb2f794(0x203)]),_0x4f952f[_0xb2f794(0x1d2)](addMessage,_0x4f952f['tUZkH'],![]);try{const _0x16f20f=await _0x4f952f['jkwFg'](extractTextFromImage,_0x585cd9);return console[_0xb2f794(0x230)](_0x4f952f[_0xb2f794(0x18e)],_0x16f20f),_0x16f20f[_0xb2f794(0x1e0)]&&_0x4f952f[_0xb2f794(0x151)](_0x16f20f['text']['trim']()[_0xb2f794(0x1f7)],0x0)?{'type':_0x4f952f[_0xb2f794(0x1f6)],'content':_0x4f952f[_0xb2f794(0x243)],'confidence':_0x16f20f[_0xb2f794(0x229)],'topics':_0x4f952f['jYUZY'](generateTopics,_0x16f20f[_0xb2f794(0x1e0)])}:(console[_0xb2f794(0x230)](_0xb2f794(0x1c2)),{'type':'image','content':_0x4f952f[_0xb2f794(0x223)],'topics':[_0xb2f794(0x1a8),_0x4f952f[_0xb2f794(0x158)]],'features':{'timestamp':new Date()[_0xb2f794(0x1fa)](),'dimensions':{'width':_0x585cd9[_0xb2f794(0x240)],'height':_0x585cd9[_0xb2f794(0x1ef)]}}});}catch(_0x1b4b6b){console[_0xb2f794(0x139)](_0x4f952f[_0xb2f794(0x22c)],_0x1b4b6b);throw _0x1b4b6b;}}async function extractTextFromImage(_0x563223){const _0x3a7bbd=_0x38cb1e,_0x27ff80={'bxfyO':'[OCR]\x20Starting\x20text\x20extraction...','vbYdg':'eng','iCSlC':_0x3a7bbd(0x201),'aukwt':'[OCR]\x20Text\x20extracted:','kAccC':_0x3a7bbd(0x1c3),'vkdiT':function(_0x576b1a,_0x410872){return _0x576b1a(_0x410872);},'vcStg':_0x3a7bbd(0x23d),'peozn':_0x3a7bbd(0x1c4)};console[_0x3a7bbd(0x230)](_0x27ff80[_0x3a7bbd(0x1ce)]);const _0x262d21=_0x27ff80[_0x3a7bbd(0x1e1)];try{const _0x1d4157=await Tesseract[_0x3a7bbd(0x1f8)]();await _0x1d4157[_0x3a7bbd(0x181)](),await _0x1d4157['loadLanguage'](_0x262d21),await _0x1d4157['initialize'](_0x262d21),console[_0x3a7bbd(0x230)](_0x27ff80[_0x3a7bbd(0x1c7)]);const _0x1a4d5c=await _0x1d4157[_0x3a7bbd(0x1a6)](_0x563223);console[_0x3a7bbd(0x230)](_0x27ff80[_0x3a7bbd(0x1b1)],_0x1a4d5c[_0x3a7bbd(0x167)]['text']),await _0x1d4157[_0x3a7bbd(0x13c)](),console[_0x3a7bbd(0x230)](_0x27ff80[_0x3a7bbd(0x1d0)]);const _0xa507fb={'timestamp':new Date()[_0x3a7bbd(0x1fa)](),'imageSize':{'width':_0x563223[_0x3a7bbd(0x240)],'height':_0x563223[_0x3a7bbd(0x1ef)]},'extractedText':_0x1a4d5c[_0x3a7bbd(0x167)][_0x3a7bbd(0x1e0)],'confidenceScore':_0x1a4d5c[_0x3a7bbd(0x167)][_0x3a7bbd(0x229)],'suggestedTopics':_0x27ff80[_0x3a7bbd(0x1a4)](generateTopics,_0x1a4d5c[_0x3a7bbd(0x167)]['text'])};return{'description':_0x27ff80[_0x3a7bbd(0x1c8)],'metadata':_0xa507fb,'text':_0x1a4d5c[_0x3a7bbd(0x167)][_0x3a7bbd(0x1e0)],'confidence':_0x1a4d5c[_0x3a7bbd(0x167)]['confidence']};}catch(_0x279de1){return console[_0x3a7bbd(0x139)](_0x27ff80[_0x3a7bbd(0x218)],_0x279de1),{'text':'','confidence':0x0};}}function generateTopics(_0x3897cd){const _0x40b2ff=_0x38cb1e,_0x135356={'SeoXZ':_0x40b2ff(0x1b7),'MlhOp':_0x40b2ff(0x1fe),'OIHzT':function(_0x1e8a06,_0x1f5816){return _0x1e8a06===_0x1f5816;},'skgPO':_0x40b2ff(0x146)},_0x2902a2=new Set(),_0x1e4220=_0x3897cd['toLowerCase'](),_0xed6a18=[{'pattern':/\b(math|equation|calculate|formula|number)\b/,'topic':_0x40b2ff(0x1ca)},{'pattern':/\b(science|experiment|chemical|biology|physics)\b/,'topic':_0x40b2ff(0x233)},{'pattern':/\b(history|century|ancient|war|empire|civilization)\b/,'topic':_0x135356['SeoXZ']},{'pattern':/\b(geography|country|capital|mountain|river|climate)\b/,'topic':_0x135356[_0x40b2ff(0x241)]},{'pattern':/\b(grammar|sentence|paragraph|essay|writing)\b/,'topic':'Language\x20Arts'},{'pattern':/\b(art|color|design|paint|draw)\b/,'topic':_0x40b2ff(0x20e)}];return _0xed6a18['forEach'](_0x4921d0=>{const _0xbac9d6=_0x40b2ff;_0x4921d0[_0xbac9d6(0x1a1)][_0xbac9d6(0x16a)](_0x1e4220)&&_0x2902a2[_0xbac9d6(0x178)](_0x4921d0[_0xbac9d6(0x174)]);}),_0x135356['OIHzT'](_0x2902a2[_0x40b2ff(0x160)],0x0)&&_0x2902a2['add'](_0x135356[_0x40b2ff(0x222)]),Array['from'](_0x2902a2);}async function generateQuizUsingAI(_0x4aea80,_0x50bdaa){const _0x512da9=_0x38cb1e,_0xa63b14={'thrWe':_0x512da9(0x1d5),'LcmRK':_0x512da9(0x14d),'XcWXe':_0x512da9(0x17f),'cmBWm':'div','GRwJA':'message\x20bot-message\x20streaming','IpKtg':function(_0x44b3d9,_0x32edd9,_0x51756a){return _0x44b3d9(_0x32edd9,_0x51756a);},'LxoTO':_0x512da9(0x14c),'oCCqw':function(_0x489587){return _0x489587();},'cvEtN':function(_0x256577,_0x5a36ae){return _0x256577(_0x5a36ae);},'LDdiW':function(_0x3dee0a,_0x5ba84d){return _0x3dee0a(_0x5ba84d);},'bwDty':'[Quiz]\x20Failed\x20to\x20parse\x20AI\x20response:','drJYk':function(_0x1582f8,_0x4b8494,_0x4b8595){return _0x1582f8(_0x4b8494,_0x4b8595);},'IAosi':function(_0x5a2577,_0x5da4c7,_0x13f4c7){return _0x5a2577(_0x5da4c7,_0x13f4c7);},'GDubS':_0x512da9(0x23b),'ryMLi':function(_0x483d6e,_0x4865b5){return _0x483d6e(_0x4865b5);},'EvQnP':_0x512da9(0x206),'cnYtm':function(_0x226c0e,_0x198448,_0x3ebea3){return _0x226c0e(_0x198448,_0x3ebea3);},'jlXNg':_0x512da9(0x17b)};console[_0x512da9(0x230)](_0xa63b14[_0x512da9(0x21b)],{'imageContext':_0x4aea80,'userPrompt':_0x50bdaa});try{console[_0x512da9(0x230)]('imageContext:',JSON[_0x512da9(0x157)](_0x4aea80));if(!window['ai'])throw new Error(_0xa63b14['LcmRK']);const _0x5cfb1e=_0x512da9(0x1dd)+JSON[_0x512da9(0x157)](_0x4aea80)+_0x512da9(0x18d);console['log'](_0x512da9(0x1de),_0x5cfb1e);const _0x5409fd=[{'role':_0xa63b14[_0x512da9(0x244)],'content':_0x5cfb1e},{'role':_0x512da9(0x19e),'content':_0x50bdaa}],_0x285b00=document[_0x512da9(0x189)](_0xa63b14['cmBWm']);_0x285b00['className']=_0xa63b14[_0x512da9(0x1fb)],chatMessages[_0x512da9(0x1a3)](_0x285b00),_0xa63b14['IpKtg'](showTypingIndicator,chatMessages,_0xa63b14['LxoTO']);if(!aiLanguageSession)await _0xa63b14[_0x512da9(0x217)](initializeLanguageSession);const _0x545b38=await aiLanguageSession['promptStreaming'](_0x5cfb1e+_0x512da9(0x1a7)+_0x50bdaa);let _0x1d82af='';for await(const _0x45a5d9 of _0x545b38){_0x1d82af+=_0x45a5d9,_0x285b00[_0x512da9(0x16d)]=_0x1d82af,chatMessages[_0x512da9(0x204)]=chatMessages[_0x512da9(0x1d9)];}_0x285b00[_0x512da9(0x14b)]();let _0x12665a;try{_0x12665a=_0xa63b14[_0x512da9(0x156)](safeJSONParse,_0x1d82af),_0xa63b14[_0x512da9(0x1b6)](addMessage,_0x512da9(0x17d),![]),_0xa63b14['LDdiW'](addQuiz,_0x12665a);}catch(_0x360e9f){console[_0x512da9(0x139)](_0xa63b14[_0x512da9(0x148)],_0x360e9f),_0xa63b14['drJYk'](addMessage,_0x1d82af,![]);throw _0x360e9f;}_0xa63b14['oCCqw'](removeTypingIndicator);}catch(_0x4174ed){console[_0x512da9(0x139)]('[Quiz]\x20Error\x20in\x20quiz\x20generation\x20using\x20Gemini\x20Nano\x20AI:',_0x4174ed),removeTypingIndicator(),_0xa63b14[_0x512da9(0x1bb)](addMessage,_0xa63b14[_0x512da9(0x162)],![]);try{const _0x4211eb=await _0xa63b14['IpKtg'](generateQuizWithoutAI,_0x4aea80,_0x50bdaa);_0xa63b14[_0x512da9(0x1b6)](addMessage,'Generated\x20a\x20basic\x20quiz\x20without\x20AI\x20assistance:',![]),_0xa63b14[_0x512da9(0x16c)](addQuiz,_0x4211eb);}catch(_0x1c39c8){console['error'](_0xa63b14['EvQnP'],_0x1c39c8),_0xa63b14[_0x512da9(0x22d)](addMessage,_0xa63b14['jlXNg'],![]);}}}function generateOptionsFromText(_0x548c91){const _0x4ec42f=_0x38cb1e,_0x1e3142={'Ynbcg':function(_0x3071fd,_0x47fb7c){return _0x3071fd+_0x47fb7c;},'ZfNLx':function(_0x22012d,_0xa4dc2){return _0x22012d+_0xa4dc2;}},_0x2d6808=_0x548c91[_0x4ec42f(0x23f)](/[.!?]+/)['filter'](_0x3f1776=>_0x3f1776['trim']()[_0x4ec42f(0x1f7)]>0x0),_0x464a57=_0x2d6808['slice'](0x0,0x4)[_0x4ec42f(0x188)](_0x4a6493=>_0x4a6493[_0x4ec42f(0x227)]());while(_0x464a57[_0x4ec42f(0x1f7)]<0x4){_0x464a57[_0x4ec42f(0x196)](_0x1e3142['Ynbcg'](_0x4ec42f(0x15e),_0x1e3142[_0x4ec42f(0x1b0)](_0x464a57['length'],0x1)));}return _0x464a57;}function generateCustomQuestion(_0x56d9ef,_0x5299ae){const _0x31b605=_0x38cb1e;return _0x56d9ef[_0x31b605(0x207)]()['includes']('what')?_0x56d9ef:_0x31b605(0x1b2)+_0x5299ae[_0x31b605(0x23f)]('\x20')[_0x31b605(0x237)](0x0,0x3)['join']('\x20')+'...?';}function addMessage(_0x24835e,_0x3a2b6b=![]){const _0x1b4c26=_0x38cb1e,_0x554ef0={'xAphA':_0x1b4c26(0x163),'bjvvx':'Bot','DCtMR':_0x1b4c26(0x1ae),'NvrNr':_0x1b4c26(0x1d8)};console['log'](_0x1b4c26(0x15c)+(_0x3a2b6b?_0x554ef0['xAphA']:_0x554ef0[_0x1b4c26(0x149)])+':',_0x24835e);const _0x28f2cf=document[_0x1b4c26(0x189)]('div');_0x28f2cf[_0x1b4c26(0x1ed)]='message\x20'+(_0x3a2b6b?_0x554ef0['DCtMR']:_0x554ef0[_0x1b4c26(0x1cd)]),_0x28f2cf[_0x1b4c26(0x16d)]=_0x24835e,chatMessages['appendChild'](_0x28f2cf),chatMessages[_0x1b4c26(0x204)]=chatMessages[_0x1b4c26(0x1d9)];}function addQuiz(_0x29c576){const _0x140924=_0x38cb1e,_0x5dd9b8={'omWWX':_0x140924(0x20b),'uBoJN':'div','nSkoq':_0x140924(0x1f9),'cbUCg':_0x140924(0x159)};console['log'](_0x5dd9b8[_0x140924(0x231)],_0x29c576);const _0x8842c2=document[_0x140924(0x189)](_0x5dd9b8[_0x140924(0x1bf)]);_0x8842c2[_0x140924(0x1ed)]=_0x140924(0x1bd);const _0x2e6326=_0x140924(0x20d)+_0x29c576['title']+_0x140924(0x1d6)+_0x29c576[_0x140924(0x144)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20Subject:\x20'+_0x29c576[_0x140924(0x1fd)]+_0x140924(0x194)+_0x29c576[_0x140924(0x142)]+_0x140924(0x153)+_0x29c576[_0x140924(0x174)]+_0x140924(0x195)+_0x29c576[_0x140924(0x1c1)][_0x140924(0x188)]((_0x48330f,_0x2f83f8)=>_0x140924(0x1a5)+(_0x2f83f8+0x1)+'.\x20'+_0x48330f[_0x140924(0x225)]+_0x140924(0x1a5)+(_0x48330f[_0x140924(0x1cb)]?_0x48330f[_0x140924(0x1cb)][_0x140924(0x188)]((_0x45b058,_0x2e232c)=>_0x140924(0x168)+String[_0x140924(0x1eb)](0x61+_0x2e232c)+')\x20'+_0x45b058)[_0x140924(0x19f)]('\x0a'):'')+_0x140924(0x1f3)+_0x48330f[_0x140924(0x220)]+_0x140924(0x21c)+_0x48330f[_0x140924(0x177)]+_0x140924(0x1a5))[_0x140924(0x19f)]('\x0a')+_0x140924(0x184),_0x5b9b11=document[_0x140924(0x189)]('pre');_0x5b9b11['textContent']=_0x2e6326,_0x8842c2[_0x140924(0x1a3)](_0x5b9b11);const _0x2bcfc2=document[_0x140924(0x189)](_0x5dd9b8[_0x140924(0x22f)]);_0x2bcfc2[_0x140924(0x1ed)]=_0x5dd9b8[_0x140924(0x1ec)],_0x2bcfc2[_0x140924(0x16d)]=_0x140924(0x1ff),_0x2bcfc2[_0x140924(0x17c)]=()=>{const _0x2f6b43=_0x140924;navigator[_0x2f6b43(0x1e7)][_0x2f6b43(0x185)](_0x2e6326)['then'](()=>_0x2bcfc2[_0x2f6b43(0x16d)]=_0x2f6b43(0x208))['catch'](_0x4d9ba0=>console[_0x2f6b43(0x139)](_0x2f6b43(0x150),_0x4d9ba0))['finally'](()=>setTimeout(()=>_0x2bcfc2[_0x2f6b43(0x16d)]=_0x2f6b43(0x1ff),0x7d0));},_0x8842c2[_0x140924(0x1a3)](_0x2bcfc2),chatMessages['appendChild'](_0x8842c2),chatMessages[_0x140924(0x204)]=chatMessages[_0x140924(0x1d9)];}async function captureImage(){const _0x4000fa=_0x38cb1e,_0x41d5d={'dSNOD':_0x4000fa(0x143),'qrSwx':_0x4000fa(0x1dc),'HKAOW':_0x4000fa(0x210),'TcUGt':'canvas','CgLpP':'img','LOOcy':_0x4000fa(0x190),'POPHj':_0x4000fa(0x1f5),'ubMrz':'message\x20bot-message','ADZKP':function(_0x4b9d74){return _0x4b9d74();},'SIjIE':function(_0x5776ae,_0x24f727){return _0x5776ae(_0x24f727);},'Ziueq':'[Processing]\x20Image\x20processing\x20completed:','udyny':function(_0xd9841,_0x302e4b,_0x5a8b1a){return _0xd9841(_0x302e4b,_0x5a8b1a);},'TYJPx':_0x4000fa(0x155),'NxOIN':function(_0x9966b3,_0x4aa088){return _0x9966b3===_0x4aa088;},'fANAy':'Make\x20a\x20quiz\x20suitable\x20for\x20beginners','KPsZi':'[Camera]\x20Error\x20processing\x20captured\x20image:','VbtbK':_0x4000fa(0x1e4)};console[_0x4000fa(0x230)](_0x41d5d[_0x4000fa(0x1d7)]);try{const _0xbf0407=document[_0x4000fa(0x189)](_0x41d5d['TcUGt']);_0xbf0407[_0x4000fa(0x240)]=cameraPreview[_0x4000fa(0x1df)],_0xbf0407[_0x4000fa(0x1ef)]=cameraPreview['videoHeight'],_0xbf0407[_0x4000fa(0x19d)]('2d')['drawImage'](cameraPreview,0x0,0x0);const _0x41d111=document[_0x4000fa(0x189)](_0x41d5d[_0x4000fa(0x1ea)]);_0x41d111[_0x4000fa(0x15b)]=_0xbf0407[_0x4000fa(0x1bc)](_0x41d5d[_0x4000fa(0x1ee)]),_0x41d111[_0x4000fa(0x1ed)]=_0x41d5d[_0x4000fa(0x205)];const _0x33d5e3=document[_0x4000fa(0x189)](_0x4000fa(0x143));_0x33d5e3['className']=_0x41d5d[_0x4000fa(0x1e5)],_0x33d5e3[_0x4000fa(0x1a3)](_0x41d111),chatMessages[_0x4000fa(0x1a3)](_0x33d5e3),_0x41d5d[_0x4000fa(0x216)](stopCamera);const _0xd09383=await _0x41d5d['SIjIE'](processImageUsingTesseract,_0x41d111);imageContext=_0xd09383,console[_0x4000fa(0x230)](_0x41d5d[_0x4000fa(0x219)],JSON[_0x4000fa(0x157)](imageContext,null,0x2)),_0x41d5d['udyny'](addMessage,_0x41d5d[_0x4000fa(0x18a)],![]);const _0x54bb71=[_0x4000fa(0x22a)+imageContext['topics'][0x0]+_0x4000fa(0x18c)+imageContext['content'],_0x41d5d[_0x4000fa(0x226)](imageContext[_0x4000fa(0x220)],_0x4000fa(0x1e0))?_0x4000fa(0x20f)+imageContext[_0x4000fa(0x175)]:'Generate\x20multiple\x20choice\x20questions\x20about\x20this\x20picture',_0x41d5d[_0x4000fa(0x19a)]];_0x54bb71[_0x4000fa(0x1ba)](_0x4e414e=>{const _0x1bf71a=_0x4000fa,_0xc3de0b=document['createElement'](_0x41d5d[_0x1bf71a(0x1c9)]);_0xc3de0b[_0x1bf71a(0x1ed)]=_0x41d5d[_0x1bf71a(0x166)],_0xc3de0b[_0x1bf71a(0x16d)]=_0x4e414e,_0xc3de0b[_0x1bf71a(0x17c)]=()=>{const _0x3b5906=_0x1bf71a;messageInput[_0x3b5906(0x172)]=_0x4e414e,sendMessage();},chatMessages['appendChild'](_0xc3de0b);});}catch(_0x2fb9c5){console[_0x4000fa(0x139)](_0x41d5d[_0x4000fa(0x145)],_0x2fb9c5),_0x41d5d['udyny'](addMessage,_0x41d5d[_0x4000fa(0x1af)],![]);}}async function sendMessage(){const _0x2f750d=_0x38cb1e,_0x27e159={'lpRry':function(_0x26ab6c,_0x363062,_0x564ecb){return _0x26ab6c(_0x363062,_0x564ecb);},'BiMTK':function(_0x4fc382,_0x414374,_0x2f5c9e){return _0x4fc382(_0x414374,_0x2f5c9e);},'hsLhW':_0x2f750d(0x228)},_0x5ee4da=messageInput[_0x2f750d(0x172)][_0x2f750d(0x227)]();if(!_0x5ee4da)return;console[_0x2f750d(0x230)](_0x2f750d(0x1a2),_0x5ee4da),addMessage(_0x5ee4da,!![]),messageInput[_0x2f750d(0x172)]='';if(imageContext)try{const _0x8c5754=await _0x27e159['lpRry'](generateQuizUsingAI,imageContext,_0x5ee4da);_0x27e159['BiMTK'](addMessage,'I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20requirements:',![]),addQuiz(_0x8c5754);}catch(_0xadc611){_0x27e159[_0x2f750d(0x1ab)](addMessage,_0x2f750d(0x170),![]);}else _0x27e159['BiMTK'](addMessage,_0x27e159[_0x2f750d(0x213)],![]);}function toggleTheme(){const _0x294f57=_0x38cb1e,_0x17b01e={'clzRY':_0x294f57(0x214),'gvFGz':_0x294f57(0x13b),'jFnaL':'light','qJFpL':_0x294f57(0x209)},_0x5edf80=document[_0x294f57(0x1c0)],_0x4c0e6f=_0x5edf80[_0x294f57(0x17a)](_0x17b01e[_0x294f57(0x224)]),_0x52a6f7=_0x4c0e6f===_0x17b01e['gvFGz']?_0x17b01e[_0x294f57(0x234)]:_0x17b01e['gvFGz'];_0x5edf80['setAttribute'](_0x294f57(0x214),_0x52a6f7),localStorage[_0x294f57(0x236)](_0x17b01e[_0x294f57(0x1f4)],_0x52a6f7);}themeToggle[_0x38cb1e(0x1e6)](_0x38cb1e(0x13a),toggleTheme),cameraButton[_0x38cb1e(0x1e6)](_0x38cb1e(0x13a),startCamera),captureButton[_0x38cb1e(0x1e6)]('click',captureImage),cancelButton[_0x38cb1e(0x1e6)](_0x38cb1e(0x13a),stopCamera),sendButton[_0x38cb1e(0x1e6)](_0x38cb1e(0x13a),sendMessage),messageInput['addEventListener'](_0x38cb1e(0x21a),_0x279fa7=>{const _0x2fae45=_0x38cb1e,_0x3c5c9d={'fGAJq':function(_0x2c4630,_0x1b65bd){return _0x2c4630===_0x1b65bd;},'UgJaU':_0x2fae45(0x15f),'ZWDEj':function(_0xe87a1a){return _0xe87a1a();}};if(_0x3c5c9d[_0x2fae45(0x186)](_0x279fa7[_0x2fae45(0x13f)],_0x3c5c9d[_0x2fae45(0x1f2)]))_0x3c5c9d[_0x2fae45(0x192)](sendMessage);});async function generateQuizWithoutAI(_0x203b0b,_0x5a17a4){const _0xacbe24=_0x38cb1e,_0x508254={'BKsee':_0xacbe24(0x211),'tKiKN':function(_0x162892,_0x28d716){return _0x162892===_0x28d716;},'rmwJV':_0xacbe24(0x1e0),'pbAyL':_0xacbe24(0x1c5),'kfWoJ':_0xacbe24(0x1db),'UqJiS':_0xacbe24(0x202),'aHLLf':_0xacbe24(0x1b8),'OMbBS':_0xacbe24(0x152),'xpmWZ':_0xacbe24(0x15a),'pZorm':_0xacbe24(0x187),'Erpta':function(_0x2c7b3d,_0x2ab69e,_0x8f0643){return _0x2c7b3d(_0x2ab69e,_0x8f0643);},'kkjfw':_0xacbe24(0x238),'LCDIv':_0xacbe24(0x245),'yrrtM':_0xacbe24(0x141),'IynPG':_0xacbe24(0x1aa)};console[_0xacbe24(0x230)](_0x508254[_0xacbe24(0x242)],{'imageContext':_0x203b0b,'userPrompt':_0x5a17a4});try{const _0x396d81=_0x508254[_0xacbe24(0x22b)](_0x203b0b[_0xacbe24(0x220)],_0x508254[_0xacbe24(0x164)]),_0x1c61d6=_0x203b0b[_0xacbe24(0x175)],_0x123b1f=_0x203b0b[_0xacbe24(0x1a0)],_0x37af10=[];_0x396d81?(_0x37af10['push']({'question':_0x508254[_0xacbe24(0x198)],'type':_0x508254[_0xacbe24(0x16f)],'options':generateOptionsFromText(_0x1c61d6),'answer':_0x508254[_0xacbe24(0x19b)],'points':0x2}),_0x37af10['push']({'question':_0x508254[_0xacbe24(0x1e3)],'type':_0x508254['OMbBS'],'answer':_0xacbe24(0x21e),'points':0x2})):_0x37af10[_0xacbe24(0x196)]({'question':_0x508254['xpmWZ'],'type':'open_ended','answer':_0x508254['pZorm'],'points':0x2});_0x37af10[_0xacbe24(0x196)]({'question':_0x508254[_0xacbe24(0x21f)](generateCustomQuestion,_0x5a17a4,_0x1c61d6),'type':_0x508254[_0xacbe24(0x16f)],'options':[_0x508254[_0xacbe24(0x19b)],_0x508254[_0xacbe24(0x197)],_0x508254[_0xacbe24(0x15d)],'Option\x20D'],'answer':_0x508254[_0xacbe24(0x19b)],'points':0x2});const _0x4e68f8={'id':Date[_0xacbe24(0x1e2)]()[_0xacbe24(0x215)](),'title':_0x123b1f[0x0]+_0xacbe24(0x176),'subject':_0x123b1f[0x0],'grade':_0x508254[_0xacbe24(0x18f)],'timeLimit':0xf,'topic':_0x123b1f[_0xacbe24(0x19f)](',\x20'),'questions':_0x37af10};return _0x4e68f8;}catch(_0x2cfdbd){console[_0xacbe24(0x139)](_0x508254[_0xacbe24(0x13e)],_0x2cfdbd);throw _0x2cfdbd;}}