
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x5735af=_0xe25b;(function(_0x39ca18,_0x333a78){const _0x217848=_0xe25b,_0x3bd71c=_0x39ca18();while(!![]){try{const _0x4c93b5=parseInt(_0x217848(0x1bb))/0x1*(parseInt(_0x217848(0x1f6))/0x2)+-parseInt(_0x217848(0x18a))/0x3*(parseInt(_0x217848(0x23a))/0x4)+-parseInt(_0x217848(0x1d8))/0x5*(parseInt(_0x217848(0x1c1))/0x6)+-parseInt(_0x217848(0x232))/0x7*(parseInt(_0x217848(0x1d9))/0x8)+parseInt(_0x217848(0x1b7))/0x9+parseInt(_0x217848(0x154))/0xa*(parseInt(_0x217848(0x174))/0xb)+parseInt(_0x217848(0x1fb))/0xc;if(_0x4c93b5===_0x333a78)break;else _0x3bd71c['push'](_0x3bd71c['shift']());}catch(_0x33a2d5){_0x3bd71c['push'](_0x3bd71c['shift']());}}}(_0x4dce,0xc6d14));import{Logger}from'./common.js';const chatMessages=document['getElementById'](_0x5735af(0x1e6)),messageInput=document[_0x5735af(0x257)](_0x5735af(0x1eb)),sendButton=document[_0x5735af(0x257)](_0x5735af(0x14a)),cameraButton=document[_0x5735af(0x257)](_0x5735af(0x247)),themeToggle=document[_0x5735af(0x257)](_0x5735af(0x188)),cameraContainer=document[_0x5735af(0x257)]('cameraContainer'),cameraPreview=document['getElementById'](_0x5735af(0x17a)),captureButton=document['getElementById'](_0x5735af(0x1cf)),cancelButton=document[_0x5735af(0x257)](_0x5735af(0x236));let stream=null,imageContext=null;async function startCamera(){const _0x35d7e6=_0x5735af,_0x9858c1={'HQWeO':_0x35d7e6(0x1d0),'IvPbE':_0x35d7e6(0x1f5),'OJrsQ':_0x35d7e6(0x21b),'TuLzR':_0x35d7e6(0x1f3),'FrDhg':function(_0x10892b,_0x13db1e){return _0x10892b+_0x13db1e;},'iKzcy':_0x35d7e6(0x1b3)};console['log'](_0x35d7e6(0x1b2));try{const _0x3ecf87=_0x9858c1[_0x35d7e6(0x19c)]['split']('|');let _0x188f62=0x0;while(!![]){switch(_0x3ecf87[_0x188f62++]){case'0':console[_0x35d7e6(0x226)]('[Camera]\x20Successfully\x20got\x20media\x20stream:',stream);continue;case'1':console['log'](_0x35d7e6(0x17e));continue;case'2':stream=await navigator[_0x35d7e6(0x23c)][_0x35d7e6(0x260)]({'video':{'facingMode':_0x9858c1[_0x35d7e6(0x1b1)]}});continue;case'3':cameraPreview[_0x35d7e6(0x203)]=stream;continue;case'4':cameraContainer['style'][_0x35d7e6(0x222)]=_0x9858c1[_0x35d7e6(0x183)];continue;}break;}}catch(_0xb58982){console[_0x35d7e6(0x23d)](_0x9858c1['TuLzR'],_0xb58982),addMessage(_0x9858c1['FrDhg'](_0x9858c1['iKzcy'],_0xb58982[_0x35d7e6(0x20d)]));}}function stopCamera(){const _0x20dd6a=_0x5735af,_0x4695c4={'PLKaT':'[Camera]\x20Stopping\x20track:','xNTBk':_0x20dd6a(0x167),'JVqfN':_0x20dd6a(0x24b),'WLbEh':'[Camera]\x20Camera\x20stopped\x20and\x20container\x20hidden'};console[_0x20dd6a(0x226)](_0x4695c4[_0x20dd6a(0x199)]),stream&&(stream[_0x20dd6a(0x22f)]()[_0x20dd6a(0x1c5)](_0x5e029d=>{const _0x496241=_0x20dd6a;console[_0x496241(0x226)](_0x4695c4[_0x496241(0x18c)],_0x5e029d[_0x496241(0x25b)]),_0x5e029d[_0x496241(0x1c9)]();}),stream=null),cameraContainer[_0x20dd6a(0x172)][_0x20dd6a(0x222)]=_0x4695c4[_0x20dd6a(0x1b4)],console['log'](_0x4695c4[_0x20dd6a(0x233)]);}async function processImageUsingWindowAI(_0x23296c){const _0x166b4a=_0x5735af,_0x1e32e6={'qamnS':_0x166b4a(0x1f8),'whKBE':_0x166b4a(0x1b5),'UiIqG':_0x166b4a(0x15f),'sZhbR':_0x166b4a(0x164),'ClyRs':'[AI]\x20Image\x20session\x20created:','tlreo':_0x166b4a(0x250),'DIMIz':_0x166b4a(0x217)};console[_0x166b4a(0x226)](_0x1e32e6[_0x166b4a(0x19d)],_0x23296c);if(!window['ai']){console[_0x166b4a(0x23d)](_0x1e32e6[_0x166b4a(0x187)]);throw new Error(_0x1e32e6[_0x166b4a(0x1d4)]);}try{console[_0x166b4a(0x226)](_0x1e32e6['sZhbR']);const _0x53a4ad=await window['ai'][_0x166b4a(0x20b)]();console[_0x166b4a(0x226)](_0x1e32e6[_0x166b4a(0x1f1)],_0x53a4ad),console[_0x166b4a(0x226)](_0x1e32e6['tlreo']);const _0x269c2c=await _0x53a4ad[_0x166b4a(0x1c6)](_0x23296c);return console['log']('[AI]\x20Image\x20recognition\x20completed.\x20Result:',_0x269c2c),_0x269c2c;}catch(_0xc4069e){console['error'](_0x1e32e6[_0x166b4a(0x1bf)],_0xc4069e);throw _0xc4069e;}}async function processImageUsingTesseract(_0x33797f){const _0x122d6f=_0x5735af,_0x5b57ed={'iFmOD':_0x122d6f(0x248),'pamFq':function(_0x5dbc1d,_0x48ff2b,_0x4dceea){return _0x5dbc1d(_0x48ff2b,_0x4dceea);},'wSmOe':function(_0x5eda79,_0x40b0c6){return _0x5eda79(_0x40b0c6);},'azQkP':function(_0x3d8616,_0x3a302b){return _0x3d8616>_0x3a302b;},'RuSql':_0x122d6f(0x150),'ytpIO':_0x122d6f(0x165),'rXIRi':function(_0x1d8c6b,_0x55313d){return _0x1d8c6b(_0x55313d);},'OsfrU':'[Processing]\x20No\x20OCR\x20text\x20found,\x20falling\x20back\x20to\x20image\x20analysis','XIQxq':'image','XCaQj':'Visual\x20Analysis','zunsk':'[Processing]\x20Error\x20during\x20image\x20processing:'};console['log'](_0x5b57ed[_0x122d6f(0x1cd)]),_0x5b57ed[_0x122d6f(0x1a3)](addMessage,_0x122d6f(0x15a),![]);try{const _0x52f0e1=await _0x5b57ed[_0x122d6f(0x202)](extractTextFromImage,_0x33797f);return console[_0x122d6f(0x226)](_0x122d6f(0x238),_0x52f0e1),_0x52f0e1[_0x122d6f(0x150)]&&_0x5b57ed[_0x122d6f(0x179)](_0x52f0e1[_0x122d6f(0x150)]['trim']()[_0x122d6f(0x21d)],0x0)?{'type':_0x5b57ed['RuSql'],'content':_0x5b57ed[_0x122d6f(0x176)],'confidence':_0x52f0e1[_0x122d6f(0x19a)],'topics':_0x5b57ed[_0x122d6f(0x192)](generateTopics,_0x52f0e1['text'])}:(console[_0x122d6f(0x226)](_0x5b57ed[_0x122d6f(0x163)]),{'type':_0x5b57ed[_0x122d6f(0x1da)],'content':_0x122d6f(0x246),'topics':[_0x5b57ed['XCaQj'],_0x122d6f(0x1a0)],'features':{'timestamp':new Date()[_0x122d6f(0x193)](),'dimensions':{'width':_0x33797f['width'],'height':_0x33797f[_0x122d6f(0x19b)]}}});}catch(_0x2cc96e){console[_0x122d6f(0x23d)](_0x5b57ed[_0x122d6f(0x237)],_0x2cc96e);throw _0x2cc96e;}}async function extractTextFromImage(_0x7db78c){const _0x4f44ff=_0x5735af,_0x124ef7={'XzDtP':_0x4f44ff(0x17f),'pGPhC':'eng','vrQOw':_0x4f44ff(0x1d7),'iTlmB':_0x4f44ff(0x20e),'hcCkG':'[OCR]\x20Worker\x20terminated','LBJXZ':function(_0xd035ff,_0x2355ef){return _0xd035ff(_0x2355ef);}};console[_0x4f44ff(0x226)](_0x124ef7[_0x4f44ff(0x157)]);const _0x427d5d=_0x124ef7[_0x4f44ff(0x231)];try{const _0x1f6401=await Tesseract['createWorker']();await _0x1f6401[_0x4f44ff(0x228)](),await _0x1f6401[_0x4f44ff(0x207)](_0x427d5d),await _0x1f6401[_0x4f44ff(0x14b)](_0x427d5d),console['log'](_0x124ef7[_0x4f44ff(0x23e)]);const _0x1cca4d=await _0x1f6401[_0x4f44ff(0x1c6)](_0x7db78c);console[_0x4f44ff(0x226)](_0x124ef7[_0x4f44ff(0x196)],_0x1cca4d[_0x4f44ff(0x180)]['text']),await _0x1f6401[_0x4f44ff(0x16b)](),console['log'](_0x124ef7['hcCkG']);const _0x96c2a8={'timestamp':new Date()[_0x4f44ff(0x193)](),'imageSize':{'width':_0x7db78c[_0x4f44ff(0x1dd)],'height':_0x7db78c['height']},'extractedText':_0x1cca4d['data']['text'],'confidenceScore':_0x1cca4d[_0x4f44ff(0x180)]['confidence'],'suggestedTopics':_0x124ef7[_0x4f44ff(0x1df)](generateTopics,_0x1cca4d[_0x4f44ff(0x180)][_0x4f44ff(0x150)])};return{'description':_0x4f44ff(0x244),'metadata':_0x96c2a8,'text':_0x1cca4d[_0x4f44ff(0x180)]['text'],'confidence':_0x1cca4d[_0x4f44ff(0x180)]['confidence']};}catch(_0x589457){return console[_0x4f44ff(0x23d)]('[OCR]\x20Error\x20in\x20text\x20extraction:',_0x589457),{'text':'','confidence':0x0};}}function generateTopics(_0x219a33){const _0x379134=_0x5735af,_0x1f66e8={'cjItc':_0x379134(0x1f2),'BUMIp':_0x379134(0x209),'islvM':_0x379134(0x1c4),'ZshEP':function(_0x7e281c,_0x43695c){return _0x7e281c===_0x43695c;}},_0x24d0ba=new Set(),_0x272623=_0x219a33[_0x379134(0x1bc)](),_0x3f86fe=[{'pattern':/\b(math|equation|calculate|formula|number)\b/,'topic':_0x1f66e8[_0x379134(0x21f)]},{'pattern':/\b(science|experiment|chemical|biology|physics)\b/,'topic':_0x1f66e8[_0x379134(0x16e)]},{'pattern':/\b(history|century|ancient|war|empire|civilization)\b/,'topic':_0x379134(0x198)},{'pattern':/\b(geography|country|capital|mountain|river|climate)\b/,'topic':'Geography'},{'pattern':/\b(grammar|sentence|paragraph|essay|writing)\b/,'topic':'Language\x20Arts'},{'pattern':/\b(art|color|design|paint|draw)\b/,'topic':_0x1f66e8['islvM']}];return _0x3f86fe['forEach'](_0xeb23a7=>{const _0xf9d39b=_0x379134;_0xeb23a7[_0xf9d39b(0x214)]['test'](_0x272623)&&_0x24d0ba[_0xf9d39b(0x153)](_0xeb23a7[_0xf9d39b(0x252)]);}),_0x1f66e8[_0x379134(0x16a)](_0x24d0ba['size'],0x0)&&_0x24d0ba[_0x379134(0x153)](_0x379134(0x1a0)),Array[_0x379134(0x241)](_0x24d0ba);}function _0x4dce(){const _0x172b3f=['OSsES','addEventListener','bcrSh','[Chat]\x20Sending\x20message:','Sorry,\x20I\x20couldn\x27t\x20process\x20the\x20image.\x20Please\x20try\x20again.','bot-message','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Subject:\x20','click','now','IvPbE','[Camera]\x20Starting\x20camera\x20initialization...','Error\x20accessing\x20camera:\x20','JVqfN','[AI]\x20Windows\x20AI\x20API\x20not\x20found\x20in\x20window\x20object','multiple_choice','804834Pdmxpo','ZJmMI','Acqvr','zyjyk','983527UOoLej','toLowerCase','image/jpeg','eDbnj','DIMIz','trim','666VcudBQ','Image\x20captured!\x20Please\x20provide\x20your\x20requirements\x20for\x20the\x20quiz.','[Camera]\x20Error\x20processing\x20captured\x20image:','Art','forEach','recognize','type','[UI]\x20Adding\x20quiz\x20to\x20chat:','stop','button','sDWqm','questions','iFmOD','scrollHeight','captureButton','2|0|3|4|1','img','subject','title','UiIqG','fromCharCode','KRINS','[OCR]\x20Worker\x20initialized','2425UedPHc','2808ZTHnQO','XIQxq','\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Type:\x20','width','open_ended','LBJXZ','iwGkE','drawImage','options','OcSpj','then','iYmcm','chatMessages','BkqyJ','data-theme','user','[Processing]\x20Image\x20processing\x20completed:','messageInput','JRyKh','oGZab','WLuDL','captured-image','createElement','ClyRs','Mathematics','[Camera]\x20Error\x20accessing\x20camera:','NvBiA','environment','2kGARoP','zjZbN','[AI]\x20Starting\x20image\x20processing...','Copy\x20failed:','[Quiz]\x20Error\x20in\x20quiz\x20generation\x20using\x20Gemini\x20Nano\x20AI:','11810748RYRSxQ','catch','bvztw','[Quiz]\x20Generating\x20quiz...','Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz.\x20Please\x20try\x20again.','hlvjN','className','wSmOe','srcObject','IoOIf','nzWvU','writeText','loadLanguage','toDataURL','Science','copy-button','createImageSession','[Quiz]\x20Starting\x20quiz\x20generation\x20with\x20Gemini\x20Nano...','message','[OCR]\x20Text\x20extracted:','What\x20can\x20you\x20observe\x20in\x20this\x20image?','videoHeight','ixzPm','canvas','setItem','pattern','Generate\x20multiple\x20choice\x20questions\x20about\x20this\x20picture','clipboard','[AI]\x20Error\x20during\x20image\x20processing:','split','prompt-suggestion','DtypA','flex','[Quiz]\x20Constructed\x20system\x20prompt:','length','[Quiz]\x20Fallback\x20generation\x20also\x20failed:','cjItc','dark','key','display','pre','onclick','cslqa','log','MqTMS','load','toString','join','Student\x20should\x20identify\x20main\x20points\x20from\x20the\x20text','appendChild','AWBPJ','IFHmd','getTracks','oteja','pGPhC','23877ZPUGaZ','WLbEh','Enter','fgkQO','cancelButton','zunsk','[OCR]\x20Text\x20extraction\x20result:','value','12wxZDFR','Generating\x20quiz...','mediaDevices','error','vrQOw','YPSOG','Option\x20D','from','jjIio','ifLRW','Image\x20and\x20text\x20analysis\x20complete','General','Visual\x20content\x20detected','cameraButton','[Processing]\x20Starting\x20image\x20OCR\x20analysis...','What\x20are\x20the\x20key\x20points\x20mentioned\x20in\x20the\x20text?','\x0a\x0aUser\x20request:\x20','none','light','xfhvy','\x20minutes\x0a\x20\x20\x20\x20\x20\x20\x20\x20Topics:\x20','Option\x20A','[AI]\x20Performing\x20image\x20recognition...','Create\x20a\x20quiz\x20about\x20','topic','slice','zIVkS','what','LCyMG','getElementById','theme','fOXBt','scrollTop','label','dwOVG','xVtFC','zSiGS','content','getUserMedia','map','oghPn','sendButton','initialize','window.ai\x20API\x20not\x20available','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Time\x20Limit:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','keypress','text','You\x20are\x20a\x20quiz\x20generator.\x20Create\x20a\x20quiz\x20based\x20on\x20the\x20following\x20image\x20context\x20and\x20user\x20requirements.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Image\x20context:\x20','imageContext:','add','10ulSOtG','\x20Quiz','TFuCl','XzDtP','[Quiz]\x20Error\x20generating\x20quiz:','nKGth','Processing\x20image...','textContent','GFjdw','Quiz\x20generation\x20failed\x20completely.\x20Please\x20try\x20again\x20later.','VoIZL','Windows\x20AI\x20API\x20not\x20available','message\x20bot-message','ZAACb','src','OsfrU','[AI]\x20Creating\x20image\x20recognition\x20session...','Washington\x20Drivers\x20License\x20Test','dBYUv','[Camera]\x20Stopping\x20camera...','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Format\x20the\x20response\x20as\x20a\x20JSON\x20quiz\x20object\x20with\x20id,\x20grade,\x20subject,\x20title,\x20timeLimit,\x20topic,\x20and\x20questions\x20array.','timeLimit','ZshEP','terminate','I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20image\x20and\x20requirements:','Generated\x20a\x20basic\x20quiz\x20without\x20AI\x20assistance:','BUMIp','div','HUcON','rwbuP','style','User','6770269TvsBwd','txJAJ','ytpIO','qgigG','remove','azQkP','cameraPreview','[Camera]\x20Capturing\x20image...','push','DXsUn','[Camera]\x20Camera\x20preview\x20started\x20and\x20container\x20displayed','[OCR]\x20Starting\x20text\x20extraction...','data','Option\x20C','[Quiz]\x20Failed\x20to\x20parse\x20AI\x20response:','OJrsQ','finally','\x20-\x20','getAttribute','whKBE','themeToggle','topics','607209Pimivv','pizPU','PLKaT','documentElement','stringify','message\x20','[UI]\x20Adding\x20message:\x20','UaRgg','rXIRi','toISOString','Description\x20of\x20visual\x20elements','pcpyw','iTlmB','includes','History','xNTBk','confidence','height','HQWeO','qamnS','Option\x20B','Copy\x20Quiz','General\x20Knowledge','grade','ecsvA','pamFq','TViau','jeCeQ','...?','question'];_0x4dce=function(){return _0x172b3f;};return _0x4dce();}async function generateQuizUsingAI(_0xb7c888,_0x50d54a){const _0x15a0e4=_0x5735af,_0x53bb5f={'oghPn':_0x15a0e4(0x20c),'oGZab':_0x15a0e4(0x152),'nKGth':_0x15a0e4(0x14c),'LCyMG':'system','fgkQO':_0x15a0e4(0x16f),'zSiGS':'message\x20bot-message\x20streaming','oSVkz':function(_0x10056b,_0x1ca80a,_0x343b95){return _0x10056b(_0x1ca80a,_0x343b95);},'zIVkS':_0x15a0e4(0x23b),'IoOIf':function(_0x5d86b2){return _0x5d86b2();},'WbQWd':function(_0x8233d5,_0x2baf60){return _0x8233d5(_0x2baf60);},'JRyKh':_0x15a0e4(0x16c),'ArkUL':function(_0x1a391e,_0x2326ec){return _0x1a391e(_0x2326ec);},'VoIZL':_0x15a0e4(0x182),'rwbuP':function(_0x115777,_0x5b6901,_0x595d21){return _0x115777(_0x5b6901,_0x595d21);},'OcSpj':function(_0x380ed1){return _0x380ed1();},'pcpyw':_0x15a0e4(0x1fa),'TFuCl':function(_0x48d8dc){return _0x48d8dc();},'fOXBt':function(_0x3f4a38,_0x52d832,_0xd65fca){return _0x3f4a38(_0x52d832,_0xd65fca);},'wfmbL':function(_0x67fa7f,_0x5f39ee,_0x566b0e){return _0x67fa7f(_0x5f39ee,_0x566b0e);},'DXsUn':_0x15a0e4(0x15d)};console['log'](_0x53bb5f[_0x15a0e4(0x149)],{'imageContext':_0xb7c888,'userPrompt':_0x50d54a});try{console[_0x15a0e4(0x226)](_0x53bb5f[_0x15a0e4(0x1ed)],JSON[_0x15a0e4(0x18e)](_0xb7c888));if(!window['ai'])throw new Error(_0x53bb5f[_0x15a0e4(0x159)]);const _0x885f59=_0x15a0e4(0x151)+JSON[_0x15a0e4(0x18e)](_0xb7c888)+_0x15a0e4(0x168);console[_0x15a0e4(0x226)](_0x15a0e4(0x21c),_0x885f59);const _0x19b298=[{'role':_0x53bb5f[_0x15a0e4(0x256)],'content':_0x885f59},{'role':_0x15a0e4(0x1e9),'content':_0x50d54a}],_0x33f178=document[_0x15a0e4(0x1f0)](_0x53bb5f[_0x15a0e4(0x235)]);_0x33f178[_0x15a0e4(0x201)]=_0x53bb5f[_0x15a0e4(0x25e)],chatMessages['appendChild'](_0x33f178),_0x53bb5f['oSVkz'](showTypingIndicator,chatMessages,_0x53bb5f[_0x15a0e4(0x254)]);if(!aiLanguageSession)await _0x53bb5f[_0x15a0e4(0x204)](initializeLanguageSession);const _0x6d2a37=await aiLanguageSession['promptStreaming'](_0x885f59+_0x15a0e4(0x24a)+_0x50d54a);let _0x52b54d='';for await(const _0x10ee30 of _0x6d2a37){_0x52b54d+=_0x10ee30,_0x33f178[_0x15a0e4(0x15b)]=_0x52b54d,chatMessages[_0x15a0e4(0x25a)]=chatMessages[_0x15a0e4(0x1ce)];}_0x33f178[_0x15a0e4(0x178)]();let _0x4add0c;try{_0x4add0c=_0x53bb5f['WbQWd'](safeJSONParse,_0x52b54d),addMessage(_0x53bb5f[_0x15a0e4(0x1ec)],![]),_0x53bb5f['ArkUL'](addQuiz,_0x4add0c);}catch(_0x1cbf8a){console[_0x15a0e4(0x23d)](_0x53bb5f[_0x15a0e4(0x15e)],_0x1cbf8a),_0x53bb5f[_0x15a0e4(0x171)](addMessage,_0x52b54d,![]);throw _0x1cbf8a;}_0x53bb5f[_0x15a0e4(0x1e3)](removeTypingIndicator);}catch(_0x4e3820){console[_0x15a0e4(0x23d)](_0x53bb5f[_0x15a0e4(0x195)],_0x4e3820),_0x53bb5f[_0x15a0e4(0x156)](removeTypingIndicator),_0x53bb5f[_0x15a0e4(0x259)](addMessage,'Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz\x20using\x20Gemini\x20Nano\x20AI.\x20Please\x20try\x20again.',![]);try{const _0x180a92=await _0x53bb5f['wfmbL'](generateQuizWithoutAI,_0xb7c888,_0x50d54a);addMessage(_0x15a0e4(0x16d),![]),addQuiz(_0x180a92);}catch(_0x572346){console[_0x15a0e4(0x23d)](_0x15a0e4(0x21e),_0x572346),_0x53bb5f['rwbuP'](addMessage,_0x53bb5f[_0x15a0e4(0x17d)],![]);}}}function generateOptionsFromText(_0x12b86b){const _0x4e736f=_0x5735af,_0x352c38={'QCSSH':function(_0x58d325,_0x499de5){return _0x58d325<_0x499de5;},'WLuDL':function(_0x16d7ff,_0xe09dd2){return _0x16d7ff+_0xe09dd2;}},_0x999202=_0x12b86b['split'](/[.!?]+/)['filter'](_0x29a022=>_0x29a022[_0x4e736f(0x1c0)]()[_0x4e736f(0x21d)]>0x0),_0x3ca867=_0x999202[_0x4e736f(0x253)](0x0,0x4)[_0x4e736f(0x261)](_0x346a1b=>_0x346a1b[_0x4e736f(0x1c0)]());while(_0x352c38['QCSSH'](_0x3ca867['length'],0x4)){_0x3ca867[_0x4e736f(0x17c)](_0x352c38[_0x4e736f(0x1ee)]('Additional\x20option\x20',_0x352c38[_0x4e736f(0x1ee)](_0x3ca867[_0x4e736f(0x21d)],0x1)));}return _0x3ca867;}function generateCustomQuestion(_0x116f59,_0x55e7c9){const _0x25e82e=_0x5735af,_0x320649={'ecsvA':_0x25e82e(0x255)};return _0x116f59[_0x25e82e(0x1bc)]()[_0x25e82e(0x197)](_0x320649[_0x25e82e(0x1a2)])?_0x116f59:'What\x20is\x20the\x20significance\x20of\x20'+_0x55e7c9[_0x25e82e(0x218)]('\x20')[_0x25e82e(0x253)](0x0,0x3)[_0x25e82e(0x22a)]('\x20')+_0x25e82e(0x1a6);}function addMessage(_0x28520d,_0x511a12=![]){const _0x5106e8=_0x5735af,_0x360f7e={'ZJmMI':_0x5106e8(0x173),'zjZbN':'Bot','CFLRH':_0x5106e8(0x16f),'TViau':'user-message','pizPU':_0x5106e8(0x1ad)};console['log'](_0x5106e8(0x190)+(_0x511a12?_0x360f7e[_0x5106e8(0x1b8)]:_0x360f7e[_0x5106e8(0x1f7)])+':',_0x28520d);const _0x98d728=document[_0x5106e8(0x1f0)](_0x360f7e['CFLRH']);_0x98d728[_0x5106e8(0x201)]=_0x5106e8(0x18f)+(_0x511a12?_0x360f7e[_0x5106e8(0x1a4)]:_0x360f7e[_0x5106e8(0x18b)]),_0x98d728[_0x5106e8(0x15b)]=_0x28520d,chatMessages[_0x5106e8(0x22c)](_0x98d728),chatMessages[_0x5106e8(0x25a)]=chatMessages[_0x5106e8(0x1ce)];}function addQuiz(_0x37f210){const _0x232c77=_0x5735af,_0x300120={'bvztw':_0x232c77(0x1c8),'qgigG':_0x232c77(0x16f),'NvBiA':_0x232c77(0x223),'XnKGZ':_0x232c77(0x1ca),'ZAACb':_0x232c77(0x19f)};console[_0x232c77(0x226)](_0x300120[_0x232c77(0x1fd)],_0x37f210);const _0xc0f355=document['createElement'](_0x300120[_0x232c77(0x177)]);_0xc0f355['className']='quiz-container';const _0x46c01c='\x0a\x20\x20\x20\x20\x20\x20\x20\x20Title:\x20'+_0x37f210[_0x232c77(0x1d3)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20Grade:\x20'+_0x37f210[_0x232c77(0x1a1)]+_0x232c77(0x1ae)+_0x37f210[_0x232c77(0x1d2)]+_0x232c77(0x14d)+_0x37f210[_0x232c77(0x169)]+_0x232c77(0x24e)+_0x37f210['topic']+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20Questions:\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x37f210[_0x232c77(0x1cc)][_0x232c77(0x261)]((_0x494b91,_0x80e35e)=>_0x232c77(0x14e)+(_0x80e35e+0x1)+'.\x20'+_0x494b91[_0x232c77(0x1a7)]+_0x232c77(0x14e)+(_0x494b91['options']?_0x494b91[_0x232c77(0x1e2)]['map']((_0x5202ed,_0x2f5923)=>_0x232c77(0x1db)+String[_0x232c77(0x1d5)](0x61+_0x2f5923)+')\x20'+_0x5202ed)[_0x232c77(0x22a)]('\x0a'):'')+_0x232c77(0x1dc)+_0x494b91[_0x232c77(0x1c7)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20Points:\x20'+_0x494b91['points']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20')['join']('\x0a')+'\x0a\x20\x20\x20\x20',_0x2119d5=document[_0x232c77(0x1f0)](_0x300120[_0x232c77(0x1f4)]);_0x2119d5[_0x232c77(0x15b)]=_0x46c01c,_0xc0f355['appendChild'](_0x2119d5);const _0x1249ce=document['createElement'](_0x300120['XnKGZ']);_0x1249ce['className']=_0x232c77(0x20a),_0x1249ce[_0x232c77(0x15b)]=_0x300120[_0x232c77(0x161)],_0x1249ce[_0x232c77(0x224)]=()=>{const _0x3e304e=_0x232c77;navigator[_0x3e304e(0x216)][_0x3e304e(0x206)](_0x46c01c)[_0x3e304e(0x1e4)](()=>_0x1249ce[_0x3e304e(0x15b)]='Copied!')[_0x3e304e(0x1fc)](_0x3f1546=>console['error'](_0x3e304e(0x1f9),_0x3f1546))[_0x3e304e(0x184)](()=>setTimeout(()=>_0x1249ce[_0x3e304e(0x15b)]=_0x3e304e(0x19f),0x7d0));},_0xc0f355[_0x232c77(0x22c)](_0x1249ce),chatMessages['appendChild'](_0xc0f355),chatMessages[_0x232c77(0x25a)]=chatMessages['scrollHeight'];}function _0xe25b(_0x19f7c2,_0x109b21){const _0x4dcedf=_0x4dce();return _0xe25b=function(_0xe25b2b,_0xb75b09){_0xe25b2b=_0xe25b2b-0x149;let _0x8b55dd=_0x4dcedf[_0xe25b2b];return _0x8b55dd;},_0xe25b(_0x19f7c2,_0x109b21);}async function captureImage(){const _0x83f6da=_0x5735af,_0x4dd5df={'yZsbq':function(_0x285b10){return _0x285b10();},'jeCeQ':_0x83f6da(0x219),'YPSOG':_0x83f6da(0x17b),'bcrSh':_0x83f6da(0x212),'zyjyk':_0x83f6da(0x1d1),'OREGT':_0x83f6da(0x1bd),'hlvjN':_0x83f6da(0x1ef),'GyeNT':'div','xVtFC':function(_0x328346){return _0x328346();},'sDWqm':function(_0xdb21d8,_0x5636de){return _0xdb21d8(_0x5636de);},'dfOds':_0x83f6da(0x1ea),'txJAJ':_0x83f6da(0x1c2),'sDqcg':_0x83f6da(0x215),'jjIio':'Make\x20a\x20quiz\x20suitable\x20for\x20beginners','nzWvU':_0x83f6da(0x1c3),'DtypA':function(_0x257d82,_0x5e4e47,_0x561887){return _0x257d82(_0x5e4e47,_0x561887);}};console['log'](_0x4dd5df[_0x83f6da(0x23f)]);try{const _0x508055=document[_0x83f6da(0x1f0)](_0x4dd5df[_0x83f6da(0x1aa)]);_0x508055[_0x83f6da(0x1dd)]=cameraPreview['videoWidth'],_0x508055[_0x83f6da(0x19b)]=cameraPreview[_0x83f6da(0x210)],_0x508055['getContext']('2d')[_0x83f6da(0x1e1)](cameraPreview,0x0,0x0);const _0x3118e8=document[_0x83f6da(0x1f0)](_0x4dd5df[_0x83f6da(0x1ba)]);_0x3118e8[_0x83f6da(0x162)]=_0x508055[_0x83f6da(0x208)](_0x4dd5df['OREGT']),_0x3118e8[_0x83f6da(0x201)]=_0x4dd5df[_0x83f6da(0x200)];const _0x5ba9a6=document['createElement'](_0x4dd5df['GyeNT']);_0x5ba9a6[_0x83f6da(0x201)]=_0x83f6da(0x160),_0x5ba9a6[_0x83f6da(0x22c)](_0x3118e8),chatMessages[_0x83f6da(0x22c)](_0x5ba9a6),_0x4dd5df[_0x83f6da(0x25d)](stopCamera);const _0x1a6778=await _0x4dd5df[_0x83f6da(0x1cb)](processImageUsingTesseract,_0x3118e8);imageContext=_0x1a6778,console[_0x83f6da(0x226)](_0x4dd5df['dfOds'],JSON[_0x83f6da(0x18e)](imageContext,null,0x2)),addMessage(_0x4dd5df[_0x83f6da(0x175)],![]);const _0x235076=[_0x83f6da(0x251)+imageContext[_0x83f6da(0x189)][0x0]+_0x83f6da(0x185)+imageContext[_0x83f6da(0x25f)],imageContext[_0x83f6da(0x1c7)]==='text'?'Generate\x20questions\x20based\x20on\x20the\x20image\x20related\x20text\x20-\x20'+imageContext[_0x83f6da(0x25f)]:_0x4dd5df['sDqcg'],_0x4dd5df[_0x83f6da(0x242)]];_0x235076[_0x83f6da(0x1c5)](_0x25bca6=>{const _0x53b380=_0x83f6da,_0x3bc955=document[_0x53b380(0x1f0)](_0x53b380(0x16f));_0x3bc955[_0x53b380(0x201)]=_0x4dd5df[_0x53b380(0x1a5)],_0x3bc955[_0x53b380(0x15b)]=_0x25bca6,_0x3bc955[_0x53b380(0x224)]=()=>{const _0x2e7745=_0x53b380;messageInput[_0x2e7745(0x239)]=_0x25bca6,_0x4dd5df['yZsbq'](sendMessage);},chatMessages[_0x53b380(0x22c)](_0x3bc955);});}catch(_0x3aa7b6){console['error'](_0x4dd5df[_0x83f6da(0x205)],_0x3aa7b6),_0x4dd5df[_0x83f6da(0x21a)](addMessage,_0x83f6da(0x1ac),![]);}}async function sendMessage(){const _0x18c783=_0x5735af,_0x26f530={'eDbnj':function(_0x4324fa,_0x5b5ea0,_0x1e531d){return _0x4324fa(_0x5b5ea0,_0x1e531d);},'KRINS':'I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20requirements:','dBYUv':function(_0x168e1b,_0x32deb4){return _0x168e1b(_0x32deb4);},'iOiVQ':function(_0x311a33,_0xb4a58c,_0x4c38ea){return _0x311a33(_0xb4a58c,_0x4c38ea);},'cslqa':function(_0xf38773,_0x364e7a,_0x352c51){return _0xf38773(_0x364e7a,_0x352c51);}},_0x7a237a=messageInput['value'][_0x18c783(0x1c0)]();if(!_0x7a237a)return;console[_0x18c783(0x226)](_0x18c783(0x1ab),_0x7a237a),_0x26f530[_0x18c783(0x1be)](addMessage,_0x7a237a,!![]),messageInput[_0x18c783(0x239)]='';if(imageContext)try{const _0x32a8a7=await _0x26f530[_0x18c783(0x1be)](generateQuizUsingAI,imageContext,_0x7a237a);addMessage(_0x26f530[_0x18c783(0x1d6)],![]),_0x26f530[_0x18c783(0x166)](addQuiz,_0x32a8a7);}catch(_0x2ce24f){_0x26f530['iOiVQ'](addMessage,_0x18c783(0x1ff),![]);}else _0x26f530[_0x18c783(0x225)](addMessage,'Please\x20capture\x20an\x20image\x20first\x20before\x20providing\x20quiz\x20requirements.',![]);}function toggleTheme(){const _0x37cc2a=_0x5735af,_0x38305d={'oteja':_0x37cc2a(0x24c),'CXIrD':_0x37cc2a(0x220),'HUcON':_0x37cc2a(0x1e8),'BDeaU':_0x37cc2a(0x258)},_0x469065=document[_0x37cc2a(0x18d)],_0x503499=_0x469065[_0x37cc2a(0x186)](_0x37cc2a(0x1e8)),_0x25aa85=_0x503499===_0x37cc2a(0x220)?_0x38305d[_0x37cc2a(0x230)]:_0x38305d['CXIrD'];_0x469065['setAttribute'](_0x38305d[_0x37cc2a(0x170)],_0x25aa85),localStorage[_0x37cc2a(0x213)](_0x38305d['BDeaU'],_0x25aa85);}themeToggle[_0x5735af(0x1a9)](_0x5735af(0x1af),toggleTheme),cameraButton[_0x5735af(0x1a9)](_0x5735af(0x1af),startCamera),captureButton[_0x5735af(0x1a9)](_0x5735af(0x1af),captureImage),cancelButton[_0x5735af(0x1a9)](_0x5735af(0x1af),stopCamera),sendButton[_0x5735af(0x1a9)]('click',sendMessage),messageInput['addEventListener'](_0x5735af(0x14f),_0x44e1f3=>{const _0xa34587=_0x5735af,_0x3a0596={'ifLRW':_0xa34587(0x234),'xfhvy':function(_0x315b16){return _0x315b16();}};if(_0x44e1f3[_0xa34587(0x221)]===_0x3a0596[_0xa34587(0x243)])_0x3a0596[_0xa34587(0x24d)](sendMessage);});async function generateQuizWithoutAI(_0x1a65de,_0x5c7815){const _0xdc94cc=_0x5735af,_0x233daa={'ixzPm':_0xdc94cc(0x1fe),'iwGkE':'text','MqTMS':'Based\x20on\x20the\x20text,\x20what\x20is\x20the\x20main\x20topic\x20being\x20discussed?','dwOVG':_0xdc94cc(0x1b6),'BkqyJ':function(_0x57db76,_0x267151){return _0x57db76(_0x267151);},'IFHmd':_0xdc94cc(0x24f),'iYmcm':_0xdc94cc(0x249),'Acqvr':_0xdc94cc(0x20f),'GFjdw':_0xdc94cc(0x194),'AWBPJ':_0xdc94cc(0x19e),'zpxsN':_0xdc94cc(0x181),'toHnw':_0xdc94cc(0x240),'OSsES':_0xdc94cc(0x245),'UaRgg':_0xdc94cc(0x158)};console[_0xdc94cc(0x226)](_0x233daa[_0xdc94cc(0x211)],{'imageContext':_0x1a65de,'userPrompt':_0x5c7815});try{const _0x263717=_0x1a65de['type']===_0x233daa[_0xdc94cc(0x1e0)],_0x57dfe4=_0x1a65de[_0xdc94cc(0x25f)],_0x2f38f5=_0x1a65de['topics'],_0x35095b=[];_0x263717?(_0x35095b[_0xdc94cc(0x17c)]({'question':_0x233daa[_0xdc94cc(0x227)],'type':_0x233daa[_0xdc94cc(0x25c)],'options':_0x233daa[_0xdc94cc(0x1e7)](generateOptionsFromText,_0x57dfe4),'answer':_0x233daa['IFHmd'],'points':0x2}),_0x35095b[_0xdc94cc(0x17c)]({'question':_0x233daa[_0xdc94cc(0x1e5)],'type':_0xdc94cc(0x1de),'answer':_0xdc94cc(0x22b),'points':0x2})):_0x35095b[_0xdc94cc(0x17c)]({'question':_0x233daa[_0xdc94cc(0x1b9)],'type':'open_ended','answer':_0x233daa[_0xdc94cc(0x15c)],'points':0x2});_0x35095b[_0xdc94cc(0x17c)]({'question':generateCustomQuestion(_0x5c7815,_0x57dfe4),'type':_0xdc94cc(0x1b6),'options':[_0x233daa['IFHmd'],_0x233daa[_0xdc94cc(0x22d)],_0x233daa['zpxsN'],_0x233daa['toHnw']],'answer':_0x233daa[_0xdc94cc(0x22e)],'points':0x2});const _0x2986b5={'id':Date[_0xdc94cc(0x1b0)]()[_0xdc94cc(0x229)](),'title':_0x2f38f5[0x0]+_0xdc94cc(0x155),'subject':_0x2f38f5[0x0],'grade':_0x233daa[_0xdc94cc(0x1a8)],'timeLimit':0xf,'topic':_0x2f38f5['join'](',\x20'),'questions':_0x35095b};return _0x2986b5;}catch(_0x35576a){console['error'](_0x233daa[_0xdc94cc(0x191)],_0x35576a);throw _0x35576a;}}