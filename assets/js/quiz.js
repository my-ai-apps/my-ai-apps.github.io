
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x3f4597=_0x49bf;(function(_0x2aa441,_0x7c9580){const _0x10a5b4=_0x49bf,_0x45f6cd=_0x2aa441();while(!![]){try{const _0x2eb894=-parseInt(_0x10a5b4(0x1e5))/0x1*(parseInt(_0x10a5b4(0x1f4))/0x2)+-parseInt(_0x10a5b4(0x2a7))/0x3*(-parseInt(_0x10a5b4(0x289))/0x4)+-parseInt(_0x10a5b4(0x2b9))/0x5*(parseInt(_0x10a5b4(0x1fc))/0x6)+-parseInt(_0x10a5b4(0x210))/0x7*(-parseInt(_0x10a5b4(0x1df))/0x8)+-parseInt(_0x10a5b4(0x2d1))/0x9+parseInt(_0x10a5b4(0x2d9))/0xa+-parseInt(_0x10a5b4(0x2c7))/0xb*(-parseInt(_0x10a5b4(0x29d))/0xc);if(_0x2eb894===_0x7c9580)break;else _0x45f6cd['push'](_0x45f6cd['shift']());}catch(_0x1eca22){_0x45f6cd['push'](_0x45f6cd['shift']());}}}(_0x1e18,0x5166f));function _0x49bf(_0x3a7849,_0x30183f){const _0x1e181d=_0x1e18();return _0x49bf=function(_0x49bfd9,_0x411dbc){_0x49bfd9=_0x49bfd9-0x1d2;let _0x2cbc7e=_0x1e181d[_0x49bfd9];return _0x2cbc7e;},_0x49bf(_0x3a7849,_0x30183f);}import{Logger}from'./common.js';const chatMessages=document[_0x3f4597(0x21f)]('chatMessages'),messageInput=document[_0x3f4597(0x21f)](_0x3f4597(0x2dc)),sendButton=document['getElementById'](_0x3f4597(0x1f9)),cameraButton=document['getElementById']('cameraButton'),themeToggle=document[_0x3f4597(0x21f)](_0x3f4597(0x1f3)),cameraContainer=document[_0x3f4597(0x21f)](_0x3f4597(0x205)),cameraPreview=document[_0x3f4597(0x21f)](_0x3f4597(0x28d)),captureButton=document['getElementById'](_0x3f4597(0x2b1)),cancelButton=document[_0x3f4597(0x21f)](_0x3f4597(0x296));let stream=null,imageContext=null;async function startCamera(){const _0x41ab20=_0x3f4597,_0x57db0c={'jfGRp':_0x41ab20(0x254),'wVbDy':'flex','vJsQH':_0x41ab20(0x23e),'dpBGS':function(_0x32b149,_0x2bea38){return _0x32b149+_0x2bea38;},'DvPZs':'Error\x20accessing\x20camera:\x20'};console['log'](_0x41ab20(0x23d));try{const _0x1a7d3a=_0x57db0c['jfGRp']['split']('|');let _0x39643e=0x0;while(!![]){switch(_0x1a7d3a[_0x39643e++]){case'0':console[_0x41ab20(0x297)](_0x41ab20(0x2ef),stream);continue;case'1':console[_0x41ab20(0x297)](_0x41ab20(0x218));continue;case'2':cameraPreview[_0x41ab20(0x2ae)]=stream;continue;case'3':cameraContainer[_0x41ab20(0x29e)][_0x41ab20(0x241)]=_0x57db0c['wVbDy'];continue;case'4':stream=await navigator[_0x41ab20(0x230)][_0x41ab20(0x2de)]({'video':{'facingMode':_0x57db0c[_0x41ab20(0x203)]}});continue;}break;}}catch(_0x17a17d){console[_0x41ab20(0x2c6)]('[Camera]\x20Error\x20accessing\x20camera:',_0x17a17d),addMessage(_0x57db0c[_0x41ab20(0x212)](_0x57db0c[_0x41ab20(0x256)],_0x17a17d['message']));}}function stopCamera(){const _0x5bc752=_0x3f4597,_0x5ce4f6={'SxQvP':_0x5bc752(0x258),'WxCLh':'[Camera]\x20Stopping\x20camera...','ALQgp':_0x5bc752(0x2b6),'dyAwg':_0x5bc752(0x2e3)};console[_0x5bc752(0x297)](_0x5ce4f6[_0x5bc752(0x1d3)]),stream&&(stream[_0x5bc752(0x291)]()['forEach'](_0xf5ce6e=>{const _0x424710=_0x5bc752;console[_0x424710(0x297)](_0x5ce4f6['SxQvP'],_0xf5ce6e[_0x424710(0x259)]),_0xf5ce6e[_0x424710(0x283)]();}),stream=null),cameraContainer[_0x5bc752(0x29e)]['display']=_0x5ce4f6[_0x5bc752(0x2d0)],console[_0x5bc752(0x297)](_0x5ce4f6[_0x5bc752(0x2ad)]);}async function processImageUsingWindowAI(_0x27ce94){const _0x42b3b2=_0x3f4597,_0x14f962={'guuCu':_0x42b3b2(0x2d6),'dOUvm':_0x42b3b2(0x2e5),'IotDM':_0x42b3b2(0x2b8),'DKFUC':'[AI]\x20Image\x20session\x20created:','HTDYH':_0x42b3b2(0x27f),'olJSb':_0x42b3b2(0x281)};console[_0x42b3b2(0x297)](_0x14f962[_0x42b3b2(0x272)],_0x27ce94);if(!window['ai']){console['error']('[AI]\x20Windows\x20AI\x20API\x20not\x20found\x20in\x20window\x20object');throw new Error(_0x14f962[_0x42b3b2(0x28b)]);}try{console[_0x42b3b2(0x297)](_0x14f962[_0x42b3b2(0x21e)]);const _0x548b29=await window['ai'][_0x42b3b2(0x1f6)]();console[_0x42b3b2(0x297)](_0x14f962[_0x42b3b2(0x27b)],_0x548b29),console[_0x42b3b2(0x297)](_0x14f962[_0x42b3b2(0x225)]);const _0x1d6a04=await _0x548b29[_0x42b3b2(0x20d)](_0x27ce94);return console[_0x42b3b2(0x297)](_0x14f962[_0x42b3b2(0x1e6)],_0x1d6a04),_0x1d6a04;}catch(_0x35ccdb){console['error'](_0x42b3b2(0x236),_0x35ccdb);throw _0x35ccdb;}}async function processImageUsingTesseract(_0x2cea27){const _0x37fda0=_0x3f4597,_0x21918e={'oEASJ':_0x37fda0(0x23b),'AVJlx':function(_0x246000,_0x168e5b,_0x254ae5){return _0x246000(_0x168e5b,_0x254ae5);},'FslvF':_0x37fda0(0x269),'Xikak':function(_0x3c196a,_0x23aee5){return _0x3c196a(_0x23aee5);},'qePoF':'[OCR]\x20Text\x20extraction\x20result:','qNPiv':function(_0x327b93,_0x23bf5a){return _0x327b93>_0x23bf5a;},'KiwjB':_0x37fda0(0x27a),'kLuVV':function(_0x1657c3,_0x41c7c2){return _0x1657c3(_0x41c7c2);},'SJTmL':_0x37fda0(0x251),'LFqLx':_0x37fda0(0x253),'gtHkv':_0x37fda0(0x252),'qPvOT':_0x37fda0(0x2ce),'BkAeg':'[Processing]\x20Error\x20during\x20image\x20processing:'};console[_0x37fda0(0x297)](_0x21918e[_0x37fda0(0x25e)]),_0x21918e[_0x37fda0(0x243)](addMessage,_0x21918e['FslvF'],![]);try{const _0x4d6714=await _0x21918e[_0x37fda0(0x1e1)](extractTextFromImage,_0x2cea27);return console[_0x37fda0(0x297)](_0x21918e[_0x37fda0(0x1dd)],_0x4d6714),_0x4d6714[_0x37fda0(0x1ee)]&&_0x21918e[_0x37fda0(0x1f2)](_0x4d6714[_0x37fda0(0x1ee)][_0x37fda0(0x20f)]()[_0x37fda0(0x2cf)],0x0)?{'type':_0x37fda0(0x1ee),'content':_0x21918e[_0x37fda0(0x24f)],'confidence':_0x4d6714[_0x37fda0(0x1f7)],'topics':_0x21918e[_0x37fda0(0x2a2)](generateTopics,_0x4d6714[_0x37fda0(0x1ee)])}:(console[_0x37fda0(0x297)](_0x37fda0(0x1f0)),{'type':_0x21918e[_0x37fda0(0x28a)],'content':_0x21918e[_0x37fda0(0x27e)],'topics':[_0x21918e[_0x37fda0(0x263)],_0x21918e[_0x37fda0(0x242)]],'features':{'timestamp':new Date()[_0x37fda0(0x1ef)](),'dimensions':{'width':_0x2cea27[_0x37fda0(0x213)],'height':_0x2cea27[_0x37fda0(0x267)]}}});}catch(_0x1dc0ca){console[_0x37fda0(0x2c6)](_0x21918e[_0x37fda0(0x2ca)],_0x1dc0ca);throw _0x1dc0ca;}}function _0x1e18(){const _0x173279=['vmLIW','General\x20Knowledge','length','ALQgp','2058930ourjOi','from','Language\x20Arts','sNoYK','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Time\x20Limit:\x20','[AI]\x20Starting\x20image\x20processing...','GwOOs','filter','3285720uIWCmg','setAttribute','TYvan','messageInput','imageContext:','getUserMedia','appendChild','className','[Quiz]\x20Error\x20generating\x20quiz:','timeLimit','[Camera]\x20Camera\x20stopped\x20and\x20container\x20hidden','[OCR]\x20Starting\x20text\x20extraction...','Windows\x20AI\x20API\x20not\x20available','LcXeE','data','BmEab','getAttribute','then','EcXKL','Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz\x20using\x20Gemini\x20Nano\x20AI.\x20Please\x20try\x20again.','[UI]\x20Adding\x20quiz\x20to\x20chat:','Option\x20C','[Camera]\x20Successfully\x20got\x20media\x20stream:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Grade:\x20','user-message','WxCLh','oCuXn','zEtVA','toLowerCase','GlEmd','Lkupc','copy-button','[Quiz]\x20Starting\x20quiz\x20generation\x20with\x20Gemini\x20Nano...','Bot','txTTV','qePoF','Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz.\x20Please\x20try\x20again.','376nyfQdU','push','Xikak','boNsx','fromCharCode','toString','591482KMLhjb','olJSb','byObE','\x0a\x0aUser\x20request:\x20','[UI]\x20Adding\x20message:\x20','bot-message','getContext','createWorker','afdgp','text','toISOString','[Processing]\x20No\x20OCR\x20text\x20found,\x20falling\x20back\x20to\x20image\x20analysis','Copy\x20Quiz','qNPiv','themeToggle','2ZuAnMr','options','createImageSession','confidence','bvTBD','sendButton','drawImage','IbiVG','12ZJOITp','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','light','scrollHeight','wtrFe','[Camera]\x20Capturing\x20image...','KCcXS','vJsQH','grade','cameraContainer','addEventListener','DAzDD','atcFc','QDFDn','Image\x20captured!\x20Please\x20provide\x20your\x20requirements\x20for\x20the\x20quiz.','img','[Processing]\x20Image\x20processing\x20completed:','recognize','topic','trim','763BCfgru','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Points:\x20','dpBGS','width','value','button','Please\x20capture\x20an\x20image\x20first\x20before\x20providing\x20quiz\x20requirements.','qMwTU','[Camera]\x20Camera\x20preview\x20started\x20and\x20container\x20displayed','Student\x20should\x20identify\x20main\x20points\x20from\x20the\x20text','...?','Quiz\x20generation\x20failed\x20completely.\x20Please\x20try\x20again\x20later.','data-theme','CxMXT','IotDM','getElementById','keypress','stringify','Geography','forEach','TeTPI','HTDYH','[Quiz]\x20Error\x20in\x20quiz\x20generation\x20using\x20Gemini\x20Nano\x20AI:','qQSLL','writeText','\x0a\x20\x20\x20\x20','mKEyu','HPSeB','message\x20bot-message\x20streaming','question','RUmAB','now','mediaDevices','div','join','jJXmk','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Title:\x20','Option\x20B','[AI]\x20Error\x20during\x20image\x20processing:','window.ai\x20API\x20not\x20available','add','slice','GcFER','[Processing]\x20Starting\x20image\x20OCR\x20analysis...','SiyFX','[Camera]\x20Starting\x20camera\x20initialization...','environment','Option\x20A','EsTXM','display','qPvOT','AVJlx','title','load','History','wVsaL','What\x20can\x20you\x20observe\x20in\x20this\x20image?','gAVuC','questions','\x20Quiz','VRvHz','documentElement','mNqjg','KiwjB','includes','image','Visual\x20Analysis','Visual\x20content\x20detected','4|0|2|3|1','uKkmb','DvPZs','[OCR]\x20Worker\x20terminated','[Camera]\x20Stopping\x20track:','label','pattern','ToGEX','AVzeb','onclick','oEASJ','[OCR]\x20Error\x20in\x20text\x20extraction:','uxfYm','test','createElement','gtHkv','Create\x20a\x20quiz\x20about\x20','Image\x20and\x20text\x20analysis\x20complete','Based\x20on\x20the\x20text,\x20what\x20is\x20the\x20main\x20topic\x20being\x20discussed?','height','key','Processing\x20image...','TMfzO','initialize','qnLHr','content','oDQci','wrvOr','gUQnS','remove','guuCu','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20Questions:\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Arxia','Generate\x20multiple\x20choice\x20questions\x20about\x20this\x20picture','PMBMG','theme','split','captured-image','Washington\x20Drivers\x20License\x20Test','DKFUC','[Quiz]\x20Generating\x20quiz...','[Chat]\x20Sending\x20message:','LFqLx','[AI]\x20Performing\x20image\x20recognition...','multiple_choice','[AI]\x20Image\x20recognition\x20completed.\x20Result:','Copied!','stop','yrVTV','videoHeight','BHNFL','nmHko','click','8380HsmaCZ','SJTmL','dOUvm','What\x20is\x20the\x20significance\x20of\x20','cameraPreview','IlaZj','cMVvM','Description\x20of\x20visual\x20elements','getTracks','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Subject:\x20','map','what','textContent','cancelButton','log','HRkBt','fFfEF','scrollTop','videoWidth','canvas','3444900pkycOw','style','I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20requirements:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Type:\x20','IiWRu','kLuVV','General','image/jpeg','IsLAv','rqcFV','741UgLkBk','topics','bVWwy','catch','yStxW','nJiyP','dyAwg','srcObject','wWctd','prompt-suggestion','captureButton','User','Option\x20D','OmYvm','uMbNS','none','vlGAC','[AI]\x20Creating\x20image\x20recognition\x20session...','1396775wGqLEf','eng','etwkF','lLvhU','Art','user','message\x20','[Camera]\x20Error\x20processing\x20captured\x20image:','wPBqw','What\x20are\x20the\x20key\x20points\x20mentioned\x20in\x20the\x20text?','bgKkc','size','NhSdZ','error','33SoOUOJ','DtKAE','[OCR]\x20Worker\x20initialized','BkAeg','toDataURL','open_ended'];_0x1e18=function(){return _0x173279;};return _0x1e18();}async function extractTextFromImage(_0x17a302){const _0x2107d0=_0x3f4597,_0x2bf5f5={'FZqVm':_0x2107d0(0x2e4),'NSDJq':_0x2107d0(0x2ba),'CxMXT':'[OCR]\x20Text\x20extracted:','UeSRP':_0x2107d0(0x257),'foVEw':function(_0x596e63,_0x10b87c){return _0x596e63(_0x10b87c);}};console['log'](_0x2bf5f5['FZqVm']);const _0x4f4530=_0x2bf5f5['NSDJq'];try{const _0x45539a=await Tesseract[_0x2107d0(0x1ec)]();await _0x45539a[_0x2107d0(0x245)](),await _0x45539a['loadLanguage'](_0x4f4530),await _0x45539a[_0x2107d0(0x26b)](_0x4f4530),console[_0x2107d0(0x297)](_0x2107d0(0x2c9));const _0x50857e=await _0x45539a['recognize'](_0x17a302);console[_0x2107d0(0x297)](_0x2bf5f5[_0x2107d0(0x21d)],_0x50857e[_0x2107d0(0x2e7)][_0x2107d0(0x1ee)]),await _0x45539a['terminate'](),console[_0x2107d0(0x297)](_0x2bf5f5['UeSRP']);const _0x3d05be={'timestamp':new Date()[_0x2107d0(0x1ef)](),'imageSize':{'width':_0x17a302[_0x2107d0(0x213)],'height':_0x17a302['height']},'extractedText':_0x50857e[_0x2107d0(0x2e7)]['text'],'confidenceScore':_0x50857e[_0x2107d0(0x2e7)][_0x2107d0(0x1f7)],'suggestedTopics':_0x2bf5f5['foVEw'](generateTopics,_0x50857e[_0x2107d0(0x2e7)][_0x2107d0(0x1ee)])};return{'description':_0x2107d0(0x265),'metadata':_0x3d05be,'text':_0x50857e[_0x2107d0(0x2e7)]['text'],'confidence':_0x50857e[_0x2107d0(0x2e7)][_0x2107d0(0x1f7)]};}catch(_0x3fd3fd){return console['error'](_0x2107d0(0x25f),_0x3fd3fd),{'text':'','confidence':0x0};}}function generateTopics(_0x1be8b0){const _0x4a9b2e=_0x3f4597,_0x1abd1e={'vlGAC':'Mathematics','boNsx':_0x4a9b2e(0x2d3),'DAzDD':_0x4a9b2e(0x2bd),'vmLIW':function(_0x22daf5,_0x36f3d9){return _0x22daf5===_0x36f3d9;}},_0x471d7d=new Set(),_0x357999=_0x1be8b0[_0x4a9b2e(0x1d6)](),_0x69c4ad=[{'pattern':/\b(math|equation|calculate|formula|number)\b/,'topic':_0x1abd1e[_0x4a9b2e(0x2b7)]},{'pattern':/\b(science|experiment|chemical|biology|physics)\b/,'topic':'Science'},{'pattern':/\b(history|century|ancient|war|empire|civilization)\b/,'topic':_0x4a9b2e(0x246)},{'pattern':/\b(geography|country|capital|mountain|river|climate)\b/,'topic':_0x4a9b2e(0x222)},{'pattern':/\b(grammar|sentence|paragraph|essay|writing)\b/,'topic':_0x1abd1e[_0x4a9b2e(0x1e2)]},{'pattern':/\b(art|color|design|paint|draw)\b/,'topic':_0x1abd1e[_0x4a9b2e(0x207)]}];return _0x69c4ad[_0x4a9b2e(0x223)](_0x58d335=>{const _0x2ea4e5=_0x4a9b2e;_0x58d335[_0x2ea4e5(0x25a)][_0x2ea4e5(0x261)](_0x357999)&&_0x471d7d[_0x2ea4e5(0x238)](_0x58d335[_0x2ea4e5(0x20e)]);}),_0x1abd1e[_0x4a9b2e(0x2cd)](_0x471d7d[_0x4a9b2e(0x2c4)],0x0)&&_0x471d7d[_0x4a9b2e(0x238)]('General\x20Knowledge'),Array[_0x4a9b2e(0x2d2)](_0x471d7d);}async function generateQuizUsingAI(_0x4e14c,_0x44dbf2){const _0x5e073e=_0x3f4597,_0x1666b4={'nmHko':_0x5e073e(0x237),'JMNEL':'[Quiz]\x20Constructed\x20system\x20prompt:','BmEab':'system','Lkupc':_0x5e073e(0x2be),'NinMF':_0x5e073e(0x231),'afdgp':_0x5e073e(0x22c),'CRLWE':function(_0x554a02,_0x34c827,_0x20e535){return _0x554a02(_0x34c827,_0x20e535);},'qMwTU':'Generating\x20quiz...','byObE':function(_0x1cba19){return _0x1cba19();},'nJiyP':function(_0x247a63,_0x31798f){return _0x247a63(_0x31798f);},'qQSLL':function(_0x2f3d2d,_0x19983c,_0x43d972){return _0x2f3d2d(_0x19983c,_0x43d972);},'DtKAE':'I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20image\x20and\x20requirements:','fdmSP':function(_0x349b8d,_0x2dbf00){return _0x349b8d(_0x2dbf00);},'mNqjg':'[Quiz]\x20Failed\x20to\x20parse\x20AI\x20response:','zEtVA':function(_0x33e820,_0x1b2782,_0x2c0b7d){return _0x33e820(_0x1b2782,_0x2c0b7d);},'FoUST':function(_0x1e5b0f,_0x32cab2,_0x3139de){return _0x1e5b0f(_0x32cab2,_0x3139de);},'SiyFX':'Generated\x20a\x20basic\x20quiz\x20without\x20AI\x20assistance:','wWctd':function(_0x5c9826,_0x468c1d){return _0x5c9826(_0x468c1d);},'PMBMG':'[Quiz]\x20Fallback\x20generation\x20also\x20failed:','TYvan':function(_0x9cae1a,_0x517589,_0x10a6e4){return _0x9cae1a(_0x517589,_0x10a6e4);},'mKEyu':_0x5e073e(0x21b)};console['log'](_0x5e073e(0x1da),{'imageContext':_0x4e14c,'userPrompt':_0x44dbf2});try{console[_0x5e073e(0x297)](_0x5e073e(0x2dd),JSON[_0x5e073e(0x221)](_0x4e14c));if(!window['ai'])throw new Error(_0x1666b4[_0x5e073e(0x287)]);const _0x7e0c8e='You\x20are\x20a\x20quiz\x20generator.\x20Create\x20a\x20quiz\x20based\x20on\x20the\x20following\x20image\x20context\x20and\x20user\x20requirements.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Image\x20context:\x20'+JSON[_0x5e073e(0x221)](_0x4e14c)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Format\x20the\x20response\x20as\x20a\x20JSON\x20quiz\x20object\x20with\x20id,\x20grade,\x20subject,\x20title,\x20timeLimit,\x20topic,\x20and\x20questions\x20array.';console[_0x5e073e(0x297)](_0x1666b4['JMNEL'],_0x7e0c8e);const _0x38eb9a=[{'role':_0x1666b4[_0x5e073e(0x2e8)],'content':_0x7e0c8e},{'role':_0x1666b4[_0x5e073e(0x1d8)],'content':_0x44dbf2}],_0x5c7395=document[_0x5e073e(0x262)](_0x1666b4['NinMF']);_0x5c7395[_0x5e073e(0x2e0)]=_0x1666b4[_0x5e073e(0x1ed)],chatMessages[_0x5e073e(0x2df)](_0x5c7395),_0x1666b4['CRLWE'](showTypingIndicator,chatMessages,_0x1666b4[_0x5e073e(0x217)]);if(!aiLanguageSession)await _0x1666b4[_0x5e073e(0x1e7)](initializeLanguageSession);const _0x32df6f=await aiLanguageSession['promptStreaming'](_0x7e0c8e+_0x5e073e(0x1e8)+_0x44dbf2);let _0x4cf60d='';for await(const _0x3c195d of _0x32df6f){_0x4cf60d+=_0x3c195d,_0x5c7395[_0x5e073e(0x295)]=_0x4cf60d,chatMessages[_0x5e073e(0x29a)]=chatMessages['scrollHeight'];}_0x5c7395[_0x5e073e(0x271)]();let _0x3c5ddb;try{_0x3c5ddb=_0x1666b4[_0x5e073e(0x2ac)](safeJSONParse,_0x4cf60d),_0x1666b4[_0x5e073e(0x227)](addMessage,_0x1666b4[_0x5e073e(0x2c8)],![]),_0x1666b4['fdmSP'](addQuiz,_0x3c5ddb);}catch(_0x1a3fe0){console[_0x5e073e(0x2c6)](_0x1666b4[_0x5e073e(0x24e)],_0x1a3fe0),addMessage(_0x4cf60d,![]);throw _0x1a3fe0;}removeTypingIndicator();}catch(_0x2c4b27){console[_0x5e073e(0x2c6)](_0x5e073e(0x226),_0x2c4b27),removeTypingIndicator(),addMessage(_0x5e073e(0x2ec),![]);try{const _0x8d359=await _0x1666b4[_0x5e073e(0x1d5)](generateQuizWithoutAI,_0x4e14c,_0x44dbf2);_0x1666b4['FoUST'](addMessage,_0x1666b4[_0x5e073e(0x23c)],![]),_0x1666b4[_0x5e073e(0x2af)](addQuiz,_0x8d359);}catch(_0x4667de){console[_0x5e073e(0x2c6)](_0x1666b4[_0x5e073e(0x276)],_0x4667de),_0x1666b4[_0x5e073e(0x2db)](addMessage,_0x1666b4[_0x5e073e(0x22a)],![]);}}}function generateOptionsFromText(_0x533e12){const _0x5041fc=_0x3f4597,_0x49eb8a={'loMnt':function(_0x3a2c90,_0x5e4dbd){return _0x3a2c90<_0x5e4dbd;},'lLvhU':function(_0x5e2f03,_0x2e8e9a){return _0x5e2f03+_0x2e8e9a;},'IlaZj':'Additional\x20option\x20'},_0xa20524=_0x533e12[_0x5041fc(0x278)](/[.!?]+/)[_0x5041fc(0x2d8)](_0x46d647=>_0x46d647[_0x5041fc(0x20f)]()[_0x5041fc(0x2cf)]>0x0),_0x353dcf=_0xa20524[_0x5041fc(0x239)](0x0,0x4)[_0x5041fc(0x293)](_0x307caa=>_0x307caa[_0x5041fc(0x20f)]());while(_0x49eb8a['loMnt'](_0x353dcf[_0x5041fc(0x2cf)],0x4)){_0x353dcf['push'](_0x49eb8a['lLvhU'](_0x49eb8a[_0x5041fc(0x28e)],_0x49eb8a[_0x5041fc(0x2bc)](_0x353dcf[_0x5041fc(0x2cf)],0x1)));}return _0x353dcf;}function generateCustomQuestion(_0x365f7c,_0x5f011c){const _0x42b32f=_0x3f4597,_0x5c2c1d={'XwBJl':_0x42b32f(0x294)};return _0x365f7c[_0x42b32f(0x1d6)]()[_0x42b32f(0x250)](_0x5c2c1d['XwBJl'])?_0x365f7c:_0x42b32f(0x28c)+_0x5f011c[_0x42b32f(0x278)]('\x20')[_0x42b32f(0x239)](0x0,0x3)[_0x42b32f(0x232)]('\x20')+_0x42b32f(0x21a);}function addMessage(_0x5e83af,_0x11228b=![]){const _0x2e067c=_0x3f4597,_0x5dc40a={'yrVTV':_0x2e067c(0x1db),'sNoYK':_0x2e067c(0x231),'VRvHz':_0x2e067c(0x1ea)};console['log'](_0x2e067c(0x1e9)+(_0x11228b?_0x2e067c(0x2b2):_0x5dc40a[_0x2e067c(0x284)])+':',_0x5e83af);const _0x2de01f=document['createElement'](_0x5dc40a[_0x2e067c(0x2d4)]);_0x2de01f['className']=_0x2e067c(0x2bf)+(_0x11228b?_0x2e067c(0x1d2):_0x5dc40a[_0x2e067c(0x24c)]),_0x2de01f[_0x2e067c(0x295)]=_0x5e83af,chatMessages[_0x2e067c(0x2df)](_0x2de01f),chatMessages[_0x2e067c(0x29a)]=chatMessages['scrollHeight'];}function addQuiz(_0x29cb6d){const _0x1ca652=_0x3f4597,_0x19ae98={'EcXKL':_0x1ca652(0x2ed),'rqcFV':'div','HPSeB':'quiz-container','hwZAY':'pre','uMbNS':_0x1ca652(0x1d9),'txTTV':_0x1ca652(0x1f1)};console[_0x1ca652(0x297)](_0x19ae98[_0x1ca652(0x2eb)],_0x29cb6d);const _0x6a39dc=document['createElement'](_0x19ae98[_0x1ca652(0x2a6)]);_0x6a39dc['className']=_0x19ae98[_0x1ca652(0x22b)];const _0x5b0c69=_0x1ca652(0x234)+_0x29cb6d[_0x1ca652(0x244)]+_0x1ca652(0x2f0)+_0x29cb6d[_0x1ca652(0x204)]+_0x1ca652(0x292)+_0x29cb6d['subject']+_0x1ca652(0x2d5)+_0x29cb6d[_0x1ca652(0x2e2)]+'\x20minutes\x0a\x20\x20\x20\x20\x20\x20\x20\x20Topics:\x20'+_0x29cb6d['topic']+_0x1ca652(0x273)+_0x29cb6d[_0x1ca652(0x24a)][_0x1ca652(0x293)]((_0x40aa5d,_0x103516)=>_0x1ca652(0x1fd)+(_0x103516+0x1)+'.\x20'+_0x40aa5d[_0x1ca652(0x22d)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x40aa5d[_0x1ca652(0x1f5)]?_0x40aa5d['options']['map']((_0x4bff3f,_0x455dfa)=>'\x20\x20\x20'+String[_0x1ca652(0x1e3)](0x61+_0x455dfa)+')\x20'+_0x4bff3f)[_0x1ca652(0x232)]('\x0a'):'')+_0x1ca652(0x2a0)+_0x40aa5d['type']+_0x1ca652(0x211)+_0x40aa5d['points']+_0x1ca652(0x1fd))[_0x1ca652(0x232)]('\x0a')+_0x1ca652(0x229),_0x39b15e=document[_0x1ca652(0x262)](_0x19ae98['hwZAY']);_0x39b15e[_0x1ca652(0x295)]=_0x5b0c69,_0x6a39dc['appendChild'](_0x39b15e);const _0x48e201=document[_0x1ca652(0x262)](_0x1ca652(0x215));_0x48e201[_0x1ca652(0x2e0)]=_0x19ae98[_0x1ca652(0x2b5)],_0x48e201[_0x1ca652(0x295)]=_0x19ae98[_0x1ca652(0x1dc)],_0x48e201[_0x1ca652(0x25d)]=()=>{const _0x5140e9=_0x1ca652;navigator['clipboard'][_0x5140e9(0x228)](_0x5b0c69)[_0x5140e9(0x2ea)](()=>_0x48e201[_0x5140e9(0x295)]=_0x5140e9(0x282))[_0x5140e9(0x2aa)](_0x1c8cfc=>console['error']('Copy\x20failed:',_0x1c8cfc))['finally'](()=>setTimeout(()=>_0x48e201['textContent']=_0x5140e9(0x1f1),0x7d0));},_0x6a39dc[_0x1ca652(0x2df)](_0x48e201),chatMessages[_0x1ca652(0x2df)](_0x6a39dc),chatMessages['scrollTop']=chatMessages[_0x1ca652(0x1ff)];}async function captureImage(){const _0x4b539d=_0x3f4597,_0xfd1fec={'WcKtC':function(_0x2ef328){return _0x2ef328();},'Arxia':'div','IiWRu':_0x4b539d(0x201),'wtrFe':_0x4b539d(0x29c),'AVzeb':_0x4b539d(0x20b),'HRkBt':_0x4b539d(0x2a4),'etwkF':_0x4b539d(0x279),'xeoex':'message\x20bot-message','NhSdZ':function(_0x4fc8a6,_0x5b324c){return _0x4fc8a6(_0x5b324c);},'EsTXM':_0x4b539d(0x20c),'LcXeE':function(_0x4533a9,_0x3febf1,_0x541d33){return _0x4533a9(_0x3febf1,_0x541d33);},'IbiVG':_0x4b539d(0x20a),'RUmAB':function(_0x3a4da2,_0x77ad22){return _0x3a4da2===_0x77ad22;},'QCGJu':_0x4b539d(0x275),'gAVuC':'Make\x20a\x20quiz\x20suitable\x20for\x20beginners','bnyJx':function(_0x417490,_0x1bcf78,_0x741e3a){return _0x417490(_0x1bcf78,_0x741e3a);},'cMVvM':'Sorry,\x20I\x20couldn\x27t\x20process\x20the\x20image.\x20Please\x20try\x20again.'};console['log'](_0xfd1fec[_0x4b539d(0x2a1)]);try{const _0x467c27=document[_0x4b539d(0x262)](_0xfd1fec[_0x4b539d(0x200)]);_0x467c27[_0x4b539d(0x213)]=cameraPreview[_0x4b539d(0x29b)],_0x467c27[_0x4b539d(0x267)]=cameraPreview[_0x4b539d(0x285)],_0x467c27[_0x4b539d(0x1eb)]('2d')[_0x4b539d(0x1fa)](cameraPreview,0x0,0x0);const _0x59f240=document[_0x4b539d(0x262)](_0xfd1fec[_0x4b539d(0x25c)]);_0x59f240['src']=_0x467c27[_0x4b539d(0x2cb)](_0xfd1fec[_0x4b539d(0x298)]),_0x59f240['className']=_0xfd1fec[_0x4b539d(0x2bb)];const _0x4e7adc=document[_0x4b539d(0x262)](_0xfd1fec[_0x4b539d(0x274)]);_0x4e7adc[_0x4b539d(0x2e0)]=_0xfd1fec['xeoex'],_0x4e7adc[_0x4b539d(0x2df)](_0x59f240),chatMessages[_0x4b539d(0x2df)](_0x4e7adc),stopCamera();const _0x1a6bb1=await _0xfd1fec[_0x4b539d(0x2c5)](processImageUsingTesseract,_0x59f240);imageContext=_0x1a6bb1,console['log'](_0xfd1fec[_0x4b539d(0x240)],JSON[_0x4b539d(0x221)](imageContext,null,0x2)),_0xfd1fec[_0x4b539d(0x2e6)](addMessage,_0xfd1fec[_0x4b539d(0x1fb)],![]);const _0x4544b3=[_0x4b539d(0x264)+imageContext[_0x4b539d(0x2a8)][0x0]+'\x20-\x20'+imageContext['content'],_0xfd1fec[_0x4b539d(0x22e)](imageContext['type'],_0x4b539d(0x1ee))?'Generate\x20questions\x20based\x20on\x20the\x20image\x20related\x20text\x20-\x20'+imageContext['content']:_0xfd1fec['QCGJu'],_0xfd1fec[_0x4b539d(0x249)]];_0x4544b3['forEach'](_0x2d8594=>{const _0x5b0956=_0x4b539d,_0x2903b9=document[_0x5b0956(0x262)](_0xfd1fec[_0x5b0956(0x274)]);_0x2903b9[_0x5b0956(0x2e0)]=_0x5b0956(0x2b0),_0x2903b9[_0x5b0956(0x295)]=_0x2d8594,_0x2903b9[_0x5b0956(0x25d)]=()=>{const _0x43e0d2=_0x5b0956;messageInput[_0x43e0d2(0x214)]=_0x2d8594,_0xfd1fec['WcKtC'](sendMessage);},chatMessages['appendChild'](_0x2903b9);});}catch(_0x297faa){console['error'](_0x4b539d(0x2c0),_0x297faa),_0xfd1fec['bnyJx'](addMessage,_0xfd1fec[_0x4b539d(0x28f)],![]);}}async function sendMessage(){const _0x48af7f=_0x3f4597,_0x277622={'jJXmk':_0x48af7f(0x27d),'oCuXn':function(_0x163822,_0x46adf9,_0x1427c4){return _0x163822(_0x46adf9,_0x1427c4);},'TMfzO':function(_0x5f338c,_0x4bd184){return _0x5f338c(_0x4bd184);},'wCuhp':function(_0x3964aa,_0x2bc06a,_0x1cfa51){return _0x3964aa(_0x2bc06a,_0x1cfa51);},'jSvcZ':_0x48af7f(0x1de),'GlEmd':function(_0xaa3991,_0x469696,_0x94d0c6){return _0xaa3991(_0x469696,_0x94d0c6);}},_0x296970=messageInput['value'][_0x48af7f(0x20f)]();if(!_0x296970)return;console[_0x48af7f(0x297)](_0x277622[_0x48af7f(0x233)],_0x296970),_0x277622[_0x48af7f(0x1d4)](addMessage,_0x296970,!![]),messageInput[_0x48af7f(0x214)]='';if(imageContext)try{const _0x153abc=await _0x277622[_0x48af7f(0x1d4)](generateQuizUsingAI,imageContext,_0x296970);_0x277622[_0x48af7f(0x1d4)](addMessage,_0x48af7f(0x29f),![]),_0x277622[_0x48af7f(0x26a)](addQuiz,_0x153abc);}catch(_0x6fd638){_0x277622['wCuhp'](addMessage,_0x277622['jSvcZ'],![]);}else _0x277622[_0x48af7f(0x1d7)](addMessage,_0x48af7f(0x216),![]);}function toggleTheme(){const _0x1b2244=_0x3f4597,_0x53a0d6={'bVWwy':_0x1b2244(0x21c),'doYZL':function(_0x1fa4ac,_0x472950){return _0x1fa4ac===_0x472950;},'wrvOr':'dark','GcFER':_0x1b2244(0x1fe),'QHFXe':_0x1b2244(0x277)},_0x31bc98=document[_0x1b2244(0x24d)],_0x561b4d=_0x31bc98[_0x1b2244(0x2e9)](_0x53a0d6[_0x1b2244(0x2a9)]),_0x1af832=_0x53a0d6['doYZL'](_0x561b4d,_0x53a0d6[_0x1b2244(0x26f)])?_0x53a0d6[_0x1b2244(0x23a)]:_0x53a0d6[_0x1b2244(0x26f)];_0x31bc98[_0x1b2244(0x2da)](_0x53a0d6[_0x1b2244(0x2a9)],_0x1af832),localStorage['setItem'](_0x53a0d6['QHFXe'],_0x1af832);}themeToggle[_0x3f4597(0x206)](_0x3f4597(0x288),toggleTheme),cameraButton['addEventListener']('click',startCamera),captureButton[_0x3f4597(0x206)](_0x3f4597(0x288),captureImage),cancelButton['addEventListener'](_0x3f4597(0x288),stopCamera),sendButton[_0x3f4597(0x206)](_0x3f4597(0x288),sendMessage),messageInput['addEventListener'](_0x3f4597(0x220),_0xf0a444=>{const _0x40907a=_0x3f4597,_0x8dcaaa={'IsLAv':function(_0x5dc444,_0x5ec329){return _0x5dc444===_0x5ec329;},'qnLHr':'Enter','atcFc':function(_0x422376){return _0x422376();}};if(_0x8dcaaa[_0x40907a(0x2a5)](_0xf0a444[_0x40907a(0x268)],_0x8dcaaa[_0x40907a(0x26c)]))_0x8dcaaa[_0x40907a(0x208)](sendMessage);});async function generateQuizWithoutAI(_0x1ff7c7,_0x1b0bd1){const _0x47a02d=_0x3f4597,_0xaf229d={'QDFDn':_0x47a02d(0x27c),'KCcXS':function(_0x5b7e07,_0x378e39){return _0x5b7e07===_0x378e39;},'bgKkc':_0x47a02d(0x1ee),'bvTBD':_0x47a02d(0x266),'wVsaL':function(_0x3dd182,_0x7a244){return _0x3dd182(_0x7a244);},'BHNFL':_0x47a02d(0x23f),'uxfYm':_0x47a02d(0x2c2),'uKkmb':_0x47a02d(0x2cc),'yStxW':_0x47a02d(0x219),'ToGEX':_0x47a02d(0x248),'OmYvm':_0x47a02d(0x290),'wPBqw':function(_0x243266,_0x3c237d,_0x7676be){return _0x243266(_0x3c237d,_0x7676be);},'TeTPI':_0x47a02d(0x280),'fFfEF':_0x47a02d(0x235),'oDQci':_0x47a02d(0x2b3),'GwOOs':_0x47a02d(0x2a3),'gUQnS':_0x47a02d(0x2e1)};console[_0x47a02d(0x297)](_0xaf229d[_0x47a02d(0x209)],{'imageContext':_0x1ff7c7,'userPrompt':_0x1b0bd1});try{const _0x7004c6=_0xaf229d[_0x47a02d(0x202)](_0x1ff7c7['type'],_0xaf229d[_0x47a02d(0x2c3)]),_0x5f0154=_0x1ff7c7[_0x47a02d(0x26d)],_0x12c094=_0x1ff7c7[_0x47a02d(0x2a8)],_0x44eeee=[];_0x7004c6?(_0x44eeee[_0x47a02d(0x1e0)]({'question':_0xaf229d[_0x47a02d(0x1f8)],'type':_0x47a02d(0x280),'options':_0xaf229d[_0x47a02d(0x247)](generateOptionsFromText,_0x5f0154),'answer':_0xaf229d['BHNFL'],'points':0x2}),_0x44eeee[_0x47a02d(0x1e0)]({'question':_0xaf229d[_0x47a02d(0x260)],'type':_0xaf229d[_0x47a02d(0x255)],'answer':_0xaf229d[_0x47a02d(0x2ab)],'points':0x2})):_0x44eeee['push']({'question':_0xaf229d[_0x47a02d(0x25b)],'type':_0xaf229d[_0x47a02d(0x255)],'answer':_0xaf229d[_0x47a02d(0x2b4)],'points':0x2});_0x44eeee[_0x47a02d(0x1e0)]({'question':_0xaf229d[_0x47a02d(0x2c1)](generateCustomQuestion,_0x1b0bd1,_0x5f0154),'type':_0xaf229d[_0x47a02d(0x224)],'options':[_0xaf229d[_0x47a02d(0x286)],_0xaf229d[_0x47a02d(0x299)],_0x47a02d(0x2ee),_0xaf229d[_0x47a02d(0x26e)]],'answer':_0xaf229d['BHNFL'],'points':0x2});const _0x2b2dd2={'id':Date[_0x47a02d(0x22f)]()[_0x47a02d(0x1e4)](),'title':_0x12c094[0x0]+_0x47a02d(0x24b),'subject':_0x12c094[0x0],'grade':_0xaf229d[_0x47a02d(0x2d7)],'timeLimit':0xf,'topic':_0x12c094[_0x47a02d(0x232)](',\x20'),'questions':_0x44eeee};return _0x2b2dd2;}catch(_0x6fb7bd){console['error'](_0xaf229d[_0x47a02d(0x270)],_0x6fb7bd);throw _0x6fb7bd;}}