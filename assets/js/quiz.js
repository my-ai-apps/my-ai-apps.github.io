
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x27e283=_0x160f;(function(_0x4d55ca,_0x5e8d80){const _0x45822e=_0x160f,_0x2ce4be=_0x4d55ca();while(!![]){try{const _0xe0e39e=parseInt(_0x45822e(0x1db))/0x1*(-parseInt(_0x45822e(0x1ac))/0x2)+parseInt(_0x45822e(0x10e))/0x3+parseInt(_0x45822e(0x117))/0x4+-parseInt(_0x45822e(0x1aa))/0x5*(parseInt(_0x45822e(0x1f3))/0x6)+parseInt(_0x45822e(0x165))/0x7+parseInt(_0x45822e(0x1f7))/0x8*(-parseInt(_0x45822e(0x115))/0x9)+parseInt(_0x45822e(0x146))/0xa;if(_0xe0e39e===_0x5e8d80)break;else _0x2ce4be['push'](_0x2ce4be['shift']());}catch(_0x38dcb3){_0x2ce4be['push'](_0x2ce4be['shift']());}}}(_0x2f74,0xee365));import{Logger}from'./common.js';const chatMessages=document[_0x27e283(0x190)](_0x27e283(0x1ec)),messageInput=document[_0x27e283(0x190)]('messageInput'),sendButton=document[_0x27e283(0x190)](_0x27e283(0x198)),cameraButton=document[_0x27e283(0x190)](_0x27e283(0x1a6)),themeToggle=document[_0x27e283(0x190)](_0x27e283(0x185)),cameraContainer=document['getElementById'](_0x27e283(0x196)),cameraPreview=document[_0x27e283(0x190)](_0x27e283(0x1f6)),captureButton=document[_0x27e283(0x190)](_0x27e283(0x147)),cancelButton=document[_0x27e283(0x190)](_0x27e283(0x105));let stream=null,imageContext=null;async function startCamera(){const _0x1d1115=_0x27e283,_0x964cf5={'khfvd':_0x1d1115(0x1ae),'Xyyqk':_0x1d1115(0x1b5),'ZSvsy':_0x1d1115(0x17a),'DCnsQ':_0x1d1115(0x1cc),'eWtOx':function(_0x3bab9c,_0x1bff22){return _0x3bab9c(_0x1bff22);},'TsWkr':function(_0x552c64,_0x112c05){return _0x552c64+_0x112c05;},'XvReH':_0x1d1115(0x1e6)};console[_0x1d1115(0x176)](_0x964cf5[_0x1d1115(0x158)]);try{stream=await navigator['mediaDevices']['getUserMedia']({'video':{'facingMode':_0x964cf5[_0x1d1115(0x16f)]}}),console['log'](_0x1d1115(0x162),stream),cameraPreview['srcObject']=stream,cameraContainer[_0x1d1115(0x178)][_0x1d1115(0x1ca)]=_0x964cf5[_0x1d1115(0x13e)],console[_0x1d1115(0x176)](_0x1d1115(0x13c));}catch(_0x71d38e){console[_0x1d1115(0x13b)](_0x964cf5['DCnsQ'],_0x71d38e),_0x964cf5[_0x1d1115(0x12a)](addMessage,_0x964cf5[_0x1d1115(0x170)](_0x964cf5[_0x1d1115(0x1f2)],_0x71d38e[_0x1d1115(0x133)]));}}function stopCamera(){const _0x5c287c=_0x27e283,_0x5ebbcb={'kvJaO':'[Camera]\x20Stopping\x20track:','MYGtP':'[Camera]\x20Stopping\x20camera...','uvlSj':_0x5c287c(0x111),'KUtpr':_0x5c287c(0x1fb)};console['log'](_0x5ebbcb['MYGtP']),stream&&(stream['getTracks']()['forEach'](_0x32653f=>{const _0x4f4e2a=_0x5c287c;console[_0x4f4e2a(0x176)](_0x5ebbcb['kvJaO'],_0x32653f[_0x4f4e2a(0x19e)]),_0x32653f['stop']();}),stream=null),cameraContainer['style'][_0x5c287c(0x1ca)]=_0x5ebbcb[_0x5c287c(0x1d5)],console[_0x5c287c(0x176)](_0x5ebbcb['KUtpr']);}async function processImageUsingWindowAI(_0x5a04ff){const _0x319e83=_0x27e283,_0x4bba12={'SQvQu':_0x319e83(0x1c0),'TPPYF':'Windows\x20AI\x20API\x20not\x20available','pVomd':'[AI]\x20Creating\x20image\x20recognition\x20session...','UVMhS':'[AI]\x20Image\x20session\x20created:','HPPjm':'[AI]\x20Performing\x20image\x20recognition...','qFwgY':'[AI]\x20Image\x20recognition\x20completed.\x20Result:'};console[_0x319e83(0x176)]('[AI]\x20Starting\x20image\x20processing...',_0x5a04ff);if(!window['ai']){console[_0x319e83(0x13b)](_0x4bba12[_0x319e83(0x1ee)]);throw new Error(_0x4bba12[_0x319e83(0x1de)]);}try{console[_0x319e83(0x176)](_0x4bba12[_0x319e83(0x157)]);const _0x193100=await window['ai'][_0x319e83(0x10d)]();console[_0x319e83(0x176)](_0x4bba12[_0x319e83(0x19a)],_0x193100),console[_0x319e83(0x176)](_0x4bba12['HPPjm']);const _0x25c6dc=await _0x193100[_0x319e83(0x140)](_0x5a04ff);return console[_0x319e83(0x176)](_0x4bba12[_0x319e83(0xf6)],_0x25c6dc),_0x25c6dc;}catch(_0x44fef1){console[_0x319e83(0x13b)](_0x319e83(0x153),_0x44fef1);throw _0x44fef1;}}async function processImageUsingTesseract(_0x1a49ff){const _0x1d218d=_0x27e283,_0x2b811d={'DebTQ':_0x1d218d(0x150),'HJlWe':function(_0x1b73ce,_0x5e776d,_0x1bf508){return _0x1b73ce(_0x5e776d,_0x1bf508);},'QmgjB':'Processing\x20image...','naPMO':function(_0xb5a94e,_0x43baa2){return _0xb5a94e(_0x43baa2);},'qPtVl':'text','nevxK':_0x1d218d(0x182),'qyufm':function(_0x59744a,_0x212016){return _0x59744a(_0x212016);},'MDuen':_0x1d218d(0xf3),'dSXVe':_0x1d218d(0x1ba),'nceRA':_0x1d218d(0x100),'HkuHW':'General\x20Knowledge','xdpZv':'[Processing]\x20Error\x20during\x20image\x20processing:'};console['log'](_0x2b811d[_0x1d218d(0x1ed)]),_0x2b811d[_0x1d218d(0x121)](addMessage,_0x2b811d['QmgjB'],![]);try{const _0x18310e=await _0x2b811d['naPMO'](extractTextFromImage,_0x1a49ff);return console[_0x1d218d(0x176)]('[OCR]\x20Text\x20extraction\x20result:',_0x18310e),_0x18310e[_0x1d218d(0x106)]&&_0x18310e['text'][_0x1d218d(0x18d)]()[_0x1d218d(0x143)]>0x0?{'type':_0x2b811d[_0x1d218d(0x14b)],'content':_0x2b811d[_0x1d218d(0x160)],'confidence':_0x18310e[_0x1d218d(0x174)],'topics':_0x2b811d[_0x1d218d(0x148)](generateTopics,_0x18310e[_0x1d218d(0x106)])}:(console['log'](_0x2b811d[_0x1d218d(0xfc)]),{'type':_0x2b811d[_0x1d218d(0xfb)],'content':_0x2b811d['nceRA'],'topics':[_0x1d218d(0x112),_0x2b811d['HkuHW']],'features':{'timestamp':new Date()['toISOString'](),'dimensions':{'width':_0x1a49ff[_0x1d218d(0x19d)],'height':_0x1a49ff['height']}}});}catch(_0x297e86){console[_0x1d218d(0x13b)](_0x2b811d[_0x1d218d(0x12e)],_0x297e86);throw _0x297e86;}}async function extractTextFromImage(_0x2e8ff6){const _0x76d6d5=_0x27e283,_0xe67612={'enmcl':'[OCR]\x20Starting\x20text\x20extraction...','ttWdk':_0x76d6d5(0x18e),'cOFRh':'[OCR]\x20Worker\x20initialized','PjKXP':_0x76d6d5(0x14c),'zvwqm':_0x76d6d5(0x134),'dQhIm':function(_0x39c230,_0x5c542e){return _0x39c230(_0x5c542e);},'dSfTK':'Image\x20and\x20text\x20analysis\x20complete','uoIwa':_0x76d6d5(0x10a)};console[_0x76d6d5(0x176)](_0xe67612[_0x76d6d5(0x15c)]);const _0x2a87df=_0xe67612[_0x76d6d5(0x175)];try{const _0x36839b=await Tesseract['createWorker']();await _0x36839b[_0x76d6d5(0x1c7)](),await _0x36839b[_0x76d6d5(0x188)](_0x2a87df),await _0x36839b[_0x76d6d5(0x1ce)](_0x2a87df),console[_0x76d6d5(0x176)](_0xe67612[_0x76d6d5(0x1b2)]);const _0x40e812=await _0x36839b[_0x76d6d5(0x140)](_0x2e8ff6);console[_0x76d6d5(0x176)](_0xe67612[_0x76d6d5(0x1b1)],_0x40e812[_0x76d6d5(0x107)]['text']),await _0x36839b['terminate'](),console['log'](_0xe67612[_0x76d6d5(0x151)]);const _0x2b9344={'timestamp':new Date()[_0x76d6d5(0x184)](),'imageSize':{'width':_0x2e8ff6[_0x76d6d5(0x19d)],'height':_0x2e8ff6['height']},'extractedText':_0x40e812['data']['text'],'confidenceScore':_0x40e812[_0x76d6d5(0x107)][_0x76d6d5(0x174)],'suggestedTopics':_0xe67612['dQhIm'](generateTopics,_0x40e812[_0x76d6d5(0x107)]['text'])};return{'description':_0xe67612[_0x76d6d5(0x18f)],'metadata':_0x2b9344,'text':_0x40e812[_0x76d6d5(0x107)]['text'],'confidence':_0x40e812[_0x76d6d5(0x107)][_0x76d6d5(0x174)]};}catch(_0x1791e4){return console[_0x76d6d5(0x13b)](_0xe67612['uoIwa'],_0x1791e4),{'text':'','confidence':0x0};}}function _0x160f(_0x5990cc,_0x50d0f4){const _0x2f74e2=_0x2f74();return _0x160f=function(_0x160f70,_0x57ce12){_0x160f70=_0x160f70-0xf3;let _0x4193b2=_0x2f74e2[_0x160f70];return _0x4193b2;},_0x160f(_0x5990cc,_0x50d0f4);}function generateTopics(_0x138ccc){const _0x209faf=_0x27e283,_0x30357f={'TnEeo':_0x209faf(0x114),'zHYDp':_0x209faf(0x1e1),'ioppJ':_0x209faf(0x13d),'pbRMQ':'Language\x20Arts','VlaLk':'Art','SjwHG':function(_0x2c04b7,_0x22240b){return _0x2c04b7===_0x22240b;},'IUtJU':'General\x20Knowledge'},_0xed45f7=new Set(),_0x43fcd8=_0x138ccc[_0x209faf(0x11d)](),_0x23ae06=[{'pattern':/\b(math|equation|calculate|formula|number)\b/,'topic':_0x30357f['TnEeo']},{'pattern':/\b(science|experiment|chemical|biology|physics)\b/,'topic':_0x30357f[_0x209faf(0x14f)]},{'pattern':/\b(history|century|ancient|war|empire|civilization)\b/,'topic':_0x209faf(0x1a4)},{'pattern':/\b(geography|country|capital|mountain|river|climate)\b/,'topic':_0x30357f['ioppJ']},{'pattern':/\b(grammar|sentence|paragraph|essay|writing)\b/,'topic':_0x30357f[_0x209faf(0x1c9)]},{'pattern':/\b(art|color|design|paint|draw)\b/,'topic':_0x30357f[_0x209faf(0x10f)]}];return _0x23ae06['forEach'](_0x1346d4=>{const _0x2962ae=_0x209faf;_0x1346d4[_0x2962ae(0x1cd)][_0x2962ae(0x135)](_0x43fcd8)&&_0xed45f7[_0x2962ae(0x130)](_0x1346d4[_0x2962ae(0xfe)]);}),_0x30357f[_0x209faf(0x1ea)](_0xed45f7[_0x209faf(0x181)],0x0)&&_0xed45f7[_0x209faf(0x130)](_0x30357f[_0x209faf(0x18a)]),Array[_0x209faf(0x17b)](_0xed45f7);}function _0x2f74(){const _0x153dd5=['theme','pVomd','khfvd','\x0a\x20\x20\x20\x20','data-theme','rckdw','enmcl','[Quiz]\x20Generating\x20quiz...','JBzhR','bot-message','nevxK','...?','[Camera]\x20Successfully\x20got\x20media\x20stream:','vOarR','[Camera]\x20Capturing\x20image...','2759316ZdDlZq','What\x20can\x20you\x20observe\x20in\x20this\x20image?','light','grade','Please\x20capture\x20an\x20image\x20first\x20before\x20providing\x20quiz\x20requirements.','gOzcw','[Quiz]\x20Error\x20generating\x20quiz:','You\x20are\x20a\x20quiz\x20generator.\x20Create\x20a\x20quiz\x20based\x20on\x20the\x20following\x20image\x20context\x20and\x20user\x20requirements.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Image\x20context:\x20','zRLuN','[Quiz]\x20Failed\x20to\x20parse\x20AI\x20response:','Xyyqk','TsWkr','content','pre','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Time\x20Limit:\x20','confidence','ttWdk','log','Generating\x20quiz...','style','imageContext:','flex','from','[Quiz]\x20Fallback\x20generation\x20also\x20failed:','Quiz\x20generation\x20failed\x20completely.\x20Please\x20try\x20again\x20later.','createElement','ilUZD','type','size','Washington\x20Drivers\x20License\x20Test','vmAqM','toISOString','themeToggle','className','toString','loadLanguage','Based\x20on\x20the\x20text,\x20what\x20is\x20the\x20main\x20topic\x20being\x20discussed?','IUtJU','questions','[Chat]\x20Sending\x20message:','trim','eng','dSfTK','getElementById','pwEAA','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Title:\x20','Copy\x20failed:','message\x20','\x20-\x20','cameraContainer','[Quiz]\x20Constructed\x20system\x20prompt:','sendButton','HVaZp','UVMhS','Enter','push','width','label','xcOmm','Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz.\x20Please\x20try\x20again.','setItem','Bot','TnCop','History','Description\x20of\x20visual\x20elements','cameraButton','yZYUx','rLwUg','setAttribute','30MLyYKx','aOOJv','8wuQIHF','kOPPx','[Camera]\x20Starting\x20camera\x20initialization...','dark','click','PjKXP','cOFRh','Xxpsv','question','environment','canvas','map','What\x20is\x20the\x20significance\x20of\x20','nlNMM','image','User','join','toDataURL','title','fromCharCode','[AI]\x20Windows\x20AI\x20API\x20not\x20found\x20in\x20window\x20object','appendChild','I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20image\x20and\x20requirements:','Make\x20a\x20quiz\x20suitable\x20for\x20beginners','message\x20bot-message','Generated\x20a\x20basic\x20quiz\x20without\x20AI\x20assistance:','Copied!','load','drawImage','pbRMQ','display','gyTab','[Camera]\x20Error\x20accessing\x20camera:','pattern','initialize','includes','slice','UEzka','what','split','Option\x20B','uvlSj','qSqFY','sTbbO','image/jpeg','VnjFu','Option\x20D','117803IaMKoj','getContext','rdtJI','TPPYF','then','I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20requirements:','Science','Image\x20captured!\x20Please\x20provide\x20your\x20requirements\x20for\x20the\x20quiz.','quiz-container','\x20\x20\x20','textContent','Error\x20accessing\x20camera:\x20','user','RcrMy','[Quiz]\x20Error\x20in\x20quiz\x20generation\x20using\x20Gemini\x20Nano\x20AI:','SjwHG','\x20Quiz','chatMessages','DebTQ','SQvQu','[Camera]\x20Error\x20processing\x20captured\x20image:','finally','prompt-suggestion','XvReH','983850kLGQOf','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Grade:\x20','keypress','cameraPreview','118840ZrskhA','now','scrollHeight','addEventListener','[Camera]\x20Camera\x20stopped\x20and\x20container\x20hidden','JDZnu','[Processing]\x20No\x20OCR\x20text\x20found,\x20falling\x20back\x20to\x20image\x20analysis','documentElement','sKOLa','qFwgY','qhwTT','tLgZc','promptStreaming','points','dSXVe','MDuen','scrollTop','topic','stringify','Visual\x20content\x20detected','aIYhw','value','Xehrm','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Format\x20the\x20response\x20as\x20a\x20JSON\x20quiz\x20object\x20with\x20id,\x20grade,\x20subject,\x20title,\x20timeLimit,\x20topic,\x20and\x20questions\x20array.','cancelButton','text','data','wimgY','timeLimit','[OCR]\x20Error\x20in\x20text\x20extraction:','[UI]\x20Adding\x20message:\x20','TcgWY','createImageSession','3097653oQpwft','VlaLk','irtxz','none','Visual\x20Analysis','UHdDe','Mathematics','972gwdQpJ','YzpAQ','2249256MUVkIG','hsXCB','ERiBG','topics','GrcWV','options','toLowerCase','window.ai\x20API\x20not\x20available','NLHdX','\x20minutes\x0a\x20\x20\x20\x20\x20\x20\x20\x20Topics:\x20','HJlWe','General','SsAVd','dXkoD','mjbKH','yYHxn','UGueS','[Quiz]\x20Starting\x20quiz\x20generation\x20with\x20Gemini\x20Nano...','IjARH','eWtOx','\x0a\x0aUser\x20request:\x20','onclick','YbNnB','xdpZv','videoWidth','add','Option\x20A','open_ended','message','[OCR]\x20Worker\x20terminated','test','getAttribute','div','jYUln','KCgXB','Copy\x20Quiz','error','[Camera]\x20Camera\x20preview\x20started\x20and\x20container\x20displayed','Geography','ZSvsy','Student\x20should\x20identify\x20main\x20points\x20from\x20the\x20text','recognize','ViPEZ','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','length','Option\x20C','height','20460660fPBiwi','captureButton','qyufm','vOPRC','ueObo','qPtVl','[OCR]\x20Text\x20extracted:','Generate\x20questions\x20based\x20on\x20the\x20image\x20related\x20text\x20-\x20','Generate\x20multiple\x20choice\x20questions\x20about\x20this\x20picture','zHYDp','[Processing]\x20Starting\x20image\x20OCR\x20analysis...','zvwqm','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Points:\x20','[AI]\x20Error\x20during\x20image\x20processing:','filter','lucCq'];_0x2f74=function(){return _0x153dd5;};return _0x2f74();}async function generateQuizUsingAI(_0x3e95d8,_0xda2ff2){const _0x714870=_0x27e283,_0x3b66a0={'JDZnu':_0x714870(0x128),'KCgXB':_0x714870(0x179),'VnjFu':_0x714870(0x11e),'HVaZp':_0x714870(0x197),'tLgZc':'system','wBKrP':_0x714870(0x137),'kOPPx':'message\x20bot-message\x20streaming','sTbbO':function(_0x12aa7b,_0x550d2d,_0x1fe6ea){return _0x12aa7b(_0x550d2d,_0x1fe6ea);},'ViPEZ':_0x714870(0x177),'dXkoD':function(_0x4a9e1a,_0x4f9b26){return _0x4a9e1a(_0x4f9b26);},'CQUeW':_0x714870(0x1c2),'RfqqJ':function(_0xa2f330,_0x154141){return _0xa2f330(_0x154141);},'qhwTT':_0x714870(0x16e),'YbNnB':function(_0x235fb9){return _0x235fb9();},'KQaka':_0x714870(0x1c5),'rLwUg':function(_0x2deda9,_0x3b4859){return _0x2deda9(_0x3b4859);},'ilUZD':_0x714870(0x17c),'UGueS':_0x714870(0x17d)};console[_0x714870(0x176)](_0x3b66a0[_0x714870(0x1fc)],{'imageContext':_0x3e95d8,'userPrompt':_0xda2ff2});try{console['log'](_0x3b66a0[_0x714870(0x139)],JSON[_0x714870(0xff)](_0x3e95d8));if(!window['ai'])throw new Error(_0x3b66a0[_0x714870(0x1d9)]);const _0x1cf8ef=_0x714870(0x16c)+JSON[_0x714870(0xff)](_0x3e95d8)+_0x714870(0x104);console[_0x714870(0x176)](_0x3b66a0[_0x714870(0x199)],_0x1cf8ef);const _0x28f2a0=[{'role':_0x3b66a0[_0x714870(0xf8)],'content':_0x1cf8ef},{'role':_0x714870(0x1e7),'content':_0xda2ff2}],_0x59419c=document[_0x714870(0x17e)](_0x3b66a0['wBKrP']);_0x59419c['className']=_0x3b66a0[_0x714870(0x1ad)],chatMessages[_0x714870(0x1c1)](_0x59419c),_0x3b66a0[_0x714870(0x1d7)](showTypingIndicator,chatMessages,_0x3b66a0[_0x714870(0x141)]);if(!aiLanguageSession)await initializeLanguageSession();const _0x5838c7=await aiLanguageSession[_0x714870(0xf9)](_0x1cf8ef+_0x714870(0x12b)+_0xda2ff2);let _0x4c631c='';for await(const _0x33c078 of _0x5838c7){_0x4c631c+=_0x33c078,_0x59419c[_0x714870(0x1e5)]=_0x4c631c,chatMessages[_0x714870(0xfd)]=chatMessages[_0x714870(0x1f9)];}_0x59419c['remove']();let _0x37c892;try{_0x37c892=_0x3b66a0[_0x714870(0x124)](safeJSONParse,_0x4c631c),addMessage(_0x3b66a0['CQUeW'],![]),_0x3b66a0['RfqqJ'](addQuiz,_0x37c892);}catch(_0x3d112f){console[_0x714870(0x13b)](_0x3b66a0[_0x714870(0xf7)],_0x3d112f),addMessage(_0x4c631c,![]);throw _0x3d112f;}removeTypingIndicator();}catch(_0x5666cd){console[_0x714870(0x13b)](_0x714870(0x1e9),_0x5666cd),_0x3b66a0[_0x714870(0x12d)](removeTypingIndicator),addMessage('Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz\x20using\x20Gemini\x20Nano\x20AI.\x20Please\x20try\x20again.',![]);try{const _0x5f5296=await generateQuizWithoutAI(_0x3e95d8,_0xda2ff2);addMessage(_0x3b66a0['KQaka'],![]),_0x3b66a0[_0x714870(0x1a8)](addQuiz,_0x5f5296);}catch(_0x492f8f){console[_0x714870(0x13b)](_0x3b66a0[_0x714870(0x17f)],_0x492f8f),addMessage(_0x3b66a0[_0x714870(0x127)],![]);}}}function generateOptionsFromText(_0x19dbbf){const _0x365211=_0x27e283,_0x4e3454={'lucCq':function(_0x45073f,_0x23ec19){return _0x45073f+_0x23ec19;},'bRbaG':'Additional\x20option\x20'},_0x20b1c0=_0x19dbbf[_0x365211(0x1d3)](/[.!?]+/)[_0x365211(0x154)](_0x4c25ea=>_0x4c25ea[_0x365211(0x18d)]()[_0x365211(0x143)]>0x0),_0x179998=_0x20b1c0[_0x365211(0x1d0)](0x0,0x4)[_0x365211(0x1b7)](_0x1dc59e=>_0x1dc59e[_0x365211(0x18d)]());while(_0x179998[_0x365211(0x143)]<0x4){_0x179998[_0x365211(0x19c)](_0x4e3454[_0x365211(0x155)](_0x4e3454['bRbaG'],_0x4e3454['lucCq'](_0x179998[_0x365211(0x143)],0x1)));}return _0x179998;}function generateCustomQuestion(_0x45b70e,_0x31d8ef){const _0xf9c282=_0x27e283,_0xa6959e={'hsXCB':_0xf9c282(0x1d2)};return _0x45b70e['toLowerCase']()[_0xf9c282(0x1cf)](_0xa6959e[_0xf9c282(0x118)])?_0x45b70e:_0xf9c282(0x1b8)+_0x31d8ef['split']('\x20')[_0xf9c282(0x1d0)](0x0,0x3)['join']('\x20')+_0xf9c282(0x161);}function addMessage(_0x280378,_0x4365db=![]){const _0x2625be=_0x27e283,_0x24f19d={'LIFoH':_0x2625be(0x1bb),'nlNMM':_0x2625be(0x1a2),'gOzcw':_0x2625be(0x137),'zRLuN':'user-message','NLHdX':_0x2625be(0x15f)};console['log'](_0x2625be(0x10b)+(_0x4365db?_0x24f19d['LIFoH']:_0x24f19d[_0x2625be(0x1b9)])+':',_0x280378);const _0x8cde7e=document[_0x2625be(0x17e)](_0x24f19d[_0x2625be(0x16a)]);_0x8cde7e[_0x2625be(0x186)]=_0x2625be(0x194)+(_0x4365db?_0x24f19d[_0x2625be(0x16d)]:_0x24f19d[_0x2625be(0x11f)]),_0x8cde7e[_0x2625be(0x1e5)]=_0x280378,chatMessages['appendChild'](_0x8cde7e),chatMessages[_0x2625be(0xfd)]=chatMessages[_0x2625be(0x1f9)];}function addQuiz(_0x3a0b72){const _0x5112a0=_0x27e283,_0x2a579b={'hqlBx':'[UI]\x20Adding\x20quiz\x20to\x20chat:','YfCRk':'div','vmAqM':_0x5112a0(0x1e3),'qSqFY':_0x5112a0(0x172),'vOarR':_0x5112a0(0x13a)};console[_0x5112a0(0x176)](_0x2a579b['hqlBx'],_0x3a0b72);const _0x4aadb6=document[_0x5112a0(0x17e)](_0x2a579b['YfCRk']);_0x4aadb6[_0x5112a0(0x186)]=_0x2a579b[_0x5112a0(0x183)];const _0x1fc999=_0x5112a0(0x192)+_0x3a0b72[_0x5112a0(0x1be)]+_0x5112a0(0x1f4)+_0x3a0b72[_0x5112a0(0x168)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20Subject:\x20'+_0x3a0b72['subject']+_0x5112a0(0x173)+_0x3a0b72[_0x5112a0(0x109)]+_0x5112a0(0x120)+_0x3a0b72[_0x5112a0(0xfe)]+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20Questions:\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3a0b72[_0x5112a0(0x18b)]['map']((_0x53577e,_0x2dbba8)=>_0x5112a0(0x142)+(_0x2dbba8+0x1)+'.\x20'+_0x53577e[_0x5112a0(0x1b4)]+_0x5112a0(0x142)+(_0x53577e[_0x5112a0(0x11c)]?_0x53577e['options'][_0x5112a0(0x1b7)]((_0x5ee250,_0x4a4356)=>_0x5112a0(0x1e4)+String[_0x5112a0(0x1bf)](0x61+_0x4a4356)+')\x20'+_0x5ee250)[_0x5112a0(0x1bc)]('\x0a'):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20Type:\x20'+_0x53577e[_0x5112a0(0x180)]+_0x5112a0(0x152)+_0x53577e[_0x5112a0(0xfa)]+_0x5112a0(0x142))[_0x5112a0(0x1bc)]('\x0a')+_0x5112a0(0x159),_0x10ccda=document[_0x5112a0(0x17e)](_0x2a579b[_0x5112a0(0x1d6)]);_0x10ccda[_0x5112a0(0x1e5)]=_0x1fc999,_0x4aadb6[_0x5112a0(0x1c1)](_0x10ccda);const _0x17b8e5=document[_0x5112a0(0x17e)]('button');_0x17b8e5[_0x5112a0(0x186)]='copy-button',_0x17b8e5[_0x5112a0(0x1e5)]=_0x2a579b[_0x5112a0(0x163)],_0x17b8e5['onclick']=()=>{const _0x5e776b=_0x5112a0;navigator['clipboard']['writeText'](_0x1fc999)[_0x5e776b(0x1df)](()=>_0x17b8e5[_0x5e776b(0x1e5)]=_0x5e776b(0x1c6))['catch'](_0x58f3d3=>console['error'](_0x5e776b(0x193),_0x58f3d3))[_0x5e776b(0x1f0)](()=>setTimeout(()=>_0x17b8e5[_0x5e776b(0x1e5)]=_0x5e776b(0x13a),0x7d0));},_0x4aadb6['appendChild'](_0x17b8e5),chatMessages['appendChild'](_0x4aadb6),chatMessages['scrollTop']=chatMessages[_0x5112a0(0x1f9)];}async function captureImage(){const _0xef4787=_0x27e283,_0x23aad6={'RcrMy':_0xef4787(0x137),'Xxpsv':_0xef4787(0x1f1),'TnCop':_0xef4787(0x164),'rckdw':_0xef4787(0x1b6),'JLyZv':'img','BsLJu':_0xef4787(0x1c4),'mjbKH':function(_0x1d0128){return _0x1d0128();},'UEzka':function(_0x1b420e,_0x5b82d1){return _0x1b420e(_0x5b82d1);},'PKgwc':'[Processing]\x20Image\x20processing\x20completed:','gyTab':_0xef4787(0x1e2),'UHdDe':function(_0x3bf72a,_0x4461a4){return _0x3bf72a===_0x4461a4;},'GrcWV':_0xef4787(0x106),'aOOJv':_0xef4787(0x14e),'jrYJw':_0xef4787(0x1c3),'IjARH':_0xef4787(0x1ef),'yYHxn':'Sorry,\x20I\x20couldn\x27t\x20process\x20the\x20image.\x20Please\x20try\x20again.'};console[_0xef4787(0x176)](_0x23aad6[_0xef4787(0x1a3)]);try{const _0x411ad2=document[_0xef4787(0x17e)](_0x23aad6[_0xef4787(0x15b)]);_0x411ad2[_0xef4787(0x19d)]=cameraPreview[_0xef4787(0x12f)],_0x411ad2[_0xef4787(0x145)]=cameraPreview['videoHeight'],_0x411ad2[_0xef4787(0x1dc)]('2d')[_0xef4787(0x1c8)](cameraPreview,0x0,0x0);const _0x20d722=document[_0xef4787(0x17e)](_0x23aad6['JLyZv']);_0x20d722['src']=_0x411ad2[_0xef4787(0x1bd)](_0xef4787(0x1d8)),_0x20d722[_0xef4787(0x186)]='captured-image';const _0x3211db=document[_0xef4787(0x17e)](_0x23aad6[_0xef4787(0x1e8)]);_0x3211db[_0xef4787(0x186)]=_0x23aad6['BsLJu'],_0x3211db[_0xef4787(0x1c1)](_0x20d722),chatMessages[_0xef4787(0x1c1)](_0x3211db),_0x23aad6[_0xef4787(0x125)](stopCamera);const _0x4c03a5=await _0x23aad6[_0xef4787(0x1d1)](processImageUsingTesseract,_0x20d722);imageContext=_0x4c03a5,console[_0xef4787(0x176)](_0x23aad6['PKgwc'],JSON[_0xef4787(0xff)](imageContext,null,0x2)),addMessage(_0x23aad6[_0xef4787(0x1cb)],![]);const _0x5f053c=['Create\x20a\x20quiz\x20about\x20'+imageContext['topics'][0x0]+_0xef4787(0x195)+imageContext['content'],_0x23aad6[_0xef4787(0x113)](imageContext[_0xef4787(0x180)],_0x23aad6[_0xef4787(0x11b)])?_0xef4787(0x14d)+imageContext[_0xef4787(0x171)]:_0x23aad6[_0xef4787(0x1ab)],_0x23aad6['jrYJw']];_0x5f053c['forEach'](_0x5d6c8d=>{const _0x545ed7=_0xef4787,_0x271c88=document[_0x545ed7(0x17e)](_0x23aad6[_0x545ed7(0x1e8)]);_0x271c88[_0x545ed7(0x186)]=_0x23aad6[_0x545ed7(0x1b3)],_0x271c88[_0x545ed7(0x1e5)]=_0x5d6c8d,_0x271c88[_0x545ed7(0x12c)]=()=>{const _0x2bf0d8=_0x545ed7;messageInput[_0x2bf0d8(0x102)]=_0x5d6c8d,sendMessage();},chatMessages[_0x545ed7(0x1c1)](_0x271c88);});}catch(_0x1a43b0){console[_0xef4787(0x13b)](_0x23aad6[_0xef4787(0x129)],_0x1a43b0),addMessage(_0x23aad6[_0xef4787(0x126)],![]);}}async function sendMessage(){const _0x307967=_0x27e283,_0x2e23e2={'SsAVd':function(_0x1ec0d1,_0x219bda,_0x237f3e){return _0x1ec0d1(_0x219bda,_0x237f3e);},'vOPRC':_0x307967(0x1e0),'pwEAA':function(_0x5b6801,_0x389f8b,_0x3f5270){return _0x5b6801(_0x389f8b,_0x3f5270);},'wimgY':_0x307967(0x1a0)},_0x345d8b=messageInput[_0x307967(0x102)][_0x307967(0x18d)]();if(!_0x345d8b)return;console[_0x307967(0x176)](_0x307967(0x18c),_0x345d8b),_0x2e23e2[_0x307967(0x123)](addMessage,_0x345d8b,!![]),messageInput[_0x307967(0x102)]='';if(imageContext)try{const _0x3b268e=await generateQuizUsingAI(imageContext,_0x345d8b);_0x2e23e2['SsAVd'](addMessage,_0x2e23e2[_0x307967(0x149)],![]),addQuiz(_0x3b268e);}catch(_0x19f710){_0x2e23e2[_0x307967(0x191)](addMessage,_0x2e23e2[_0x307967(0x108)],![]);}else _0x2e23e2[_0x307967(0x123)](addMessage,_0x307967(0x169),![]);}function toggleTheme(){const _0x30b1d6=_0x27e283,_0x2e1ae8={'xOTDk':_0x30b1d6(0x167),'jYUln':'dark','yZYUx':_0x30b1d6(0x15a)},_0x3da645=document[_0x30b1d6(0xf4)],_0x5932cd=_0x3da645[_0x30b1d6(0x136)](_0x30b1d6(0x15a)),_0x3ce471=_0x5932cd===_0x30b1d6(0x1af)?_0x2e1ae8['xOTDk']:_0x2e1ae8[_0x30b1d6(0x138)];_0x3da645[_0x30b1d6(0x1a9)](_0x2e1ae8[_0x30b1d6(0x1a7)],_0x3ce471),localStorage[_0x30b1d6(0x1a1)](_0x30b1d6(0x156),_0x3ce471);}themeToggle[_0x27e283(0x1fa)]('click',toggleTheme),cameraButton[_0x27e283(0x1fa)](_0x27e283(0x1b0),startCamera),captureButton['addEventListener'](_0x27e283(0x1b0),captureImage),cancelButton[_0x27e283(0x1fa)](_0x27e283(0x1b0),stopCamera),sendButton[_0x27e283(0x1fa)](_0x27e283(0x1b0),sendMessage),messageInput[_0x27e283(0x1fa)](_0x27e283(0x1f5),_0x335d99=>{const _0x42948f=_0x27e283,_0x22898e={'YzpAQ':function(_0x2de4fa,_0x255836){return _0x2de4fa===_0x255836;},'JBzhR':_0x42948f(0x19b),'Dpehb':function(_0xbae0e1){return _0xbae0e1();}};if(_0x22898e[_0x42948f(0x116)](_0x335d99['key'],_0x22898e[_0x42948f(0x15e)]))_0x22898e['Dpehb'](sendMessage);});async function generateQuizWithoutAI(_0x5972dd,_0x5c486a){const _0x31ba10=_0x27e283,_0x500619={'ueObo':_0x31ba10(0x15d),'sKOLa':_0x31ba10(0x106),'xcOmm':_0x31ba10(0x189),'MixCQ':function(_0x737e24,_0x22c2a0){return _0x737e24(_0x22c2a0);},'TcgWY':_0x31ba10(0x131),'ApbJV':'What\x20are\x20the\x20key\x20points\x20mentioned\x20in\x20the\x20text?','ZfdAH':_0x31ba10(0x132),'cEKjB':_0x31ba10(0x166),'Xehrm':_0x31ba10(0x1a5),'gOYjr':function(_0x2b0d12,_0x1cf2a3,_0x140d60){return _0x2b0d12(_0x1cf2a3,_0x140d60);},'irtxz':'multiple_choice','zkTnW':_0x31ba10(0x1d4),'ERiBG':_0x31ba10(0x144),'aIYhw':_0x31ba10(0x1da),'rdtJI':_0x31ba10(0x122),'aSQsA':_0x31ba10(0x16b)};console[_0x31ba10(0x176)](_0x500619[_0x31ba10(0x14a)],{'imageContext':_0x5972dd,'userPrompt':_0x5c486a});try{const _0x11b0db=_0x5972dd['type']===_0x500619[_0x31ba10(0xf5)],_0x2cb49c=_0x5972dd[_0x31ba10(0x171)],_0x22ea3e=_0x5972dd[_0x31ba10(0x11a)],_0x2915d6=[];_0x11b0db?(_0x2915d6['push']({'question':_0x500619[_0x31ba10(0x19f)],'type':'multiple_choice','options':_0x500619['MixCQ'](generateOptionsFromText,_0x2cb49c),'answer':_0x500619[_0x31ba10(0x10c)],'points':0x2}),_0x2915d6[_0x31ba10(0x19c)]({'question':_0x500619['ApbJV'],'type':_0x500619['ZfdAH'],'answer':_0x31ba10(0x13f),'points':0x2})):_0x2915d6[_0x31ba10(0x19c)]({'question':_0x500619['cEKjB'],'type':_0x500619['ZfdAH'],'answer':_0x500619[_0x31ba10(0x103)],'points':0x2});_0x2915d6[_0x31ba10(0x19c)]({'question':_0x500619['gOYjr'](generateCustomQuestion,_0x5c486a,_0x2cb49c),'type':_0x500619[_0x31ba10(0x110)],'options':[_0x500619['TcgWY'],_0x500619['zkTnW'],_0x500619[_0x31ba10(0x119)],_0x500619[_0x31ba10(0x101)]],'answer':_0x500619[_0x31ba10(0x10c)],'points':0x2});const _0x109c93={'id':Date[_0x31ba10(0x1f8)]()[_0x31ba10(0x187)](),'title':_0x22ea3e[0x0]+_0x31ba10(0x1eb),'subject':_0x22ea3e[0x0],'grade':_0x500619[_0x31ba10(0x1dd)],'timeLimit':0xf,'topic':_0x22ea3e[_0x31ba10(0x1bc)](',\x20'),'questions':_0x2915d6};return _0x109c93;}catch(_0x24f9eb){console[_0x31ba10(0x13b)](_0x500619['aSQsA'],_0x24f9eb);throw _0x24f9eb;}}