
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x1821b4=_0x5b37;(function(_0x44e429,_0x21f9fd){const _0x2e7958=_0x5b37,_0x5ca69a=_0x44e429();while(!![]){try{const _0x4b916a=parseInt(_0x2e7958(0x2d4))/0x1*(-parseInt(_0x2e7958(0x1f8))/0x2)+parseInt(_0x2e7958(0x2bc))/0x3*(parseInt(_0x2e7958(0x2b5))/0x4)+-parseInt(_0x2e7958(0x28c))/0x5+parseInt(_0x2e7958(0x2f2))/0x6*(-parseInt(_0x2e7958(0x240))/0x7)+-parseInt(_0x2e7958(0x225))/0x8*(parseInt(_0x2e7958(0x223))/0x9)+-parseInt(_0x2e7958(0x275))/0xa*(-parseInt(_0x2e7958(0x2a5))/0xb)+-parseInt(_0x2e7958(0x28d))/0xc*(parseInt(_0x2e7958(0x281))/0xd);if(_0x4b916a===_0x21f9fd)break;else _0x5ca69a['push'](_0x5ca69a['shift']());}catch(_0x37aad1){_0x5ca69a['push'](_0x5ca69a['shift']());}}}(_0x2b10,0xf1354));import{Logger}from'./common.js';const chatMessages=document[_0x1821b4(0x2aa)]('chatMessages'),messageInput=document[_0x1821b4(0x2aa)]('messageInput'),sendButton=document[_0x1821b4(0x2aa)](_0x1821b4(0x2c3)),cameraButton=document[_0x1821b4(0x2aa)]('cameraButton'),themeToggle=document[_0x1821b4(0x2aa)](_0x1821b4(0x253)),cameraContainer=document[_0x1821b4(0x2aa)](_0x1821b4(0x2a3)),cameraPreview=document[_0x1821b4(0x2aa)](_0x1821b4(0x2cf)),captureButton=document[_0x1821b4(0x2aa)](_0x1821b4(0x2ab)),cancelButton=document[_0x1821b4(0x2aa)](_0x1821b4(0x2cd));let stream=null,imageContext=null;async function startCamera(){const _0xd4e96f=_0x1821b4,_0x50aa37={'RWhxz':_0xd4e96f(0x2e4),'BFdww':'3|4|1|0|2','MNvkJ':_0xd4e96f(0x227),'NDQZJ':'environment','ZNfHJ':_0xd4e96f(0x219),'YssCS':'[Camera]\x20Error\x20accessing\x20camera:','ouVBL':_0xd4e96f(0x29c)};console['log'](_0x50aa37['RWhxz']);try{const _0x1d42bb=_0x50aa37[_0xd4e96f(0x2b7)][_0xd4e96f(0x2a2)]('|');let _0x1d7d54=0x0;while(!![]){switch(_0x1d42bb[_0x1d7d54++]){case'0':cameraContainer[_0xd4e96f(0x2ed)][_0xd4e96f(0x26e)]=_0x50aa37[_0xd4e96f(0x2dc)];continue;case'1':cameraPreview['srcObject']=stream;continue;case'2':console['log'](_0xd4e96f(0x270));continue;case'3':stream=await navigator[_0xd4e96f(0x2e0)][_0xd4e96f(0x2fc)]({'video':{'facingMode':_0x50aa37[_0xd4e96f(0x21d)]}});continue;case'4':console['log'](_0x50aa37[_0xd4e96f(0x248)],stream);continue;}break;}}catch(_0x10f554){console[_0xd4e96f(0x211)](_0x50aa37[_0xd4e96f(0x1fc)],_0x10f554),addMessage(_0x50aa37[_0xd4e96f(0x2b4)]+_0x10f554[_0xd4e96f(0x20b)]);}}function stopCamera(){const _0x3a686a=_0x1821b4,_0x2186c7={'DQCyO':'none','cflGF':_0x3a686a(0x2f7)};console[_0x3a686a(0x26c)](_0x3a686a(0x247)),stream&&(stream['getTracks']()[_0x3a686a(0x2cc)](_0x49cec3=>{const _0x582b7c=_0x3a686a;console['log']('[Camera]\x20Stopping\x20track:',_0x49cec3[_0x582b7c(0x238)]),_0x49cec3[_0x582b7c(0x205)]();}),stream=null),cameraContainer[_0x3a686a(0x2ed)][_0x3a686a(0x26e)]=_0x2186c7[_0x3a686a(0x284)],console[_0x3a686a(0x26c)](_0x2186c7[_0x3a686a(0x29f)]);}async function processImageUsingWindowAI(_0x76c82a){const _0xc69df0=_0x1821b4,_0x416c32={'IPipc':_0xc69df0(0x2f8),'nhJHs':_0xc69df0(0x26a),'bfgix':'Windows\x20AI\x20API\x20not\x20available','KXrrb':_0xc69df0(0x1f7),'yKsnT':_0xc69df0(0x297),'DSFMJ':_0xc69df0(0x241),'enLgU':_0xc69df0(0x258),'DFUBp':_0xc69df0(0x2f4)};console[_0xc69df0(0x26c)](_0x416c32[_0xc69df0(0x26b)],_0x76c82a);if(!window['ai']){console[_0xc69df0(0x211)](_0x416c32[_0xc69df0(0x235)]);throw new Error(_0x416c32[_0xc69df0(0x2e1)]);}try{console['log'](_0x416c32['KXrrb']);const _0x527ee0=await window['ai'][_0xc69df0(0x2f0)]();console['log'](_0x416c32[_0xc69df0(0x212)],_0x527ee0),console[_0xc69df0(0x26c)](_0x416c32[_0xc69df0(0x264)]);const _0x8fd0eb=await _0x527ee0[_0xc69df0(0x2ad)](_0x76c82a);return console[_0xc69df0(0x26c)](_0x416c32[_0xc69df0(0x20a)],_0x8fd0eb),_0x8fd0eb;}catch(_0x223cbd){console[_0xc69df0(0x211)](_0x416c32[_0xc69df0(0x24c)],_0x223cbd);throw _0x223cbd;}}async function processImageUsingTesseract(_0x17b7a1){const _0x2cc3ff=_0x1821b4,_0x2fa779={'CJHik':'[Processing]\x20Starting\x20image\x20OCR\x20analysis...','kjkUx':_0x2cc3ff(0x2ec),'CucdD':function(_0x189171,_0x204b2f){return _0x189171(_0x204b2f);},'MWosY':function(_0xa8c4cc,_0x497eb6){return _0xa8c4cc>_0x497eb6;},'vOzYs':'text','hWIWl':_0x2cc3ff(0x22b),'oLAwi':_0x2cc3ff(0x2e9),'FWxkn':_0x2cc3ff(0x2eb)};console[_0x2cc3ff(0x26c)](_0x2fa779[_0x2cc3ff(0x294)]),addMessage(_0x2fa779[_0x2cc3ff(0x2b1)],![]);try{const _0x194de1=await _0x2fa779[_0x2cc3ff(0x21c)](extractTextFromImage,_0x17b7a1);return console[_0x2cc3ff(0x26c)](_0x2cc3ff(0x213),_0x194de1),_0x194de1[_0x2cc3ff(0x2e6)]&&_0x2fa779[_0x2cc3ff(0x286)](_0x194de1[_0x2cc3ff(0x2e6)][_0x2cc3ff(0x26f)]()[_0x2cc3ff(0x2f9)],0x0)?{'type':_0x2fa779[_0x2cc3ff(0x246)],'content':_0x2cc3ff(0x21e),'confidence':_0x194de1[_0x2cc3ff(0x25b)],'topics':generateTopics(_0x194de1[_0x2cc3ff(0x2e6)])}:(console[_0x2cc3ff(0x26c)](_0x2fa779[_0x2cc3ff(0x1fa)]),{'type':_0x2cc3ff(0x244),'content':_0x2fa779['oLAwi'],'topics':['Visual\x20Analysis',_0x2fa779[_0x2cc3ff(0x229)]],'features':{'timestamp':new Date()[_0x2cc3ff(0x277)](),'dimensions':{'width':_0x17b7a1[_0x2cc3ff(0x2d1)],'height':_0x17b7a1[_0x2cc3ff(0x24a)]}}});}catch(_0x51db7d){console[_0x2cc3ff(0x211)](_0x2cc3ff(0x280),_0x51db7d);throw _0x51db7d;}}async function extractTextFromImage(_0x2bc902){const _0x507185=_0x1821b4,_0xa52fd9={'pNvtc':_0x507185(0x250),'ZxBaI':_0x507185(0x2fa),'YQPlS':'[OCR]\x20Text\x20extracted:','jCEZN':'[OCR]\x20Worker\x20terminated','raZgD':function(_0x2c49c7,_0x40bd08){return _0x2c49c7(_0x40bd08);},'oTCxV':_0x507185(0x214),'sZIdy':_0x507185(0x2ef)};console['log'](_0xa52fd9[_0x507185(0x202)]);const _0xe3d478=_0x507185(0x2d9);try{const _0x1ce095=await Tesseract[_0x507185(0x22d)]();await _0x1ce095[_0x507185(0x289)](),await _0x1ce095['loadLanguage'](_0xe3d478),await _0x1ce095['initialize'](_0xe3d478),console['log'](_0xa52fd9[_0x507185(0x2df)]);const _0x33cdc6=await _0x1ce095[_0x507185(0x2ad)](_0x2bc902);console['log'](_0xa52fd9[_0x507185(0x226)],_0x33cdc6[_0x507185(0x266)][_0x507185(0x2e6)]),await _0x1ce095[_0x507185(0x249)](),console[_0x507185(0x26c)](_0xa52fd9[_0x507185(0x282)]);const _0x31d8a3={'timestamp':new Date()['toISOString'](),'imageSize':{'width':_0x2bc902[_0x507185(0x2d1)],'height':_0x2bc902[_0x507185(0x24a)]},'extractedText':_0x33cdc6[_0x507185(0x266)][_0x507185(0x2e6)],'confidenceScore':_0x33cdc6[_0x507185(0x266)][_0x507185(0x25b)],'suggestedTopics':_0xa52fd9[_0x507185(0x210)](generateTopics,_0x33cdc6[_0x507185(0x266)]['text'])};return{'description':_0xa52fd9[_0x507185(0x24e)],'metadata':_0x31d8a3,'text':_0x33cdc6['data'][_0x507185(0x2e6)],'confidence':_0x33cdc6['data'][_0x507185(0x25b)]};}catch(_0x1ab39d){return console[_0x507185(0x211)](_0xa52fd9[_0x507185(0x204)],_0x1ab39d),{'text':'','confidence':0x0};}}function generateTopics(_0x1c07cb){const _0x37d005=_0x1821b4,_0x382636={'whUuB':_0x37d005(0x2be),'sHIfk':_0x37d005(0x290),'mouTd':'Geography','dgKKd':_0x37d005(0x20d),'ACqwa':function(_0x5c3f1c,_0x5d38d2){return _0x5c3f1c===_0x5d38d2;},'HQSdi':_0x37d005(0x2eb)},_0x16f494=new Set(),_0x3979fa=_0x1c07cb[_0x37d005(0x252)](),_0x178ba7=[{'pattern':/\b(math|equation|calculate|formula|number)\b/,'topic':_0x37d005(0x2c9)},{'pattern':/\b(science|experiment|chemical|biology|physics)\b/,'topic':_0x382636['whUuB']},{'pattern':/\b(history|century|ancient|war|empire|civilization)\b/,'topic':_0x382636[_0x37d005(0x2d8)]},{'pattern':/\b(geography|country|capital|mountain|river|climate)\b/,'topic':_0x382636[_0x37d005(0x261)]},{'pattern':/\b(grammar|sentence|paragraph|essay|writing)\b/,'topic':'Language\x20Arts'},{'pattern':/\b(art|color|design|paint|draw)\b/,'topic':_0x382636[_0x37d005(0x218)]}];return _0x178ba7['forEach'](_0x1cdab3=>{const _0x3f4ee0=_0x37d005;_0x1cdab3[_0x3f4ee0(0x255)][_0x3f4ee0(0x2a4)](_0x3979fa)&&_0x16f494[_0x3f4ee0(0x263)](_0x1cdab3['topic']);}),_0x382636['ACqwa'](_0x16f494[_0x37d005(0x2ae)],0x0)&&_0x16f494[_0x37d005(0x263)](_0x382636[_0x37d005(0x1f4)]),Array[_0x37d005(0x257)](_0x16f494);}function _0x5b37(_0x488e29,_0x32d90f){const _0x2b10cf=_0x2b10();return _0x5b37=function(_0x5b3723,_0x3d4db1){_0x5b3723=_0x5b3723-0x1f2;let _0x4bb9de=_0x2b10cf[_0x5b3723];return _0x4bb9de;},_0x5b37(_0x488e29,_0x32d90f);}async function generateQuizUsingAI(_0xca5110,_0x301bcd){const _0x4200e4=_0x1821b4,_0xa84423={'sMkri':_0x4200e4(0x24d),'upctg':_0x4200e4(0x2b3),'mNVVJ':'system','HhNSo':_0x4200e4(0x2e3),'BQJUa':_0x4200e4(0x27d),'NRrBu':_0x4200e4(0x2ce),'FklUn':function(_0x1866cd,_0x31b50b,_0x899624){return _0x1866cd(_0x31b50b,_0x899624);},'CqGkI':_0x4200e4(0x2f3),'cnXDv':function(_0xcb114){return _0xcb114();},'uEoDh':function(_0x15ecb8,_0x839a4e){return _0x15ecb8(_0x839a4e);},'jUbUj':_0x4200e4(0x2fd),'XDYIY':function(_0x51bd13,_0x145a9b){return _0x51bd13(_0x145a9b);},'DkIkL':function(_0x7f3cb2){return _0x7f3cb2();},'oQbcL':_0x4200e4(0x276),'LJsnS':_0x4200e4(0x268),'PlTNo':_0x4200e4(0x27f)};console[_0x4200e4(0x26c)]('[Quiz]\x20Starting\x20quiz\x20generation\x20with\x20Gemini\x20Nano...',{'imageContext':_0xca5110,'userPrompt':_0x301bcd});try{console[_0x4200e4(0x26c)](_0xa84423[_0x4200e4(0x267)],JSON[_0x4200e4(0x2d5)](_0xca5110));if(!window['ai'])throw new Error(_0xa84423[_0x4200e4(0x20e)]);const _0x537e90=_0x4200e4(0x2d2)+JSON['stringify'](_0xca5110)+_0x4200e4(0x269);console[_0x4200e4(0x26c)]('[Quiz]\x20Constructed\x20system\x20prompt:',_0x537e90);const _0x4caa19=[{'role':_0xa84423['mNVVJ'],'content':_0x537e90},{'role':_0xa84423[_0x4200e4(0x24f)],'content':_0x301bcd}],_0x294e73=document[_0x4200e4(0x200)](_0xa84423['BQJUa']);_0x294e73[_0x4200e4(0x26d)]=_0xa84423[_0x4200e4(0x1f9)],chatMessages[_0x4200e4(0x2c1)](_0x294e73),_0xa84423[_0x4200e4(0x278)](showTypingIndicator,chatMessages,_0xa84423[_0x4200e4(0x2da)]);if(!aiLanguageSession)await _0xa84423[_0x4200e4(0x1fb)](initializeLanguageSession);const _0x3cda9c=await aiLanguageSession[_0x4200e4(0x2a6)](_0x537e90+_0x4200e4(0x228)+_0x301bcd);let _0x5f26cb='';for await(const _0x2e6782 of _0x3cda9c){_0x5f26cb+=_0x2e6782,_0x294e73['textContent']=_0x5f26cb,chatMessages[_0x4200e4(0x2f1)]=chatMessages[_0x4200e4(0x291)];}_0x294e73[_0x4200e4(0x287)]();let _0x30a769;try{_0x30a769=_0xa84423['uEoDh'](safeJSONParse,_0x5f26cb),_0xa84423[_0x4200e4(0x278)](addMessage,_0xa84423[_0x4200e4(0x27b)],![]),_0xa84423[_0x4200e4(0x2de)](addQuiz,_0x30a769);}catch(_0x52c085){console[_0x4200e4(0x211)]('[Quiz]\x20Failed\x20to\x20parse\x20AI\x20response:',_0x52c085),addMessage(_0x5f26cb,![]);throw _0x52c085;}_0xa84423[_0x4200e4(0x24b)](removeTypingIndicator);}catch(_0x4cd08e){console[_0x4200e4(0x211)](_0xa84423[_0x4200e4(0x2cb)],_0x4cd08e),removeTypingIndicator(),addMessage('Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz\x20using\x20Gemini\x20Nano\x20AI.\x20Please\x20try\x20again.',![]);try{const _0x42da23=await generateQuizWithoutAI(_0xca5110,_0x301bcd);_0xa84423[_0x4200e4(0x278)](addMessage,_0xa84423[_0x4200e4(0x201)],![]),_0xa84423[_0x4200e4(0x2de)](addQuiz,_0x42da23);}catch(_0x36581b){console[_0x4200e4(0x211)]('[Quiz]\x20Fallback\x20generation\x20also\x20failed:',_0x36581b),_0xa84423[_0x4200e4(0x278)](addMessage,_0xa84423[_0x4200e4(0x28b)],![]);}}}function generateOptionsFromText(_0x20a88c){const _0x34a996=_0x1821b4,_0x48d3a6={'mdtVm':function(_0x4f176d,_0x150ff1){return _0x4f176d<_0x150ff1;},'ywBnm':function(_0x7203b2,_0xad700d){return _0x7203b2+_0xad700d;},'NwDPp':function(_0x38fc37,_0x1bb79c){return _0x38fc37+_0x1bb79c;}},_0x5556e0=_0x20a88c['split'](/[.!?]+/)['filter'](_0xa858a1=>_0xa858a1[_0x34a996(0x26f)]()[_0x34a996(0x2f9)]>0x0),_0x5510bb=_0x5556e0[_0x34a996(0x262)](0x0,0x4)[_0x34a996(0x215)](_0x352bb8=>_0x352bb8[_0x34a996(0x26f)]());while(_0x48d3a6[_0x34a996(0x298)](_0x5510bb['length'],0x4)){_0x5510bb[_0x34a996(0x22e)](_0x48d3a6['ywBnm']('Additional\x20option\x20',_0x48d3a6[_0x34a996(0x2dd)](_0x5510bb[_0x34a996(0x2f9)],0x1)));}return _0x5510bb;}function generateCustomQuestion(_0x31176b,_0x4aa66a){const _0x3be577=_0x1821b4,_0x41f682={'SkNum':_0x3be577(0x25f)};return _0x31176b['toLowerCase']()['includes'](_0x41f682['SkNum'])?_0x31176b:_0x3be577(0x254)+_0x4aa66a['split']('\x20')['slice'](0x0,0x3)[_0x3be577(0x272)]('\x20')+'...?';}function addMessage(_0x3797c,_0x4051b6=![]){const _0x3f4583=_0x1821b4,_0x706b={'ECGIq':_0x3f4583(0x2f6),'hvVTb':_0x3f4583(0x271),'ehAaA':_0x3f4583(0x23a)};console['log'](_0x3f4583(0x288)+(_0x4051b6?_0x706b[_0x3f4583(0x2ac)]:_0x706b[_0x3f4583(0x299)])+':',_0x3797c);const _0x9784ae=document[_0x3f4583(0x200)](_0x3f4583(0x27d));_0x9784ae[_0x3f4583(0x26d)]='message\x20'+(_0x4051b6?_0x706b[_0x3f4583(0x27e)]:_0x3f4583(0x2bf)),_0x9784ae[_0x3f4583(0x260)]=_0x3797c,chatMessages[_0x3f4583(0x2c1)](_0x9784ae),chatMessages[_0x3f4583(0x2f1)]=chatMessages['scrollHeight'];}function addQuiz(_0x86ecf6){const _0x2477be=_0x1821b4,_0xc691bd={'ADsJs':'[UI]\x20Adding\x20quiz\x20to\x20chat:','bBlOF':_0x2477be(0x27d),'xozwK':_0x2477be(0x2c0),'puNkY':_0x2477be(0x21f),'ahZbL':'button','AtdGJ':_0x2477be(0x1f5),'lILtB':_0x2477be(0x283)};console[_0x2477be(0x26c)](_0xc691bd[_0x2477be(0x22f)],_0x86ecf6);const _0x2ec839=document[_0x2477be(0x200)](_0xc691bd[_0x2477be(0x237)]);_0x2ec839[_0x2477be(0x26d)]=_0xc691bd[_0x2477be(0x265)];const _0x241ebd=_0x2477be(0x292)+_0x86ecf6[_0x2477be(0x2e5)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20Grade:\x20'+_0x86ecf6['grade']+_0x2477be(0x2a0)+_0x86ecf6['subject']+_0x2477be(0x2a9)+_0x86ecf6[_0x2477be(0x22c)]+_0x2477be(0x2c6)+_0x86ecf6[_0x2477be(0x207)]+_0x2477be(0x2fb)+_0x86ecf6[_0x2477be(0x256)][_0x2477be(0x215)]((_0x4c5b06,_0x5018aa)=>_0x2477be(0x236)+(_0x5018aa+0x1)+'.\x20'+_0x4c5b06[_0x2477be(0x2e7)]+_0x2477be(0x236)+(_0x4c5b06[_0x2477be(0x231)]?_0x4c5b06[_0x2477be(0x231)][_0x2477be(0x215)]((_0x2ae694,_0x308333)=>'\x20\x20\x20'+String[_0x2477be(0x296)](0x61+_0x308333)+')\x20'+_0x2ae694)[_0x2477be(0x272)]('\x0a'):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20Type:\x20'+_0x4c5b06[_0x2477be(0x2db)]+_0x2477be(0x2a1)+_0x4c5b06['points']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20')[_0x2477be(0x272)]('\x0a')+'\x0a\x20\x20\x20\x20',_0x4246e1=document['createElement'](_0xc691bd[_0x2477be(0x273)]);_0x4246e1['textContent']=_0x241ebd,_0x2ec839[_0x2477be(0x2c1)](_0x4246e1);const _0x5186c1=document[_0x2477be(0x200)](_0xc691bd['ahZbL']);_0x5186c1[_0x2477be(0x26d)]=_0xc691bd[_0x2477be(0x23d)],_0x5186c1['textContent']=_0xc691bd[_0x2477be(0x23b)],_0x5186c1[_0x2477be(0x27c)]=()=>{const _0x16d7b1=_0x2477be;navigator[_0x16d7b1(0x2c8)][_0x16d7b1(0x251)](_0x241ebd)['then'](()=>_0x5186c1[_0x16d7b1(0x260)]=_0x16d7b1(0x20f))[_0x16d7b1(0x2a7)](_0x59379d=>console[_0x16d7b1(0x211)](_0x16d7b1(0x2d3),_0x59379d))[_0x16d7b1(0x2e2)](()=>setTimeout(()=>_0x5186c1[_0x16d7b1(0x260)]=_0x16d7b1(0x283),0x7d0));},_0x2ec839[_0x2477be(0x2c1)](_0x5186c1),chatMessages[_0x2477be(0x2c1)](_0x2ec839),chatMessages[_0x2477be(0x2f1)]=chatMessages[_0x2477be(0x291)];}async function captureImage(){const _0x38fd47=_0x1821b4,_0x291567={'KpaDj':function(_0x842eb1){return _0x842eb1();},'GzvUp':'div','CugOc':'prompt-suggestion','wFSQU':_0x38fd47(0x2ba),'TArqI':_0x38fd47(0x28f),'xBUEr':_0x38fd47(0x2b6),'QNWzM':_0x38fd47(0x2c2),'yrBuP':function(_0x8f62c8,_0x187435){return _0x8f62c8===_0x187435;},'aiUtg':'text','FuYmW':'Generate\x20multiple\x20choice\x20questions\x20about\x20this\x20picture','ZOdEh':_0x38fd47(0x1f6)};console[_0x38fd47(0x26c)]('[Camera]\x20Capturing\x20image...');try{const _0x5d760d=document[_0x38fd47(0x200)](_0x291567['wFSQU']);_0x5d760d[_0x38fd47(0x2d1)]=cameraPreview[_0x38fd47(0x23e)],_0x5d760d[_0x38fd47(0x24a)]=cameraPreview[_0x38fd47(0x2b9)],_0x5d760d[_0x38fd47(0x243)]('2d')['drawImage'](cameraPreview,0x0,0x0);const _0x236882=document['createElement'](_0x38fd47(0x222));_0x236882[_0x38fd47(0x23c)]=_0x5d760d['toDataURL'](_0x38fd47(0x27a)),_0x236882[_0x38fd47(0x26d)]=_0x291567[_0x38fd47(0x2d0)];const _0x1bef78=document[_0x38fd47(0x200)](_0x291567[_0x38fd47(0x232)]);_0x1bef78['className']=_0x291567[_0x38fd47(0x2b8)],_0x1bef78['appendChild'](_0x236882),chatMessages[_0x38fd47(0x2c1)](_0x1bef78),_0x291567[_0x38fd47(0x259)](stopCamera);const _0xe7517=await processImageUsingTesseract(_0x236882);imageContext=_0xe7517,console[_0x38fd47(0x26c)](_0x291567[_0x38fd47(0x25c)],JSON[_0x38fd47(0x2d5)](imageContext,null,0x2)),addMessage('Image\x20captured!\x20Please\x20provide\x20your\x20requirements\x20for\x20the\x20quiz.',![]);const _0x2fef14=[_0x38fd47(0x2bd)+imageContext[_0x38fd47(0x216)][0x0]+_0x38fd47(0x21b)+imageContext[_0x38fd47(0x2b2)],_0x291567[_0x38fd47(0x21a)](imageContext['type'],_0x291567['aiUtg'])?_0x38fd47(0x221)+imageContext[_0x38fd47(0x2b2)]:_0x291567['FuYmW'],_0x291567['ZOdEh']];_0x2fef14[_0x38fd47(0x2cc)](_0x3e8b70=>{const _0x237ecc=_0x38fd47,_0x2f169b=document[_0x237ecc(0x200)](_0x291567[_0x237ecc(0x232)]);_0x2f169b[_0x237ecc(0x26d)]=_0x291567[_0x237ecc(0x2e8)],_0x2f169b[_0x237ecc(0x260)]=_0x3e8b70,_0x2f169b[_0x237ecc(0x27c)]=()=>{const _0x250225=_0x237ecc;messageInput[_0x250225(0x1f3)]=_0x3e8b70,_0x291567['KpaDj'](sendMessage);},chatMessages[_0x237ecc(0x2c1)](_0x2f169b);});}catch(_0x3f0ee7){console[_0x38fd47(0x211)](_0x38fd47(0x1f2),_0x3f0ee7),addMessage(_0x38fd47(0x2bb),![]);}}async function sendMessage(){const _0x204e24=_0x1821b4,_0x49f97b={'yhROo':function(_0x187012,_0x16ab14,_0x228088){return _0x187012(_0x16ab14,_0x228088);},'sTSYb':function(_0x2fb23a,_0x14e146,_0xd59edc){return _0x2fb23a(_0x14e146,_0xd59edc);},'Uipcg':_0x204e24(0x2d6),'YNloD':function(_0x92b8b9,_0x562746,_0x495891){return _0x92b8b9(_0x562746,_0x495891);},'ICJzI':_0x204e24(0x28a),'Iqrcc':_0x204e24(0x29e)},_0xda657a=messageInput[_0x204e24(0x1f3)][_0x204e24(0x26f)]();if(!_0xda657a)return;console[_0x204e24(0x26c)]('[Chat]\x20Sending\x20message:',_0xda657a),addMessage(_0xda657a,!![]),messageInput[_0x204e24(0x1f3)]='';if(imageContext)try{const _0x2300ef=await _0x49f97b[_0x204e24(0x20c)](generateQuizUsingAI,imageContext,_0xda657a);_0x49f97b['sTSYb'](addMessage,_0x49f97b[_0x204e24(0x224)],![]),addQuiz(_0x2300ef);}catch(_0x147011){_0x49f97b[_0x204e24(0x2c4)](addMessage,_0x49f97b[_0x204e24(0x2ee)],![]);}else _0x49f97b[_0x204e24(0x20c)](addMessage,_0x49f97b['Iqrcc'],![]);}function toggleTheme(){const _0x183110=_0x1821b4,_0x240944={'zajeh':_0x183110(0x242),'JQxUu':function(_0x20b20f,_0x54b6b5){return _0x20b20f===_0x54b6b5;},'RhTmN':'dark'},_0x450763=document[_0x183110(0x220)],_0xf724ff=_0x450763[_0x183110(0x230)](_0x240944['zajeh']),_0x4db2a4=_0x240944[_0x183110(0x217)](_0xf724ff,_0x240944['RhTmN'])?_0x183110(0x239):_0x240944[_0x183110(0x25d)];_0x450763['setAttribute'](_0x240944[_0x183110(0x245)],_0x4db2a4),localStorage[_0x183110(0x208)](_0x183110(0x1fd),_0x4db2a4);}function _0x2b10(){const _0x311e3e=['mouTd','slice','add','DSFMJ','xozwK','data','sMkri','Generated\x20a\x20basic\x20quiz\x20without\x20AI\x20assistance:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Format\x20the\x20response\x20as\x20a\x20JSON\x20quiz\x20object\x20with\x20id,\x20grade,\x20subject,\x20title,\x20timeLimit,\x20topic,\x20and\x20questions\x20array.','[AI]\x20Windows\x20AI\x20API\x20not\x20found\x20in\x20window\x20object','IPipc','log','className','display','trim','[Camera]\x20Camera\x20preview\x20started\x20and\x20container\x20displayed','Bot','join','puNkY','UroFN','20rMpLBZ','[Quiz]\x20Error\x20in\x20quiz\x20generation\x20using\x20Gemini\x20Nano\x20AI:','toISOString','FklUn','\x20Quiz','image/jpeg','jUbUj','onclick','div','ehAaA','Quiz\x20generation\x20failed\x20completely.\x20Please\x20try\x20again\x20later.','[Processing]\x20Error\x20during\x20image\x20processing:','4303gUwjWE','jCEZN','Copy\x20Quiz','DQCyO','Option\x20A','MWosY','remove','[UI]\x20Adding\x20message:\x20','load','Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz.\x20Please\x20try\x20again.','PlTNo','164615viIUij','18732gQRcPS','Option\x20C','captured-image','History','scrollHeight','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Title:\x20','rMWiB','CJHik','open_ended','fromCharCode','[AI]\x20Image\x20session\x20created:','mdtVm','hvVTb','LGMls','NKOqm','Error\x20accessing\x20camera:\x20','key','Please\x20capture\x20an\x20image\x20first\x20before\x20providing\x20quiz\x20requirements.','cflGF','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Subject:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Points:\x20','split','cameraContainer','test','3338137fmfJlh','promptStreaming','catch','Enter','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Time\x20Limit:\x20','getElementById','captureButton','ECGIq','recognize','size','Option\x20B','cqiBF','kjkUx','content','window.ai\x20API\x20not\x20available','ouVBL','5491872NRyjEb','message\x20bot-message','BFdww','xBUEr','videoHeight','canvas','Sorry,\x20I\x20couldn\x27t\x20process\x20the\x20image.\x20Please\x20try\x20again.','3FmftqF','Create\x20a\x20quiz\x20about\x20','Science','bot-message','quiz-container','appendChild','[Processing]\x20Image\x20processing\x20completed:','sendButton','YNloD','Student\x20should\x20identify\x20main\x20points\x20from\x20the\x20text','\x20minutes\x0a\x20\x20\x20\x20\x20\x20\x20\x20Topics:\x20','addEventListener','clipboard','Mathematics','vaCtr','oQbcL','forEach','cancelButton','message\x20bot-message\x20streaming','cameraPreview','TArqI','width','You\x20are\x20a\x20quiz\x20generator.\x20Create\x20a\x20quiz\x20based\x20on\x20the\x20following\x20image\x20context\x20and\x20user\x20requirements.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Image\x20context:\x20','Copy\x20failed:','152589LwFcGW','stringify','I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20requirements:','frlJK','sHIfk','eng','CqGkI','type','MNvkJ','NwDPp','XDYIY','ZxBaI','mediaDevices','bfgix','finally','user','[Camera]\x20Starting\x20camera\x20initialization...','title','text','question','CugOc','Visual\x20content\x20detected','multiple_choice','General\x20Knowledge','Processing\x20image...','style','ICJzI','[OCR]\x20Error\x20in\x20text\x20extraction:','createImageSession','scrollTop','625080kwUoRe','Generating\x20quiz...','[AI]\x20Error\x20during\x20image\x20processing:','General','User','[Camera]\x20Camera\x20stopped\x20and\x20container\x20hidden','[AI]\x20Starting\x20image\x20processing...','length','[OCR]\x20Worker\x20initialized','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20Questions:\x0a\x20\x20\x20\x20\x20\x20\x20\x20','getUserMedia','I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20image\x20and\x20requirements:','[Camera]\x20Error\x20processing\x20captured\x20image:','value','HQSdi','copy-button','Make\x20a\x20quiz\x20suitable\x20for\x20beginners','[AI]\x20Creating\x20image\x20recognition\x20session...','4XZlNMh','NRrBu','hWIWl','cnXDv','YssCS','theme','ByJpX','uZQiu','createElement','LJsnS','pNvtc','toString','sZIdy','stop','Description\x20of\x20visual\x20elements','topic','setItem','click','enLgU','message','yhROo','Art','upctg','Copied!','raZgD','error','yKsnT','[OCR]\x20Text\x20extraction\x20result:','Image\x20and\x20text\x20analysis\x20complete','map','topics','JQxUu','dgKKd','[Camera]\x20Successfully\x20got\x20media\x20stream:','yrBuP','\x20-\x20','CucdD','NDQZJ','Washington\x20Drivers\x20License\x20Test','pre','documentElement','Generate\x20questions\x20based\x20on\x20the\x20image\x20related\x20text\x20-\x20','img','1629utPmmX','Uipcg','1456iTFrzY','YQPlS','flex','\x0a\x0aUser\x20request:\x20','FWxkn','[Quiz]\x20Error\x20generating\x20quiz:','[Processing]\x20No\x20OCR\x20text\x20found,\x20falling\x20back\x20to\x20image\x20analysis','timeLimit','createWorker','push','ADsJs','getAttribute','options','GzvUp','IKGjY','HcTgf','nhJHs','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','bBlOF','label','light','user-message','lILtB','src','AtdGJ','videoWidth','SEJsl','7GEoNPM','[AI]\x20Performing\x20image\x20recognition...','data-theme','getContext','image','zajeh','vOzYs','[Camera]\x20Stopping\x20camera...','ZNfHJ','terminate','height','DkIkL','DFUBp','imageContext:','oTCxV','HhNSo','[OCR]\x20Starting\x20text\x20extraction...','writeText','toLowerCase','themeToggle','What\x20is\x20the\x20significance\x20of\x20','pattern','questions','from','[AI]\x20Image\x20recognition\x20completed.\x20Result:','KpaDj','BjpTm','confidence','QNWzM','RhTmN','rMcFb','what','textContent'];_0x2b10=function(){return _0x311e3e;};return _0x2b10();}themeToggle[_0x1821b4(0x2c7)]('click',toggleTheme),cameraButton['addEventListener'](_0x1821b4(0x209),startCamera),captureButton[_0x1821b4(0x2c7)](_0x1821b4(0x209),captureImage),cancelButton['addEventListener'](_0x1821b4(0x209),stopCamera),sendButton['addEventListener']('click',sendMessage),messageInput[_0x1821b4(0x2c7)]('keypress',_0x46bb10=>{const _0x15bf66=_0x1821b4,_0x21f763={'mmxJH':function(_0x3a3b2e,_0x31daee){return _0x3a3b2e===_0x31daee;},'NKOqm':_0x15bf66(0x2a8),'frlJK':function(_0x17c03d){return _0x17c03d();}};if(_0x21f763['mmxJH'](_0x46bb10[_0x15bf66(0x29d)],_0x21f763[_0x15bf66(0x29b)]))_0x21f763[_0x15bf66(0x2d7)](sendMessage);});async function generateQuizWithoutAI(_0x1a4a1c,_0x56b979){const _0x4beef6=_0x1821b4,_0x2edcaa={'WgsaY':'[Quiz]\x20Generating\x20quiz...','ByJpX':'Based\x20on\x20the\x20text,\x20what\x20is\x20the\x20main\x20topic\x20being\x20discussed?','LGMls':_0x4beef6(0x2ea),'SEJsl':function(_0x460302,_0x412e4e){return _0x460302(_0x412e4e);},'vaCtr':'What\x20are\x20the\x20key\x20points\x20mentioned\x20in\x20the\x20text?','HcTgf':_0x4beef6(0x295),'rMcFb':_0x4beef6(0x2c5),'GGDJC':'What\x20can\x20you\x20observe\x20in\x20this\x20image?','aQXta':_0x4beef6(0x206),'UroFN':_0x4beef6(0x2af),'cqiBF':_0x4beef6(0x28e),'rMWiB':'Option\x20D','uZQiu':_0x4beef6(0x285),'BjpTm':_0x4beef6(0x2f5),'IKGjY':_0x4beef6(0x22a)};console[_0x4beef6(0x26c)](_0x2edcaa['WgsaY'],{'imageContext':_0x1a4a1c,'userPrompt':_0x56b979});try{const _0x40eeb7=_0x1a4a1c[_0x4beef6(0x2db)]===_0x4beef6(0x2e6),_0x310df5=_0x1a4a1c[_0x4beef6(0x2b2)],_0xf28bb=_0x1a4a1c[_0x4beef6(0x216)],_0x431cf9=[];_0x40eeb7?(_0x431cf9[_0x4beef6(0x22e)]({'question':_0x2edcaa[_0x4beef6(0x1fe)],'type':_0x2edcaa[_0x4beef6(0x29a)],'options':_0x2edcaa[_0x4beef6(0x23f)](generateOptionsFromText,_0x310df5),'answer':'Option\x20A','points':0x2}),_0x431cf9[_0x4beef6(0x22e)]({'question':_0x2edcaa[_0x4beef6(0x2ca)],'type':_0x2edcaa[_0x4beef6(0x234)],'answer':_0x2edcaa[_0x4beef6(0x25e)],'points':0x2})):_0x431cf9[_0x4beef6(0x22e)]({'question':_0x2edcaa['GGDJC'],'type':_0x2edcaa[_0x4beef6(0x234)],'answer':_0x2edcaa['aQXta'],'points':0x2});_0x431cf9[_0x4beef6(0x22e)]({'question':generateCustomQuestion(_0x56b979,_0x310df5),'type':_0x4beef6(0x2ea),'options':[_0x4beef6(0x285),_0x2edcaa[_0x4beef6(0x274)],_0x2edcaa[_0x4beef6(0x2b0)],_0x2edcaa[_0x4beef6(0x293)]],'answer':_0x2edcaa[_0x4beef6(0x1ff)],'points':0x2});const _0x4218ca={'id':Date['now']()[_0x4beef6(0x203)](),'title':_0xf28bb[0x0]+_0x4beef6(0x279),'subject':_0xf28bb[0x0],'grade':_0x2edcaa[_0x4beef6(0x25a)],'timeLimit':0xf,'topic':_0xf28bb['join'](',\x20'),'questions':_0x431cf9};return _0x4218ca;}catch(_0x2397cb){console[_0x4beef6(0x211)](_0x2edcaa[_0x4beef6(0x233)],_0x2397cb);throw _0x2397cb;}}