
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x5c6512=_0x410f;(function(_0x17b75c,_0x105bcc){const _0x24702f=_0x410f,_0x1268e2=_0x17b75c();while(!![]){try{const _0x11de16=-parseInt(_0x24702f(0xcf))/0x1+parseInt(_0x24702f(0x126))/0x2*(-parseInt(_0x24702f(0x122))/0x3)+-parseInt(_0x24702f(0x11c))/0x4*(parseInt(_0x24702f(0x186))/0x5)+parseInt(_0x24702f(0x141))/0x6*(-parseInt(_0x24702f(0xb4))/0x7)+-parseInt(_0x24702f(0xba))/0x8*(-parseInt(_0x24702f(0x100))/0x9)+parseInt(_0x24702f(0x167))/0xa+-parseInt(_0x24702f(0xc7))/0xb*(-parseInt(_0x24702f(0x184))/0xc);if(_0x11de16===_0x105bcc)break;else _0x1268e2['push'](_0x1268e2['shift']());}catch(_0x270c07){_0x1268e2['push'](_0x1268e2['shift']());}}}(_0x5c99,0xb22c7));import{Logger}from'./common.js';const chatMessages=document[_0x5c6512(0xfd)](_0x5c6512(0x117)),messageInput=document[_0x5c6512(0xfd)]('messageInput'),sendButton=document[_0x5c6512(0xfd)]('sendButton'),cameraButton=document['getElementById'](_0x5c6512(0xe5)),themeToggle=document['getElementById'](_0x5c6512(0x125)),cameraContainer=document[_0x5c6512(0xfd)](_0x5c6512(0x159)),cameraPreview=document[_0x5c6512(0xfd)]('cameraPreview'),captureButton=document[_0x5c6512(0xfd)](_0x5c6512(0xcb)),cancelButton=document['getElementById'](_0x5c6512(0x119));let stream=null,imageContext=null;async function startCamera(){const _0x1ccc04=_0x5c6512,_0x2bdb54={'mNKXD':_0x1ccc04(0x133),'HCqyQ':_0x1ccc04(0x12f),'gMyqZ':_0x1ccc04(0x14e),'blFGx':'[Camera]\x20Successfully\x20got\x20media\x20stream:','SoGYb':_0x1ccc04(0x170),'maFfH':_0x1ccc04(0x84),'wplVV':function(_0x3a5a1a,_0x4b972c){return _0x3a5a1a(_0x4b972c);},'iTtqw':function(_0x4c2a0b,_0x5b9eb3){return _0x4c2a0b+_0x5b9eb3;},'XVaJm':_0x1ccc04(0x102)};console['log'](_0x2bdb54[_0x1ccc04(0xed)]);try{const _0x532099=_0x2bdb54[_0x1ccc04(0x155)]['split']('|');let _0x2856a8=0x0;while(!![]){switch(_0x532099[_0x2856a8++]){case'0':console[_0x1ccc04(0xae)](_0x2bdb54['gMyqZ']);continue;case'1':cameraPreview[_0x1ccc04(0xe1)]=stream;continue;case'2':console['log'](_0x2bdb54['blFGx'],stream);continue;case'3':cameraContainer[_0x1ccc04(0x17a)]['display']=_0x1ccc04(0x96);continue;case'4':stream=await navigator[_0x1ccc04(0x14d)][_0x1ccc04(0x180)]({'video':{'facingMode':_0x2bdb54['SoGYb']}});continue;}break;}}catch(_0x3c1470){console[_0x1ccc04(0x154)](_0x2bdb54[_0x1ccc04(0xf1)],_0x3c1470),_0x2bdb54[_0x1ccc04(0x176)](addMessage,_0x2bdb54[_0x1ccc04(0x16b)](_0x2bdb54[_0x1ccc04(0xf9)],_0x3c1470[_0x1ccc04(0x104)]));}}function _0x5c99(){const _0x46575f=['Student\x20should\x20identify\x20main\x20points\x20from\x20the\x20text','2519517wiOmXL','topics','lUdOz','pattern','captureButton','XbpgM','display','Option\x20C','681363ZQByho','Science','xqath','Based\x20on\x20the\x20text,\x20what\x20is\x20the\x20main\x20topic\x20being\x20discussed?','VmzBa','captured-image','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Title:\x20','height','join','stop','recognize','eng','writeText','imageContext:','message\x20bot-message','Windows\x20AI\x20API\x20not\x20available','pre','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','srcObject','General\x20Knowledge','lDiOA','I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20image\x20and\x20requirements:','cameraButton','[Quiz]\x20Failed\x20to\x20parse\x20AI\x20response:','lkAgr','NINPc','JeZSg','zhHUp','content','[OCR]\x20Text\x20extraction\x20result:','mNKXD','[Camera]\x20Error\x20processing\x20captured\x20image:','HlLvf','[Quiz]\x20Error\x20in\x20quiz\x20generation\x20using\x20Gemini\x20Nano\x20AI:','maFfH','lfbwF','text','size','lZWTl','General','VXkMC','type','XVaJm','WBATF','User','system','getElementById','nfGDL','dark','117joNpNj','hGste','Error\x20accessing\x20camera:\x20','...?','message','What\x20are\x20the\x20key\x20points\x20mentioned\x20in\x20the\x20text?','uxTfU','\x20-\x20','[Processing]\x20No\x20OCR\x20text\x20found,\x20falling\x20back\x20to\x20image\x20analysis','remove','sTEwc','documentElement','PRjye','test','Image\x20captured!\x20Please\x20provide\x20your\x20requirements\x20for\x20the\x20quiz.','IYVDt','What\x20can\x20you\x20observe\x20in\x20this\x20image?','title','\x20minutes\x0a\x20\x20\x20\x20\x20\x20\x20\x20Topics:\x20','className','img','ASBpz','[UI]\x20Adding\x20quiz\x20to\x20chat:','chatMessages','vjgHm','cancelButton','add','gJjMH','148PKpdLe','Copied!','[OCR]\x20Worker\x20terminated','[Camera]\x20Stopping\x20track:','trim','image','384oBeILo','open_ended','stringify','themeToggle','22394HPTGWD','drawImage','videoHeight','getContext','SJeJW','image/jpeg','Ffmcx','terminate','onclick','4|2|1|3|0','iURAs','uSkfh','then','[Camera]\x20Starting\x20camera\x20initialization...','Mathematics','value','[Camera]\x20Stopping\x20camera...','appendChild','ReFBa','wZbJM','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Format\x20the\x20response\x20as\x20a\x20JSON\x20quiz\x20object\x20with\x20id,\x20grade,\x20subject,\x20title,\x20timeLimit,\x20topic,\x20and\x20questions\x20array.','window.ai\x20API\x20not\x20available','Description\x20of\x20visual\x20elements','uQXoh','keypress','Processing\x20image...','dTKmW','11346Ayshew','woXUz','efOje','nzafp','length','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20Questions:\x0a\x20\x20\x20\x20\x20\x20\x20\x20','NYMIl','kCgut','RNDOo','copy-button','iMzrz','KqBFI','mediaDevices','[Camera]\x20Camera\x20preview\x20started\x20and\x20container\x20displayed','initialize','toLowerCase','light','uzzIq','label','error','HCqyQ','now','UQfQC','NdzYK','cameraContainer','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Type:\x20','toString','[AI]\x20Windows\x20AI\x20API\x20not\x20found\x20in\x20window\x20object','prompt-suggestion','Geography','[Camera]\x20Camera\x20stopped\x20and\x20container\x20hidden','nnWYP','questions','videoWidth','includes','cylgX','button','BZXjX','5371780bTypXe','push','You\x20are\x20a\x20quiz\x20generator.\x20Create\x20a\x20quiz\x20based\x20on\x20the\x20following\x20image\x20context\x20and\x20user\x20requirements.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Image\x20context:\x20','\x0a\x0aUser\x20request:\x20','iTtqw','mTIUc','\x0a\x20\x20\x20\x20','slice','[Quiz]\x20Starting\x20quiz\x20generation\x20with\x20Gemini\x20Nano...','environment','Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz\x20using\x20Gemini\x20Nano\x20AI.\x20Please\x20try\x20again.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Points:\x20','CoeaC','scrollHeight','toISOString','wplVV','loadLanguage','GDhGH','[OCR]\x20Starting\x20text\x20extraction...','style','finally','Visual\x20Analysis','Iwgkr','scrollTop','toDataURL','getUserMedia','lhEnu','Option\x20D','addEventListener','180IPxWFP','[Quiz]\x20Fallback\x20generation\x20also\x20failed:','187370DLcKcY','[AI]\x20Image\x20recognition\x20completed.\x20Result:','jOich','\x20Quiz','Igdez','setItem','JmIwZ','createElement','click','[AI]\x20Performing\x20image\x20recognition...','History','[Camera]\x20Error\x20accessing\x20camera:','createImageSession','wwcXG','[AI]\x20Creating\x20image\x20recognition\x20session...','topic','bot-message','\x20\x20\x20','ZbWkx','OIjIh','PegNp','BJzyU','catch','hqyNB','WiPpH','div','cDfmx','Sorry,\x20I\x20couldn\x27t\x20process\x20the\x20image.\x20Please\x20try\x20again.','Xybxx','flex','options','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Grade:\x20','createWorker','oeBKc','[Quiz]\x20Generating\x20quiz...','confidence','OIOPr','dCYks','natbc','width','GYrZr','load','[OCR]\x20Error\x20in\x20text\x20extraction:','forEach','Washington\x20Drivers\x20License\x20Test','Please\x20capture\x20an\x20image\x20first\x20before\x20providing\x20quiz\x20requirements.','message\x20','[AI]\x20Image\x20session\x20created:','message\x20bot-message\x20streaming','sxOxD','YPXpp','Language\x20Arts','PYbTt','log','textContent','aIUeu','Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz.\x20Please\x20try\x20again.','Option\x20A','CzyXQ','854qzjDzU','data','multiple_choice','Copy\x20Quiz','lPGax','[Processing]\x20Starting\x20image\x20OCR\x20analysis...','300760krnhkX','map','zElZE','dqolK','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Time\x20Limit:\x20','getAttribute','Generating\x20quiz...','grade','Generate\x20multiple\x20choice\x20questions\x20about\x20this\x20picture','data-theme','[Processing]\x20Image\x20processing\x20completed:','[Camera]\x20Capturing\x20image...'];_0x5c99=function(){return _0x46575f;};return _0x5c99();}function stopCamera(){const _0x2e93bf=_0x5c6512,_0xe448be={'MnLBT':_0x2e93bf(0x11f),'kBAyf':_0x2e93bf(0x15f)};console[_0x2e93bf(0xae)](_0x2e93bf(0x136)),stream&&(stream['getTracks']()[_0x2e93bf(0xa4)](_0x366495=>{const _0x35ee80=_0x2e93bf;console[_0x35ee80(0xae)](_0xe448be['MnLBT'],_0x366495[_0x35ee80(0x153)]),_0x366495[_0x35ee80(0xd8)]();}),stream=null),cameraContainer[_0x2e93bf(0x17a)][_0x2e93bf(0xcd)]='none',console[_0x2e93bf(0xae)](_0xe448be['kBAyf']);}async function processImageUsingWindowAI(_0x143405){const _0x598641=_0x5c6512,_0x335da7={'iURAs':_0x598641(0xde),'pKaAA':_0x598641(0x87),'RFWSy':_0x598641(0x18f),'kCgut':_0x598641(0x187),'Xybxx':'[AI]\x20Error\x20during\x20image\x20processing:'};console[_0x598641(0xae)]('[AI]\x20Starting\x20image\x20processing...',_0x143405);if(!window['ai']){console[_0x598641(0x154)](_0x598641(0x15c));throw new Error(_0x335da7[_0x598641(0x130)]);}try{console[_0x598641(0xae)](_0x335da7['pKaAA']);const _0x534dd0=await window['ai'][_0x598641(0x85)]();console[_0x598641(0xae)](_0x598641(0xa8),_0x534dd0),console[_0x598641(0xae)](_0x335da7['RFWSy']);const _0xf913f0=await _0x534dd0[_0x598641(0xd9)](_0x143405);return console[_0x598641(0xae)](_0x335da7[_0x598641(0x148)],_0xf913f0),_0xf913f0;}catch(_0x3ac8c1){console[_0x598641(0x154)](_0x335da7[_0x598641(0x95)],_0x3ac8c1);throw _0x3ac8c1;}}function _0x410f(_0x572f1a,_0x2e0ca6){const _0x5c99d5=_0x5c99();return _0x410f=function(_0x410f1a,_0x3bd655){_0x410f1a=_0x410f1a-0x84;let _0x15bf40=_0x5c99d5[_0x410f1a];return _0x15bf40;},_0x410f(_0x572f1a,_0x2e0ca6);}async function processImageUsingTesseract(_0x3a335d){const _0x193724=_0x5c6512,_0x3a9c8c={'EezOH':function(_0x821253,_0x1c27a2,_0xbe9660){return _0x821253(_0x1c27a2,_0xbe9660);},'uSkfh':function(_0x11f796,_0x4282d6){return _0x11f796(_0x4282d6);},'WBATF':_0x193724(0xec),'cAlin':function(_0x20cf25,_0x3156e7){return _0x20cf25>_0x3156e7;},'GDhGH':_0x193724(0xa5),'uQXoh':function(_0x314746,_0x4325b0){return _0x314746(_0x4325b0);},'BZXjX':_0x193724(0x108),'Ffmcx':_0x193724(0xe2),'Igdez':'[Processing]\x20Error\x20during\x20image\x20processing:'};console[_0x193724(0xae)](_0x193724(0xb9)),_0x3a9c8c['EezOH'](addMessage,_0x193724(0x13f),![]);try{const _0x4bfdf2=await _0x3a9c8c[_0x193724(0x131)](extractTextFromImage,_0x3a335d);return console[_0x193724(0xae)](_0x3a9c8c[_0x193724(0xfa)],_0x4bfdf2),_0x4bfdf2[_0x193724(0xf3)]&&_0x3a9c8c['cAlin'](_0x4bfdf2[_0x193724(0xf3)]['trim']()[_0x193724(0x145)],0x0)?{'type':'text','content':_0x3a9c8c[_0x193724(0x178)],'confidence':_0x4bfdf2[_0x193724(0x9c)],'topics':_0x3a9c8c[_0x193724(0x13d)](generateTopics,_0x4bfdf2['text'])}:(console[_0x193724(0xae)](_0x3a9c8c[_0x193724(0x166)]),{'type':_0x193724(0x121),'content':'Visual\x20content\x20detected','topics':[_0x193724(0x17c),_0x3a9c8c[_0x193724(0x12c)]],'features':{'timestamp':new Date()[_0x193724(0x175)](),'dimensions':{'width':_0x3a335d[_0x193724(0xa0)],'height':_0x3a335d['height']}}});}catch(_0x56fc0f){console['error'](_0x3a9c8c[_0x193724(0x18a)],_0x56fc0f);throw _0x56fc0f;}}async function extractTextFromImage(_0x2002c8){const _0x4fd7f3=_0x5c6512,_0x4f1e73={'OIOPr':_0x4fd7f3(0x179),'RZKPV':_0x4fd7f3(0x11e),'ZOWZR':function(_0x58a0e7,_0x7fc403){return _0x58a0e7(_0x7fc403);},'RNDOo':'Image\x20and\x20text\x20analysis\x20complete'};console[_0x4fd7f3(0xae)](_0x4f1e73[_0x4fd7f3(0x9d)]);const _0x3ffa10=_0x4fd7f3(0xda);try{const _0x79f160=await Tesseract[_0x4fd7f3(0x99)]();await _0x79f160[_0x4fd7f3(0xa2)](),await _0x79f160[_0x4fd7f3(0x177)](_0x3ffa10),await _0x79f160[_0x4fd7f3(0x14f)](_0x3ffa10),console[_0x4fd7f3(0xae)]('[OCR]\x20Worker\x20initialized');const _0x2ec796=await _0x79f160[_0x4fd7f3(0xd9)](_0x2002c8);console[_0x4fd7f3(0xae)]('[OCR]\x20Text\x20extracted:',_0x2ec796[_0x4fd7f3(0xb5)]['text']),await _0x79f160[_0x4fd7f3(0x12d)](),console[_0x4fd7f3(0xae)](_0x4f1e73['RZKPV']);const _0xb3acbe={'timestamp':new Date()[_0x4fd7f3(0x175)](),'imageSize':{'width':_0x2002c8[_0x4fd7f3(0xa0)],'height':_0x2002c8[_0x4fd7f3(0xd6)]},'extractedText':_0x2ec796[_0x4fd7f3(0xb5)]['text'],'confidenceScore':_0x2ec796['data'][_0x4fd7f3(0x9c)],'suggestedTopics':_0x4f1e73['ZOWZR'](generateTopics,_0x2ec796[_0x4fd7f3(0xb5)]['text'])};return{'description':_0x4f1e73[_0x4fd7f3(0x149)],'metadata':_0xb3acbe,'text':_0x2ec796[_0x4fd7f3(0xb5)][_0x4fd7f3(0xf3)],'confidence':_0x2ec796[_0x4fd7f3(0xb5)]['confidence']};}catch(_0x87fec9){return console[_0x4fd7f3(0x154)](_0x4fd7f3(0xa3),_0x87fec9),{'text':'','confidence':0x0};}}function generateTopics(_0x7c3e83){const _0x227cb9=_0x5c6512,_0x56f67d={'sxOxD':_0x227cb9(0x134),'nnWYP':_0x227cb9(0xd0),'nfGDL':_0x227cb9(0x190),'NYMIl':_0x227cb9(0x15e),'wwcXG':_0x227cb9(0xac),'nzafp':'Art','nuoeY':function(_0x16ae0a,_0x127caa){return _0x16ae0a===_0x127caa;},'dCYks':'General\x20Knowledge'},_0x50166d=new Set(),_0x2459b4=_0x7c3e83[_0x227cb9(0x150)](),_0x403a71=[{'pattern':/\b(math|equation|calculate|formula|number)\b/,'topic':_0x56f67d[_0x227cb9(0xaa)]},{'pattern':/\b(science|experiment|chemical|biology|physics)\b/,'topic':_0x56f67d[_0x227cb9(0x160)]},{'pattern':/\b(history|century|ancient|war|empire|civilization)\b/,'topic':_0x56f67d[_0x227cb9(0xfe)]},{'pattern':/\b(geography|country|capital|mountain|river|climate)\b/,'topic':_0x56f67d[_0x227cb9(0x147)]},{'pattern':/\b(grammar|sentence|paragraph|essay|writing)\b/,'topic':_0x56f67d[_0x227cb9(0x86)]},{'pattern':/\b(art|color|design|paint|draw)\b/,'topic':_0x56f67d[_0x227cb9(0x144)]}];return _0x403a71['forEach'](_0x5ab55a=>{const _0x2b5cca=_0x227cb9;_0x5ab55a[_0x2b5cca(0xca)][_0x2b5cca(0x10d)](_0x2459b4)&&_0x50166d[_0x2b5cca(0x11a)](_0x5ab55a[_0x2b5cca(0x88)]);}),_0x56f67d['nuoeY'](_0x50166d[_0x227cb9(0xf4)],0x0)&&_0x50166d[_0x227cb9(0x11a)](_0x56f67d[_0x227cb9(0x9e)]),Array['from'](_0x50166d);}async function generateQuizUsingAI(_0x263ad2,_0x4aef5c){const _0x5022e4=_0x5c6512,_0x5784ca={'NINPc':_0x5022e4(0x16f),'DviWT':_0x5022e4(0xdc),'lUdOz':_0x5022e4(0x13b),'XbpgM':_0x5022e4(0xfc),'optzF':'user','lfbwF':_0x5022e4(0x92),'SudRY':_0x5022e4(0xa9),'mTIUc':function(_0x5ba1d9,_0x1ff7d6,_0x1afa7d){return _0x5ba1d9(_0x1ff7d6,_0x1afa7d);},'PegNp':_0x5022e4(0xc0),'uzzIq':function(_0x3ba49e){return _0x3ba49e();},'OIjIh':function(_0xda62d2,_0x4c39b5){return _0xda62d2(_0x4c39b5);},'iMzrz':function(_0x8f707,_0x220e65,_0x25ba97){return _0x8f707(_0x220e65,_0x25ba97);},'VXkMC':_0x5022e4(0xe4),'vjgHm':_0x5022e4(0xe6),'CoeaC':_0x5022e4(0xf0),'JeZSg':function(_0x4cb5b5){return _0x4cb5b5();},'KOeOU':function(_0x16b4f0,_0x57394f,_0xaccd42){return _0x16b4f0(_0x57394f,_0xaccd42);},'VEHgf':_0x5022e4(0x171),'zElZE':function(_0x440b41,_0x691a18,_0x1e2a35){return _0x440b41(_0x691a18,_0x1e2a35);},'HlLvf':'Generated\x20a\x20basic\x20quiz\x20without\x20AI\x20assistance:','PYbTt':_0x5022e4(0x185),'sTEwc':function(_0x3d798d,_0x1d55d5,_0x7797b6){return _0x3d798d(_0x1d55d5,_0x7797b6);},'SJeJW':'Quiz\x20generation\x20failed\x20completely.\x20Please\x20try\x20again\x20later.'};console['log'](_0x5784ca[_0x5022e4(0xe8)],{'imageContext':_0x263ad2,'userPrompt':_0x4aef5c});try{console['log'](_0x5784ca['DviWT'],JSON[_0x5022e4(0x124)](_0x263ad2));if(!window['ai'])throw new Error(_0x5784ca[_0x5022e4(0xc9)]);const _0x1361c5=_0x5022e4(0x169)+JSON['stringify'](_0x263ad2)+_0x5022e4(0x13a);console[_0x5022e4(0xae)]('[Quiz]\x20Constructed\x20system\x20prompt:',_0x1361c5);const _0x4cd865=[{'role':_0x5784ca[_0x5022e4(0xcc)],'content':_0x1361c5},{'role':_0x5784ca['optzF'],'content':_0x4aef5c}],_0x2ef2ca=document[_0x5022e4(0x18d)](_0x5784ca[_0x5022e4(0xf2)]);_0x2ef2ca[_0x5022e4(0x113)]=_0x5784ca['SudRY'],chatMessages[_0x5022e4(0x137)](_0x2ef2ca),_0x5784ca[_0x5022e4(0x16c)](showTypingIndicator,chatMessages,_0x5784ca[_0x5022e4(0x8d)]);if(!aiLanguageSession)await _0x5784ca[_0x5022e4(0x152)](initializeLanguageSession);const _0xd24599=await aiLanguageSession['promptStreaming'](_0x1361c5+_0x5022e4(0x16a)+_0x4aef5c);let _0x2d8780='';for await(const _0x13f5a2 of _0xd24599){_0x2d8780+=_0x13f5a2,_0x2ef2ca[_0x5022e4(0xaf)]=_0x2d8780,chatMessages[_0x5022e4(0x17e)]=chatMessages[_0x5022e4(0x174)];}_0x2ef2ca[_0x5022e4(0x109)]();let _0x2168f4;try{_0x2168f4=_0x5784ca[_0x5022e4(0x8c)](safeJSONParse,_0x2d8780),_0x5784ca[_0x5022e4(0x14b)](addMessage,_0x5784ca[_0x5022e4(0xf7)],![]),_0x5784ca[_0x5022e4(0x8c)](addQuiz,_0x2168f4);}catch(_0x55441c){console['error'](_0x5784ca[_0x5022e4(0x118)],_0x55441c),addMessage(_0x2d8780,![]);throw _0x55441c;}_0x5784ca[_0x5022e4(0x152)](removeTypingIndicator);}catch(_0x1c324e){console[_0x5022e4(0x154)](_0x5784ca[_0x5022e4(0x173)],_0x1c324e),_0x5784ca[_0x5022e4(0xe9)](removeTypingIndicator),_0x5784ca['KOeOU'](addMessage,_0x5784ca['VEHgf'],![]);try{const _0x2a62b4=await _0x5784ca[_0x5022e4(0xbc)](generateQuizWithoutAI,_0x263ad2,_0x4aef5c);_0x5784ca['zElZE'](addMessage,_0x5784ca[_0x5022e4(0xef)],![]),addQuiz(_0x2a62b4);}catch(_0x50a2ce){console[_0x5022e4(0x154)](_0x5784ca[_0x5022e4(0xad)],_0x50a2ce),_0x5784ca[_0x5022e4(0x10a)](addMessage,_0x5784ca[_0x5022e4(0x12a)],![]);}}}function generateOptionsFromText(_0x5ca6b2){const _0x4e2dcc=_0x5c6512,_0x1bf4a4={'abefF':function(_0x5477d5,_0x27c8b5){return _0x5477d5+_0x27c8b5;},'OcvMg':'Additional\x20option\x20','NBZyw':function(_0x5ee587,_0x3c01a3){return _0x5ee587+_0x3c01a3;}},_0x216173=_0x5ca6b2['split'](/[.!?]+/)['filter'](_0x4b9966=>_0x4b9966[_0x4e2dcc(0x120)]()['length']>0x0),_0x2a547a=_0x216173[_0x4e2dcc(0x16e)](0x0,0x4)[_0x4e2dcc(0xbb)](_0x55cae7=>_0x55cae7[_0x4e2dcc(0x120)]());while(_0x2a547a['length']<0x4){_0x2a547a['push'](_0x1bf4a4['abefF'](_0x1bf4a4['OcvMg'],_0x1bf4a4['NBZyw'](_0x2a547a[_0x4e2dcc(0x145)],0x1)));}return _0x2a547a;}function generateCustomQuestion(_0x56a735,_0x16b308){const _0x5f1de4=_0x5c6512,_0x213ab0={'lZWTl':'what'};return _0x56a735['toLowerCase']()[_0x5f1de4(0x163)](_0x213ab0[_0x5f1de4(0xf5)])?_0x56a735:'What\x20is\x20the\x20significance\x20of\x20'+_0x16b308['split']('\x20')[_0x5f1de4(0x16e)](0x0,0x3)[_0x5f1de4(0xd7)]('\x20')+_0x5f1de4(0x103);}function addMessage(_0x4c633b,_0x328460=![]){const _0x47d46a=_0x5c6512,_0x4e1f11={'YPXpp':_0x47d46a(0xfb),'lkAgr':_0x47d46a(0x92),'xqath':'user-message','XeHqs':_0x47d46a(0x89)};console[_0x47d46a(0xae)]('[UI]\x20Adding\x20message:\x20'+(_0x328460?_0x4e1f11[_0x47d46a(0xab)]:'Bot')+':',_0x4c633b);const _0x4a6cb4=document[_0x47d46a(0x18d)](_0x4e1f11[_0x47d46a(0xe7)]);_0x4a6cb4[_0x47d46a(0x113)]=_0x47d46a(0xa7)+(_0x328460?_0x4e1f11[_0x47d46a(0xd1)]:_0x4e1f11['XeHqs']),_0x4a6cb4[_0x47d46a(0xaf)]=_0x4c633b,chatMessages[_0x47d46a(0x137)](_0x4a6cb4),chatMessages['scrollTop']=chatMessages['scrollHeight'];}function addQuiz(_0x5e794d){const _0xeb357a=_0x5c6512,_0x1975dd={'ReFBa':_0xeb357a(0xdf),'UQfQC':_0xeb357a(0x165),'ASBpz':_0xeb357a(0x14a),'woXUz':'Copy\x20Quiz'};console[_0xeb357a(0xae)](_0xeb357a(0x116),_0x5e794d);const _0x56468b=document[_0xeb357a(0x18d)](_0xeb357a(0x92));_0x56468b[_0xeb357a(0x113)]='quiz-container';const _0x449b67=_0xeb357a(0xd5)+_0x5e794d[_0xeb357a(0x111)]+_0xeb357a(0x98)+_0x5e794d[_0xeb357a(0xc1)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20Subject:\x20'+_0x5e794d['subject']+_0xeb357a(0xbe)+_0x5e794d['timeLimit']+_0xeb357a(0x112)+_0x5e794d[_0xeb357a(0x88)]+_0xeb357a(0x146)+_0x5e794d[_0xeb357a(0x161)][_0xeb357a(0xbb)]((_0x582089,_0x1d05dd)=>_0xeb357a(0xe0)+(_0x1d05dd+0x1)+'.\x20'+_0x582089['question']+_0xeb357a(0xe0)+(_0x582089[_0xeb357a(0x97)]?_0x582089[_0xeb357a(0x97)][_0xeb357a(0xbb)]((_0x829495,_0x11251d)=>_0xeb357a(0x8a)+String['fromCharCode'](0x61+_0x11251d)+')\x20'+_0x829495)[_0xeb357a(0xd7)]('\x0a'):'')+_0xeb357a(0x15a)+_0x582089[_0xeb357a(0xf8)]+_0xeb357a(0x172)+_0x582089['points']+_0xeb357a(0xe0))[_0xeb357a(0xd7)]('\x0a')+_0xeb357a(0x16d),_0x41ccb3=document[_0xeb357a(0x18d)](_0x1975dd[_0xeb357a(0x138)]);_0x41ccb3['textContent']=_0x449b67,_0x56468b[_0xeb357a(0x137)](_0x41ccb3);const _0x361951=document[_0xeb357a(0x18d)](_0x1975dd[_0xeb357a(0x157)]);_0x361951[_0xeb357a(0x113)]=_0x1975dd[_0xeb357a(0x115)],_0x361951[_0xeb357a(0xaf)]=_0x1975dd[_0xeb357a(0x142)],_0x361951[_0xeb357a(0x12e)]=()=>{const _0x19a8f0=_0xeb357a;navigator['clipboard'][_0x19a8f0(0xdb)](_0x449b67)[_0x19a8f0(0x132)](()=>_0x361951[_0x19a8f0(0xaf)]=_0x19a8f0(0x11d))[_0x19a8f0(0x8f)](_0x7c8f14=>console['error']('Copy\x20failed:',_0x7c8f14))[_0x19a8f0(0x17b)](()=>setTimeout(()=>_0x361951[_0x19a8f0(0xaf)]=_0x19a8f0(0xb7),0x7d0));},_0x56468b[_0xeb357a(0x137)](_0x361951),chatMessages[_0xeb357a(0x137)](_0x56468b),chatMessages[_0xeb357a(0x17e)]=chatMessages['scrollHeight'];}async function captureImage(){const _0x435cb9=_0x5c6512,_0x4edee9={'efOje':_0x435cb9(0x92),'thbWh':'canvas','BJzyU':_0x435cb9(0x114),'Iwgkr':_0x435cb9(0x12b),'lDiOA':_0x435cb9(0xd4),'zhHUp':function(_0x15dc0f){return _0x15dc0f();},'dryEk':_0x435cb9(0xc4),'jOich':function(_0x2b55b4,_0xdffcc0,_0x516f48){return _0x2b55b4(_0xdffcc0,_0x516f48);},'VmzBa':function(_0x44c331,_0x204e13){return _0x44c331===_0x204e13;},'PRjye':_0x435cb9(0xf3),'mVnna':_0x435cb9(0xc2),'JmIwZ':'Make\x20a\x20quiz\x20suitable\x20for\x20beginners','hqyNB':_0x435cb9(0x94)};console[_0x435cb9(0xae)](_0x435cb9(0xc5));try{const _0x41d25b=document[_0x435cb9(0x18d)](_0x4edee9['thbWh']);_0x41d25b[_0x435cb9(0xa0)]=cameraPreview[_0x435cb9(0x162)],_0x41d25b[_0x435cb9(0xd6)]=cameraPreview[_0x435cb9(0x128)],_0x41d25b[_0x435cb9(0x129)]('2d')[_0x435cb9(0x127)](cameraPreview,0x0,0x0);const _0x5778ea=document['createElement'](_0x4edee9[_0x435cb9(0x8e)]);_0x5778ea['src']=_0x41d25b[_0x435cb9(0x17f)](_0x4edee9[_0x435cb9(0x17d)]),_0x5778ea[_0x435cb9(0x113)]=_0x4edee9[_0x435cb9(0xe3)];const _0x504484=document[_0x435cb9(0x18d)](_0x4edee9['efOje']);_0x504484[_0x435cb9(0x113)]=_0x435cb9(0xdd),_0x504484[_0x435cb9(0x137)](_0x5778ea),chatMessages['appendChild'](_0x504484),_0x4edee9[_0x435cb9(0xea)](stopCamera);const _0x20c6b5=await processImageUsingTesseract(_0x5778ea);imageContext=_0x20c6b5,console[_0x435cb9(0xae)](_0x4edee9['dryEk'],JSON['stringify'](imageContext,null,0x2)),_0x4edee9[_0x435cb9(0x188)](addMessage,_0x435cb9(0x10e),![]);const _0x16c23e=['Create\x20a\x20quiz\x20about\x20'+imageContext[_0x435cb9(0xc8)][0x0]+_0x435cb9(0x107)+imageContext[_0x435cb9(0xeb)],_0x4edee9[_0x435cb9(0xd3)](imageContext[_0x435cb9(0xf8)],_0x4edee9[_0x435cb9(0x10c)])?'Generate\x20questions\x20based\x20on\x20the\x20image\x20related\x20text\x20-\x20'+imageContext[_0x435cb9(0xeb)]:_0x4edee9['mVnna'],_0x4edee9[_0x435cb9(0x18c)]];_0x16c23e['forEach'](_0x57074b=>{const _0x3588f7=_0x435cb9,_0x28ff3b=document[_0x3588f7(0x18d)](_0x4edee9[_0x3588f7(0x143)]);_0x28ff3b['className']=_0x3588f7(0x15d),_0x28ff3b[_0x3588f7(0xaf)]=_0x57074b,_0x28ff3b[_0x3588f7(0x12e)]=()=>{const _0xd01b44=_0x3588f7;messageInput[_0xd01b44(0x135)]=_0x57074b,sendMessage();},chatMessages['appendChild'](_0x28ff3b);});}catch(_0x3d3a27){console[_0x435cb9(0x154)](_0x435cb9(0xee),_0x3d3a27),addMessage(_0x4edee9[_0x435cb9(0x90)],![]);}}async function sendMessage(){const _0xaa134f=_0x5c6512,_0x1bcfe7={'TZsGr':'[Chat]\x20Sending\x20message:','MwZFE':function(_0x16d1df,_0x2ebc3a,_0x13805c){return _0x16d1df(_0x2ebc3a,_0x13805c);},'CzyXQ':function(_0x514a72,_0x1637ba,_0x134649){return _0x514a72(_0x1637ba,_0x134649);},'cDfmx':function(_0x50c95c,_0x2531f7,_0x53449a){return _0x50c95c(_0x2531f7,_0x53449a);},'dqolK':'I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20requirements:','oeBKc':function(_0x138804,_0x8bde8d){return _0x138804(_0x8bde8d);},'sammN':function(_0x43d292,_0x187c1a,_0x41cb03){return _0x43d292(_0x187c1a,_0x41cb03);},'ATSXx':function(_0x25b4bc,_0x3a5e5e,_0x558e21){return _0x25b4bc(_0x3a5e5e,_0x558e21);},'natbc':_0xaa134f(0xa6)},_0x4e235a=messageInput[_0xaa134f(0x135)][_0xaa134f(0x120)]();if(!_0x4e235a)return;console[_0xaa134f(0xae)](_0x1bcfe7['TZsGr'],_0x4e235a),_0x1bcfe7['MwZFE'](addMessage,_0x4e235a,!![]),messageInput[_0xaa134f(0x135)]='';if(imageContext)try{const _0x1af5ae=await _0x1bcfe7[_0xaa134f(0xb3)](generateQuizUsingAI,imageContext,_0x4e235a);_0x1bcfe7[_0xaa134f(0x93)](addMessage,_0x1bcfe7[_0xaa134f(0xbd)],![]),_0x1bcfe7[_0xaa134f(0x9a)](addQuiz,_0x1af5ae);}catch(_0x36c631){_0x1bcfe7['sammN'](addMessage,_0xaa134f(0xb1),![]);}else _0x1bcfe7['ATSXx'](addMessage,_0x1bcfe7[_0xaa134f(0x9f)],![]);}function toggleTheme(){const _0x4df44a=_0x5c6512,_0x5ee309={'lhEnu':_0x4df44a(0xc3),'ZbWkx':_0x4df44a(0xff),'cylgX':_0x4df44a(0x151)},_0x27d4a7=document[_0x4df44a(0x10b)],_0x5b2401=_0x27d4a7[_0x4df44a(0xbf)](_0x5ee309[_0x4df44a(0x181)]),_0x1b4370=_0x5b2401===_0x5ee309[_0x4df44a(0x8b)]?_0x5ee309[_0x4df44a(0x164)]:_0x5ee309['ZbWkx'];_0x27d4a7['setAttribute'](_0x5ee309[_0x4df44a(0x181)],_0x1b4370),localStorage[_0x4df44a(0x18b)]('theme',_0x1b4370);}themeToggle[_0x5c6512(0x183)](_0x5c6512(0x18e),toggleTheme),cameraButton[_0x5c6512(0x183)]('click',startCamera),captureButton[_0x5c6512(0x183)](_0x5c6512(0x18e),captureImage),cancelButton[_0x5c6512(0x183)](_0x5c6512(0x18e),stopCamera),sendButton['addEventListener'](_0x5c6512(0x18e),sendMessage),messageInput[_0x5c6512(0x183)](_0x5c6512(0x13e),_0xd30473=>{const _0x884b89=_0x5c6512,_0x7971d={'sDmuk':function(_0x2d26b5,_0x5b8317){return _0x2d26b5===_0x5b8317;},'KqBFI':'Enter','wZbJM':function(_0x3a8d22){return _0x3a8d22();}};if(_0x7971d['sDmuk'](_0xd30473['key'],_0x7971d[_0x884b89(0x14c)]))_0x7971d[_0x884b89(0x139)](sendMessage);});async function generateQuizWithoutAI(_0x47dfa8,_0x2dfd4c){const _0x453a53=_0x5c6512,_0x2154d8={'gJjMH':_0x453a53(0x9b),'uxTfU':function(_0x2ee890,_0x326ed0){return _0x2ee890===_0x326ed0;},'rCYrr':_0x453a53(0xf3),'hGste':_0x453a53(0xd2),'GYrZr':function(_0x110d76,_0xabb312){return _0x110d76(_0xabb312);},'ltxyC':_0x453a53(0xb2),'pxvgw':_0x453a53(0x105),'dTKmW':_0x453a53(0x123),'NdzYK':_0x453a53(0xc6),'WiPpH':_0x453a53(0x13c),'IYVDt':function(_0x32d8a7,_0xfdf225,_0x3da96c){return _0x32d8a7(_0xfdf225,_0x3da96c);},'aIUeu':'multiple_choice','xWyre':'Option\x20B','EpQJc':_0x453a53(0xce),'lPGax':_0x453a53(0x182),'YuwYw':'[Quiz]\x20Error\x20generating\x20quiz:'};console['log'](_0x2154d8[_0x453a53(0x11b)],{'imageContext':_0x47dfa8,'userPrompt':_0x2dfd4c});try{const _0x3ebff0=_0x2154d8[_0x453a53(0x106)](_0x47dfa8[_0x453a53(0xf8)],_0x2154d8['rCYrr']),_0x5bbbbe=_0x47dfa8[_0x453a53(0xeb)],_0x1100ed=_0x47dfa8[_0x453a53(0xc8)],_0x18d991=[];_0x3ebff0?(_0x18d991[_0x453a53(0x168)]({'question':_0x2154d8[_0x453a53(0x101)],'type':_0x453a53(0xb6),'options':_0x2154d8[_0x453a53(0xa1)](generateOptionsFromText,_0x5bbbbe),'answer':_0x2154d8['ltxyC'],'points':0x2}),_0x18d991[_0x453a53(0x168)]({'question':_0x2154d8['pxvgw'],'type':_0x2154d8[_0x453a53(0x140)],'answer':_0x2154d8[_0x453a53(0x158)],'points':0x2})):_0x18d991[_0x453a53(0x168)]({'question':_0x453a53(0x110),'type':_0x2154d8[_0x453a53(0x140)],'answer':_0x2154d8[_0x453a53(0x91)],'points':0x2});_0x18d991['push']({'question':_0x2154d8[_0x453a53(0x10f)](generateCustomQuestion,_0x2dfd4c,_0x5bbbbe),'type':_0x2154d8[_0x453a53(0xb0)],'options':[_0x453a53(0xb2),_0x2154d8['xWyre'],_0x2154d8['EpQJc'],_0x2154d8[_0x453a53(0xb8)]],'answer':_0x453a53(0xb2),'points':0x2});const _0x8371e3={'id':Date[_0x453a53(0x156)]()[_0x453a53(0x15b)](),'title':_0x1100ed[0x0]+_0x453a53(0x189),'subject':_0x1100ed[0x0],'grade':_0x453a53(0xf6),'timeLimit':0xf,'topic':_0x1100ed[_0x453a53(0xd7)](',\x20'),'questions':_0x18d991};return _0x8371e3;}catch(_0x2b145a){console[_0x453a53(0x154)](_0x2154d8['YuwYw'],_0x2b145a);throw _0x2b145a;}}