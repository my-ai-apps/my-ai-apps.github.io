
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x51485f=_0x3c91;(function(_0x4c64dc,_0x6b967e){const _0x26bc29=_0x3c91,_0x28dce5=_0x4c64dc();while(!![]){try{const _0x573edf=-parseInt(_0x26bc29(0x176))/0x1*(-parseInt(_0x26bc29(0x207))/0x2)+-parseInt(_0x26bc29(0x18f))/0x3*(parseInt(_0x26bc29(0x19c))/0x4)+-parseInt(_0x26bc29(0x1c2))/0x5*(parseInt(_0x26bc29(0x283))/0x6)+-parseInt(_0x26bc29(0x1a6))/0x7*(parseInt(_0x26bc29(0x1f9))/0x8)+parseInt(_0x26bc29(0x23b))/0x9+-parseInt(_0x26bc29(0x1d2))/0xa+parseInt(_0x26bc29(0x1b8))/0xb;if(_0x573edf===_0x6b967e)break;else _0x28dce5['push'](_0x28dce5['shift']());}catch(_0x3a6d3f){_0x28dce5['push'](_0x28dce5['shift']());}}}(_0x2072,0x1e053));import{Logger}from'./common.js';const chatMessages=document[_0x51485f(0x209)](_0x51485f(0x1cb)),messageInput=document[_0x51485f(0x209)](_0x51485f(0x226)),sendButton=document[_0x51485f(0x209)](_0x51485f(0x21b)),cameraButton=document['getElementById'](_0x51485f(0x1e4)),themeToggle=document[_0x51485f(0x209)](_0x51485f(0x261)),cameraContainer=document[_0x51485f(0x209)]('cameraContainer'),cameraPreview=document[_0x51485f(0x209)](_0x51485f(0x1f0)),captureButton=document['getElementById'](_0x51485f(0x17a)),cancelButton=document['getElementById'](_0x51485f(0x1bc));let stream=null,imageContext=null;async function startCamera(){const _0x1dada0=_0x51485f,_0xa107fa={'uXNwa':'[Camera]\x20Starting\x20camera\x20initialization...','OIcpb':_0x1dada0(0x186),'eovBm':_0x1dada0(0x1f6),'mctCA':_0x1dada0(0x279),'esvKb':_0x1dada0(0x1f7),'wHkKo':function(_0x42ed6b,_0x21090b){return _0x42ed6b(_0x21090b);},'TVovO':_0x1dada0(0x242)};console[_0x1dada0(0x1d7)](_0xa107fa[_0x1dada0(0x214)]);try{stream=await navigator[_0x1dada0(0x269)][_0x1dada0(0x265)]({'video':{'facingMode':_0xa107fa[_0x1dada0(0x273)]}}),console['log'](_0xa107fa[_0x1dada0(0x1df)],stream),cameraPreview['srcObject']=stream,cameraContainer[_0x1dada0(0x264)][_0x1dada0(0x1fd)]=_0xa107fa[_0x1dada0(0x18c)],console[_0x1dada0(0x1d7)]('[Camera]\x20Camera\x20preview\x20started\x20and\x20container\x20displayed');}catch(_0x3c7fab){console[_0x1dada0(0x252)](_0xa107fa[_0x1dada0(0x229)],_0x3c7fab),_0xa107fa[_0x1dada0(0x22c)](addMessage,_0xa107fa[_0x1dada0(0x27a)]+_0x3c7fab[_0x1dada0(0x1eb)]);}}function _0x3c91(_0x49d577,_0x40675f){const _0x2072f7=_0x2072();return _0x3c91=function(_0x3c9167,_0x2d813e){_0x3c9167=_0x3c9167-0x176;let _0x36408e=_0x2072f7[_0x3c9167];return _0x36408e;},_0x3c91(_0x49d577,_0x40675f);}function stopCamera(){const _0x235692=_0x51485f,_0x50b8a6={'QinSp':'[Camera]\x20Stopping\x20track:','LAyiQ':_0x235692(0x237)};console[_0x235692(0x1d7)](_0x50b8a6[_0x235692(0x21a)]),stream&&(stream[_0x235692(0x184)]()[_0x235692(0x24a)](_0x482768=>{const _0x4bbb1a=_0x235692;console[_0x4bbb1a(0x1d7)](_0x50b8a6['QinSp'],_0x482768[_0x4bbb1a(0x251)]),_0x482768[_0x4bbb1a(0x1ec)]();}),stream=null),cameraContainer[_0x235692(0x264)]['display']=_0x235692(0x215),console[_0x235692(0x1d7)](_0x235692(0x20e));}async function processImageUsingWindowAI(_0x5e1975){const _0x7f7727=_0x51485f,_0x549d42={'AUaSC':_0x7f7727(0x1da),'aVhUU':_0x7f7727(0x1e6),'oObca':_0x7f7727(0x190),'IQsYH':_0x7f7727(0x241),'wozKx':'[AI]\x20Performing\x20image\x20recognition...','TdTda':_0x7f7727(0x262)};console[_0x7f7727(0x1d7)](_0x549d42[_0x7f7727(0x1ae)],_0x5e1975);if(!window['ai']){console['error'](_0x549d42[_0x7f7727(0x24e)]);throw new Error(_0x549d42[_0x7f7727(0x1e7)]);}try{console[_0x7f7727(0x1d7)](_0x549d42['IQsYH']);const _0x2b9532=await window['ai']['createImageSession']();console[_0x7f7727(0x1d7)](_0x7f7727(0x17c),_0x2b9532),console[_0x7f7727(0x1d7)](_0x549d42['wozKx']);const _0x193aee=await _0x2b9532[_0x7f7727(0x1cc)](_0x5e1975);return console[_0x7f7727(0x1d7)](_0x549d42[_0x7f7727(0x1f3)],_0x193aee),_0x193aee;}catch(_0x247eee){console[_0x7f7727(0x252)](_0x7f7727(0x180),_0x247eee);throw _0x247eee;}}async function processImageUsingTesseract(_0xb3f3a){const _0xee9781=_0x51485f,_0x524b58={'WKDgE':'[Processing]\x20Starting\x20image\x20OCR\x20analysis...','MlMJx':function(_0x1d0ec4,_0x93cd0,_0x53e126){return _0x1d0ec4(_0x93cd0,_0x53e126);},'WKQgs':_0xee9781(0x197),'uqxkw':'[OCR]\x20Text\x20extraction\x20result:','wEpsW':function(_0x3bdafc,_0xf6a7ab){return _0x3bdafc>_0xf6a7ab;},'qQNHy':'Washington\x20Drivers\x20License\x20Test','NCnZq':function(_0x530545,_0xe1adc9){return _0x530545(_0xe1adc9);},'rzcJC':_0xee9781(0x270),'uCgGW':_0xee9781(0x208),'KZPpd':_0xee9781(0x1fa),'wOQyB':_0xee9781(0x25b)};console[_0xee9781(0x1d7)](_0x524b58[_0xee9781(0x260)]),_0x524b58['MlMJx'](addMessage,_0x524b58[_0xee9781(0x1c8)],![]);try{const _0x1cca94=await extractTextFromImage(_0xb3f3a);return console[_0xee9781(0x1d7)](_0x524b58['uqxkw'],_0x1cca94),_0x1cca94[_0xee9781(0x24d)]&&_0x524b58[_0xee9781(0x274)](_0x1cca94[_0xee9781(0x24d)][_0xee9781(0x26a)]()['length'],0x0)?{'type':_0xee9781(0x24d),'content':_0x524b58[_0xee9781(0x203)],'confidence':_0x1cca94[_0xee9781(0x204)],'topics':_0x524b58[_0xee9781(0x18b)](generateTopics,_0x1cca94[_0xee9781(0x24d)])}:(console['log'](_0xee9781(0x1c9)),{'type':_0x524b58[_0xee9781(0x287)],'content':_0x524b58[_0xee9781(0x194)],'topics':[_0xee9781(0x206),_0x524b58[_0xee9781(0x1ca)]],'features':{'timestamp':new Date()[_0xee9781(0x212)](),'dimensions':{'width':_0xb3f3a[_0xee9781(0x1fe)],'height':_0xb3f3a[_0xee9781(0x284)]}}});}catch(_0x2cd9b3){console[_0xee9781(0x252)](_0x524b58['wOQyB'],_0x2cd9b3);throw _0x2cd9b3;}}async function extractTextFromImage(_0x16efe4){const _0x28c3e1=_0x51485f,_0xf9b584={'WmIDb':_0x28c3e1(0x201),'MuhOO':_0x28c3e1(0x27b),'XppsB':_0x28c3e1(0x1ee),'olAtN':function(_0x34f66f,_0x1beb55){return _0x34f66f(_0x1beb55);},'YsLkF':'Image\x20and\x20text\x20analysis\x20complete','hXgYd':'[OCR]\x20Error\x20in\x20text\x20extraction:'};console[_0x28c3e1(0x1d7)](_0x28c3e1(0x1e5));const _0x5b0ce8=_0xf9b584['WmIDb'];try{const _0xbc665b=await Tesseract[_0x28c3e1(0x239)]();await _0xbc665b[_0x28c3e1(0x1b9)](),await _0xbc665b[_0x28c3e1(0x257)](_0x5b0ce8),await _0xbc665b['initialize'](_0x5b0ce8),console[_0x28c3e1(0x1d7)](_0xf9b584[_0x28c3e1(0x228)]);const _0x36d957=await _0xbc665b['recognize'](_0x16efe4);console[_0x28c3e1(0x1d7)](_0xf9b584[_0x28c3e1(0x1e3)],_0x36d957[_0x28c3e1(0x1de)]['text']),await _0xbc665b[_0x28c3e1(0x19b)](),console['log'](_0x28c3e1(0x20b));const _0x4d8b17={'timestamp':new Date()[_0x28c3e1(0x212)](),'imageSize':{'width':_0x16efe4[_0x28c3e1(0x1fe)],'height':_0x16efe4[_0x28c3e1(0x284)]},'extractedText':_0x36d957[_0x28c3e1(0x1de)][_0x28c3e1(0x24d)],'confidenceScore':_0x36d957[_0x28c3e1(0x1de)][_0x28c3e1(0x204)],'suggestedTopics':_0xf9b584[_0x28c3e1(0x216)](generateTopics,_0x36d957[_0x28c3e1(0x1de)][_0x28c3e1(0x24d)])};return{'description':_0xf9b584[_0x28c3e1(0x205)],'metadata':_0x4d8b17,'text':_0x36d957['data'][_0x28c3e1(0x24d)],'confidence':_0x36d957[_0x28c3e1(0x1de)]['confidence']};}catch(_0x82af6b){return console['error'](_0xf9b584[_0x28c3e1(0x1b3)],_0x82af6b),{'text':'','confidence':0x0};}}function generateTopics(_0xf1643c){const _0x24f301=_0x51485f,_0x22ca7b={'zuzEN':_0x24f301(0x1cd),'AJwnU':_0x24f301(0x22a),'MqJaL':_0x24f301(0x1a0),'CAdWy':_0x24f301(0x185),'DQxcv':function(_0x539723,_0x9e2118){return _0x539723===_0x9e2118;},'SnErw':_0x24f301(0x1fa)},_0x52f628=new Set(),_0x3944d6=_0xf1643c[_0x24f301(0x23f)](),_0x2e0ade=[{'pattern':/\b(math|equation|calculate|formula|number)\b/,'topic':_0x24f301(0x1ea)},{'pattern':/\b(science|experiment|chemical|biology|physics)\b/,'topic':_0x22ca7b[_0x24f301(0x263)]},{'pattern':/\b(history|century|ancient|war|empire|civilization)\b/,'topic':_0x22ca7b[_0x24f301(0x243)]},{'pattern':/\b(geography|country|capital|mountain|river|climate)\b/,'topic':_0x22ca7b[_0x24f301(0x181)]},{'pattern':/\b(grammar|sentence|paragraph|essay|writing)\b/,'topic':_0x22ca7b[_0x24f301(0x25e)]},{'pattern':/\b(art|color|design|paint|draw)\b/,'topic':'Art'}];return _0x2e0ade[_0x24f301(0x24a)](_0x27d1dd=>{const _0x4ae2fa=_0x24f301;_0x27d1dd[_0x4ae2fa(0x23d)]['test'](_0x3944d6)&&_0x52f628[_0x4ae2fa(0x25d)](_0x27d1dd['topic']);}),_0x22ca7b['DQxcv'](_0x52f628[_0x24f301(0x179)],0x0)&&_0x52f628[_0x24f301(0x25d)](_0x22ca7b['SnErw']),Array[_0x24f301(0x236)](_0x52f628);}async function generateQuizUsingAI(_0x4c49cb,_0x5a64de){const _0x1b84f4=_0x51485f,_0x21f5fb={'KAzTS':_0x1b84f4(0x17e),'wCtyQ':'[Quiz]\x20Constructed\x20system\x20prompt:','aDqUd':_0x1b84f4(0x1cf),'fMewr':_0x1b84f4(0x21f),'fPfHY':_0x1b84f4(0x277),'LtnXF':function(_0x2b01e5,_0x50d5c9,_0x2757c3){return _0x2b01e5(_0x50d5c9,_0x2757c3);},'MTKRs':_0x1b84f4(0x246),'MtsSZ':function(_0x168696){return _0x168696();},'vxMtD':function(_0x4de222,_0x2e78a4){return _0x4de222(_0x2e78a4);},'Xuqry':_0x1b84f4(0x1a2),'FtCwY':_0x1b84f4(0x1b1),'CFeYw':function(_0x26c7a8){return _0x26c7a8();},'OVoSt':_0x1b84f4(0x23c),'KQpsE':'[Quiz]\x20Fallback\x20generation\x20also\x20failed:','LTeEE':function(_0x1f571d,_0x1f8fc4,_0x58f4cb){return _0x1f571d(_0x1f8fc4,_0x58f4cb);},'LoGpR':'Quiz\x20generation\x20failed\x20completely.\x20Please\x20try\x20again\x20later.'};console[_0x1b84f4(0x1d7)]('[Quiz]\x20Starting\x20quiz\x20generation\x20with\x20Gemini\x20Nano...',{'imageContext':_0x4c49cb,'userPrompt':_0x5a64de});try{console[_0x1b84f4(0x1d7)](_0x1b84f4(0x18e),JSON[_0x1b84f4(0x1e0)](_0x4c49cb));if(!window['ai'])throw new Error(_0x21f5fb['KAzTS']);const _0x15c7f1=_0x1b84f4(0x234)+JSON[_0x1b84f4(0x1e0)](_0x4c49cb)+_0x1b84f4(0x1f2);console[_0x1b84f4(0x1d7)](_0x21f5fb[_0x1b84f4(0x26b)],_0x15c7f1);const _0x3fa42a=[{'role':_0x21f5fb[_0x1b84f4(0x276)],'content':_0x15c7f1},{'role':_0x21f5fb[_0x1b84f4(0x233)],'content':_0x5a64de}],_0x160745=document['createElement'](_0x21f5fb[_0x1b84f4(0x282)]);_0x160745[_0x1b84f4(0x17f)]=_0x1b84f4(0x211),chatMessages[_0x1b84f4(0x193)](_0x160745),_0x21f5fb[_0x1b84f4(0x253)](showTypingIndicator,chatMessages,_0x21f5fb['MTKRs']);if(!aiLanguageSession)await _0x21f5fb[_0x1b84f4(0x1ac)](initializeLanguageSession);const _0x5a62eb=await aiLanguageSession[_0x1b84f4(0x20c)](_0x15c7f1+'\x0a\x0aUser\x20request:\x20'+_0x5a64de);let _0x479661='';for await(const _0x4ade57 of _0x5a62eb){_0x479661+=_0x4ade57,_0x160745['textContent']=_0x479661,chatMessages[_0x1b84f4(0x1f8)]=chatMessages['scrollHeight'];}_0x160745[_0x1b84f4(0x24b)]();let _0x597bc3;try{_0x597bc3=_0x21f5fb[_0x1b84f4(0x25a)](safeJSONParse,_0x479661),addMessage(_0x21f5fb[_0x1b84f4(0x24c)],![]),_0x21f5fb[_0x1b84f4(0x25a)](addQuiz,_0x597bc3);}catch(_0x40f445){console[_0x1b84f4(0x252)](_0x21f5fb[_0x1b84f4(0x27c)],_0x40f445),_0x21f5fb['LtnXF'](addMessage,_0x479661,![]);throw _0x40f445;}_0x21f5fb[_0x1b84f4(0x1ac)](removeTypingIndicator);}catch(_0x1f4c18){console[_0x1b84f4(0x252)]('[Quiz]\x20Error\x20in\x20quiz\x20generation\x20using\x20Gemini\x20Nano\x20AI:',_0x1f4c18),_0x21f5fb[_0x1b84f4(0x1db)](removeTypingIndicator),_0x21f5fb[_0x1b84f4(0x253)](addMessage,_0x21f5fb[_0x1b84f4(0x238)],![]);try{const _0x46b2cf=await _0x21f5fb[_0x1b84f4(0x253)](generateQuizWithoutAI,_0x4c49cb,_0x5a64de);_0x21f5fb[_0x1b84f4(0x253)](addMessage,_0x1b84f4(0x210),![]),_0x21f5fb['vxMtD'](addQuiz,_0x46b2cf);}catch(_0x42401c){console['error'](_0x21f5fb[_0x1b84f4(0x189)],_0x42401c),_0x21f5fb['LTeEE'](addMessage,_0x21f5fb[_0x1b84f4(0x202)],![]);}}}function _0x2072(){const _0x27b2f3=['message\x20','NXTKH','image','VprfE','KZclw','OIcpb','wEpsW','VvIuZ','aDqUd','div','BiDoJ','flex','TVovO','[OCR]\x20Worker\x20initialized','FtCwY','topics','NSGqb','ZPcjD','then','scrollHeight','fPfHY','214998tCoXBB','height','xJAHU','EeKeU','rzcJC','102XCnaNr','AediE','Student\x20should\x20identify\x20main\x20points\x20from\x20the\x20text','size','captureButton','QDywg','[AI]\x20Image\x20session\x20created:','writeText','window.ai\x20API\x20not\x20available','className','[AI]\x20Error\x20during\x20image\x20processing:','MqJaL','Option\x20B','copy-button','getTracks','Language\x20Arts','environment','I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20requirements:','[Processing]\x20Image\x20processing\x20completed:','KQpsE','CCcUI','NCnZq','mctCA','[Chat]\x20Sending\x20message:','imageContext:','381dgQMKD','Windows\x20AI\x20API\x20not\x20available','split','type','appendChild','uCgGW','YBeYy','pRWLc','Processing\x20image...','[UI]\x20Adding\x20quiz\x20to\x20chat:','click','getContext','terminate','4708aBHvPT','What\x20are\x20the\x20key\x20points\x20mentioned\x20in\x20the\x20text?','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Title:\x20','value','Geography','clipboard','I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20image\x20and\x20requirements:','Option\x20A','push','filter','161uvjftx','iQXlJ','bxqUT','TjHeR','pre','setItem','MtsSZ','length','AUaSC','Generate\x20multiple\x20choice\x20questions\x20about\x20this\x20picture','fromCharCode','[Quiz]\x20Failed\x20to\x20parse\x20AI\x20response:','icoeK','hXgYd','Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz.\x20Please\x20try\x20again.','Make\x20a\x20quiz\x20suitable\x20for\x20beginners','Copy\x20Quiz','toString','5637588cSqZMh','load','includes','canvas','cancelButton','tITnB','hXpqK','Ycbgk','dark','AirZz','25ZmePkA','createElement','addEventListener','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Time\x20Limit:\x20','Create\x20a\x20quiz\x20about\x20','\x20Quiz','WKQgs','[Processing]\x20No\x20OCR\x20text\x20found,\x20falling\x20back\x20to\x20image\x20analysis','KZPpd','chatMessages','recognize','Science','light','system','now','Option\x20C','1887890jdCKqH','User','textContent','grade','tJzYL','log','join','message\x20bot-message','[AI]\x20Starting\x20image\x20processing...','CFeYw','\x0a\x20\x20\x20\x20','multiple_choice','data','eovBm','stringify','Additional\x20option\x20','points','XppsB','cameraButton','[OCR]\x20Starting\x20text\x20extraction...','[AI]\x20Windows\x20AI\x20API\x20not\x20found\x20in\x20window\x20object','oObca','What\x20can\x20you\x20observe\x20in\x20this\x20image?','keypress','Mathematics','message','stop','Copy\x20failed:','[OCR]\x20Text\x20extracted:','\x20\x20\x20','cameraPreview','prompt-suggestion','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Format\x20the\x20response\x20as\x20a\x20JSON\x20quiz\x20object\x20with\x20id,\x20grade,\x20subject,\x20title,\x20timeLimit,\x20topic,\x20and\x20questions\x20array.','TdTda','topic','joPxO','[Camera]\x20Successfully\x20got\x20media\x20stream:','[Camera]\x20Error\x20accessing\x20camera:','scrollTop','14552UhxjJk','General\x20Knowledge','user-message','getAttribute','display','width','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20Questions:\x0a\x20\x20\x20\x20\x20\x20\x20\x20','[Camera]\x20Error\x20processing\x20captured\x20image:','eng','LoGpR','qQNHy','confidence','YsLkF','Visual\x20Analysis','1382yvQgYg','Visual\x20content\x20detected','getElementById','qZSEU','[OCR]\x20Worker\x20terminated','promptStreaming','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Type:\x20','[Camera]\x20Camera\x20stopped\x20and\x20container\x20hidden','[Camera]\x20Capturing\x20image...','Generated\x20a\x20basic\x20quiz\x20without\x20AI\x20assistance:','message\x20bot-message\x20streaming','toISOString','subject','uXNwa','none','olAtN','rkvor','wsvBM','IrwoH','LAyiQ','sendButton','Copied!','YGlid','finally','user','opBIQ','EAnuU','image/jpeg','catch','button','onclick','messageInput','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Grade:\x20','MuhOO','esvKb','History','Image\x20captured!\x20Please\x20provide\x20your\x20requirements\x20for\x20the\x20quiz.','wHkKo','documentElement','src','Generate\x20questions\x20based\x20on\x20the\x20image\x20related\x20text\x20-\x20','vwznY','CIMhr','slice','fMewr','You\x20are\x20a\x20quiz\x20generator.\x20Create\x20a\x20quiz\x20based\x20on\x20the\x20following\x20image\x20context\x20and\x20user\x20requirements.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Image\x20context:\x20','NIRtB','from','[Camera]\x20Stopping\x20camera...','OVoSt','createWorker','kmOTQ','893187YnjMaM','Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz\x20using\x20Gemini\x20Nano\x20AI.\x20Please\x20try\x20again.','pattern','...?','toLowerCase','captured-image','[AI]\x20Creating\x20image\x20recognition\x20session...','Error\x20accessing\x20camera:\x20','AJwnU','\x20-\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Points:\x20','Generating\x20quiz...','pgETu','HKNHA','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','forEach','remove','Xuqry','text','aVhUU','setAttribute','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Subject:\x20','label','error','LtnXF','map','Please\x20capture\x20an\x20image\x20first\x20before\x20providing\x20quiz\x20requirements.','[Quiz]\x20Generating\x20quiz...','loadLanguage','videoHeight','toDataURL','vxMtD','[Processing]\x20Error\x20during\x20image\x20processing:','Enter','add','CAdWy','vOvGn','WKDgE','themeToggle','[AI]\x20Image\x20recognition\x20completed.\x20Result:','zuzEN','style','getUserMedia','content','tczpx','LgJJJ','mediaDevices','trim','wCtyQ','question','title'];_0x2072=function(){return _0x27b2f3;};return _0x2072();}function generateOptionsFromText(_0xb18644){const _0x46c9c1=_0x51485f,_0x80e3be={'pgETu':function(_0x2ba453,_0x5bb965){return _0x2ba453<_0x5bb965;},'EAnuU':function(_0x9a534a,_0x580a0b){return _0x9a534a+_0x580a0b;},'JqUbD':_0x46c9c1(0x1e1)},_0x530109=_0xb18644[_0x46c9c1(0x191)](/[.!?]+/)[_0x46c9c1(0x1a5)](_0x3d0aab=>_0x3d0aab[_0x46c9c1(0x26a)]()[_0x46c9c1(0x1ad)]>0x0),_0x5a3408=_0x530109[_0x46c9c1(0x232)](0x0,0x4)[_0x46c9c1(0x254)](_0x585db5=>_0x585db5[_0x46c9c1(0x26a)]());while(_0x80e3be[_0x46c9c1(0x247)](_0x5a3408['length'],0x4)){_0x5a3408[_0x46c9c1(0x1a4)](_0x80e3be[_0x46c9c1(0x221)](_0x80e3be['JqUbD'],_0x80e3be[_0x46c9c1(0x221)](_0x5a3408['length'],0x1)));}return _0x5a3408;}function generateCustomQuestion(_0x4af7b5,_0x547e0c){const _0x50dec6=_0x51485f;return _0x4af7b5['toLowerCase']()[_0x50dec6(0x1ba)]('what')?_0x4af7b5:'What\x20is\x20the\x20significance\x20of\x20'+_0x547e0c[_0x50dec6(0x191)]('\x20')['slice'](0x0,0x3)[_0x50dec6(0x1d8)]('\x20')+_0x50dec6(0x23e);}function addMessage(_0x1be9d4,_0x29a860=![]){const _0x42fa21=_0x51485f,_0x16d181={'bxqUT':_0x42fa21(0x1d3),'opBIQ':'Bot','NXTKH':'bot-message'};console[_0x42fa21(0x1d7)]('[UI]\x20Adding\x20message:\x20'+(_0x29a860?_0x16d181[_0x42fa21(0x1a8)]:_0x16d181[_0x42fa21(0x220)])+':',_0x1be9d4);const _0x2bf9eb=document[_0x42fa21(0x1c3)](_0x42fa21(0x277));_0x2bf9eb[_0x42fa21(0x17f)]=_0x42fa21(0x26e)+(_0x29a860?_0x42fa21(0x1fb):_0x16d181[_0x42fa21(0x26f)]),_0x2bf9eb['textContent']=_0x1be9d4,chatMessages[_0x42fa21(0x193)](_0x2bf9eb),chatMessages['scrollTop']=chatMessages['scrollHeight'];}function addQuiz(_0x3f4bf5){const _0x3fb768=_0x51485f,_0xed757b={'MfbrG':_0x3fb768(0x198),'YGlid':_0x3fb768(0x277),'BiDoJ':'quiz-container','qZSEU':_0x3fb768(0x183),'pRWLc':_0x3fb768(0x1b6)};console[_0x3fb768(0x1d7)](_0xed757b['MfbrG'],_0x3f4bf5);const _0x1f9eda=document[_0x3fb768(0x1c3)](_0xed757b[_0x3fb768(0x21d)]);_0x1f9eda[_0x3fb768(0x17f)]=_0xed757b[_0x3fb768(0x278)];const _0x306861=_0x3fb768(0x19e)+_0x3f4bf5[_0x3fb768(0x26d)]+_0x3fb768(0x227)+_0x3f4bf5[_0x3fb768(0x1d5)]+_0x3fb768(0x250)+_0x3f4bf5[_0x3fb768(0x213)]+_0x3fb768(0x1c5)+_0x3f4bf5['timeLimit']+'\x20minutes\x0a\x20\x20\x20\x20\x20\x20\x20\x20Topics:\x20'+_0x3f4bf5[_0x3fb768(0x1f4)]+_0x3fb768(0x1ff)+_0x3f4bf5['questions']['map']((_0x40a1ff,_0x3d4516)=>_0x3fb768(0x249)+(_0x3d4516+0x1)+'.\x20'+_0x40a1ff[_0x3fb768(0x26c)]+_0x3fb768(0x249)+(_0x40a1ff['options']?_0x40a1ff['options'][_0x3fb768(0x254)]((_0x53bef8,_0x4b86f8)=>_0x3fb768(0x1ef)+String[_0x3fb768(0x1b0)](0x61+_0x4b86f8)+')\x20'+_0x53bef8)[_0x3fb768(0x1d8)]('\x0a'):'')+_0x3fb768(0x20d)+_0x40a1ff[_0x3fb768(0x192)]+_0x3fb768(0x245)+_0x40a1ff[_0x3fb768(0x1e2)]+_0x3fb768(0x249))[_0x3fb768(0x1d8)]('\x0a')+_0x3fb768(0x1dc),_0x52d88e=document['createElement'](_0x3fb768(0x1aa));_0x52d88e['textContent']=_0x306861,_0x1f9eda[_0x3fb768(0x193)](_0x52d88e);const _0x34636e=document[_0x3fb768(0x1c3)](_0x3fb768(0x224));_0x34636e[_0x3fb768(0x17f)]=_0xed757b[_0x3fb768(0x20a)],_0x34636e['textContent']=_0xed757b[_0x3fb768(0x196)],_0x34636e[_0x3fb768(0x225)]=()=>{const _0x1162bc=_0x3fb768;navigator[_0x1162bc(0x1a1)][_0x1162bc(0x17d)](_0x306861)[_0x1162bc(0x280)](()=>_0x34636e['textContent']=_0x1162bc(0x21c))[_0x1162bc(0x223)](_0x360154=>console[_0x1162bc(0x252)](_0x1162bc(0x1ed),_0x360154))[_0x1162bc(0x21e)](()=>setTimeout(()=>_0x34636e[_0x1162bc(0x1d4)]=_0x1162bc(0x1b6),0x7d0));},_0x1f9eda[_0x3fb768(0x193)](_0x34636e),chatMessages['appendChild'](_0x1f9eda),chatMessages['scrollTop']=chatMessages[_0x3fb768(0x281)];}async function captureImage(){const _0x2b254d=_0x51485f,_0x2e4c0d={'wsvBM':_0x2b254d(0x1f1),'jhpYd':_0x2b254d(0x20f),'hXpqK':_0x2b254d(0x1bb),'EzUzy':'img','ZPcjD':_0x2b254d(0x222),'icoeK':_0x2b254d(0x277),'kmOTQ':function(_0x399424){return _0x399424();},'IrwoH':_0x2b254d(0x188),'rkvor':function(_0x349d30,_0x3b68d8,_0x5d51ae){return _0x349d30(_0x3b68d8,_0x5d51ae);},'NIRtB':function(_0x4b43b7,_0x18b3a5){return _0x4b43b7===_0x18b3a5;},'iQXlJ':_0x2b254d(0x24d),'CCcUI':_0x2b254d(0x1af),'xUmCo':_0x2b254d(0x200),'tJzYL':'Sorry,\x20I\x20couldn\x27t\x20process\x20the\x20image.\x20Please\x20try\x20again.'};console[_0x2b254d(0x1d7)](_0x2e4c0d['jhpYd']);try{const _0x109e27=document[_0x2b254d(0x1c3)](_0x2e4c0d[_0x2b254d(0x1be)]);_0x109e27[_0x2b254d(0x1fe)]=cameraPreview['videoWidth'],_0x109e27[_0x2b254d(0x284)]=cameraPreview[_0x2b254d(0x258)],_0x109e27[_0x2b254d(0x19a)]('2d')['drawImage'](cameraPreview,0x0,0x0);const _0x7d313e=document[_0x2b254d(0x1c3)](_0x2e4c0d['EzUzy']);_0x7d313e[_0x2b254d(0x22e)]=_0x109e27[_0x2b254d(0x259)](_0x2e4c0d[_0x2b254d(0x27f)]),_0x7d313e['className']=_0x2b254d(0x240);const _0x446bc1=document[_0x2b254d(0x1c3)](_0x2e4c0d[_0x2b254d(0x1b2)]);_0x446bc1[_0x2b254d(0x17f)]=_0x2b254d(0x1d9),_0x446bc1['appendChild'](_0x7d313e),chatMessages[_0x2b254d(0x193)](_0x446bc1),_0x2e4c0d[_0x2b254d(0x23a)](stopCamera);const _0x5de3e2=await processImageUsingTesseract(_0x7d313e);imageContext=_0x5de3e2,console['log'](_0x2e4c0d[_0x2b254d(0x219)],JSON[_0x2b254d(0x1e0)](imageContext,null,0x2)),_0x2e4c0d[_0x2b254d(0x217)](addMessage,_0x2b254d(0x22b),![]);const _0x3a9167=[_0x2b254d(0x1c6)+imageContext[_0x2b254d(0x27d)][0x0]+_0x2b254d(0x244)+imageContext[_0x2b254d(0x266)],_0x2e4c0d[_0x2b254d(0x235)](imageContext[_0x2b254d(0x192)],_0x2e4c0d[_0x2b254d(0x1a7)])?_0x2b254d(0x22f)+imageContext['content']:_0x2e4c0d[_0x2b254d(0x18a)],_0x2b254d(0x1b5)];_0x3a9167['forEach'](_0x27076d=>{const _0x252824=_0x2b254d,_0x3f2170=document[_0x252824(0x1c3)]('div');_0x3f2170[_0x252824(0x17f)]=_0x2e4c0d[_0x252824(0x218)],_0x3f2170[_0x252824(0x1d4)]=_0x27076d,_0x3f2170[_0x252824(0x225)]=()=>{const _0x50865a=_0x252824;messageInput[_0x50865a(0x19f)]=_0x27076d,sendMessage();},chatMessages[_0x252824(0x193)](_0x3f2170);});}catch(_0x3ff004){console[_0x2b254d(0x252)](_0x2e4c0d['xUmCo'],_0x3ff004),addMessage(_0x2e4c0d[_0x2b254d(0x1d6)],![]);}}async function sendMessage(){const _0x115242=_0x51485f,_0x25152f={'nBiTf':_0x115242(0x18d),'LgJJJ':function(_0x4f1ffb,_0x344c94,_0x233aa2){return _0x4f1ffb(_0x344c94,_0x233aa2);},'EeKeU':function(_0x1b1de6,_0x1a6d7e,_0xd00db9){return _0x1b1de6(_0x1a6d7e,_0xd00db9);},'eXsRQ':_0x115242(0x187),'vOvGn':function(_0x2b1d10,_0x4a26a1,_0x2e2b8a){return _0x2b1d10(_0x4a26a1,_0x2e2b8a);},'VprfE':_0x115242(0x255)},_0x525709=messageInput[_0x115242(0x19f)]['trim']();if(!_0x525709)return;console[_0x115242(0x1d7)](_0x25152f['nBiTf'],_0x525709),_0x25152f[_0x115242(0x268)](addMessage,_0x525709,!![]),messageInput[_0x115242(0x19f)]='';if(imageContext)try{const _0x28cd2b=await _0x25152f[_0x115242(0x286)](generateQuizUsingAI,imageContext,_0x525709);_0x25152f[_0x115242(0x286)](addMessage,_0x25152f['eXsRQ'],![]),addQuiz(_0x28cd2b);}catch(_0x1fd427){_0x25152f[_0x115242(0x286)](addMessage,_0x115242(0x1b4),![]);}else _0x25152f[_0x115242(0x25f)](addMessage,_0x25152f[_0x115242(0x271)],![]);}function toggleTheme(){const _0x2ece4e=_0x51485f,_0x4f795e={'vwznY':'data-theme','tczpx':function(_0x316e67,_0x8ea8c3){return _0x316e67===_0x8ea8c3;},'QDywg':_0x2ece4e(0x1c0),'VvIuZ':_0x2ece4e(0x1ce),'HKNHA':'theme'},_0x4d052d=document[_0x2ece4e(0x22d)],_0x545143=_0x4d052d[_0x2ece4e(0x1fc)](_0x4f795e[_0x2ece4e(0x230)]),_0x46913f=_0x4f795e[_0x2ece4e(0x267)](_0x545143,_0x4f795e[_0x2ece4e(0x17b)])?_0x4f795e[_0x2ece4e(0x275)]:_0x4f795e['QDywg'];_0x4d052d[_0x2ece4e(0x24f)](_0x4f795e['vwznY'],_0x46913f),localStorage[_0x2ece4e(0x1ab)](_0x4f795e[_0x2ece4e(0x248)],_0x46913f);}themeToggle[_0x51485f(0x1c4)](_0x51485f(0x199),toggleTheme),cameraButton[_0x51485f(0x1c4)]('click',startCamera),captureButton[_0x51485f(0x1c4)]('click',captureImage),cancelButton[_0x51485f(0x1c4)](_0x51485f(0x199),stopCamera),sendButton[_0x51485f(0x1c4)](_0x51485f(0x199),sendMessage),messageInput[_0x51485f(0x1c4)](_0x51485f(0x1e9),_0x3193cb=>{const _0x14ad6b=_0x51485f,_0x85be82={'OMXuw':function(_0x233a24,_0x4ac2c5){return _0x233a24===_0x4ac2c5;},'yzXKb':function(_0x5f135a){return _0x5f135a();}};if(_0x85be82['OMXuw'](_0x3193cb['key'],_0x14ad6b(0x25c)))_0x85be82['yzXKb'](sendMessage);});async function generateQuizWithoutAI(_0x438bb7,_0x27c9a8){const _0x5d5d76=_0x51485f,_0x2e0812={'AirZz':_0x5d5d76(0x256),'Ycbgk':_0x5d5d76(0x24d),'hrCAT':_0x5d5d76(0x1dd),'tITnB':function(_0x156037,_0x6e7d38){return _0x156037(_0x6e7d38);},'TjHeR':_0x5d5d76(0x19d),'YBeYy':'open_ended','CIMhr':_0x5d5d76(0x178),'xJAHU':_0x5d5d76(0x1e8),'GIUxI':'Description\x20of\x20visual\x20elements','KZclw':function(_0x89f3eb,_0x2cf516,_0x16a4aa){return _0x89f3eb(_0x2cf516,_0x16a4aa);},'NSGqb':_0x5d5d76(0x182),'joPxO':_0x5d5d76(0x1d1),'AediE':'Option\x20D','JslWs':_0x5d5d76(0x1a3)};console['log'](_0x2e0812[_0x5d5d76(0x1c1)],{'imageContext':_0x438bb7,'userPrompt':_0x27c9a8});try{const _0x441de5=_0x438bb7[_0x5d5d76(0x192)]===_0x2e0812[_0x5d5d76(0x1bf)],_0x329894=_0x438bb7['content'],_0x52508f=_0x438bb7[_0x5d5d76(0x27d)],_0x4cb2da=[];_0x441de5?(_0x4cb2da['push']({'question':'Based\x20on\x20the\x20text,\x20what\x20is\x20the\x20main\x20topic\x20being\x20discussed?','type':_0x2e0812['hrCAT'],'options':_0x2e0812[_0x5d5d76(0x1bd)](generateOptionsFromText,_0x329894),'answer':'Option\x20A','points':0x2}),_0x4cb2da[_0x5d5d76(0x1a4)]({'question':_0x2e0812[_0x5d5d76(0x1a9)],'type':_0x2e0812[_0x5d5d76(0x195)],'answer':_0x2e0812[_0x5d5d76(0x231)],'points':0x2})):_0x4cb2da[_0x5d5d76(0x1a4)]({'question':_0x2e0812[_0x5d5d76(0x285)],'type':_0x2e0812[_0x5d5d76(0x195)],'answer':_0x2e0812['GIUxI'],'points':0x2});_0x4cb2da['push']({'question':_0x2e0812[_0x5d5d76(0x272)](generateCustomQuestion,_0x27c9a8,_0x329894),'type':_0x2e0812['hrCAT'],'options':[_0x5d5d76(0x1a3),_0x2e0812[_0x5d5d76(0x27e)],_0x2e0812[_0x5d5d76(0x1f5)],_0x2e0812[_0x5d5d76(0x177)]],'answer':_0x2e0812['JslWs'],'points':0x2});const _0x54aa1e={'id':Date[_0x5d5d76(0x1d0)]()[_0x5d5d76(0x1b7)](),'title':_0x52508f[0x0]+_0x5d5d76(0x1c7),'subject':_0x52508f[0x0],'grade':'General','timeLimit':0xf,'topic':_0x52508f[_0x5d5d76(0x1d8)](',\x20'),'questions':_0x4cb2da};return _0x54aa1e;}catch(_0x30aec3){console[_0x5d5d76(0x252)]('[Quiz]\x20Error\x20generating\x20quiz:',_0x30aec3);throw _0x30aec3;}}