
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x24f9c6=_0x1dcd;(function(_0x3ffdf1,_0x2eaeb1){const _0x12707d=_0x1dcd,_0x27b922=_0x3ffdf1();while(!![]){try{const _0x4c4f85=-parseInt(_0x12707d(0x2a4))/0x1+parseInt(_0x12707d(0x1c3))/0x2*(-parseInt(_0x12707d(0x1dd))/0x3)+parseInt(_0x12707d(0x293))/0x4+-parseInt(_0x12707d(0x1c0))/0x5+-parseInt(_0x12707d(0x269))/0x6*(parseInt(_0x12707d(0x1c8))/0x7)+parseInt(_0x12707d(0x277))/0x8*(-parseInt(_0x12707d(0x1c7))/0x9)+parseInt(_0x12707d(0x1bd))/0xa*(parseInt(_0x12707d(0x1f2))/0xb);if(_0x4c4f85===_0x2eaeb1)break;else _0x27b922['push'](_0x27b922['shift']());}catch(_0x38465b){_0x27b922['push'](_0x27b922['shift']());}}}(_0x4992,0xdae6d));import{Logger}from'./common.js';const chatMessages=document['getElementById'](_0x24f9c6(0x1f3)),messageInput=document[_0x24f9c6(0x202)](_0x24f9c6(0x229)),sendButton=document[_0x24f9c6(0x202)](_0x24f9c6(0x2c6)),cameraButton=document[_0x24f9c6(0x202)](_0x24f9c6(0x2a9)),themeToggle=document[_0x24f9c6(0x202)](_0x24f9c6(0x20f)),cameraContainer=document[_0x24f9c6(0x202)](_0x24f9c6(0x21a)),cameraPreview=document[_0x24f9c6(0x202)]('cameraPreview'),captureButton=document['getElementById'](_0x24f9c6(0x274)),cancelButton=document[_0x24f9c6(0x202)]('cancelButton');function _0x1dcd(_0x250e98,_0x1d0388){const _0x4992cb=_0x4992();return _0x1dcd=function(_0x1dcdd2,_0x3661c9){_0x1dcdd2=_0x1dcdd2-0x1ba;let _0x1348aa=_0x4992cb[_0x1dcdd2];return _0x1348aa;},_0x1dcd(_0x250e98,_0x1d0388);}let stream=null,imageContext=null;async function startCamera(){const _0x3c0c3d=_0x24f9c6,_0x3ca41d={'kqWZn':_0x3c0c3d(0x25f),'ZauTe':_0x3c0c3d(0x258),'NgmRv':_0x3c0c3d(0x23b),'jZTZM':_0x3c0c3d(0x2a7),'GxcoT':function(_0x28b04c,_0xa86b1e){return _0x28b04c(_0xa86b1e);},'DQTzE':function(_0x5cc675,_0x18ab8c){return _0x5cc675+_0x18ab8c;},'tQTwq':_0x3c0c3d(0x1d8)};console[_0x3c0c3d(0x2a3)](_0x3c0c3d(0x294));try{const _0x60c9cd=_0x3ca41d[_0x3c0c3d(0x22d)]['split']('|');let _0xbea572=0x0;while(!![]){switch(_0x60c9cd[_0xbea572++]){case'0':cameraContainer[_0x3c0c3d(0x2aa)]['display']=_0x3ca41d['ZauTe'];continue;case'1':stream=await navigator[_0x3c0c3d(0x20c)]['getUserMedia']({'video':{'facingMode':_0x3ca41d[_0x3c0c3d(0x26f)]}});continue;case'2':cameraPreview[_0x3c0c3d(0x28a)]=stream;continue;case'3':console[_0x3c0c3d(0x2a3)]('[Camera]\x20Successfully\x20got\x20media\x20stream:',stream);continue;case'4':console['log']('[Camera]\x20Camera\x20preview\x20started\x20and\x20container\x20displayed');continue;}break;}}catch(_0x28272c){console[_0x3c0c3d(0x1ee)](_0x3ca41d[_0x3c0c3d(0x1cc)],_0x28272c),_0x3ca41d[_0x3c0c3d(0x29e)](addMessage,_0x3ca41d[_0x3c0c3d(0x2c7)](_0x3ca41d[_0x3c0c3d(0x251)],_0x28272c[_0x3c0c3d(0x20d)]));}}function stopCamera(){const _0x3102e1=_0x24f9c6,_0x58ada1={'VDULA':'[Camera]\x20Stopping\x20track:','UbToQ':_0x3102e1(0x237),'GEgmM':_0x3102e1(0x225)};console[_0x3102e1(0x2a3)](_0x3102e1(0x27b)),stream&&(stream['getTracks']()[_0x3102e1(0x1e0)](_0x2c3fb7=>{const _0x45287d=_0x3102e1;console[_0x45287d(0x2a3)](_0x58ada1[_0x45287d(0x2b0)],_0x2c3fb7[_0x45287d(0x287)]),_0x2c3fb7[_0x45287d(0x28e)]();}),stream=null),cameraContainer[_0x3102e1(0x2aa)][_0x3102e1(0x283)]=_0x58ada1[_0x3102e1(0x2ad)],console['log'](_0x58ada1[_0x3102e1(0x1e4)]);}async function processImageUsingWindowAI(_0x37f908){const _0x4178d4=_0x24f9c6,_0x3bfb48={'RhztZ':_0x4178d4(0x1e6),'RzHqg':'[AI]\x20Windows\x20AI\x20API\x20not\x20found\x20in\x20window\x20object','LIwtX':'[AI]\x20Creating\x20image\x20recognition\x20session...','HlknM':'[AI]\x20Image\x20session\x20created:','uIihg':'[AI]\x20Performing\x20image\x20recognition...','fiHSS':'[AI]\x20Image\x20recognition\x20completed.\x20Result:'};console['log'](_0x3bfb48['RhztZ'],_0x37f908);if(!window['ai']){console[_0x4178d4(0x1ee)](_0x3bfb48[_0x4178d4(0x236)]);throw new Error(_0x4178d4(0x22e));}try{console[_0x4178d4(0x2a3)](_0x3bfb48[_0x4178d4(0x213)]);const _0x28e59b=await window['ai']['createImageSession']();console['log'](_0x3bfb48[_0x4178d4(0x1d7)],_0x28e59b),console['log'](_0x3bfb48['uIihg']);const _0x3f1aa7=await _0x28e59b['recognize'](_0x37f908);return console[_0x4178d4(0x2a3)](_0x3bfb48[_0x4178d4(0x24d)],_0x3f1aa7),_0x3f1aa7;}catch(_0x2398ac){console['error'](_0x4178d4(0x1ec),_0x2398ac);throw _0x2398ac;}}async function processImageUsingTesseract(_0x5784f1){const _0xe9e995=_0x24f9c6,_0x2b1821={'kPQMs':'[Processing]\x20Starting\x20image\x20OCR\x20analysis...','EiYqY':function(_0x328711,_0x181a37,_0x52c593){return _0x328711(_0x181a37,_0x52c593);},'WtoMX':function(_0x33e38c,_0x3d2f6b){return _0x33e38c(_0x3d2f6b);},'iAeuu':function(_0x32fbf9,_0x37adc2){return _0x32fbf9>_0x37adc2;},'UOpmb':_0xe9e995(0x25e),'rNnff':_0xe9e995(0x266),'velqE':_0xe9e995(0x246),'iPvGT':_0xe9e995(0x203),'mbcyp':_0xe9e995(0x1ed),'MtJAj':'General\x20Knowledge','zQRBv':_0xe9e995(0x1fb)};console[_0xe9e995(0x2a3)](_0x2b1821[_0xe9e995(0x2c5)]),_0x2b1821['EiYqY'](addMessage,'Processing\x20image...',![]);try{const _0xf7eaf=await _0x2b1821[_0xe9e995(0x275)](extractTextFromImage,_0x5784f1);return console['log'](_0xe9e995(0x1ff),_0xf7eaf),_0xf7eaf[_0xe9e995(0x25e)]&&_0x2b1821[_0xe9e995(0x1e2)](_0xf7eaf[_0xe9e995(0x25e)][_0xe9e995(0x1f6)]()[_0xe9e995(0x2bb)],0x0)?{'type':_0x2b1821['UOpmb'],'content':_0x2b1821[_0xe9e995(0x284)],'confidence':_0xf7eaf['confidence'],'topics':_0x2b1821['WtoMX'](generateTopics,_0xf7eaf['text'])}:(console[_0xe9e995(0x2a3)](_0x2b1821[_0xe9e995(0x2ab)]),{'type':_0xe9e995(0x2b8),'content':_0x2b1821[_0xe9e995(0x280)],'topics':[_0x2b1821[_0xe9e995(0x1cd)],_0x2b1821[_0xe9e995(0x290)]],'features':{'timestamp':new Date()[_0xe9e995(0x1e8)](),'dimensions':{'width':_0x5784f1['width'],'height':_0x5784f1[_0xe9e995(0x2a1)]}}});}catch(_0x168e66){console[_0xe9e995(0x1ee)](_0x2b1821['zQRBv'],_0x168e66);throw _0x168e66;}}async function extractTextFromImage(_0x597c6e){const _0x1a99e6=_0x24f9c6,_0x1d24bd={'IpLIP':_0x1a99e6(0x22f),'VPmUT':_0x1a99e6(0x2b2),'DamiK':'[OCR]\x20Text\x20extracted:','nmeXN':_0x1a99e6(0x239),'DYpJf':function(_0x56f74b,_0x92a20a){return _0x56f74b(_0x92a20a);},'HKsTx':_0x1a99e6(0x1c9)};console[_0x1a99e6(0x2a3)](_0x1d24bd[_0x1a99e6(0x1be)]);const _0x1e90f4=_0x1d24bd['VPmUT'];try{const _0x140846=await Tesseract[_0x1a99e6(0x286)]();await _0x140846[_0x1a99e6(0x265)](),await _0x140846['loadLanguage'](_0x1e90f4),await _0x140846[_0x1a99e6(0x243)](_0x1e90f4),console[_0x1a99e6(0x2a3)](_0x1a99e6(0x1e5));const _0x3e8715=await _0x140846[_0x1a99e6(0x288)](_0x597c6e);console['log'](_0x1d24bd[_0x1a99e6(0x2ba)],_0x3e8715['data'][_0x1a99e6(0x25e)]),await _0x140846[_0x1a99e6(0x29a)](),console[_0x1a99e6(0x2a3)](_0x1d24bd[_0x1a99e6(0x2ae)]);const _0x1ab658={'timestamp':new Date()[_0x1a99e6(0x1e8)](),'imageSize':{'width':_0x597c6e[_0x1a99e6(0x1da)],'height':_0x597c6e[_0x1a99e6(0x2a1)]},'extractedText':_0x3e8715[_0x1a99e6(0x28c)][_0x1a99e6(0x25e)],'confidenceScore':_0x3e8715[_0x1a99e6(0x28c)][_0x1a99e6(0x231)],'suggestedTopics':_0x1d24bd[_0x1a99e6(0x276)](generateTopics,_0x3e8715[_0x1a99e6(0x28c)][_0x1a99e6(0x25e)])};return{'description':_0x1d24bd[_0x1a99e6(0x201)],'metadata':_0x1ab658,'text':_0x3e8715[_0x1a99e6(0x28c)]['text'],'confidence':_0x3e8715['data'][_0x1a99e6(0x231)]};}catch(_0x2b7ef1){return console[_0x1a99e6(0x1ee)]('[OCR]\x20Error\x20in\x20text\x20extraction:',_0x2b7ef1),{'text':'','confidence':0x0};}}function generateTopics(_0x3d658c){const _0x1b3c39=_0x24f9c6,_0x56ce6d={'MpiRH':'Mathematics','Mydra':_0x1b3c39(0x26a),'ZpIJO':_0x1b3c39(0x27f),'mywJP':_0x1b3c39(0x267)},_0x7a10bc=new Set(),_0xe66f47=_0x3d658c[_0x1b3c39(0x1e3)](),_0x238c96=[{'pattern':/\b(math|equation|calculate|formula|number)\b/,'topic':_0x56ce6d[_0x1b3c39(0x28d)]},{'pattern':/\b(science|experiment|chemical|biology|physics)\b/,'topic':'Science'},{'pattern':/\b(history|century|ancient|war|empire|civilization)\b/,'topic':_0x56ce6d[_0x1b3c39(0x23f)]},{'pattern':/\b(geography|country|capital|mountain|river|climate)\b/,'topic':_0x1b3c39(0x245)},{'pattern':/\b(grammar|sentence|paragraph|essay|writing)\b/,'topic':_0x56ce6d[_0x1b3c39(0x264)]},{'pattern':/\b(art|color|design|paint|draw)\b/,'topic':_0x1b3c39(0x1cf)}];return _0x238c96[_0x1b3c39(0x1e0)](_0x94b97e=>{const _0x5c3f60=_0x1b3c39;_0x94b97e[_0x5c3f60(0x21f)][_0x5c3f60(0x2b5)](_0xe66f47)&&_0x7a10bc[_0x5c3f60(0x1d3)](_0x94b97e[_0x5c3f60(0x24a)]);}),_0x7a10bc['size']===0x0&&_0x7a10bc[_0x1b3c39(0x1d3)](_0x56ce6d[_0x1b3c39(0x295)]),Array[_0x1b3c39(0x221)](_0x7a10bc);}async function generateQuizUsingAI(_0x1b3619,_0x149810){const _0x4b7581=_0x24f9c6,_0x5448a4={'DkGrP':_0x4b7581(0x2b9),'PlhOE':'imageContext:','BtaQi':_0x4b7581(0x1c6),'ROYGe':_0x4b7581(0x24c),'pmaYF':'system','aVTQv':_0x4b7581(0x206),'ihOMv':_0x4b7581(0x25d),'KqhMI':_0x4b7581(0x249),'qNmnQ':function(_0x1617b1){return _0x1617b1();},'yfTNV':function(_0x4a68c4,_0x2c3333){return _0x4a68c4(_0x2c3333);},'nvdyC':function(_0x81e4f6,_0x45dc63,_0x41303a){return _0x81e4f6(_0x45dc63,_0x41303a);},'vOihO':'I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20image\x20and\x20requirements:','ptuoT':function(_0x1ce360,_0x3abb68){return _0x1ce360(_0x3abb68);},'EKvsC':_0x4b7581(0x2b7),'nitMY':function(_0x43967f,_0x1b9372,_0x4de25a){return _0x43967f(_0x1b9372,_0x4de25a);},'LeLAh':_0x4b7581(0x24b),'jPpCh':function(_0xf13ecd,_0x2da004,_0x33b3f8){return _0xf13ecd(_0x2da004,_0x33b3f8);},'LIpjJ':_0x4b7581(0x2bf),'aXTLG':_0x4b7581(0x261),'BQiju':function(_0x1d8f02,_0x234abf,_0x287559){return _0x1d8f02(_0x234abf,_0x287559);},'uYMGi':_0x4b7581(0x204)};console[_0x4b7581(0x2a3)](_0x5448a4[_0x4b7581(0x248)],{'imageContext':_0x1b3619,'userPrompt':_0x149810});try{console[_0x4b7581(0x2a3)](_0x5448a4[_0x4b7581(0x271)],JSON[_0x4b7581(0x278)](_0x1b3619));if(!window['ai'])throw new Error(_0x5448a4['BtaQi']);const _0x38c192=_0x4b7581(0x25b)+JSON['stringify'](_0x1b3619)+_0x4b7581(0x28f);console['log'](_0x5448a4[_0x4b7581(0x200)],_0x38c192);const _0x4f84b2=[{'role':_0x5448a4['pmaYF'],'content':_0x38c192},{'role':'user','content':_0x149810}],_0x56f04b=document['createElement'](_0x5448a4[_0x4b7581(0x1d4)]);_0x56f04b['className']=_0x5448a4['ihOMv'],chatMessages[_0x4b7581(0x240)](_0x56f04b),showTypingIndicator(chatMessages,_0x5448a4[_0x4b7581(0x2b3)]);if(!aiLanguageSession)await _0x5448a4[_0x4b7581(0x233)](initializeLanguageSession);const _0x18ddf1=await aiLanguageSession['promptStreaming'](_0x38c192+'\x0a\x0aUser\x20request:\x20'+_0x149810);let _0xbc0cd8='';for await(const _0x497c11 of _0x18ddf1){_0xbc0cd8+=_0x497c11,_0x56f04b['textContent']=_0xbc0cd8,chatMessages[_0x4b7581(0x24f)]=chatMessages[_0x4b7581(0x1d9)];}_0x56f04b['remove']();let _0xa6e545;try{_0xa6e545=_0x5448a4['yfTNV'](safeJSONParse,_0xbc0cd8),_0x5448a4[_0x4b7581(0x2c2)](addMessage,_0x5448a4['vOihO'],![]),_0x5448a4['ptuoT'](addQuiz,_0xa6e545);}catch(_0x403694){console[_0x4b7581(0x1ee)](_0x5448a4[_0x4b7581(0x209)],_0x403694),addMessage(_0xbc0cd8,![]);throw _0x403694;}_0x5448a4[_0x4b7581(0x233)](removeTypingIndicator);}catch(_0x229043){console[_0x4b7581(0x1ee)]('[Quiz]\x20Error\x20in\x20quiz\x20generation\x20using\x20Gemini\x20Nano\x20AI:',_0x229043),_0x5448a4[_0x4b7581(0x233)](removeTypingIndicator),_0x5448a4['nitMY'](addMessage,_0x5448a4[_0x4b7581(0x270)],![]);try{const _0x5b92b9=await generateQuizWithoutAI(_0x1b3619,_0x149810);_0x5448a4['jPpCh'](addMessage,_0x5448a4[_0x4b7581(0x26e)],![]),_0x5448a4[_0x4b7581(0x2b4)](addQuiz,_0x5b92b9);}catch(_0x13bfdd){console[_0x4b7581(0x1ee)](_0x5448a4['aXTLG'],_0x13bfdd),_0x5448a4[_0x4b7581(0x241)](addMessage,_0x5448a4[_0x4b7581(0x244)],![]);}}}function _0x4992(){const _0x603c7c=['setAttribute','className','then','flex','canvas','\x20-\x20','You\x20are\x20a\x20quiz\x20generator.\x20Create\x20a\x20quiz\x20based\x20on\x20the\x20following\x20image\x20context\x20and\x20user\x20requirements.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Image\x20context:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Subject:\x20','message\x20bot-message\x20streaming','text','1|3|2|0|4','Sorry,\x20I\x20couldn\x27t\x20process\x20the\x20image.\x20Please\x20try\x20again.','[Quiz]\x20Fallback\x20generation\x20also\x20failed:','What\x20is\x20the\x20significance\x20of\x20','setItem','ZpIJO','load','Washington\x20Drivers\x20License\x20Test','General\x20Knowledge','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Points:\x20','460518zUQCMw','History','NagfH','TVhpb','question','LIpjJ','NgmRv','LeLAh','PlhOE','TIFmM','value','captureButton','WtoMX','DYpJf','18344uFHeeJ','stringify','src','Generate\x20questions\x20based\x20on\x20the\x20image\x20related\x20text\x20-\x20','[Camera]\x20Stopping\x20camera...','nSorR','grade','\x20minutes\x0a\x20\x20\x20\x20\x20\x20\x20\x20Topics:\x20','Language\x20Arts','iPvGT','Copy\x20failed:','MhiOi','display','rNnff','videoHeight','createWorker','label','recognize','kpojx','srcObject','key','data','MpiRH','stop','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Format\x20the\x20response\x20as\x20a\x20JSON\x20quiz\x20object\x20with\x20id,\x20grade,\x20subject,\x20title,\x20timeLimit,\x20topic,\x20and\x20questions\x20array.','MtJAj','slice','Based\x20on\x20the\x20text,\x20what\x20is\x20the\x20main\x20topic\x20being\x20discussed?','865000ZiVlxq','[Camera]\x20Starting\x20camera\x20initialization...','mywJP','now','WXqft','join','Student\x20should\x20identify\x20main\x20points\x20from\x20the\x20text','terminate','drawImage','toDataURL','lmsef','GxcoT','bAoPa','split','height','user-message','log','721756GJJOFn','UThRu','push','[Camera]\x20Error\x20accessing\x20camera:','prompt-suggestion','cameraButton','style','velqE','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20Questions:\x0a\x20\x20\x20\x20\x20\x20\x20\x20','UbToQ','nmeXN','textContent','VDULA','image/jpeg','eng','KqhMI','yfTNV','test','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Type:\x20','[Quiz]\x20Failed\x20to\x20parse\x20AI\x20response:','image','[Quiz]\x20Starting\x20quiz\x20generation\x20with\x20Gemini\x20Nano...','DamiK','length','\x20\x20\x20','...?','message\x20bot-message','Generated\x20a\x20basic\x20quiz\x20without\x20AI\x20assistance:','[UI]\x20Adding\x20quiz\x20to\x20chat:','writeText','nvdyC','qoysK','HjAew','kPQMs','sendButton','DQTzE','Option\x20A','General','Description\x20of\x20visual\x20elements','30asqmuJ','IpLIP','Additional\x20option\x20','4597005pWbOaK','fromCharCode','[UI]\x20Adding\x20message:\x20','2474tRnSnr','sPaoV','timeLimit','window.ai\x20API\x20not\x20available','6462buIJIX','154oOEfxg','Image\x20and\x20text\x20analysis\x20complete','OqsXR','click','jZTZM','mbcyp','uzIHo','Art','[Chat]\x20Sending\x20message:','catch','open_ended','add','aVTQv','hsiyu','type','HlknM','Error\x20accessing\x20camera:\x20','scrollHeight','width','subject','Bot','2877qelHGQ','content','data-theme','forEach','toString','iAeuu','toLowerCase','GEgmM','[OCR]\x20Worker\x20initialized','[AI]\x20Starting\x20image\x20processing...','title','toISOString','img','mknLD','bVSAt','[AI]\x20Error\x20during\x20image\x20processing:','Visual\x20Analysis','error','User','Please\x20capture\x20an\x20image\x20first\x20before\x20providing\x20quiz\x20requirements.','kZQfa','25090087ofgYFC','chatMessages','hQNAl','dark','trim','AfrKK','documentElement','Option\x20D','What\x20are\x20the\x20key\x20points\x20mentioned\x20in\x20the\x20text?','[Processing]\x20Error\x20during\x20image\x20processing:','Copy\x20Quiz','jvuNo','zVLXo','[OCR]\x20Text\x20extraction\x20result:','ROYGe','HKsTx','getElementById','Visual\x20content\x20detected','Quiz\x20generation\x20failed\x20completely.\x20Please\x20try\x20again\x20later.','message\x20','div','Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz.\x20Please\x20try\x20again.','hSYPb','EKvsC','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','onclick','mediaDevices','message','sMVgT','themeToggle','[Camera]\x20Capturing\x20image...','YFsFt','pre','LIwtX','Copied!','videoWidth','options','JxxRD','ILamA','QsxFb','cameraContainer','ZctdG','AUrCx','TYrYQ','filter','pattern','fFWyl','from','What\x20can\x20you\x20observe\x20in\x20this\x20image?','Make\x20a\x20quiz\x20suitable\x20for\x20beginners','getContext','[Camera]\x20Camera\x20stopped\x20and\x20container\x20hidden','NOSGi','jfHxk','faFgc','messageInput','includes','yVZyy','captured-image','kqWZn','Windows\x20AI\x20API\x20not\x20available','[OCR]\x20Starting\x20text\x20extraction...','NOJnG','confidence','HpuhQ','qNmnQ','createElement','DaGYA','RzHqg','none','Enter','[OCR]\x20Worker\x20terminated','Option\x20B','environment','[Processing]\x20Image\x20processing\x20completed:','points','ZIKDC','Mydra','appendChild','BQiju','topics','initialize','uYMGi','Geography','[Processing]\x20No\x20OCR\x20text\x20found,\x20falling\x20back\x20to\x20image\x20analysis','copy-button','DkGrP','Generating\x20quiz...','topic','Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz\x20using\x20Gemini\x20Nano\x20AI.\x20Please\x20try\x20again.','[Quiz]\x20Constructed\x20system\x20prompt:','fiHSS','kOUCl','scrollTop','map','tQTwq','TFfbB','what','addEventListener'];_0x4992=function(){return _0x603c7c;};return _0x4992();}function generateOptionsFromText(_0x1bc9ed){const _0x71364f=_0x24f9c6,_0x4d3127={'kpojx':function(_0x253ed7,_0x33a7bf){return _0x253ed7+_0x33a7bf;}},_0x378e81=_0x1bc9ed[_0x71364f(0x2a0)](/[.!?]+/)[_0x71364f(0x21e)](_0x27f29a=>_0x27f29a[_0x71364f(0x1f6)]()['length']>0x0),_0x3252f0=_0x378e81[_0x71364f(0x291)](0x0,0x4)[_0x71364f(0x250)](_0x2ddf34=>_0x2ddf34[_0x71364f(0x1f6)]());while(_0x3252f0[_0x71364f(0x2bb)]<0x4){_0x3252f0[_0x71364f(0x2a6)](_0x71364f(0x1bf)+_0x4d3127[_0x71364f(0x289)](_0x3252f0[_0x71364f(0x2bb)],0x1));}return _0x3252f0;}function generateCustomQuestion(_0x5018a9,_0xef012c){const _0x46a6eb=_0x24f9c6,_0x506d6d={'PSWDT':_0x46a6eb(0x253)};return _0x5018a9[_0x46a6eb(0x1e3)]()[_0x46a6eb(0x22a)](_0x506d6d['PSWDT'])?_0x5018a9:_0x46a6eb(0x262)+_0xef012c[_0x46a6eb(0x2a0)]('\x20')[_0x46a6eb(0x291)](0x0,0x3)[_0x46a6eb(0x298)]('\x20')+_0x46a6eb(0x2bd);}function addMessage(_0x1c8862,_0x2fef3d=![]){const _0xf52870=_0x24f9c6,_0x23a290={'yVZyy':_0xf52870(0x1ef),'vkWDb':_0xf52870(0x1dc),'faFgc':_0xf52870(0x206),'sMVgT':'bot-message'};console[_0xf52870(0x2a3)](_0xf52870(0x1c2)+(_0x2fef3d?_0x23a290[_0xf52870(0x22b)]:_0x23a290['vkWDb'])+':',_0x1c8862);const _0x3994fe=document[_0xf52870(0x234)](_0x23a290[_0xf52870(0x228)]);_0x3994fe[_0xf52870(0x256)]=_0xf52870(0x205)+(_0x2fef3d?_0xf52870(0x2a2):_0x23a290[_0xf52870(0x20e)]),_0x3994fe['textContent']=_0x1c8862,chatMessages[_0xf52870(0x240)](_0x3994fe),chatMessages[_0xf52870(0x24f)]=chatMessages[_0xf52870(0x1d9)];}function addQuiz(_0x669bb4){const _0x3d15ac=_0x24f9c6,_0xab37ce={'AfrKK':_0x3d15ac(0x212),'bVSAt':'button','mknLD':_0x3d15ac(0x247),'TVhpb':'Copy\x20Quiz'};console[_0x3d15ac(0x2a3)](_0x3d15ac(0x2c0),_0x669bb4);const _0x271bc0=document[_0x3d15ac(0x234)]('div');_0x271bc0[_0x3d15ac(0x256)]='quiz-container';const _0x2e8e1c='\x0a\x20\x20\x20\x20\x20\x20\x20\x20Title:\x20'+_0x669bb4[_0x3d15ac(0x1e7)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20Grade:\x20'+_0x669bb4[_0x3d15ac(0x27d)]+_0x3d15ac(0x25c)+_0x669bb4[_0x3d15ac(0x1db)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20Time\x20Limit:\x20'+_0x669bb4[_0x3d15ac(0x1c5)]+_0x3d15ac(0x27e)+_0x669bb4[_0x3d15ac(0x24a)]+_0x3d15ac(0x2ac)+_0x669bb4['questions'][_0x3d15ac(0x250)]((_0x310137,_0x212922)=>_0x3d15ac(0x20a)+(_0x212922+0x1)+'.\x20'+_0x310137[_0x3d15ac(0x26d)]+_0x3d15ac(0x20a)+(_0x310137[_0x3d15ac(0x216)]?_0x310137['options']['map']((_0x395d66,_0x6f4618)=>_0x3d15ac(0x2bc)+String[_0x3d15ac(0x1c1)](0x61+_0x6f4618)+')\x20'+_0x395d66)[_0x3d15ac(0x298)]('\x0a'):'')+_0x3d15ac(0x2b6)+_0x310137[_0x3d15ac(0x1d6)]+_0x3d15ac(0x268)+_0x310137[_0x3d15ac(0x23d)]+_0x3d15ac(0x20a))[_0x3d15ac(0x298)]('\x0a')+'\x0a\x20\x20\x20\x20',_0x10e3e6=document[_0x3d15ac(0x234)](_0xab37ce[_0x3d15ac(0x1f7)]);_0x10e3e6['textContent']=_0x2e8e1c,_0x271bc0[_0x3d15ac(0x240)](_0x10e3e6);const _0x5bc34f=document[_0x3d15ac(0x234)](_0xab37ce[_0x3d15ac(0x1eb)]);_0x5bc34f[_0x3d15ac(0x256)]=_0xab37ce[_0x3d15ac(0x1ea)],_0x5bc34f[_0x3d15ac(0x2af)]=_0xab37ce[_0x3d15ac(0x26c)],_0x5bc34f[_0x3d15ac(0x20b)]=()=>{const _0x596952=_0x3d15ac;navigator['clipboard'][_0x596952(0x2c1)](_0x2e8e1c)[_0x596952(0x257)](()=>_0x5bc34f[_0x596952(0x2af)]=_0x596952(0x214))[_0x596952(0x1d1)](_0x1a1a82=>console[_0x596952(0x1ee)](_0x596952(0x281),_0x1a1a82))['finally'](()=>setTimeout(()=>_0x5bc34f['textContent']=_0x596952(0x1fc),0x7d0));},_0x271bc0['appendChild'](_0x5bc34f),chatMessages[_0x3d15ac(0x240)](_0x271bc0),chatMessages[_0x3d15ac(0x24f)]=chatMessages[_0x3d15ac(0x1d9)];}async function captureImage(){const _0x40e71f=_0x24f9c6,_0x5190bc={'TIFmM':function(_0x191493){return _0x191493();},'kOUCl':_0x40e71f(0x206),'sPaoV':_0x40e71f(0x2a8),'hSYPb':_0x40e71f(0x210),'uzIHo':_0x40e71f(0x22c),'TFfbB':_0x40e71f(0x2be),'ULGyO':function(_0x5adc1b){return _0x5adc1b();},'bAoPa':function(_0x3de727,_0x2b67b0){return _0x3de727(_0x2b67b0);},'OqsXR':_0x40e71f(0x23c),'kZQfa':function(_0x2985c3,_0x143ad8,_0x5b634b){return _0x2985c3(_0x143ad8,_0x5b634b);},'UThRu':'Generate\x20multiple\x20choice\x20questions\x20about\x20this\x20picture','lyiRr':_0x40e71f(0x223),'qoysK':function(_0xc2e8c3,_0x2fe21f,_0x354021){return _0xc2e8c3(_0x2fe21f,_0x354021);},'KieQg':_0x40e71f(0x260)};console[_0x40e71f(0x2a3)](_0x5190bc[_0x40e71f(0x208)]);try{const _0x2e704e=document[_0x40e71f(0x234)](_0x40e71f(0x259));_0x2e704e[_0x40e71f(0x1da)]=cameraPreview[_0x40e71f(0x215)],_0x2e704e['height']=cameraPreview[_0x40e71f(0x285)],_0x2e704e[_0x40e71f(0x224)]('2d')[_0x40e71f(0x29b)](cameraPreview,0x0,0x0);const _0x1501e4=document[_0x40e71f(0x234)](_0x40e71f(0x1e9));_0x1501e4[_0x40e71f(0x279)]=_0x2e704e[_0x40e71f(0x29c)](_0x40e71f(0x2b1)),_0x1501e4['className']=_0x5190bc[_0x40e71f(0x1ce)];const _0x5691ff=document[_0x40e71f(0x234)](_0x40e71f(0x206));_0x5691ff[_0x40e71f(0x256)]=_0x5190bc[_0x40e71f(0x252)],_0x5691ff[_0x40e71f(0x240)](_0x1501e4),chatMessages[_0x40e71f(0x240)](_0x5691ff),_0x5190bc['ULGyO'](stopCamera);const _0x489042=await _0x5190bc[_0x40e71f(0x29f)](processImageUsingTesseract,_0x1501e4);imageContext=_0x489042,console[_0x40e71f(0x2a3)](_0x5190bc[_0x40e71f(0x1ca)],JSON[_0x40e71f(0x278)](imageContext,null,0x2)),_0x5190bc[_0x40e71f(0x1f1)](addMessage,'Image\x20captured!\x20Please\x20provide\x20your\x20requirements\x20for\x20the\x20quiz.',![]);const _0x47db59=['Create\x20a\x20quiz\x20about\x20'+imageContext[_0x40e71f(0x242)][0x0]+_0x40e71f(0x25a)+imageContext[_0x40e71f(0x1de)],imageContext[_0x40e71f(0x1d6)]===_0x40e71f(0x25e)?_0x40e71f(0x27a)+imageContext[_0x40e71f(0x1de)]:_0x5190bc[_0x40e71f(0x2a5)],_0x5190bc['lyiRr']];_0x47db59[_0x40e71f(0x1e0)](_0x4a73fc=>{const _0x477c02=_0x40e71f,_0x34570d={'NOJnG':function(_0x774f6c){const _0x5abb88=_0x1dcd;return _0x5190bc[_0x5abb88(0x272)](_0x774f6c);}},_0x4be07c=document['createElement'](_0x5190bc[_0x477c02(0x24e)]);_0x4be07c[_0x477c02(0x256)]=_0x5190bc[_0x477c02(0x1c4)],_0x4be07c['textContent']=_0x4a73fc,_0x4be07c['onclick']=()=>{const _0x328e47=_0x477c02;messageInput['value']=_0x4a73fc,_0x34570d[_0x328e47(0x230)](sendMessage);},chatMessages['appendChild'](_0x4be07c);});}catch(_0x5a59b6){console[_0x40e71f(0x1ee)]('[Camera]\x20Error\x20processing\x20captured\x20image:',_0x5a59b6),_0x5190bc[_0x40e71f(0x2c3)](addMessage,_0x5190bc['KieQg'],![]);}}async function sendMessage(){const _0x570b46=_0x24f9c6,_0xb971df={'zVLXo':_0x570b46(0x1d0),'DaGYA':function(_0x42ffe9,_0x2072ca,_0x3752af){return _0x42ffe9(_0x2072ca,_0x3752af);},'TYrYQ':function(_0x103982,_0x2600a2,_0x1495ca){return _0x103982(_0x2600a2,_0x1495ca);},'XIuPw':'I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20requirements:','JxxRD':function(_0x47db1d,_0x661c63){return _0x47db1d(_0x661c63);},'ZctdG':_0x570b46(0x207),'hQNAl':_0x570b46(0x1f0)},_0x423d55=messageInput[_0x570b46(0x273)][_0x570b46(0x1f6)]();if(!_0x423d55)return;console[_0x570b46(0x2a3)](_0xb971df[_0x570b46(0x1fe)],_0x423d55),_0xb971df[_0x570b46(0x235)](addMessage,_0x423d55,!![]),messageInput[_0x570b46(0x273)]='';if(imageContext)try{const _0x24611c=await _0xb971df[_0x570b46(0x21d)](generateQuizUsingAI,imageContext,_0x423d55);addMessage(_0xb971df['XIuPw'],![]),_0xb971df[_0x570b46(0x217)](addQuiz,_0x24611c);}catch(_0x534412){addMessage(_0xb971df[_0x570b46(0x21b)],![]);}else _0xb971df[_0x570b46(0x21d)](addMessage,_0xb971df[_0x570b46(0x1f4)],![]);}function toggleTheme(){const _0x1fd70d=_0x24f9c6,_0x532599={'jfHxk':_0x1fd70d(0x1df),'HjAew':function(_0x17ef5b,_0xeefd00){return _0x17ef5b===_0xeefd00;},'nSorR':_0x1fd70d(0x1f5),'fFWyl':'light','WXqft':'theme'},_0x5e0309=document[_0x1fd70d(0x1f8)],_0x38969e=_0x5e0309['getAttribute'](_0x532599[_0x1fd70d(0x227)]),_0xf3ffc1=_0x532599[_0x1fd70d(0x2c4)](_0x38969e,_0x532599['nSorR'])?_0x532599[_0x1fd70d(0x220)]:_0x532599[_0x1fd70d(0x27c)];_0x5e0309[_0x1fd70d(0x255)](_0x1fd70d(0x1df),_0xf3ffc1),localStorage[_0x1fd70d(0x263)](_0x532599[_0x1fd70d(0x297)],_0xf3ffc1);}themeToggle[_0x24f9c6(0x254)](_0x24f9c6(0x1cb),toggleTheme),cameraButton[_0x24f9c6(0x254)](_0x24f9c6(0x1cb),startCamera),captureButton[_0x24f9c6(0x254)](_0x24f9c6(0x1cb),captureImage),cancelButton[_0x24f9c6(0x254)](_0x24f9c6(0x1cb),stopCamera),sendButton[_0x24f9c6(0x254)](_0x24f9c6(0x1cb),sendMessage),messageInput[_0x24f9c6(0x254)]('keypress',_0x3e90ec=>{const _0x47e3cc=_0x24f9c6,_0x585282={'HpuhQ':function(_0x145eb3,_0x147df6){return _0x145eb3===_0x147df6;},'MJYQD':function(_0x5b2e2e){return _0x5b2e2e();}};if(_0x585282[_0x47e3cc(0x232)](_0x3e90ec[_0x47e3cc(0x28b)],_0x47e3cc(0x238)))_0x585282['MJYQD'](sendMessage);});async function generateQuizWithoutAI(_0xb25958,_0x39ced2){const _0x1c3b53=_0x24f9c6,_0x22dde3={'NagfH':'[Quiz]\x20Generating\x20quiz...','zBQpH':function(_0x14c781,_0x466b82){return _0x14c781===_0x466b82;},'NOSGi':_0x1c3b53(0x25e),'lmsef':'multiple_choice','uwLyu':_0x1c3b53(0x1fa),'ZIKDC':_0x1c3b53(0x222),'MhiOi':_0x1c3b53(0x1d2),'AUrCx':_0x1c3b53(0x1bc),'QsxFb':function(_0x1e6942,_0x5efabd,_0x1689f5){return _0x1e6942(_0x5efabd,_0x1689f5);},'jvuNo':'Option\x20A','ILamA':_0x1c3b53(0x23a),'xEScT':'Option\x20C','YFsFt':_0x1c3b53(0x1f9),'EIIri':_0x1c3b53(0x1bb),'hsiyu':'[Quiz]\x20Error\x20generating\x20quiz:'};console[_0x1c3b53(0x2a3)](_0x22dde3[_0x1c3b53(0x26b)],{'imageContext':_0xb25958,'userPrompt':_0x39ced2});try{const _0x1fbd8c=_0x22dde3['zBQpH'](_0xb25958[_0x1c3b53(0x1d6)],_0x22dde3[_0x1c3b53(0x226)]),_0x57b976=_0xb25958[_0x1c3b53(0x1de)],_0x46a9a9=_0xb25958[_0x1c3b53(0x242)],_0x9bd34c=[];_0x1fbd8c?(_0x9bd34c[_0x1c3b53(0x2a6)]({'question':_0x1c3b53(0x292),'type':_0x22dde3[_0x1c3b53(0x29d)],'options':generateOptionsFromText(_0x57b976),'answer':'Option\x20A','points':0x2}),_0x9bd34c['push']({'question':_0x22dde3['uwLyu'],'type':_0x1c3b53(0x1d2),'answer':_0x1c3b53(0x299),'points':0x2})):_0x9bd34c[_0x1c3b53(0x2a6)]({'question':_0x22dde3[_0x1c3b53(0x23e)],'type':_0x22dde3[_0x1c3b53(0x282)],'answer':_0x22dde3[_0x1c3b53(0x21c)],'points':0x2});_0x9bd34c['push']({'question':_0x22dde3[_0x1c3b53(0x219)](generateCustomQuestion,_0x39ced2,_0x57b976),'type':_0x22dde3[_0x1c3b53(0x29d)],'options':[_0x22dde3[_0x1c3b53(0x1fd)],_0x22dde3[_0x1c3b53(0x218)],_0x22dde3['xEScT'],_0x22dde3[_0x1c3b53(0x211)]],'answer':_0x1c3b53(0x1ba),'points':0x2});const _0x404702={'id':Date[_0x1c3b53(0x296)]()[_0x1c3b53(0x1e1)](),'title':_0x46a9a9[0x0]+'\x20Quiz','subject':_0x46a9a9[0x0],'grade':_0x22dde3['EIIri'],'timeLimit':0xf,'topic':_0x46a9a9[_0x1c3b53(0x298)](',\x20'),'questions':_0x9bd34c};return _0x404702;}catch(_0x4d3ba2){console[_0x1c3b53(0x1ee)](_0x22dde3[_0x1c3b53(0x1d5)],_0x4d3ba2);throw _0x4d3ba2;}}