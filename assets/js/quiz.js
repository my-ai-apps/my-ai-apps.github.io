
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x69c74d=_0x559c;(function(_0x5dd226,_0x572e95){const _0x5cc6e0=_0x559c,_0x39e798=_0x5dd226();while(!![]){try{const _0x13774e=parseInt(_0x5cc6e0(0x1ee))/0x1*(parseInt(_0x5cc6e0(0x186))/0x2)+parseInt(_0x5cc6e0(0x178))/0x3+-parseInt(_0x5cc6e0(0x157))/0x4+parseInt(_0x5cc6e0(0x17b))/0x5+parseInt(_0x5cc6e0(0x141))/0x6*(-parseInt(_0x5cc6e0(0x1c9))/0x7)+parseInt(_0x5cc6e0(0x18f))/0x8+parseInt(_0x5cc6e0(0x184))/0x9*(-parseInt(_0x5cc6e0(0x1b1))/0xa);if(_0x13774e===_0x572e95)break;else _0x39e798['push'](_0x39e798['shift']());}catch(_0x5bd09a){_0x39e798['push'](_0x39e798['shift']());}}}(_0x5e84,0x4cf13));function _0x559c(_0x58a009,_0x31c50d){const _0x5e8467=_0x5e84();return _0x559c=function(_0x559ca8,_0x191bc4){_0x559ca8=_0x559ca8-0x130;let _0x4d6173=_0x5e8467[_0x559ca8];return _0x4d6173;},_0x559c(_0x58a009,_0x31c50d);}import{Logger}from'./common.js';const chatMessages=document['getElementById']('chatMessages'),messageInput=document['getElementById'](_0x69c74d(0x1e3)),sendButton=document['getElementById'](_0x69c74d(0x1c5)),cameraButton=document[_0x69c74d(0x236)](_0x69c74d(0x1c6)),themeToggle=document[_0x69c74d(0x236)](_0x69c74d(0x20f)),cameraContainer=document[_0x69c74d(0x236)](_0x69c74d(0x249)),cameraPreview=document['getElementById'](_0x69c74d(0x19d)),captureButton=document[_0x69c74d(0x236)](_0x69c74d(0x169)),cancelButton=document[_0x69c74d(0x236)](_0x69c74d(0x180));let stream=null,imageContext=null;function _0x5e84(){const _0xbc2a2a=['[AI]\x20Creating\x20image\x20recognition\x20session...','AdNvE','[OCR]\x20Text\x20extraction\x20result:','HJvaI','clipboard','add','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Format\x20the\x20response\x20as\x20a\x20JSON\x20quiz\x20object\x20with\x20id,\x20grade,\x20subject,\x20title,\x20timeLimit,\x20topic,\x20and\x20questions\x20array.','[Camera]\x20Starting\x20camera\x20initialization...','TvpEr','713994JDzduR','GyOqs','[Quiz]\x20Failed\x20to\x20parse\x20AI\x20response:','1815915whHcKl','label','LtRYq','\x20Quiz','none','cancelButton','GZdUg','message','text','9pOhgec','writeText','119122YylFRm','cTNsy','Student\x20should\x20identify\x20main\x20points\x20from\x20the\x20text','[Processing]\x20Image\x20processing\x20completed:','nCLrv','promptStreaming','BomzK','rDuJQ','Ffggz','2030856hGhOJh','getTracks','scrollHeight','Image\x20and\x20text\x20analysis\x20complete','loadLanguage','VoHlj','cjFtb','...?','key','I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20requirements:','tsleh','message\x20','Copy\x20failed:','qGRhr','cameraPreview','type','remove','image/jpeg','[AI]\x20Image\x20session\x20created:','style','documentElement','TOQaZ','Visual\x20content\x20detected','FMQAa','[Quiz]\x20Generating\x20quiz...','nMStE','yuseS','Please\x20capture\x20an\x20image\x20first\x20before\x20providing\x20quiz\x20requirements.','[Quiz]\x20Fallback\x20generation\x20also\x20failed:','videoWidth','[Camera]\x20Error\x20processing\x20captured\x20image:','src','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','VSVcg','6255870eCcDur','open_ended','toString','Mathematics','createElement','[Processing]\x20No\x20OCR\x20text\x20found,\x20falling\x20back\x20to\x20image\x20analysis','value','toLowerCase','Create\x20a\x20quiz\x20about\x20','fLWVl','setItem','magVY','terminate','DKFBx','PTYLO','quiz-container','RZvpo','eqYxL','mediaDevices','Generating\x20quiz...','sendButton','cameraButton','apDjn','stringify','35pvsHeG','grade','vqmBn','RiScq','options','subject','AiEUJ','keypress','bot-message','lDDdm','[OCR]\x20Worker\x20terminated','Based\x20on\x20the\x20text,\x20what\x20is\x20the\x20main\x20topic\x20being\x20discussed?','uURAO','JpkJX','getContext','toISOString','VDrYN','dark','message\x20bot-message','Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz\x20using\x20Gemini\x20Nano\x20AI.\x20Please\x20try\x20again.','log','GRjCL','load','Option\x20A','push','timeLimit','messageInput','YXmhA','Sorry,\x20I\x20couldn\x27t\x20process\x20the\x20image.\x20Please\x20try\x20again.','[OCR]\x20Error\x20in\x20text\x20extraction:','points','ysKoc','what','I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20image\x20and\x20requirements:','svmuI','environment','recognize','10JMPJLF','srcObject','img','iCUHJ','onclick','KDdZD','data','initialize','[Quiz]\x20Constructed\x20system\x20prompt:','[Quiz]\x20Starting\x20quiz\x20generation\x20with\x20Gemini\x20Nano...','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Type:\x20','user-message','Additional\x20option\x20','QOtIJ','dnXVI','addEventListener','length','[Processing]\x20Error\x20during\x20image\x20processing:','theme','[Processing]\x20Starting\x20image\x20OCR\x20analysis...','imageContext:','Option\x20C','copy-button','join','rbprf','gmkCA','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Grade:\x20','[Chat]\x20Sending\x20message:','EaGhJ','Make\x20a\x20quiz\x20suitable\x20for\x20beginners','EhgdV','map','Xjuax','themeToggle','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Title:\x20','multiple_choice','JKTOh','getUserMedia','scrollTop','[AI]\x20Starting\x20image\x20processing...','captured-image','className','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Time\x20Limit:\x20','toDataURL','You\x20are\x20a\x20quiz\x20generator.\x20Create\x20a\x20quiz\x20based\x20on\x20the\x20following\x20image\x20context\x20and\x20user\x20requirements.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Image\x20context:\x20','What\x20are\x20the\x20key\x20points\x20mentioned\x20in\x20the\x20text?','CpCUP','[Quiz]\x20Error\x20in\x20quiz\x20generation\x20using\x20Gemini\x20Nano\x20AI:','topic','height','UPBcB','fromCharCode','prompt-suggestion','content','bahfF','iZAUh','click','aygFf','WqPwj','filter','[OCR]\x20Text\x20extracted:','Visual\x20Analysis','KOfwk','UbIQL','VtjCw','hWFmq','General\x20Knowledge','\x20\x20\x20','Bot','slice','light','XhXpl','getElementById','pXaEv','Geography','Option\x20D','CJSkG','Copy\x20Quiz','QhVDx','[Camera]\x20Successfully\x20got\x20media\x20stream:','PcgLF','includes','Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz.\x20Please\x20try\x20again.','[UI]\x20Adding\x20quiz\x20to\x20chat:','IWGYk','DnNjm','gNXIk','split','ucQIX','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Points:\x20','History','cameraContainer','error','Image\x20captured!\x20Please\x20provide\x20your\x20requirements\x20for\x20the\x20quiz.','Copied!','data-theme','Windows\x20AI\x20API\x20not\x20available','[Camera]\x20Stopping\x20camera...','then','size','catch','AIzrD','SSAXf','yUuzy','title','UhRHz','button','AiCru','textContent','nrslJ','display','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Subject:\x20','jOnGs','WnfQO','513066XwAIyj','eng','uaoeW','\x0a\x0aUser\x20request:\x20','[Camera]\x20Capturing\x20image...','stop','bjfMd','[Camera]\x20Stopping\x20track:','What\x20is\x20the\x20significance\x20of\x20','byQXy','ZjMLH','lGfwM','appendChild','div','GwIdR','createWorker','QTeHP','pRGta','iuEDP','\x20minutes\x0a\x20\x20\x20\x20\x20\x20\x20\x20Topics:\x20','hssBZ','What\x20can\x20you\x20observe\x20in\x20this\x20image?','329404nTQEbc','forEach','tLdEI','[AI]\x20Performing\x20image\x20recognition...','test','question','system','topics','\x0a\x20\x20\x20\x20','mxNvs','[OCR]\x20Starting\x20text\x20extraction...','trim','DCTCY','igHtH','from','CiRni','Description\x20of\x20visual\x20elements','Processing\x20image...','captureButton','UzNXc','videoHeight','oYhAp','DCEPw','LvlUS'];_0x5e84=function(){return _0xbc2a2a;};return _0x5e84();}async function startCamera(){const _0x502285=_0x69c74d,_0x15a608={'GwIdR':_0x502285(0x176),'AIzrD':_0x502285(0x1ec),'VoHlj':'flex','hWFmq':'[Camera]\x20Camera\x20preview\x20started\x20and\x20container\x20displayed','BomzK':'[Camera]\x20Error\x20accessing\x20camera:','VDrYN':'Error\x20accessing\x20camera:\x20'};console[_0x502285(0x1dd)](_0x15a608[_0x502285(0x14f)]);try{stream=await navigator[_0x502285(0x1c3)][_0x502285(0x213)]({'video':{'facingMode':_0x15a608[_0x502285(0x134)]}}),console[_0x502285(0x1dd)](_0x502285(0x23d),stream),cameraPreview[_0x502285(0x1ef)]=stream,cameraContainer[_0x502285(0x1a2)][_0x502285(0x13d)]=_0x15a608[_0x502285(0x194)],console['log'](_0x15a608[_0x502285(0x22f)]);}catch(_0x2c840d){console[_0x502285(0x24a)](_0x15a608[_0x502285(0x18c)],_0x2c840d),addMessage(_0x15a608[_0x502285(0x1d9)]+_0x2c840d[_0x502285(0x182)]);}}function stopCamera(){const _0x380386=_0x69c74d,_0x4cf91f={'iuEDP':_0x380386(0x148),'Xfgbv':_0x380386(0x130),'YXmhA':_0x380386(0x17f),'AiCru':'[Camera]\x20Camera\x20stopped\x20and\x20container\x20hidden'};console[_0x380386(0x1dd)](_0x4cf91f['Xfgbv']),stream&&(stream[_0x380386(0x190)]()[_0x380386(0x158)](_0x29dfa8=>{const _0x447293=_0x380386;console['log'](_0x4cf91f[_0x447293(0x153)],_0x29dfa8[_0x447293(0x17c)]),_0x29dfa8[_0x447293(0x146)]();}),stream=null),cameraContainer[_0x380386(0x1a2)]['display']=_0x4cf91f[_0x380386(0x1e4)],console[_0x380386(0x1dd)](_0x4cf91f[_0x380386(0x13a)]);}async function processImageUsingWindowAI(_0x5d4c8f){const _0x46ca64=_0x69c74d,_0xdcab15={'gNXIk':_0x46ca64(0x215),'PTYLO':'[AI]\x20Windows\x20AI\x20API\x20not\x20found\x20in\x20window\x20object','XhXpl':_0x46ca64(0x24e),'AiEUJ':_0x46ca64(0x15a),'rDuJQ':'[AI]\x20Image\x20recognition\x20completed.\x20Result:'};console['log'](_0xdcab15[_0x46ca64(0x244)],_0x5d4c8f);if(!window['ai']){console[_0x46ca64(0x24a)](_0xdcab15[_0x46ca64(0x1bf)]);throw new Error(_0xdcab15[_0x46ca64(0x235)]);}try{console['log'](_0x46ca64(0x16f));const _0x2b89bb=await window['ai']['createImageSession']();console[_0x46ca64(0x1dd)](_0x46ca64(0x1a1),_0x2b89bb),console[_0x46ca64(0x1dd)](_0xdcab15[_0x46ca64(0x1cf)]);const _0x3f9988=await _0x2b89bb[_0x46ca64(0x1ed)](_0x5d4c8f);return console[_0x46ca64(0x1dd)](_0xdcab15[_0x46ca64(0x18d)],_0x3f9988),_0x3f9988;}catch(_0xa5e831){console[_0x46ca64(0x24a)]('[AI]\x20Error\x20during\x20image\x20processing:',_0xa5e831);throw _0xa5e831;}}async function processImageUsingTesseract(_0x5bb791){const _0x32279e=_0x69c74d,_0x116a8b={'FMQAa':function(_0x2b4b82,_0x1720e0,_0x2276f0){return _0x2b4b82(_0x1720e0,_0x2276f0);},'QOtIJ':function(_0x3aef8d,_0xb5d3e8){return _0x3aef8d(_0xb5d3e8);},'fxnQx':_0x32279e(0x171),'lGfwM':function(_0x82292a,_0xa27830){return _0x82292a>_0xa27830;},'yUuzy':_0x32279e(0x183),'iCUHJ':'Washington\x20Drivers\x20License\x20Test','UPBcB':'image','pRGta':_0x32279e(0x1a5),'EhgdV':_0x32279e(0x230),'igHtH':_0x32279e(0x1ff)};console[_0x32279e(0x1dd)](_0x32279e(0x201)),_0x116a8b[_0x32279e(0x1a6)](addMessage,_0x32279e(0x168),![]);try{const _0x28bd4c=await _0x116a8b[_0x32279e(0x1fb)](extractTextFromImage,_0x5bb791);return console[_0x32279e(0x1dd)](_0x116a8b['fxnQx'],_0x28bd4c),_0x28bd4c[_0x32279e(0x183)]&&_0x116a8b[_0x32279e(0x14c)](_0x28bd4c[_0x32279e(0x183)][_0x32279e(0x162)]()[_0x32279e(0x1fe)],0x0)?{'type':_0x116a8b[_0x32279e(0x136)],'content':_0x116a8b[_0x32279e(0x1f1)],'confidence':_0x28bd4c['confidence'],'topics':_0x116a8b[_0x32279e(0x1fb)](generateTopics,_0x28bd4c[_0x32279e(0x183)])}:(console[_0x32279e(0x1dd)](_0x32279e(0x1b6)),{'type':_0x116a8b[_0x32279e(0x220)],'content':_0x116a8b[_0x32279e(0x152)],'topics':[_0x32279e(0x22b),_0x116a8b[_0x32279e(0x20c)]],'features':{'timestamp':new Date()[_0x32279e(0x1d8)](),'dimensions':{'width':_0x5bb791['width'],'height':_0x5bb791[_0x32279e(0x21f)]}}});}catch(_0x3f9908){console[_0x32279e(0x24a)](_0x116a8b[_0x32279e(0x164)],_0x3f9908);throw _0x3f9908;}}async function extractTextFromImage(_0x3cdda2){const _0x16ba95=_0x69c74d,_0x5f37c2={'TOQaZ':_0x16ba95(0x161),'qGRhr':_0x16ba95(0x142),'gmkCA':_0x16ba95(0x22a),'DCEPw':_0x16ba95(0x1d3),'TvpEr':function(_0x3030fe,_0x1dc869){return _0x3030fe(_0x1dc869);},'OViAf':_0x16ba95(0x192),'JpkJX':_0x16ba95(0x1e6)};console[_0x16ba95(0x1dd)](_0x5f37c2[_0x16ba95(0x1a4)]);const _0x54b13d=_0x5f37c2[_0x16ba95(0x19c)];try{const _0x3c1e03=await Tesseract[_0x16ba95(0x150)]();await _0x3c1e03[_0x16ba95(0x1df)](),await _0x3c1e03[_0x16ba95(0x193)](_0x54b13d),await _0x3c1e03[_0x16ba95(0x1f5)](_0x54b13d),console['log']('[OCR]\x20Worker\x20initialized');const _0x2c1d3e=await _0x3c1e03[_0x16ba95(0x1ed)](_0x3cdda2);console[_0x16ba95(0x1dd)](_0x5f37c2[_0x16ba95(0x207)],_0x2c1d3e[_0x16ba95(0x1f4)][_0x16ba95(0x183)]),await _0x3c1e03[_0x16ba95(0x1bd)](),console[_0x16ba95(0x1dd)](_0x5f37c2[_0x16ba95(0x16d)]);const _0x565127={'timestamp':new Date()[_0x16ba95(0x1d8)](),'imageSize':{'width':_0x3cdda2['width'],'height':_0x3cdda2[_0x16ba95(0x21f)]},'extractedText':_0x2c1d3e['data'][_0x16ba95(0x183)],'confidenceScore':_0x2c1d3e[_0x16ba95(0x1f4)]['confidence'],'suggestedTopics':_0x5f37c2[_0x16ba95(0x177)](generateTopics,_0x2c1d3e[_0x16ba95(0x1f4)]['text'])};return{'description':_0x5f37c2['OViAf'],'metadata':_0x565127,'text':_0x2c1d3e[_0x16ba95(0x1f4)]['text'],'confidence':_0x2c1d3e['data']['confidence']};}catch(_0x3b1bd0){return console[_0x16ba95(0x24a)](_0x5f37c2[_0x16ba95(0x1d6)],_0x3b1bd0),{'text':'','confidence':0x0};}}function generateTopics(_0x447510){const _0x2bcf51=_0x69c74d,_0x559f7f={'AdNvE':_0x2bcf51(0x248),'vqmBn':'Language\x20Arts','pXaEv':'Art','nrslJ':function(_0x59dda3,_0x405965){return _0x59dda3===_0x405965;},'gMXSZ':'General\x20Knowledge'},_0x1b48c3=new Set(),_0x4b175f=_0x447510[_0x2bcf51(0x1b8)](),_0x487ce1=[{'pattern':/\b(math|equation|calculate|formula|number)\b/,'topic':_0x2bcf51(0x1b4)},{'pattern':/\b(science|experiment|chemical|biology|physics)\b/,'topic':'Science'},{'pattern':/\b(history|century|ancient|war|empire|civilization)\b/,'topic':_0x559f7f[_0x2bcf51(0x170)]},{'pattern':/\b(geography|country|capital|mountain|river|climate)\b/,'topic':_0x2bcf51(0x238)},{'pattern':/\b(grammar|sentence|paragraph|essay|writing)\b/,'topic':_0x559f7f[_0x2bcf51(0x1cb)]},{'pattern':/\b(art|color|design|paint|draw)\b/,'topic':_0x559f7f[_0x2bcf51(0x237)]}];return _0x487ce1['forEach'](_0x1f2457=>{const _0x5c191e=_0x2bcf51;_0x1f2457['pattern'][_0x5c191e(0x15b)](_0x4b175f)&&_0x1b48c3[_0x5c191e(0x174)](_0x1f2457[_0x5c191e(0x21e)]);}),_0x559f7f[_0x2bcf51(0x13c)](_0x1b48c3[_0x2bcf51(0x132)],0x0)&&_0x1b48c3[_0x2bcf51(0x174)](_0x559f7f['gMXSZ']),Array[_0x2bcf51(0x165)](_0x1b48c3);}async function generateQuizUsingAI(_0x39397e,_0xc51e29){const _0x50f175=_0x69c74d,_0x5888c8={'uIyIM':_0x50f175(0x1f7),'GNmEK':'window.ai\x20API\x20not\x20available','DCTCY':_0x50f175(0x1f6),'bjfMd':_0x50f175(0x15d),'jOnGs':'user','siXKH':'div','EaGhJ':'message\x20bot-message\x20streaming','GyOqs':function(_0x1ab6c1,_0x41b4f5,_0x3ac997){return _0x1ab6c1(_0x41b4f5,_0x3ac997);},'bwTAf':_0x50f175(0x1c4),'bahfF':function(_0x570cbb){return _0x570cbb();},'DnNjm':function(_0x3b31b6,_0x339999){return _0x3b31b6(_0x339999);},'hssBZ':function(_0x37dd8b,_0x36de8f){return _0x37dd8b(_0x36de8f);},'aygFf':_0x50f175(0x17a),'iZAUh':function(_0x596810){return _0x596810();},'TNwih':_0x50f175(0x21d),'hbeLl':function(_0x5e536f){return _0x5e536f();},'ucQIX':_0x50f175(0x1dc),'svmuI':function(_0x4e51c0,_0x3397ee,_0x14251f){return _0x4e51c0(_0x3397ee,_0x14251f);},'JyZMj':'Generated\x20a\x20basic\x20quiz\x20without\x20AI\x20assistance:','KDdZD':function(_0x1b77e1,_0x399a4e){return _0x1b77e1(_0x399a4e);},'magVY':_0x50f175(0x1ab),'SSAXf':'Quiz\x20generation\x20failed\x20completely.\x20Please\x20try\x20again\x20later.'};console[_0x50f175(0x1dd)](_0x5888c8['uIyIM'],{'imageContext':_0x39397e,'userPrompt':_0xc51e29});try{console[_0x50f175(0x1dd)](_0x50f175(0x202),JSON[_0x50f175(0x1c8)](_0x39397e));if(!window['ai'])throw new Error(_0x5888c8['GNmEK']);const _0x26b74e=_0x50f175(0x21a)+JSON[_0x50f175(0x1c8)](_0x39397e)+_0x50f175(0x175);console[_0x50f175(0x1dd)](_0x5888c8[_0x50f175(0x163)],_0x26b74e);const _0x5ddb24=[{'role':_0x5888c8[_0x50f175(0x147)],'content':_0x26b74e},{'role':_0x5888c8[_0x50f175(0x13f)],'content':_0xc51e29}],_0x350a9f=document[_0x50f175(0x1b5)](_0x5888c8['siXKH']);_0x350a9f[_0x50f175(0x217)]=_0x5888c8[_0x50f175(0x20a)],chatMessages[_0x50f175(0x14d)](_0x350a9f),_0x5888c8[_0x50f175(0x179)](showTypingIndicator,chatMessages,_0x5888c8['bwTAf']);if(!aiLanguageSession)await _0x5888c8[_0x50f175(0x224)](initializeLanguageSession);const _0x44c061=await aiLanguageSession[_0x50f175(0x18b)](_0x26b74e+_0x50f175(0x144)+_0xc51e29);let _0x592659='';for await(const _0x3e1ade of _0x44c061){_0x592659+=_0x3e1ade,_0x350a9f[_0x50f175(0x13b)]=_0x592659,chatMessages[_0x50f175(0x214)]=chatMessages['scrollHeight'];}_0x350a9f[_0x50f175(0x19f)]();let _0x311979;try{_0x311979=_0x5888c8[_0x50f175(0x243)](safeJSONParse,_0x592659),_0x5888c8[_0x50f175(0x179)](addMessage,_0x50f175(0x1ea),![]),_0x5888c8[_0x50f175(0x155)](addQuiz,_0x311979);}catch(_0x29e554){console[_0x50f175(0x24a)](_0x5888c8[_0x50f175(0x227)],_0x29e554),_0x5888c8[_0x50f175(0x179)](addMessage,_0x592659,![]);throw _0x29e554;}_0x5888c8[_0x50f175(0x225)](removeTypingIndicator);}catch(_0x232e1b){console[_0x50f175(0x24a)](_0x5888c8['TNwih'],_0x232e1b),_0x5888c8['hbeLl'](removeTypingIndicator),_0x5888c8[_0x50f175(0x179)](addMessage,_0x5888c8[_0x50f175(0x246)],![]);try{const _0x52423e=await _0x5888c8[_0x50f175(0x1eb)](generateQuizWithoutAI,_0x39397e,_0xc51e29);addMessage(_0x5888c8['JyZMj'],![]),_0x5888c8[_0x50f175(0x1f3)](addQuiz,_0x52423e);}catch(_0xce81f4){console[_0x50f175(0x24a)](_0x5888c8[_0x50f175(0x1bc)],_0xce81f4),addMessage(_0x5888c8[_0x50f175(0x135)],![]);}}}function generateOptionsFromText(_0x238f2d){const _0x109553=_0x69c74d,_0x48b53a={'CJSkG':function(_0x1d98f4,_0x3103a0){return _0x1d98f4<_0x3103a0;},'UkaLh':function(_0x1213c2,_0x3c27df){return _0x1213c2+_0x3c27df;},'kxBzw':_0x109553(0x1fa),'LtRYq':function(_0x3330fe,_0x4ba74d){return _0x3330fe+_0x4ba74d;}},_0xe3717e=_0x238f2d[_0x109553(0x245)](/[.!?]+/)[_0x109553(0x229)](_0x2ba577=>_0x2ba577['trim']()[_0x109553(0x1fe)]>0x0),_0x5a8caf=_0xe3717e[_0x109553(0x233)](0x0,0x4)[_0x109553(0x20d)](_0x3181f4=>_0x3181f4[_0x109553(0x162)]());while(_0x48b53a[_0x109553(0x23a)](_0x5a8caf[_0x109553(0x1fe)],0x4)){_0x5a8caf[_0x109553(0x1e1)](_0x48b53a['UkaLh'](_0x48b53a['kxBzw'],_0x48b53a[_0x109553(0x17d)](_0x5a8caf[_0x109553(0x1fe)],0x1)));}return _0x5a8caf;}function generateCustomQuestion(_0x55e20d,_0x229c8b){const _0x5077fe=_0x69c74d,_0x580ab0={'oGQAC':_0x5077fe(0x1e9)};return _0x55e20d[_0x5077fe(0x1b8)]()[_0x5077fe(0x23f)](_0x580ab0['oGQAC'])?_0x55e20d:_0x5077fe(0x149)+_0x229c8b[_0x5077fe(0x245)]('\x20')['slice'](0x0,0x3)[_0x5077fe(0x205)]('\x20')+_0x5077fe(0x196);}function addMessage(_0x3593c6,_0x25bfea=![]){const _0x5b53ef=_0x69c74d,_0x46ce71={'tLdEI':_0x5b53ef(0x232),'HJvaI':_0x5b53ef(0x14e),'JKTOh':_0x5b53ef(0x1f9),'UzNXc':_0x5b53ef(0x1d1)};console[_0x5b53ef(0x1dd)]('[UI]\x20Adding\x20message:\x20'+(_0x25bfea?'User':_0x46ce71[_0x5b53ef(0x159)])+':',_0x3593c6);const _0x20ef50=document[_0x5b53ef(0x1b5)](_0x46ce71[_0x5b53ef(0x172)]);_0x20ef50[_0x5b53ef(0x217)]=_0x5b53ef(0x19a)+(_0x25bfea?_0x46ce71[_0x5b53ef(0x212)]:_0x46ce71[_0x5b53ef(0x16a)]),_0x20ef50[_0x5b53ef(0x13b)]=_0x3593c6,chatMessages['appendChild'](_0x20ef50),chatMessages[_0x5b53ef(0x214)]=chatMessages[_0x5b53ef(0x191)];}function addQuiz(_0x3e3ddc){const _0x209a90=_0x69c74d,_0x122e55={'yuseS':_0x209a90(0x241),'QhVDx':_0x209a90(0x1c0),'ysKoc':'pre','QTeHP':_0x209a90(0x139)};console[_0x209a90(0x1dd)](_0x122e55[_0x209a90(0x1a9)],_0x3e3ddc);const _0x469672=document[_0x209a90(0x1b5)](_0x209a90(0x14e));_0x469672[_0x209a90(0x217)]=_0x122e55[_0x209a90(0x23c)];const _0x7a81f2=_0x209a90(0x210)+_0x3e3ddc[_0x209a90(0x137)]+_0x209a90(0x208)+_0x3e3ddc[_0x209a90(0x1ca)]+_0x209a90(0x13e)+_0x3e3ddc[_0x209a90(0x1ce)]+_0x209a90(0x218)+_0x3e3ddc[_0x209a90(0x1e2)]+_0x209a90(0x154)+_0x3e3ddc[_0x209a90(0x21e)]+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20Questions:\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3e3ddc['questions']['map']((_0x4ad446,_0x44ef38)=>_0x209a90(0x1af)+(_0x44ef38+0x1)+'.\x20'+_0x4ad446[_0x209a90(0x15c)]+_0x209a90(0x1af)+(_0x4ad446['options']?_0x4ad446[_0x209a90(0x1cd)]['map']((_0x2dec99,_0x10b312)=>_0x209a90(0x231)+String[_0x209a90(0x221)](0x61+_0x10b312)+')\x20'+_0x2dec99)[_0x209a90(0x205)]('\x0a'):'')+_0x209a90(0x1f8)+_0x4ad446['type']+_0x209a90(0x247)+_0x4ad446[_0x209a90(0x1e7)]+_0x209a90(0x1af))[_0x209a90(0x205)]('\x0a')+_0x209a90(0x15f),_0x38723d=document[_0x209a90(0x1b5)](_0x122e55[_0x209a90(0x1e8)]);_0x38723d[_0x209a90(0x13b)]=_0x7a81f2,_0x469672['appendChild'](_0x38723d);const _0x4c17c6=document[_0x209a90(0x1b5)](_0x122e55[_0x209a90(0x151)]);_0x4c17c6[_0x209a90(0x217)]=_0x209a90(0x204),_0x4c17c6[_0x209a90(0x13b)]=_0x209a90(0x23b),_0x4c17c6[_0x209a90(0x1f2)]=()=>{const _0x46909b=_0x209a90;navigator[_0x46909b(0x173)][_0x46909b(0x185)](_0x7a81f2)[_0x46909b(0x131)](()=>_0x4c17c6[_0x46909b(0x13b)]=_0x46909b(0x24c))[_0x46909b(0x133)](_0x50749f=>console[_0x46909b(0x24a)](_0x46909b(0x19b),_0x50749f))['finally'](()=>setTimeout(()=>_0x4c17c6[_0x46909b(0x13b)]=_0x46909b(0x23b),0x7d0));},_0x469672[_0x209a90(0x14d)](_0x4c17c6),chatMessages[_0x209a90(0x14d)](_0x469672),chatMessages[_0x209a90(0x214)]=chatMessages['scrollHeight'];}async function captureImage(){const _0x3bf72b=_0x69c74d,_0x5bb742={'PcgLF':function(_0x39c93c){return _0x39c93c();},'uURAO':_0x3bf72b(0x14e),'fLWVl':_0x3bf72b(0x222),'rbprf':_0x3bf72b(0x145),'ZjMLH':'canvas','oYhAp':_0x3bf72b(0x1f0),'cTNsy':_0x3bf72b(0x1a0),'DKFBx':_0x3bf72b(0x216),'GRjCL':function(_0x5b3675){return _0x5b3675();},'UhRHz':function(_0x3d3bc6,_0x2cb3d3){return _0x3d3bc6(_0x2cb3d3);},'xpNdF':_0x3bf72b(0x189),'lDDdm':function(_0x16b380,_0x1d12bc,_0x232a39){return _0x16b380(_0x1d12bc,_0x232a39);},'CpCUP':function(_0x104ec3,_0x293a01){return _0x104ec3===_0x293a01;},'GZdUg':_0x3bf72b(0x183),'eYilJ':_0x3bf72b(0x20b),'JtZXY':function(_0xaf0aac,_0x9c17ff,_0x812ead){return _0xaf0aac(_0x9c17ff,_0x812ead);},'XcOZe':_0x3bf72b(0x1e5)};console[_0x3bf72b(0x1dd)](_0x5bb742[_0x3bf72b(0x206)]);try{const _0x13fccc=document[_0x3bf72b(0x1b5)](_0x5bb742[_0x3bf72b(0x14b)]);_0x13fccc['width']=cameraPreview[_0x3bf72b(0x1ac)],_0x13fccc[_0x3bf72b(0x21f)]=cameraPreview[_0x3bf72b(0x16b)],_0x13fccc[_0x3bf72b(0x1d7)]('2d')['drawImage'](cameraPreview,0x0,0x0);const _0x3dee35=document[_0x3bf72b(0x1b5)](_0x5bb742[_0x3bf72b(0x16c)]);_0x3dee35[_0x3bf72b(0x1ae)]=_0x13fccc[_0x3bf72b(0x219)](_0x5bb742[_0x3bf72b(0x187)]),_0x3dee35[_0x3bf72b(0x217)]=_0x5bb742[_0x3bf72b(0x1be)];const _0x121eea=document[_0x3bf72b(0x1b5)](_0x5bb742['uURAO']);_0x121eea[_0x3bf72b(0x217)]=_0x3bf72b(0x1db),_0x121eea[_0x3bf72b(0x14d)](_0x3dee35),chatMessages[_0x3bf72b(0x14d)](_0x121eea),_0x5bb742[_0x3bf72b(0x1de)](stopCamera);const _0x25f147=await _0x5bb742[_0x3bf72b(0x138)](processImageUsingTesseract,_0x3dee35);imageContext=_0x25f147,console[_0x3bf72b(0x1dd)](_0x5bb742['xpNdF'],JSON['stringify'](imageContext,null,0x2)),_0x5bb742[_0x3bf72b(0x1d2)](addMessage,_0x3bf72b(0x24b),![]);const _0x1968aa=[_0x3bf72b(0x1b9)+imageContext[_0x3bf72b(0x15e)][0x0]+'\x20-\x20'+imageContext['content'],_0x5bb742[_0x3bf72b(0x21c)](imageContext[_0x3bf72b(0x19e)],_0x5bb742[_0x3bf72b(0x181)])?'Generate\x20questions\x20based\x20on\x20the\x20image\x20related\x20text\x20-\x20'+imageContext[_0x3bf72b(0x223)]:'Generate\x20multiple\x20choice\x20questions\x20about\x20this\x20picture',_0x5bb742['eYilJ']];_0x1968aa['forEach'](_0x16a7a4=>{const _0x27279a=_0x3bf72b,_0x2d5da7=document['createElement'](_0x5bb742[_0x27279a(0x1d5)]);_0x2d5da7['className']=_0x5bb742[_0x27279a(0x1ba)],_0x2d5da7[_0x27279a(0x13b)]=_0x16a7a4,_0x2d5da7[_0x27279a(0x1f2)]=()=>{const _0x40c1b6=_0x27279a;messageInput[_0x40c1b6(0x1b7)]=_0x16a7a4,_0x5bb742[_0x40c1b6(0x23e)](sendMessage);},chatMessages[_0x27279a(0x14d)](_0x2d5da7);});}catch(_0xcac621){console[_0x3bf72b(0x24a)](_0x3bf72b(0x1ad),_0xcac621),_0x5bb742['JtZXY'](addMessage,_0x5bb742['XcOZe'],![]);}}async function sendMessage(){const _0x43759d=_0x69c74d,_0xbb4d66={'BNRnl':_0x43759d(0x209),'Ffggz':function(_0x4f4c0a,_0x3d4089,_0x1f6861){return _0x4f4c0a(_0x3d4089,_0x1f6861);},'IWGYk':function(_0x1ffc10,_0x4802fa,_0x238134){return _0x1ffc10(_0x4802fa,_0x238134);},'apDjn':_0x43759d(0x198),'eqYxL':function(_0x52dffe,_0xa0b224,_0x2d9cf6){return _0x52dffe(_0xa0b224,_0x2d9cf6);},'nMStE':_0x43759d(0x240),'RiScq':_0x43759d(0x1aa)},_0x48e075=messageInput[_0x43759d(0x1b7)][_0x43759d(0x162)]();if(!_0x48e075)return;console[_0x43759d(0x1dd)](_0xbb4d66['BNRnl'],_0x48e075),_0xbb4d66[_0x43759d(0x18e)](addMessage,_0x48e075,!![]),messageInput[_0x43759d(0x1b7)]='';if(imageContext)try{const _0x376891=await _0xbb4d66[_0x43759d(0x242)](generateQuizUsingAI,imageContext,_0x48e075);_0xbb4d66['IWGYk'](addMessage,_0xbb4d66[_0x43759d(0x1c7)],![]),addQuiz(_0x376891);}catch(_0x54dc40){_0xbb4d66[_0x43759d(0x1c2)](addMessage,_0xbb4d66[_0x43759d(0x1a8)],![]);}else addMessage(_0xbb4d66[_0x43759d(0x1cc)],![]);}function toggleTheme(){const _0x39517d=_0x69c74d,_0x8b9bf8={'CiRni':_0x39517d(0x24d),'dnXVI':function(_0x5f1726,_0x5da6bc){return _0x5f1726===_0x5da6bc;},'nCLrv':_0x39517d(0x1da),'WnfQO':_0x39517d(0x234),'KOfwk':_0x39517d(0x200)},_0x26dcda=document[_0x39517d(0x1a3)],_0x573f76=_0x26dcda['getAttribute'](_0x8b9bf8[_0x39517d(0x166)]),_0x8a7b82=_0x8b9bf8[_0x39517d(0x1fc)](_0x573f76,_0x8b9bf8[_0x39517d(0x18a)])?_0x8b9bf8[_0x39517d(0x140)]:_0x39517d(0x1da);_0x26dcda['setAttribute'](_0x8b9bf8[_0x39517d(0x166)],_0x8a7b82),localStorage[_0x39517d(0x1bb)](_0x8b9bf8[_0x39517d(0x22c)],_0x8a7b82);}themeToggle['addEventListener'](_0x69c74d(0x226),toggleTheme),cameraButton['addEventListener'](_0x69c74d(0x226),startCamera),captureButton['addEventListener']('click',captureImage),cancelButton['addEventListener'](_0x69c74d(0x226),stopCamera),sendButton[_0x69c74d(0x1fd)](_0x69c74d(0x226),sendMessage),messageInput[_0x69c74d(0x1fd)](_0x69c74d(0x1d0),_0xdc99b0=>{const _0x4719a0=_0x69c74d,_0x69b2df={'uaoeW':'Enter'};if(_0xdc99b0[_0x4719a0(0x197)]===_0x69b2df[_0x4719a0(0x143)])sendMessage();});async function generateQuizWithoutAI(_0x42ba1c,_0x4ab583){const _0x227b97=_0x69c74d,_0x15da17={'byQXy':_0x227b97(0x1a7),'NBhNI':'text','VtjCw':_0x227b97(0x1d4),'cjFtb':_0x227b97(0x211),'LvlUS':function(_0x35801e,_0x53398f){return _0x35801e(_0x53398f);},'UbIQL':_0x227b97(0x1e0),'RZvpo':_0x227b97(0x21b),'Xjuax':_0x227b97(0x1b2),'VSVcg':_0x227b97(0x156),'tsleh':function(_0x3e20f,_0x570f99,_0x1fb060){return _0x3e20f(_0x570f99,_0x1fb060);},'pmoxJ':'Option\x20B','lipjD':_0x227b97(0x203),'SMwMm':_0x227b97(0x239),'WqPwj':'General','mxNvs':'[Quiz]\x20Error\x20generating\x20quiz:'};console[_0x227b97(0x1dd)](_0x15da17[_0x227b97(0x14a)],{'imageContext':_0x42ba1c,'userPrompt':_0x4ab583});try{const _0x6187b3=_0x42ba1c[_0x227b97(0x19e)]===_0x15da17['NBhNI'],_0x3ce78d=_0x42ba1c[_0x227b97(0x223)],_0x2651dd=_0x42ba1c['topics'],_0x12a716=[];_0x6187b3?(_0x12a716[_0x227b97(0x1e1)]({'question':_0x15da17[_0x227b97(0x22e)],'type':_0x15da17[_0x227b97(0x195)],'options':_0x15da17[_0x227b97(0x16e)](generateOptionsFromText,_0x3ce78d),'answer':_0x15da17[_0x227b97(0x22d)],'points':0x2}),_0x12a716[_0x227b97(0x1e1)]({'question':_0x15da17[_0x227b97(0x1c1)],'type':_0x15da17[_0x227b97(0x20e)],'answer':_0x227b97(0x188),'points':0x2})):_0x12a716[_0x227b97(0x1e1)]({'question':_0x15da17[_0x227b97(0x1b0)],'type':_0x15da17['Xjuax'],'answer':_0x227b97(0x167),'points':0x2});_0x12a716[_0x227b97(0x1e1)]({'question':_0x15da17[_0x227b97(0x199)](generateCustomQuestion,_0x4ab583,_0x3ce78d),'type':_0x15da17[_0x227b97(0x195)],'options':[_0x227b97(0x1e0),_0x15da17['pmoxJ'],_0x15da17['lipjD'],_0x15da17['SMwMm']],'answer':_0x15da17[_0x227b97(0x22d)],'points':0x2});const _0xa429f0={'id':Date['now']()[_0x227b97(0x1b3)](),'title':_0x2651dd[0x0]+_0x227b97(0x17e),'subject':_0x2651dd[0x0],'grade':_0x15da17[_0x227b97(0x228)],'timeLimit':0xf,'topic':_0x2651dd['join'](',\x20'),'questions':_0x12a716};return _0xa429f0;}catch(_0x13d087){console['error'](_0x15da17[_0x227b97(0x160)],_0x13d087);throw _0x13d087;}}