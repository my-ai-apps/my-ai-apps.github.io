
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x19e4cb=_0x9b44;(function(_0x54ef31,_0x261f9c){const _0xd2ce87=_0x9b44,_0x194153=_0x54ef31();while(!![]){try{const _0x45110f=parseInt(_0xd2ce87(0x167))/0x1+parseInt(_0xd2ce87(0x164))/0x2+parseInt(_0xd2ce87(0xef))/0x3+parseInt(_0xd2ce87(0xc9))/0x4+parseInt(_0xd2ce87(0x17e))/0x5+parseInt(_0xd2ce87(0x180))/0x6+-parseInt(_0xd2ce87(0x196))/0x7*(parseInt(_0xd2ce87(0x14f))/0x8);if(_0x45110f===_0x261f9c)break;else _0x194153['push'](_0x194153['shift']());}catch(_0x4ffb01){_0x194153['push'](_0x194153['shift']());}}}(_0x5a09,0x2f7b7));function _0x5a09(){const _0x5c1f58=['EsXjX','\x0a\x0aUser\x20request:\x20','message\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Title:\x20','[Camera]\x20Camera\x20preview\x20started\x20and\x20container\x20displayed','points','toString','getAttribute','\x20-\x20','display','Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz\x20using\x20Gemini\x20Nano\x20AI.\x20Please\x20try\x20again.','environment','message\x20bot-message','278892IvzBys','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20Questions:\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Qktpa','154019DQVEoE','dark','TgnRz','[OCR]\x20Text\x20extracted:','eYjSo','What\x20can\x20you\x20observe\x20in\x20this\x20image?','remove','Additional\x20option\x20','forEach','User','\x0a\x20\x20\x20\x20','image/jpeg','CaLbR','vEUSq','[Camera]\x20Camera\x20stopped\x20and\x20container\x20hidden','click','xhwMz','[Processing]\x20Starting\x20image\x20OCR\x20analysis...','kjBZJ','eZFBE','NtHVw','You\x20are\x20a\x20quiz\x20generator.\x20Create\x20a\x20quiz\x20based\x20on\x20the\x20following\x20image\x20context\x20and\x20user\x20requirements.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Image\x20context:\x20','Option\x20B','838705prcVSw','prompt-suggestion','1489362IxiOch','multiple_choice','XyHOQ','PjOvk','uRtLm','type','loadLanguage','[Processing]\x20Error\x20during\x20image\x20processing:','cameraContainer','[OCR]\x20Worker\x20initialized','mnyAZ','EXdeI','topic','[Quiz]\x20Generating\x20quiz...','lcGCX','iJxLP','uoySd','VEgby','Copy\x20Quiz','RSFCU','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','ECdGx','2977919XdbtGl','map','Image\x20and\x20text\x20analysis\x20complete','error','drawImage','ouBzo','subject','MLOLz','videoWidth','JjPqk','General','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Subject:\x20','What\x20are\x20the\x20key\x20points\x20mentioned\x20in\x20the\x20text?','DUPXc','lQUGs','writeText','...?','fTpAf','includes','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Format\x20the\x20response\x20as\x20a\x20JSON\x20quiz\x20object\x20with\x20id,\x20grade,\x20subject,\x20title,\x20timeLimit,\x20topic,\x20and\x20questions\x20array.','stop','stringify','message','getUserMedia','UrVMj','log','[Camera]\x20Error\x20processing\x20captured\x20image:','[AI]\x20Image\x20session\x20created:','AIdca','[Camera]\x20Successfully\x20got\x20media\x20stream:','value','UcWNy','videoHeight','fzwdA','Language\x20Arts','height','VsMcf','ITzeZ','[Quiz]\x20Error\x20generating\x20quiz:','themeToggle','load','rNlQp','JrzKq','[OCR]\x20Worker\x20terminated','Option\x20D','PzAtY','[AI]\x20Creating\x20image\x20recognition\x20session...','[Processing]\x20Image\x20processing\x20completed:','jYaoI','XgdHh','I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20requirements:','vexeA','ghpyB','[Camera]\x20Error\x20accessing\x20camera:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Points:\x20','then','Generating\x20quiz...','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Grade:\x20','messageInput','NhoxK','join','PZcfy','setAttribute','width','text','VVVDH','Sorry,\x20I\x20couldn\x27t\x20generate\x20the\x20quiz.\x20Please\x20try\x20again.','Windows\x20AI\x20API\x20not\x20available','626896iKdHeU','PfSOE','vCMBm','BZtXb','confidence','I\x27ve\x20generated\x20a\x20quiz\x20based\x20on\x20your\x20image\x20and\x20requirements:','LcGsV','data','addEventListener','grade','[AI]\x20Performing\x20image\x20recognition...','wZjMA','flex','[Quiz]\x20Failed\x20to\x20parse\x20AI\x20response:','pdbBU','[Processing]\x20No\x20OCR\x20text\x20found,\x20falling\x20back\x20to\x20image\x20analysis','promptStreaming','light','Visual\x20Analysis','appendChild','eWYEy','uBQUP','[Quiz]\x20Constructed\x20system\x20prompt:','WQufp','KRqeO','Quiz\x20generation\x20failed\x20completely.\x20Please\x20try\x20again\x20later.','textContent','toISOString','onclick','trim','IXOgI','Science','test','button','style','nMjhU','History','initialize','537492MoSBRW','img','createElement','cameraButton','catch','length','questions','qzysh','HfUJa','vAjaY','cancelButton','none','[Quiz]\x20Error\x20in\x20quiz\x20generation\x20using\x20Gemini\x20Nano\x20AI:','MkMfr','topics','Bot','Please\x20capture\x20an\x20image\x20first\x20before\x20providing\x20quiz\x20requirements.','content','fromCharCode','scrollHeight','user','bIAoA','Mathematics','[OCR]\x20Error\x20in\x20text\x20extraction:','toDataURL','pre','TOUQQ','div','DyZBE','FXdYt','Image\x20captured!\x20Please\x20provide\x20your\x20requirements\x20for\x20the\x20quiz.','Processing\x20image...','theme','split','ORzde','What\x20is\x20the\x20significance\x20of\x20','what','[Camera]\x20Starting\x20camera\x20initialization...','Generate\x20multiple\x20choice\x20questions\x20about\x20this\x20picture','General\x20Knowledge','SpBLL','uqmVE','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Time\x20Limit:\x20','canvas','BdByq','Geography','push','[OCR]\x20Starting\x20text\x20extraction...','system','VUiGX','Make\x20a\x20quiz\x20suitable\x20for\x20beginners','KIQBp','GiSTp','Error\x20accessing\x20camera:\x20','message\x20bot-message\x20streaming','terminate','YJIfQ','wqAYn','uiLGb','user-message','pVHYF','[AI]\x20Error\x20during\x20image\x20processing:','className','Generated\x20a\x20basic\x20quiz\x20without\x20AI\x20assistance:','CvPdS','now','slice','add','dHNJL','OfkLD','XLfRd','qvbTC','sendButton','kjtxE','\x20minutes\x0a\x20\x20\x20\x20\x20\x20\x20\x20Topics:\x20','size','AxyyH','from','chatMessages','yGwwh','IajDg','copy-button','timeLimit','[Camera]\x20Stopping\x20camera...','toLowerCase','captureButton','getElementById','[Quiz]\x20Fallback\x20generation\x20also\x20failed:','setItem','UCIyw','Description\x20of\x20visual\x20elements','CDfox','captured-image','\x0a\x20\x20\x20\x20\x20\x20\x20\x20Type:\x20','ynhDa','Based\x20on\x20the\x20text,\x20what\x20is\x20the\x20main\x20topic\x20being\x20discussed?','16YQNffS','cameraPreview','open_ended','documentElement','data-theme','[AI]\x20Image\x20recognition\x20completed.\x20Result:','PuROq','filter'];_0x5a09=function(){return _0x5c1f58;};return _0x5a09();}import{Logger}from'./common.js';const chatMessages=document[_0x19e4cb(0x145)](_0x19e4cb(0x13d)),messageInput=document[_0x19e4cb(0x145)](_0x19e4cb(0xbf)),sendButton=document['getElementById'](_0x19e4cb(0x137)),cameraButton=document['getElementById'](_0x19e4cb(0xf2)),themeToggle=document['getElementById'](_0x19e4cb(0xac)),cameraContainer=document[_0x19e4cb(0x145)](_0x19e4cb(0x188)),cameraPreview=document[_0x19e4cb(0x145)](_0x19e4cb(0x150)),captureButton=document['getElementById'](_0x19e4cb(0x144)),cancelButton=document['getElementById'](_0x19e4cb(0xf9));let stream=null,imageContext=null;async function startCamera(){const _0x174840=_0x19e4cb,_0x153e91={'YJIfQ':_0x174840(0x114),'jYaoI':_0x174840(0x15b),'UCIyw':_0x174840(0xd5),'uBQUP':_0x174840(0xa2),'yGwwh':_0x174840(0xba),'pVHYF':function(_0x549d55,_0x4a580a){return _0x549d55(_0x4a580a);},'ouBzo':function(_0xb724,_0x4dac3b){return _0xb724+_0x4dac3b;},'zvXsk':_0x174840(0x124)};console['log'](_0x153e91[_0x174840(0x127)]);try{const _0x28331d='3|4|2|1|0'[_0x174840(0x110)]('|');let _0x27e7f9=0x0;while(!![]){switch(_0x28331d[_0x27e7f9++]){case'0':console[_0x174840(0x9e)](_0x153e91[_0x174840(0xb5)]);continue;case'1':cameraContainer['style'][_0x174840(0x160)]=_0x153e91[_0x174840(0x148)];continue;case'2':cameraPreview['srcObject']=stream;continue;case'3':stream=await navigator['mediaDevices'][_0x174840(0x9c)]({'video':{'facingMode':_0x174840(0x162)}});continue;case'4':console[_0x174840(0x9e)](_0x153e91[_0x174840(0xde)],stream);continue;}break;}}catch(_0x436006){console[_0x174840(0x199)](_0x153e91[_0x174840(0x13e)],_0x436006),_0x153e91[_0x174840(0x12b)](addMessage,_0x153e91[_0x174840(0x19b)](_0x153e91['zvXsk'],_0x436006[_0x174840(0x9b)]));}}function stopCamera(){const _0x5141a9=_0x19e4cb,_0x179a5c={'RMiot':'[Camera]\x20Stopping\x20track:','OGbdp':_0x5141a9(0x142)};console[_0x5141a9(0x9e)](_0x179a5c['OGbdp']),stream&&(stream['getTracks']()[_0x5141a9(0x16f)](_0x9d734e=>{const _0x110ea7=_0x5141a9;console[_0x110ea7(0x9e)](_0x179a5c['RMiot'],_0x9d734e['label']),_0x9d734e[_0x110ea7(0x99)]();}),stream=null),cameraContainer[_0x5141a9(0xeb)][_0x5141a9(0x160)]=_0x5141a9(0xfa),console['log'](_0x5141a9(0x175));}async function processImageUsingWindowAI(_0x8badae){const _0x3d6437=_0x19e4cb,_0x4d4c67={'WLlKu':'[AI]\x20Starting\x20image\x20processing...','VUiGX':'[AI]\x20Windows\x20AI\x20API\x20not\x20found\x20in\x20window\x20object','GiSTp':_0x3d6437(0xc8),'hzHEX':_0x3d6437(0xb3),'dgmFt':_0x3d6437(0xa0),'lyncp':_0x3d6437(0xd3),'vEUSq':_0x3d6437(0x154),'uoySd':_0x3d6437(0x12c)};console[_0x3d6437(0x9e)](_0x4d4c67['WLlKu'],_0x8badae);if(!window['ai']){console[_0x3d6437(0x199)](_0x4d4c67[_0x3d6437(0x120)]);throw new Error(_0x4d4c67[_0x3d6437(0x123)]);}try{console[_0x3d6437(0x9e)](_0x4d4c67['hzHEX']);const _0x200a9b=await window['ai']['createImageSession']();console[_0x3d6437(0x9e)](_0x4d4c67['dgmFt'],_0x200a9b),console[_0x3d6437(0x9e)](_0x4d4c67['lyncp']);const _0x5302c3=await _0x200a9b['recognize'](_0x8badae);return console[_0x3d6437(0x9e)](_0x4d4c67[_0x3d6437(0x174)],_0x5302c3),_0x5302c3;}catch(_0xdae0e4){console[_0x3d6437(0x199)](_0x4d4c67[_0x3d6437(0x190)],_0xdae0e4);throw _0xdae0e4;}}async function processImageUsingTesseract(_0x39c130){const _0x255a67=_0x19e4cb,_0xaacb01={'XLfRd':_0x255a67(0x178),'uwWwp':function(_0x4293a6,_0xbaff96,_0x287366){return _0x4293a6(_0xbaff96,_0x287366);},'PuROq':_0x255a67(0x10e),'wZjMA':function(_0x19a859,_0x39e2e3){return _0x19a859(_0x39e2e3);},'pxxRM':'[OCR]\x20Text\x20extraction\x20result:','vexeA':'text','eWYEy':'Washington\x20Drivers\x20License\x20Test','eYjSo':_0x255a67(0xd8),'ghpyB':'image','uqmVE':'Visual\x20content\x20detected','kjtxE':_0x255a67(0xdb),'SpBLL':_0x255a67(0x116),'iJxLP':_0x255a67(0x187)};console['log'](_0xaacb01[_0x255a67(0x135)]),_0xaacb01['uwWwp'](addMessage,_0xaacb01[_0x255a67(0x155)],![]);try{const _0x5e913d=await _0xaacb01['wZjMA'](extractTextFromImage,_0x39c130);return console[_0x255a67(0x9e)](_0xaacb01['pxxRM'],_0x5e913d),_0x5e913d[_0x255a67(0xc5)]&&_0x5e913d[_0x255a67(0xc5)][_0x255a67(0xe6)]()[_0x255a67(0xf4)]>0x0?{'type':_0xaacb01[_0x255a67(0xb8)],'content':_0xaacb01[_0x255a67(0xdd)],'confidence':_0x5e913d['confidence'],'topics':_0xaacb01[_0x255a67(0xd4)](generateTopics,_0x5e913d[_0x255a67(0xc5)])}:(console['log'](_0xaacb01[_0x255a67(0x16b)]),{'type':_0xaacb01[_0x255a67(0xb9)],'content':_0xaacb01[_0x255a67(0x118)],'topics':[_0xaacb01[_0x255a67(0x138)],_0xaacb01[_0x255a67(0x117)]],'features':{'timestamp':new Date()[_0x255a67(0xe4)](),'dimensions':{'width':_0x39c130['width'],'height':_0x39c130[_0x255a67(0xa8)]}}});}catch(_0x5d0768){console[_0x255a67(0x199)](_0xaacb01[_0x255a67(0x18f)],_0x5d0768);throw _0x5d0768;}}function _0x9b44(_0x4ceb3b,_0x1e61cf){const _0x5a097c=_0x5a09();return _0x9b44=function(_0x9b4437,_0x552b80){_0x9b4437=_0x9b4437-0x97;let _0x5e70d4=_0x5a097c[_0x9b4437];return _0x5e70d4;},_0x9b44(_0x4ceb3b,_0x1e61cf);}async function extractTextFromImage(_0x4e6ca4){const _0x559a08=_0x19e4cb,_0x1e1776={'ECdGx':'eng','TOUQQ':_0x559a08(0x189),'VsMcf':_0x559a08(0x16a),'fsEob':_0x559a08(0xb0),'EsXjX':function(_0x5d6a84,_0x91378a){return _0x5d6a84(_0x91378a);},'aaodc':_0x559a08(0x106)};console[_0x559a08(0x9e)](_0x559a08(0x11e));const _0x339c7b=_0x1e1776[_0x559a08(0x195)];try{const _0x265ffb=await Tesseract['createWorker']();await _0x265ffb[_0x559a08(0xad)](),await _0x265ffb[_0x559a08(0x186)](_0x339c7b),await _0x265ffb[_0x559a08(0xee)](_0x339c7b),console['log'](_0x1e1776[_0x559a08(0x109)]);const _0xc2696e=await _0x265ffb['recognize'](_0x4e6ca4);console[_0x559a08(0x9e)](_0x1e1776[_0x559a08(0xa9)],_0xc2696e[_0x559a08(0xd0)][_0x559a08(0xc5)]),await _0x265ffb[_0x559a08(0x126)](),console[_0x559a08(0x9e)](_0x1e1776['fsEob']);const _0xca2c94={'timestamp':new Date()['toISOString'](),'imageSize':{'width':_0x4e6ca4[_0x559a08(0xc4)],'height':_0x4e6ca4[_0x559a08(0xa8)]},'extractedText':_0xc2696e[_0x559a08(0xd0)][_0x559a08(0xc5)],'confidenceScore':_0xc2696e[_0x559a08(0xd0)][_0x559a08(0xcd)],'suggestedTopics':_0x1e1776[_0x559a08(0x157)](generateTopics,_0xc2696e[_0x559a08(0xd0)][_0x559a08(0xc5)])};return{'description':_0x559a08(0x198),'metadata':_0xca2c94,'text':_0xc2696e[_0x559a08(0xd0)][_0x559a08(0xc5)],'confidence':_0xc2696e[_0x559a08(0xd0)]['confidence']};}catch(_0x5874ba){return console[_0x559a08(0x199)](_0x1e1776['aaodc'],_0x5874ba),{'text':'','confidence':0x0};}}function generateTopics(_0x59b929){const _0x1e54aa=_0x19e4cb,_0x4c27a2={'dQHSb':_0x1e54aa(0xe8),'uGrBJ':_0x1e54aa(0xed),'UrVMj':_0x1e54aa(0x11c),'KRqeO':_0x1e54aa(0xa7),'MCeHy':'Art','fzwdA':function(_0x415ede,_0x276c9e){return _0x415ede===_0x276c9e;}},_0x1cee87=new Set(),_0x5e01b7=_0x59b929[_0x1e54aa(0x143)](),_0x36e56e=[{'pattern':/\b(math|equation|calculate|formula|number)\b/,'topic':_0x1e54aa(0x105)},{'pattern':/\b(science|experiment|chemical|biology|physics)\b/,'topic':_0x4c27a2['dQHSb']},{'pattern':/\b(history|century|ancient|war|empire|civilization)\b/,'topic':_0x4c27a2['uGrBJ']},{'pattern':/\b(geography|country|capital|mountain|river|climate)\b/,'topic':_0x4c27a2[_0x1e54aa(0x9d)]},{'pattern':/\b(grammar|sentence|paragraph|essay|writing)\b/,'topic':_0x4c27a2[_0x1e54aa(0xe1)]},{'pattern':/\b(art|color|design|paint|draw)\b/,'topic':_0x4c27a2['MCeHy']}];return _0x36e56e[_0x1e54aa(0x16f)](_0x46c68b=>{const _0x576dab=_0x1e54aa;_0x46c68b['pattern'][_0x576dab(0xe9)](_0x5e01b7)&&_0x1cee87[_0x576dab(0x132)](_0x46c68b[_0x576dab(0x18c)]);}),_0x4c27a2[_0x1e54aa(0xa6)](_0x1cee87[_0x1e54aa(0x13a)],0x0)&&_0x1cee87[_0x1e54aa(0x132)](_0x1e54aa(0x116)),Array[_0x1e54aa(0x13c)](_0x1cee87);}async function generateQuizUsingAI(_0x2561fc,_0x452d64){const _0x46bff3=_0x19e4cb,_0x2e88d9={'ynhDa':'[Quiz]\x20Starting\x20quiz\x20generation\x20with\x20Gemini\x20Nano...','XgdHh':'imageContext:','JrzKq':'window.ai\x20API\x20not\x20available','dHNJL':_0x46bff3(0xdf),'PjOvk':_0x46bff3(0x11f),'RMUlj':_0x46bff3(0x103),'xhwMz':_0x46bff3(0x10a),'fTpAf':_0x46bff3(0x125),'qzysh':function(_0x147564,_0x2dc047,_0x3ba86d){return _0x147564(_0x2dc047,_0x3ba86d);},'IajDg':_0x46bff3(0xbd),'mnyAZ':function(_0x760748){return _0x760748();},'wqAYn':function(_0x2a3526,_0x5a84f9){return _0x2a3526(_0x5a84f9);},'CDfox':_0x46bff3(0xd6),'rNlQp':_0x46bff3(0x12e),'NhoxK':_0x46bff3(0xe2)};console[_0x46bff3(0x9e)](_0x2e88d9[_0x46bff3(0x14d)],{'imageContext':_0x2561fc,'userPrompt':_0x452d64});try{console[_0x46bff3(0x9e)](_0x2e88d9[_0x46bff3(0xb6)],JSON[_0x46bff3(0x9a)](_0x2561fc));if(!window['ai'])throw new Error(_0x2e88d9[_0x46bff3(0xaf)]);const _0x33339d=_0x46bff3(0x17c)+JSON['stringify'](_0x2561fc)+_0x46bff3(0x98);console[_0x46bff3(0x9e)](_0x2e88d9[_0x46bff3(0x133)],_0x33339d);const _0x3de6e1=[{'role':_0x2e88d9[_0x46bff3(0x183)],'content':_0x33339d},{'role':_0x2e88d9['RMUlj'],'content':_0x452d64}],_0xf623ae=document['createElement'](_0x2e88d9[_0x46bff3(0x177)]);_0xf623ae[_0x46bff3(0x12d)]=_0x2e88d9[_0x46bff3(0x1a7)],chatMessages['appendChild'](_0xf623ae),_0x2e88d9[_0x46bff3(0xf6)](showTypingIndicator,chatMessages,_0x2e88d9[_0x46bff3(0x13f)]);if(!aiLanguageSession)await _0x2e88d9[_0x46bff3(0x18a)](initializeLanguageSession);const _0x2d710e=await aiLanguageSession[_0x46bff3(0xd9)](_0x33339d+_0x46bff3(0x158)+_0x452d64);let _0x3eb400='';for await(const _0x307315 of _0x2d710e){_0x3eb400+=_0x307315,_0xf623ae[_0x46bff3(0xe3)]=_0x3eb400,chatMessages['scrollTop']=chatMessages[_0x46bff3(0x102)];}_0xf623ae[_0x46bff3(0x16d)]();let _0x205729;try{_0x205729=_0x2e88d9['wqAYn'](safeJSONParse,_0x3eb400),_0x2e88d9[_0x46bff3(0xf6)](addMessage,_0x46bff3(0xce),![]),_0x2e88d9[_0x46bff3(0x128)](addQuiz,_0x205729);}catch(_0x3502a7){console[_0x46bff3(0x199)](_0x2e88d9[_0x46bff3(0x14a)],_0x3502a7),_0x2e88d9[_0x46bff3(0xf6)](addMessage,_0x3eb400,![]);throw _0x3502a7;}_0x2e88d9['mnyAZ'](removeTypingIndicator);}catch(_0x3bddb0){console[_0x46bff3(0x199)](_0x46bff3(0xfb),_0x3bddb0),_0x2e88d9['mnyAZ'](removeTypingIndicator),_0x2e88d9[_0x46bff3(0xf6)](addMessage,_0x46bff3(0x161),![]);try{const _0x322813=await generateQuizWithoutAI(_0x2561fc,_0x452d64);addMessage(_0x2e88d9[_0x46bff3(0xae)],![]),_0x2e88d9['wqAYn'](addQuiz,_0x322813);}catch(_0x1d1595){console[_0x46bff3(0x199)](_0x46bff3(0x146),_0x1d1595),addMessage(_0x2e88d9[_0x46bff3(0xc0)],![]);}}}function generateOptionsFromText(_0x4428cb){const _0x44f312=_0x19e4cb,_0x294de9={'tcaon':function(_0x318ce9,_0x3b7a74){return _0x318ce9+_0x3b7a74;},'PzAtY':_0x44f312(0x16e)},_0x4e4892=_0x4428cb['split'](/[.!?]+/)[_0x44f312(0x156)](_0x20fb5d=>_0x20fb5d[_0x44f312(0xe6)]()[_0x44f312(0xf4)]>0x0),_0x16d975=_0x4e4892[_0x44f312(0x131)](0x0,0x4)[_0x44f312(0x197)](_0x140a86=>_0x140a86[_0x44f312(0xe6)]());while(_0x16d975[_0x44f312(0xf4)]<0x4){_0x16d975[_0x44f312(0x11d)](_0x294de9['tcaon'](_0x294de9[_0x44f312(0xb2)],_0x16d975[_0x44f312(0xf4)]+0x1));}return _0x16d975;}function generateCustomQuestion(_0x30086e,_0x11ce41){const _0x1d343b=_0x19e4cb,_0x5d1b99={'FXdYt':_0x1d343b(0x113)};return _0x30086e[_0x1d343b(0x143)]()[_0x1d343b(0x97)](_0x5d1b99[_0x1d343b(0x10c)])?_0x30086e:_0x1d343b(0x112)+_0x11ce41[_0x1d343b(0x110)]('\x20')[_0x1d343b(0x131)](0x0,0x3)[_0x1d343b(0xc1)]('\x20')+_0x1d343b(0x1a6);}function addMessage(_0x47c1ef,_0x53d30c=![]){const _0x402312=_0x19e4cb,_0x5465ff={'TgnRz':_0x402312(0x170),'uiLGb':_0x402312(0xfe),'VVVDH':_0x402312(0x10a),'afiZw':_0x402312(0x12a),'KIQBp':'bot-message'};console[_0x402312(0x9e)]('[UI]\x20Adding\x20message:\x20'+(_0x53d30c?_0x5465ff[_0x402312(0x169)]:_0x5465ff[_0x402312(0x129)])+':',_0x47c1ef);const _0x1106ed=document[_0x402312(0xf1)](_0x5465ff[_0x402312(0xc6)]);_0x1106ed[_0x402312(0x12d)]=_0x402312(0x159)+(_0x53d30c?_0x5465ff['afiZw']:_0x5465ff[_0x402312(0x122)]),_0x1106ed[_0x402312(0xe3)]=_0x47c1ef,chatMessages[_0x402312(0xdc)](_0x1106ed),chatMessages['scrollTop']=chatMessages[_0x402312(0x102)];}function addQuiz(_0x235416){const _0x5c54d5=_0x19e4cb,_0x1f7073={'LcGsV':'[UI]\x20Adding\x20quiz\x20to\x20chat:','ITzeZ':_0x5c54d5(0x10a),'lQUGs':'quiz-container','Qktpa':_0x5c54d5(0xea),'mEOjr':'Copy\x20Quiz'};console['log'](_0x1f7073[_0x5c54d5(0xcf)],_0x235416);const _0x4b57cb=document['createElement'](_0x1f7073[_0x5c54d5(0xaa)]);_0x4b57cb[_0x5c54d5(0x12d)]=_0x1f7073[_0x5c54d5(0x1a4)];const _0x1ed3c6=_0x5c54d5(0x15a)+_0x235416['title']+_0x5c54d5(0xbe)+_0x235416[_0x5c54d5(0xd2)]+_0x5c54d5(0x1a1)+_0x235416[_0x5c54d5(0x19c)]+_0x5c54d5(0x119)+_0x235416[_0x5c54d5(0x141)]+_0x5c54d5(0x139)+_0x235416[_0x5c54d5(0x18c)]+_0x5c54d5(0x165)+_0x235416[_0x5c54d5(0xf5)][_0x5c54d5(0x197)]((_0xa4eb0,_0x3f06c1)=>_0x5c54d5(0x194)+(_0x3f06c1+0x1)+'.\x20'+_0xa4eb0['question']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0xa4eb0['options']?_0xa4eb0['options'][_0x5c54d5(0x197)]((_0xe4ad0a,_0x4af613)=>'\x20\x20\x20'+String[_0x5c54d5(0x101)](0x61+_0x4af613)+')\x20'+_0xe4ad0a)[_0x5c54d5(0xc1)]('\x0a'):'')+_0x5c54d5(0x14c)+_0xa4eb0[_0x5c54d5(0x185)]+_0x5c54d5(0xbb)+_0xa4eb0[_0x5c54d5(0x15c)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20')[_0x5c54d5(0xc1)]('\x0a')+_0x5c54d5(0x171),_0x5c16dd=document[_0x5c54d5(0xf1)](_0x5c54d5(0x108));_0x5c16dd[_0x5c54d5(0xe3)]=_0x1ed3c6,_0x4b57cb[_0x5c54d5(0xdc)](_0x5c16dd);const _0x16b145=document[_0x5c54d5(0xf1)](_0x1f7073[_0x5c54d5(0x166)]);_0x16b145[_0x5c54d5(0x12d)]=_0x5c54d5(0x140),_0x16b145[_0x5c54d5(0xe3)]=_0x1f7073['mEOjr'],_0x16b145[_0x5c54d5(0xe5)]=()=>{const _0x12e9e6=_0x5c54d5;navigator['clipboard'][_0x12e9e6(0x1a5)](_0x1ed3c6)[_0x12e9e6(0xbc)](()=>_0x16b145['textContent']='Copied!')[_0x12e9e6(0xf3)](_0x53655e=>console[_0x12e9e6(0x199)]('Copy\x20failed:',_0x53655e))['finally'](()=>setTimeout(()=>_0x16b145[_0x12e9e6(0xe3)]=_0x12e9e6(0x192),0x7d0));},_0x4b57cb['appendChild'](_0x16b145),chatMessages['appendChild'](_0x4b57cb),chatMessages['scrollTop']=chatMessages[_0x5c54d5(0x102)];}async function captureImage(){const _0x4eb7e4=_0x19e4cb,_0x2a8849={'OfkLD':function(_0x10e06c){return _0x10e06c();},'BZtXb':'div','RSFCU':'[Camera]\x20Capturing\x20image...','bIAoA':_0x4eb7e4(0x11a),'AIdca':_0x4eb7e4(0xf0),'PfSOE':_0x4eb7e4(0x14b),'okdOI':function(_0x17a2fb){return _0x17a2fb();},'BdByq':function(_0x535ac9,_0x3fde6e){return _0x535ac9(_0x3fde6e);},'zbaiv':_0x4eb7e4(0xb4),'EXdeI':function(_0x506720,_0x434315,_0x1c5cf4){return _0x506720(_0x434315,_0x1c5cf4);},'qvbTC':_0x4eb7e4(0x10d),'JjPqk':function(_0x365100,_0x412c84){return _0x365100===_0x412c84;},'jBweT':_0x4eb7e4(0xc5),'NtHVw':_0x4eb7e4(0x115),'lcGCX':_0x4eb7e4(0x9f),'ORzde':'Sorry,\x20I\x20couldn\x27t\x20process\x20the\x20image.\x20Please\x20try\x20again.'};console[_0x4eb7e4(0x9e)](_0x2a8849[_0x4eb7e4(0x193)]);try{const _0x26616b=document['createElement'](_0x2a8849[_0x4eb7e4(0x104)]);_0x26616b[_0x4eb7e4(0xc4)]=cameraPreview[_0x4eb7e4(0x19e)],_0x26616b['height']=cameraPreview[_0x4eb7e4(0xa5)],_0x26616b['getContext']('2d')[_0x4eb7e4(0x19a)](cameraPreview,0x0,0x0);const _0x109527=document['createElement'](_0x2a8849[_0x4eb7e4(0xa1)]);_0x109527['src']=_0x26616b[_0x4eb7e4(0x107)](_0x4eb7e4(0x172)),_0x109527['className']=_0x2a8849[_0x4eb7e4(0xca)];const _0x12364e=document[_0x4eb7e4(0xf1)]('div');_0x12364e[_0x4eb7e4(0x12d)]=_0x4eb7e4(0x163),_0x12364e[_0x4eb7e4(0xdc)](_0x109527),chatMessages[_0x4eb7e4(0xdc)](_0x12364e),_0x2a8849['okdOI'](stopCamera);const _0x20e618=await _0x2a8849[_0x4eb7e4(0x11b)](processImageUsingTesseract,_0x109527);imageContext=_0x20e618,console[_0x4eb7e4(0x9e)](_0x2a8849['zbaiv'],JSON[_0x4eb7e4(0x9a)](imageContext,null,0x2)),_0x2a8849[_0x4eb7e4(0x18b)](addMessage,_0x2a8849[_0x4eb7e4(0x136)],![]);const _0x5b02ce=['Create\x20a\x20quiz\x20about\x20'+imageContext[_0x4eb7e4(0xfd)][0x0]+_0x4eb7e4(0x15f)+imageContext[_0x4eb7e4(0x100)],_0x2a8849[_0x4eb7e4(0x19f)](imageContext[_0x4eb7e4(0x185)],_0x2a8849['jBweT'])?'Generate\x20questions\x20based\x20on\x20the\x20image\x20related\x20text\x20-\x20'+imageContext['content']:_0x2a8849[_0x4eb7e4(0x17b)],_0x4eb7e4(0x121)];_0x5b02ce[_0x4eb7e4(0x16f)](_0x1c823a=>{const _0x5d415e=_0x4eb7e4,_0x2e9936=document[_0x5d415e(0xf1)](_0x2a8849[_0x5d415e(0xcc)]);_0x2e9936[_0x5d415e(0x12d)]=_0x5d415e(0x17f),_0x2e9936['textContent']=_0x1c823a,_0x2e9936[_0x5d415e(0xe5)]=()=>{const _0x1e618b=_0x5d415e;messageInput[_0x1e618b(0xa3)]=_0x1c823a,_0x2a8849[_0x1e618b(0x134)](sendMessage);},chatMessages[_0x5d415e(0xdc)](_0x2e9936);});}catch(_0x3a59d8){console[_0x4eb7e4(0x199)](_0x2a8849[_0x4eb7e4(0x18e)],_0x3a59d8),addMessage(_0x2a8849[_0x4eb7e4(0x111)],![]);}}async function sendMessage(){const _0x24e175=_0x19e4cb,_0x446d2b={'MLOLz':'[Chat]\x20Sending\x20message:','HfUJa':_0x24e175(0xb7),'IXOgI':function(_0x48d470,_0x326da6,_0x350811){return _0x48d470(_0x326da6,_0x350811);},'pdbBU':_0x24e175(0xff)},_0x5a43fa=messageInput[_0x24e175(0xa3)][_0x24e175(0xe6)]();if(!_0x5a43fa)return;console['log'](_0x446d2b[_0x24e175(0x19d)],_0x5a43fa),addMessage(_0x5a43fa,!![]),messageInput[_0x24e175(0xa3)]='';if(imageContext)try{const _0x100c92=await generateQuizUsingAI(imageContext,_0x5a43fa);addMessage(_0x446d2b[_0x24e175(0xf7)],![]),addQuiz(_0x100c92);}catch(_0x21e42c){_0x446d2b['IXOgI'](addMessage,_0x24e175(0xc7),![]);}else _0x446d2b[_0x24e175(0xe7)](addMessage,_0x446d2b[_0x24e175(0xd7)],![]);}function toggleTheme(){const _0x1b1fea=_0x19e4cb,_0x18feb1={'eZFBE':function(_0x1eeef5,_0xd288dd){return _0x1eeef5===_0xd288dd;},'vAjaY':_0x1b1fea(0xda),'csIaO':_0x1b1fea(0x168),'VEgby':_0x1b1fea(0x153)},_0x4e2d4f=document[_0x1b1fea(0x152)],_0xe73181=_0x4e2d4f[_0x1b1fea(0x15e)](_0x1b1fea(0x153)),_0x389889=_0x18feb1[_0x1b1fea(0x17a)](_0xe73181,'dark')?_0x18feb1[_0x1b1fea(0xf8)]:_0x18feb1['csIaO'];_0x4e2d4f[_0x1b1fea(0xc3)](_0x18feb1[_0x1b1fea(0x191)],_0x389889),localStorage[_0x1b1fea(0x147)](_0x1b1fea(0x10f),_0x389889);}themeToggle[_0x19e4cb(0xd1)](_0x19e4cb(0x176),toggleTheme),cameraButton['addEventListener'](_0x19e4cb(0x176),startCamera),captureButton[_0x19e4cb(0xd1)](_0x19e4cb(0x176),captureImage),cancelButton['addEventListener'](_0x19e4cb(0x176),stopCamera),sendButton[_0x19e4cb(0xd1)](_0x19e4cb(0x176),sendMessage),messageInput['addEventListener']('keypress',_0x49886a=>{const _0x4b5aa2=_0x19e4cb,_0x5f10e3={'WQufp':function(_0x20091e,_0xd21b09){return _0x20091e===_0xd21b09;},'CaLbR':function(_0x40e5d1){return _0x40e5d1();}};if(_0x5f10e3[_0x4b5aa2(0xe0)](_0x49886a['key'],'Enter'))_0x5f10e3[_0x4b5aa2(0x173)](sendMessage);});async function generateQuizWithoutAI(_0x4d5f1e,_0x22cd0c){const _0x1a3d1d=_0x19e4cb,_0x1167ce={'MkMfr':_0x1a3d1d(0x18d),'kjBZJ':_0x1a3d1d(0xc5),'DUPXc':_0x1a3d1d(0x181),'vCMBm':'Option\x20A','uRtLm':_0x1a3d1d(0x1a2),'UcWNy':'Student\x20should\x20identify\x20main\x20points\x20from\x20the\x20text','AxyyH':'open_ended','XyHOQ':_0x1a3d1d(0x149),'PZcfy':_0x1a3d1d(0x17d),'nMjhU':'Option\x20C','yYxQg':_0x1a3d1d(0xb1),'CvPdS':_0x1a3d1d(0x1a0),'DyZBE':_0x1a3d1d(0xab)};console['log'](_0x1167ce[_0x1a3d1d(0xfc)],{'imageContext':_0x4d5f1e,'userPrompt':_0x22cd0c});try{const _0x468e60=_0x4d5f1e[_0x1a3d1d(0x185)]===_0x1167ce[_0x1a3d1d(0x179)],_0x3fb6c2=_0x4d5f1e[_0x1a3d1d(0x100)],_0x3f3db0=_0x4d5f1e['topics'],_0x37dc1a=[];_0x468e60?(_0x37dc1a[_0x1a3d1d(0x11d)]({'question':_0x1a3d1d(0x14e),'type':_0x1167ce[_0x1a3d1d(0x1a3)],'options':generateOptionsFromText(_0x3fb6c2),'answer':_0x1167ce[_0x1a3d1d(0xcb)],'points':0x2}),_0x37dc1a[_0x1a3d1d(0x11d)]({'question':_0x1167ce[_0x1a3d1d(0x184)],'type':_0x1a3d1d(0x151),'answer':_0x1167ce[_0x1a3d1d(0xa4)],'points':0x2})):_0x37dc1a[_0x1a3d1d(0x11d)]({'question':_0x1a3d1d(0x16c),'type':_0x1167ce[_0x1a3d1d(0x13b)],'answer':_0x1167ce[_0x1a3d1d(0x182)],'points':0x2});_0x37dc1a['push']({'question':generateCustomQuestion(_0x22cd0c,_0x3fb6c2),'type':_0x1167ce[_0x1a3d1d(0x1a3)],'options':[_0x1167ce['vCMBm'],_0x1167ce[_0x1a3d1d(0xc2)],_0x1167ce[_0x1a3d1d(0xec)],_0x1167ce['yYxQg']],'answer':_0x1167ce[_0x1a3d1d(0xcb)],'points':0x2});const _0xe73e8a={'id':Date[_0x1a3d1d(0x130)]()[_0x1a3d1d(0x15d)](),'title':_0x3f3db0[0x0]+'\x20Quiz','subject':_0x3f3db0[0x0],'grade':_0x1167ce[_0x1a3d1d(0x12f)],'timeLimit':0xf,'topic':_0x3f3db0[_0x1a3d1d(0xc1)](',\x20'),'questions':_0x37dc1a};return _0xe73e8a;}catch(_0x4c8387){console[_0x1a3d1d(0x199)](_0x1167ce[_0x1a3d1d(0x10b)],_0x4c8387);throw _0x4c8387;}}