
/*!
Copyright ¬© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x471a2b=_0x515d;(function(_0x264e91,_0x55c370){const _0x442208=_0x515d,_0x70786c=_0x264e91();while(!![]){try{const _0xe1cd83=-parseInt(_0x442208(0xfe))/0x1*(-parseInt(_0x442208(0x118))/0x2)+parseInt(_0x442208(0xea))/0x3+parseInt(_0x442208(0x126))/0x4*(parseInt(_0x442208(0x12a))/0x5)+-parseInt(_0x442208(0x136))/0x6*(parseInt(_0x442208(0x110))/0x7)+parseInt(_0x442208(0x142))/0x8+parseInt(_0x442208(0x10b))/0x9*(parseInt(_0x442208(0x127))/0xa)+-parseInt(_0x442208(0x152))/0xb*(parseInt(_0x442208(0x1a6))/0xc);if(_0xe1cd83===_0x55c370)break;else _0x70786c['push'](_0x70786c['shift']());}catch(_0xd1b31d){_0x70786c['push'](_0x70786c['shift']());}}}(_0x38f9,0xcb96f));import{displayError,Logger}from'./common.js';function _0x38f9(){const _0x33e4b6=['rKRtM','znrkq','<strong>Your\x20answer:</strong>\x20<em>(Speak\x20now...)</em>','\x20of\x20','\x0aA.','\x0aAnswer.','hMHMg','EVwwd','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-percent\x22>','NADwL','Next\x20Question','oiKyJ','10|7|5|1|11|0|3|4|8|6|9|2','Dtwzt','block','auto','oZGnT','.container','vNiLZ','yCqnv','ujXLB','style','correctAnswerDisplay','</span>','</h2>\x0a\x20\x20\x20\x20\x20\x20<p>','</p>\x0a\x20\x20\x20\x20','UMzVl','IzEUB','Answer:','tWJdy','button','gQLwj','startQuiz','iSRDW','snjDu','border','blink\x201s\x20infinite','ZhACk','üí¨\x20User\x20Answer\x20being\x20sent\x20for\x20comparison:','initializeSpeechManager','emit','No\x20response\x20detected.\x20Click\x20Yes\x20or\x20No.','qJHpU','stopRecording','OPSrS','2046132DnHMRR','error','DkrIy','Answer\x20comparison\x20error:','compareAnswer','ALxGW','round','getElementById','cBIqf','LFRbH','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Your\x20answer:</strong>\x20','GKifH','eRdaG','test','1|2|0|3|4','feedback','resultDisplay','exuLh','isPaused','OAfdY','1FjoLEf','Cdwan','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Correct\x20answer:</strong>\x20','recording','result-display','speakText','includes','none','correct-answer-display','WLNyo','color','ü§ñ\x20Raw\x20AI\x20Response:','replace','1261107EXZadm','isRecording','isQuizFormat','MaJjv','timeoutMessage','42RWLEZu','AcNMM','cztQS','You\x20are\x20an\x20advanced\x20answer\x20comparison\x20assistant.\x20Analyze\x20the\x20user\x27s\x20answer\x20against\x20the\x20correct\x20answer\x20by\x20identifying\x20main\x20points,\x20calculating\x20a\x20percentage\x20match,\x20and\x20highlighting\x20similarities\x20and\x20differences.\x20Provide\x20structured\x20feedback\x20in\x20JSON\x20format.','fill','kuyqn','Sorry,\x20there\x20was\x20an\x20error\x20analyzing\x20your\x20answer.','üìù\x20Prompt\x20being\x20sent\x20to\x20AI:','2846394NHHPSY','log','askForConfirmation','welcomeScreen','19|26|28|34|14|1|13|23|8|27|6|17|9|24|15|0|20|12|7|22|25|29|31|3|11|2|30|21|18|5|32|16|4|10|33','‚ùå\x20Compare\x20Answer\x20Error:','hjzkv','No\x20answer\x20provided','IGlbe','add','micButton','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rating\x20','dPEFp','LxKuP','2652eveSkI','10fFxmbG','object','aMmQn','8410KWQsnM','confirmation-prompt','3px\x20solid\x20#17a2b8','pcmpA','filter','display','jmKyN','quizCompleted','createElement','vrtQR','üõë\x20cleanedResponse\x20is\x20already\x20an\x20object,\x20skipping\x20JSON.parse.','dumix','1570542TZzDmf','Failed\x20to\x20parse\x20quiz\x20questions:','appendChild','QuizManager\x20initialized','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Q:</strong>\x20','<strong>Your\x20answer:</strong>\x20','wSvtC','Hbfkq','currentQuiz','NmRVV','missingPoints','ryqsO','12539824PGEqXR','\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22returnToChatButton\x22\x20class=\x22next-button\x22>Return\x20to\x20Chat</button>\x0a\x20\x20\x20\x20','generateQuizSummary','BNvAq','forEach','SzFEE','ssfFe','parseQuizQuestions','questions','user-answer-display','‚úÖ\x20Correct\x20Answer\x20being\x20sent\x20for\x20comparison:','üìù\x20Loader\x20element\x20set\x20to\x20block:','nextButton','AmJHm','fiNYx','cChSP','3965599qJanzg','stringify','startRecording','init','quiz-container','animation','currentQuestionIndex','question','OK\x20üëå','innerText','bold','padgV','setupEventListeners','getAccumulatedText','excellent','classList','bSlSO','Excellent!\x20üéâ','accumulatedAnswer','length','naNGd','FvTSz','createUIElements','finishQuiz','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','loadCurrentQuestion','</p>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','oGuUc','nextQuestion','Ivqmg','oJPAE','tzqkK','userAnswerDisplay','click','UxaZg','innerHTML','returnedToChat','GRMKL','split','Could\x20use\x20AI\x20to\x20extract\x20Q&A\x20pairs\x20from\x20unstructured\x20text','ULkgx','push','BGJiC','explicit','ycEBR','showAutoAdvancePrompt','loaderElement','HBDXz','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Correct\x20answer:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Parsed\x20questions:','Raw\x20quiz\x20input:','quizContainer','mNJIz','parse','questionLoaded','Try\x20again\x20ü§î','dVQrJ','rbvEj','remove','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22summary-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Question\x20','insertBefore','%\x20Match</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>','confirmationPrompt','addEventListener','div','answer','question-display','\x0a\x20\x20\x20\x20\x20\x20<h2>Question\x20','NAakD','loader','eventListeners','chatContainer','Good!\x20üëç','querySelector','prompt','userAnswers','üßπ\x20Cleaned\x20response:','pcsRQ','</div>','returnToChatButton','SWikV','confirmAnswerCompletion','trim','ikzEw','84gNkLXj','quizStarted','match','RTzbi','questionDisplay','UceJd','vyMSO','ovJif','speechProcessor','isArray','percentageMatch','wupfc','good'];_0x38f9=function(){return _0x33e4b6;};return _0x38f9();}function _0x515d(_0x484d31,_0x56acb6){const _0x38f96f=_0x38f9();return _0x515d=function(_0x515dad,_0x53d80a){_0x515dad=_0x515dad-0xe2;let _0x1dfec3=_0x38f96f[_0x515dad];return _0x1dfec3;},_0x515d(_0x484d31,_0x56acb6);}import{aiLanguageSession,cleanJSONMarkdown,initializeLanguageSession}from'./aiCommon.js';import{SpeechProcessor}from'./speechProcessor.js';export class QuizManager{constructor(_0x396c98={}){const _0x1fed87=_0x515d,_0x2c593c={'pcsRQ':_0x1fed87(0x1bf)},_0xac87e9=_0x2c593c[_0x1fed87(0x19f)]['split']('|');let _0xa4cfa7=0x0;while(!![]){switch(_0xac87e9[_0xa4cfa7++]){case'0':this[_0x1fed87(0xfa)]=null;continue;case'1':this[_0x1fed87(0x1aa)]=null;continue;case'2':this[_0x1fed87(0x198)]={};continue;case'3':this[_0x1fed87(0x1c9)]=null;continue;case'4':this[_0x1fed87(0x14e)]=null;continue;case'5':this[_0x1fed87(0x185)]=null;continue;case'6':this[_0x1fed87(0xfc)]=![];continue;case'7':this[_0x1fed87(0x13e)]={'questions':[],'currentQuestionIndex':0x0,'userAnswers':[],'isRecording':![],'recordingTimeout':null,'minimumWordCount':0x5,'wordCount':0x0,'accumulatedAnswer':''};continue;case'8':this[_0x1fed87(0x190)]=null;continue;case'9':this[_0x1fed87(0x1ae)]=null;continue;case'10':this[_0x1fed87(0x17f)]=_0x396c98['showAutoAdvancePrompt']||null;continue;case'11':this[_0x1fed87(0x172)]=null;continue;}break;}}[_0x471a2b(0x155)](){const _0x200da8=_0x471a2b,_0x1c2433={'NADwL':_0x200da8(0xf8),'znrkq':_0x200da8(0x197),'UXXrg':_0x200da8(0x139)},_0x2a6c74=_0x1c2433[_0x200da8(0x1bc)][_0x200da8(0x178)]('|');let _0x23583b=0x0;while(!![]){switch(_0x2a6c74[_0x23583b++]){case'0':this[_0x200da8(0x15e)]();continue;case'1':this[_0x200da8(0x168)]();continue;case'2':this['initializeSpeechManager']();continue;case'3':this[_0x200da8(0x180)]=document['getElementById'](_0x1c2433[_0x200da8(0x1b4)]);continue;case'4':console['log'](_0x1c2433['UXXrg']);continue;}break;}}[_0x471a2b(0x168)](){const _0x5b9983=_0x471a2b,_0xc874f={'iSRDW':_0x5b9983(0x11c),'OPSrS':'correctAnswerDisplay','ikzEw':'questionDisplay','hqluv':_0x5b9983(0x12b),'ZhACk':_0x5b9983(0x192),'SWikV':'userAnswerDisplay','MaJjv':_0x5b9983(0x102),'wupfc':_0x5b9983(0x105),'yCqnv':_0x5b9983(0x194),'ssfFe':_0x5b9983(0xfa),'cChSP':_0x5b9983(0x14e),'LxKuP':_0x5b9983(0x1bd),'rKRtM':_0x5b9983(0x14b),'UdFSZ':_0x5b9983(0x1c4),'HiMuy':'.input-container'},_0x266685=_0xc874f[_0x5b9983(0x1d4)][_0x5b9983(0x178)]('|');let _0x5d005b=0x0;while(!![]){switch(_0x266685[_0x5d005b++]){case'0':this[_0x5b9983(0x1c9)]['id']=_0xc874f[_0x5b9983(0xe9)];continue;case'1':this[_0x5b9983(0x1aa)]['id']=_0xc874f[_0x5b9983(0x1a5)];continue;case'2':this[_0x5b9983(0x190)][_0x5b9983(0x161)][_0x5b9983(0x121)](_0xc874f['hqluv']);continue;case'3':this['confirmationPrompt']=document['createElement'](_0x5b9983(0x192));continue;case'4':this[_0x5b9983(0x185)]['appendChild'](this[_0x5b9983(0x1c9)]);continue;case'5':this[_0x5b9983(0x185)]['appendChild'](this[_0x5b9983(0x172)]);continue;case'6':this[_0x5b9983(0xfa)]=document[_0x5b9983(0x132)](_0xc874f[_0x5b9983(0xe2)]);continue;case'7':this[_0x5b9983(0x14e)]=document[_0x5b9983(0x132)](_0x5b9983(0x1d1));continue;case'8':this[_0x5b9983(0x172)]['id']=_0xc874f[_0x5b9983(0x1a2)];continue;case'9':this[_0x5b9983(0xfa)][_0x5b9983(0x161)][_0x5b9983(0x121)](_0xc874f[_0x5b9983(0x10e)]);continue;case'10':this[_0x5b9983(0x185)][_0x5b9983(0x138)](this[_0x5b9983(0x14e)]);continue;case'11':this[_0x5b9983(0x190)]['id']='confirmationPrompt';continue;case'12':this[_0x5b9983(0x1c9)][_0x5b9983(0x1c8)][_0x5b9983(0x12f)]=_0xc874f[_0x5b9983(0x1b1)];continue;case'13':this[_0x5b9983(0x1aa)]['classList'][_0x5b9983(0x121)](_0xc874f[_0x5b9983(0x1c6)]);continue;case'14':this['questionDisplay']=document[_0x5b9983(0x132)](_0xc874f[_0x5b9983(0xe2)]);continue;case'15':this[_0x5b9983(0x1c9)]=document[_0x5b9983(0x132)](_0xc874f[_0x5b9983(0xe2)]);continue;case'16':this[_0x5b9983(0x185)][_0x5b9983(0x138)](this[_0x5b9983(0xfa)]);continue;case'17':this['resultDisplay']['id']=_0xc874f[_0x5b9983(0x148)];continue;case'18':this[_0x5b9983(0x185)][_0x5b9983(0x138)](this['questionDisplay']);continue;case'19':this[_0x5b9983(0x185)]=document[_0x5b9983(0x132)](_0xc874f[_0x5b9983(0xe2)]);continue;case'20':this[_0x5b9983(0x1c9)][_0x5b9983(0x161)][_0x5b9983(0x121)](_0x5b9983(0x106));continue;case'21':this['confirmationPrompt'][_0x5b9983(0x1c8)][_0x5b9983(0x12f)]=_0xc874f[_0x5b9983(0x1b1)];continue;case'22':this[_0x5b9983(0x14e)]['id']=_0xc874f[_0x5b9983(0x151)];continue;case'23':this[_0x5b9983(0x172)]=document[_0x5b9983(0x132)](_0x5b9983(0x192));continue;case'24':this['resultDisplay'][_0x5b9983(0x1c8)][_0x5b9983(0x12f)]=_0xc874f[_0x5b9983(0x1b1)];continue;case'25':this[_0x5b9983(0x14e)]['textContent']=_0xc874f[_0x5b9983(0x125)];continue;case'26':this[_0x5b9983(0x185)]['id']='quizContainer';continue;case'27':this[_0x5b9983(0x172)][_0x5b9983(0x161)][_0x5b9983(0x121)](_0xc874f[_0x5b9983(0x1b3)]);continue;case'28':this['quizContainer'][_0x5b9983(0x161)][_0x5b9983(0x121)](_0x5b9983(0x156));continue;case'29':this[_0x5b9983(0x14e)]['classList']['add']('next-button');continue;case'30':this[_0x5b9983(0x190)][_0x5b9983(0x175)]='\x0a\x20\x20\x20\x20\x20\x20<p>Done?</p>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22confirmation-buttons\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22yesButton\x22\x20class=\x22confirm-button\x22>Yes</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22noButton\x22\x20class=\x22confirm-button\x22>No</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';continue;case'31':this[_0x5b9983(0x14e)][_0x5b9983(0x1c8)][_0x5b9983(0x12f)]=_0xc874f['wupfc'];continue;case'32':this['quizContainer'][_0x5b9983(0x138)](this[_0x5b9983(0x190)]);continue;case'33':document[_0x5b9983(0x19b)](_0xc874f['UdFSZ'])[_0x5b9983(0x18e)](this[_0x5b9983(0x185)],document[_0x5b9983(0x19b)](_0xc874f['HiMuy']));continue;case'34':this[_0x5b9983(0x185)][_0x5b9983(0x1c8)]['display']=_0xc874f[_0x5b9983(0x1b1)];continue;}break;}}[_0x471a2b(0xe4)](){const _0x248f29=_0x471a2b,_0x22e67f={'LFRbH':function(_0x35ff1b,_0x161e8f){return _0x35ff1b(_0x161e8f);},'SzFEE':function(_0x2caf07,_0x46c923){return _0x2caf07===_0x46c923;},'BcosT':_0x248f29(0x1c2),'RtKYC':'extended','BNvAq':_0x248f29(0x122),'exuLh':_0x248f29(0x101)};this[_0x248f29(0x1ae)]=new SpeechProcessor({'onResult':(_0xe0365e,_0x2995f0)=>{const _0x5c9fcc=_0x248f29;this[_0x5c9fcc(0x172)][_0x5c9fcc(0x175)]='<strong>Your\x20answer:</strong>\x20'+_0xe0365e+'<span\x20class=\x22interim\x22>'+_0x2995f0+_0x5c9fcc(0x1ca);},'onError':_0x16faa9=>{const _0x4d4b79=_0x248f29;_0x22e67f[_0x4d4b79(0xf3)](displayError,_0x16faa9);},'onSilence':_0x136fe0=>{const _0x1357c4=_0x248f29;if(_0x22e67f[_0x1357c4(0x147)](_0x136fe0,_0x1357c4(0x17d)))this[_0x1357c4(0x1a3)]();else{if(_0x136fe0===_0x22e67f['BcosT'])this[_0x1357c4(0x1a3)]();else _0x136fe0===_0x22e67f['RtKYC']&&this[_0x1357c4(0x11a)]();}},'onRecordingStart':()=>{const _0x382d45=_0x248f29,_0x57a3ff=document[_0x382d45(0xf1)](_0x22e67f['BNvAq']);_0x57a3ff&&_0x57a3ff[_0x382d45(0x161)][_0x382d45(0x121)](_0x22e67f[_0x382d45(0xfb)]);},'onRecordingStop':()=>{const _0x5337bd=_0x248f29,_0x29521a=document['getElementById'](_0x22e67f[_0x5337bd(0x145)]);_0x29521a&&_0x29521a[_0x5337bd(0x161)][_0x5337bd(0x18c)](_0x5337bd(0x101));},'minimumWordCount':0x5,'silenceTimeout':0xbb8,'extendedSilenceTimeout':0xbb8});}[_0x471a2b(0x15e)](){const _0x4cd8f8=_0x471a2b,_0xb31e76={'oJPAE':'none','NAakD':'yesButton','padgV':'noButton','oiKyJ':'click'};this['nextButton'][_0x4cd8f8(0x191)](_0x4cd8f8(0x173),()=>{const _0x1f8867=_0x4cd8f8;this[_0x1f8867(0x16e)]();}),document[_0x4cd8f8(0xf1)](_0xb31e76[_0x4cd8f8(0x196)])[_0x4cd8f8(0x191)](_0x4cd8f8(0x173),()=>{const _0x443677=_0x4cd8f8;this[_0x443677(0x190)][_0x443677(0x1c8)][_0x443677(0x12f)]=_0xb31e76[_0x443677(0x170)],this['confirmAnswerCompletion']();}),document[_0x4cd8f8(0xf1)](_0xb31e76[_0x4cd8f8(0x15d)])['addEventListener'](_0xb31e76[_0x4cd8f8(0x1be)],()=>{const _0xe66f2b=_0x4cd8f8;this[_0xe66f2b(0x190)]['style'][_0xe66f2b(0x12f)]='none';if(this[_0xe66f2b(0x1ae)])this[_0xe66f2b(0x1ae)][_0xe66f2b(0x154)]();});}[_0x471a2b(0x11a)](){const _0x39666c=_0x471a2b,_0x2afa8a={'ULkgx':_0x39666c(0x105),'oGuUc':_0x39666c(0x10f),'pcmpA':function(_0x32cb96,_0x32a0b4){return _0x32cb96!==_0x32a0b4;},'IzEUB':'No\x20response\x20detected,\x20resuming\x20recording.','AmJHm':'block','aMmQn':_0x39666c(0x12c),'cztQS':_0x39666c(0x1d7),'JqiXz':_0x39666c(0x192),'RTzbi':'#dc3545','wSvtC':_0x39666c(0x15c),'LlBnB':_0x39666c(0xe6),'NmRVV':function(_0x5bbc6a,_0x1bbc9a,_0x5cfc3f){return _0x5bbc6a(_0x1bbc9a,_0x5cfc3f);}};if(this[_0x39666c(0x1ae)])this[_0x39666c(0x1ae)]['stopRecording']();this[_0x39666c(0x190)][_0x39666c(0x1c8)][_0x39666c(0x12f)]=_0x2afa8a[_0x39666c(0x14f)],this[_0x39666c(0x190)][_0x39666c(0x1c8)][_0x39666c(0x1d6)]=_0x2afa8a[_0x39666c(0x129)],this['confirmationPrompt']['style'][_0x39666c(0x157)]=_0x2afa8a[_0x39666c(0x112)];if(!document[_0x39666c(0xf1)](_0x39666c(0x10f))){const _0x26bdd5=document[_0x39666c(0x132)](_0x2afa8a['JqiXz']);_0x26bdd5['id']=_0x2afa8a[_0x39666c(0x16d)],_0x26bdd5[_0x39666c(0x1c8)][_0x39666c(0x12f)]=_0x2afa8a[_0x39666c(0x17a)],_0x26bdd5[_0x39666c(0x1c8)][_0x39666c(0x108)]=_0x2afa8a[_0x39666c(0x1a9)],_0x26bdd5[_0x39666c(0x1c8)]['fontWeight']=_0x2afa8a[_0x39666c(0x13c)],_0x26bdd5[_0x39666c(0x15b)]=_0x2afa8a['LlBnB'],this[_0x39666c(0x190)]['appendChild'](_0x26bdd5);}if(this[_0x39666c(0x1ae)]){const _0xc3e5cf=this['speechProcessor']['startConfirmationRecognition'](()=>{const _0x36be6e=_0x39666c;this[_0x36be6e(0x190)]['style'][_0x36be6e(0x12f)]=_0x2afa8a[_0x36be6e(0x17a)],this['confirmAnswerCompletion']();},()=>{const _0x250e25=_0x39666c;this[_0x250e25(0x190)]['style']['display']=_0x2afa8a[_0x250e25(0x17a)],this[_0x250e25(0x1ae)]['startRecording']();},()=>{const _0x140d5b=_0x39666c;this[_0x140d5b(0x190)][_0x140d5b(0x1c8)][_0x140d5b(0x157)]=_0x2afa8a['ULkgx'],document[_0x140d5b(0xf1)](_0x2afa8a['oGuUc'])&&(document['getElementById'](_0x2afa8a[_0x140d5b(0x16d)])[_0x140d5b(0x1c8)][_0x140d5b(0x12f)]='block');});}_0x2afa8a[_0x39666c(0x13f)](setTimeout,()=>{const _0x2f098b=_0x39666c;if(_0x2afa8a[_0x2f098b(0x12d)](this[_0x2f098b(0x190)][_0x2f098b(0x1c8)]['display'],_0x2afa8a['ULkgx'])){console['log'](_0x2afa8a[_0x2f098b(0x1ce)]),this[_0x2f098b(0x190)][_0x2f098b(0x1c8)][_0x2f098b(0x12f)]=_0x2afa8a[_0x2f098b(0x17a)];if(this[_0x2f098b(0x1ae)])this['speechProcessor'][_0x2f098b(0x154)]();}},0x1b58);}['confirmAnswerCompletion'](){const _0x2138ab=_0x471a2b,_0x1be197={'tWJdy':_0x2138ab(0x105)};if(this[_0x2138ab(0x1ae)])this[_0x2138ab(0x1ae)][_0x2138ab(0xe8)]();this['confirmationPrompt'][_0x2138ab(0x1c8)][_0x2138ab(0x12f)]=_0x1be197[_0x2138ab(0x1d0)];const _0x4ebe7d=(this['speechProcessor']?this[_0x2138ab(0x1ae)][_0x2138ab(0x15f)]():'')[_0x2138ab(0x10a)](/done|i am finished|that's all|yes|correct/gi,'')[_0x2138ab(0x1a4)]();this[_0x2138ab(0x13e)][_0x2138ab(0x19d)][this['currentQuiz'][_0x2138ab(0x158)]]=_0x4ebe7d,this[_0x2138ab(0x172)]['innerHTML']=_0x2138ab(0x13b)+_0x4ebe7d,this['compareAnswer'](_0x4ebe7d,this['currentQuiz'][_0x2138ab(0x14a)][this[_0x2138ab(0x13e)][_0x2138ab(0x158)]][_0x2138ab(0x193)]);}async[_0x471a2b(0xee)](_0x311244,_0x35cadc){const _0xe3b37d=_0x471a2b,_0x311bbe={'mNJIz':_0xe3b37d(0x14c),'Eraru':'system','bSlSO':_0xe3b37d(0x113),'ALxGW':'user','kuyqn':_0xe3b37d(0x117),'naNGd':_0xe3b37d(0x197),'lmsWk':_0xe3b37d(0x1c1),'mLKeO':_0xe3b37d(0x109),'vrtQR':_0xe3b37d(0x105),'bGQHF':_0xe3b37d(0x19e),'hEzCe':function(_0x339432,_0x478da1){return _0x339432===_0x478da1;},'tzqkK':_0xe3b37d(0x128),'gQLwj':_0xe3b37d(0x134),'lOSAZ':'‚ú®\x20Parsed\x20Result:','CPkyi':'‚ùå\x20JSON\x20Parse\x20Error:','qJHpU':'Failed\x20to\x20parse\x20AI\x20response\x20as\x20JSON:','vyMSO':_0xe3b37d(0x116),'hMHMg':_0xe3b37d(0x11d)};if(!aiLanguageSession)await initializeLanguageSession();console['log'](_0xe3b37d(0xe3),_0x311244),console[_0xe3b37d(0x119)](_0x311bbe[_0xe3b37d(0x186)],_0x35cadc);try{const _0x5311c6=JSON[_0xe3b37d(0x153)]([{'role':_0x311bbe['Eraru'],'content':_0x311bbe[_0xe3b37d(0x162)]},{'role':_0x311bbe[_0xe3b37d(0xef)],'content':'Compare\x20the\x20following\x20answers:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20User\x27s\x20answer:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x311244+_0xe3b37d(0x182)+_0x35cadc+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20return\x20a\x20JSON\x20object\x20with\x20the\x20following\x20fields:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20percentageMatch\x20(number):\x20Percentage\x20of\x20key\x20points\x20covered\x20by\x20the\x20user.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20feedback\x20(string):\x20Constructive\x20feedback\x20on\x20strengths\x20and\x20areas\x20to\x20improve.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20missingPoints\x20(array\x20of\x20strings):\x20Key\x20points\x20not\x20mentioned\x20by\x20the\x20user.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20similarities\x20(array\x20of\x20strings):\x20Important\x20points\x20both\x20answers\x20share.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20differences\x20(array\x20of\x20strings):\x20Notable\x20differences\x20in\x20content\x20or\x20emphasis.'}]);console['log'](_0x311bbe[_0xe3b37d(0x115)],_0x5311c6);const _0x115e29=document[_0xe3b37d(0xf1)](_0x311bbe['naNGd']);console['log'](_0xe3b37d(0x14d),_0x115e29);if(_0x115e29)_0x115e29[_0xe3b37d(0x1c8)]['display']=_0x311bbe['lmsWk'];const _0x218dd2=await aiLanguageSession[_0xe3b37d(0x19c)](_0x5311c6);console[_0xe3b37d(0x119)](_0x311bbe['mLKeO'],_0x218dd2);if(_0x115e29)_0x115e29[_0xe3b37d(0x1c8)][_0xe3b37d(0x12f)]=_0x311bbe[_0xe3b37d(0x133)];try{let _0x24f12e=cleanJSONMarkdown(_0x218dd2);console['log'](_0x311bbe['bGQHF'],_0x24f12e);let _0x21e760=_0x24f12e;_0x311bbe['hEzCe'](typeof _0x24f12e,_0x311bbe[_0xe3b37d(0x171)])?console[_0xe3b37d(0x119)](_0x311bbe[_0xe3b37d(0x1d2)]):(_0x21e760=JSON[_0xe3b37d(0x187)](_0x24f12e),console['log'](_0x311bbe['lOSAZ'],_0x21e760)),this['displayResults'](_0x21e760);}catch(_0x19fd91){console[_0xe3b37d(0xeb)](_0x311bbe['CPkyi'],_0x19fd91),Logger[_0xe3b37d(0xeb)](_0x311bbe[_0xe3b37d(0xe7)],_0x19fd91),this['displayResults']({'percentageMatch':0x0,'feedback':_0x311bbe[_0xe3b37d(0x1ac)],'missingPoints':[]});}}catch(_0x11e420){console[_0xe3b37d(0xeb)](_0x311bbe[_0xe3b37d(0x1b9)],_0x11e420);const _0x6fbecf=document[_0xe3b37d(0xf1)](_0x311bbe[_0xe3b37d(0x166)]);if(_0x6fbecf)_0x6fbecf['style'][_0xe3b37d(0x12f)]='none';Logger[_0xe3b37d(0xeb)](_0xe3b37d(0xed),_0x11e420),this['displayResults']({'percentageMatch':0x0,'feedback':_0x311bbe['vyMSO'],'missingPoints':[]});}}['displayResults'](_0xce3817){const _0x56e87e=_0x471a2b,_0x8e33b4={'ovJif':'\x5c$&','GKifH':'<span\x20class=\x22highlight\x22>$1</span>','ycEBR':_0x56e87e(0x1c1),'FvTSz':function(_0x182452,_0x5a8b3b){return _0x182452>=_0x5a8b3b;},'dPEFp':_0x56e87e(0x160),'snjDu':_0x56e87e(0x1b2),'dVQrJ':_0x56e87e(0x15a),'vNiLZ':_0x56e87e(0x189),'ujXLB':'poor','AcNMM':function(_0x218a49,_0x4f2219){return _0x218a49<_0x4f2219;},'hjzkv':function(_0x53fdf6,_0x124290){return _0x53fdf6-_0x124290;},'HBDXz':function(_0x4ead33,_0x226361,_0x48d7e3){return _0x4ead33(_0x226361,_0x48d7e3);}};this[_0x56e87e(0xfa)][_0x56e87e(0x1c8)][_0x56e87e(0x12f)]=_0x56e87e(0x1c1),this[_0x56e87e(0x1c9)][_0x56e87e(0x1c8)][_0x56e87e(0x12f)]=_0x8e33b4[_0x56e87e(0x17e)],this[_0x56e87e(0x14e)][_0x56e87e(0x1c8)]['display']=_0x8e33b4[_0x56e87e(0x17e)];let _0x298d52='',_0x17108a='';if(_0x8e33b4[_0x56e87e(0x167)](_0xce3817[_0x56e87e(0x1b0)],0x5a))_0x298d52=_0x56e87e(0x163),_0x17108a=_0x8e33b4[_0x56e87e(0x124)];else{if(_0xce3817['percentageMatch']>=0x50)_0x298d52=_0x56e87e(0x19a),_0x17108a=_0x8e33b4[_0x56e87e(0x1d5)];else _0x8e33b4[_0x56e87e(0x167)](_0xce3817['percentageMatch'],0x32)?(_0x298d52=_0x8e33b4[_0x56e87e(0x18a)],_0x17108a='ok'):(_0x298d52=_0x8e33b4[_0x56e87e(0x1c5)],_0x17108a=_0x8e33b4[_0x56e87e(0x1c7)]);}this['resultDisplay'][_0x56e87e(0x175)]=_0x56e87e(0x123)+_0x17108a+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h3>'+_0x298d52+_0x56e87e(0x1bb)+Math[_0x56e87e(0xf0)](_0xce3817['percentageMatch'])+_0x56e87e(0x18f)+_0xce3817[_0x56e87e(0xf9)]+_0x56e87e(0x16c);let _0x174cde=this['currentQuiz'][_0x56e87e(0x14a)][this[_0x56e87e(0x13e)][_0x56e87e(0x158)]][_0x56e87e(0x193)];_0xce3817['missingPoints']&&_0xce3817[_0x56e87e(0x140)][_0x56e87e(0x165)]>0x0&&_0xce3817['missingPoints'][_0x56e87e(0x146)](_0x6702fd=>{const _0x86fc37=_0x56e87e,_0xdae16f=new RegExp('('+_0x6702fd['replace'](/[.*+?^${}()|[\]\\]/g,_0x8e33b4[_0x86fc37(0x1ad)])+')','gi');_0x174cde=_0x174cde['replace'](_0xdae16f,_0x8e33b4[_0x86fc37(0xf5)]);}),this[_0x56e87e(0x1c9)][_0x56e87e(0x175)]='\x0a\x20\x20\x20\x20\x20\x20<h3>Complete\x20Answer:</h3>\x0a\x20\x20\x20\x20\x20\x20<p>'+_0x174cde+_0x56e87e(0x1cc),_0x8e33b4[_0x56e87e(0x111)](this[_0x56e87e(0x13e)]['currentQuestionIndex'],_0x8e33b4[_0x56e87e(0x11e)](this[_0x56e87e(0x13e)][_0x56e87e(0x14a)][_0x56e87e(0x165)],0x1))&&_0x8e33b4[_0x56e87e(0x181)](setTimeout,()=>{const _0x13a0b6=_0x56e87e;if(this[_0x13a0b6(0x17f)])this[_0x13a0b6(0x17f)]();},0x3e8);}[_0x471a2b(0x10d)](_0x54050f){const _0x1c4a91=_0x471a2b,_0x367fa4=[/Q\d*\s*[:.-]\s*.*\s*A\s*[:.-]/i,/\d+\s*[).]\s*.*\s*Answer\s*[:.-]/i,/Question\s*\d+\s*[:.-]/i,/\b[Qq]uestion\b.*\b[Aa]nswer\b/];return _0x367fa4['some'](_0x53b114=>_0x53b114[_0x1c4a91(0xf7)](_0x54050f));}[_0x471a2b(0x149)](_0x5764b8){const _0x27a941=_0x471a2b,_0x5161a8={'OAfdY':function(_0x2aa1df,_0x21b014){return _0x2aa1df>_0x21b014;},'EVwwd':function(_0x12016f,_0x5e11d4){return _0x12016f===_0x5e11d4;},'CgxmF':_0x27a941(0x1cf),'IGlbe':_0x27a941(0x1b7),'UMzVl':_0x27a941(0x1b8),'eRdaG':function(_0x210433,_0x308093){return _0x210433&&_0x308093;},'xmDXU':_0x27a941(0x179),'cBIqf':_0x27a941(0x183),'Hbfkq':_0x27a941(0x137)};console['log'](_0x27a941(0x184),_0x5764b8);try{try{const _0x1e4c40=JSON['parse'](_0x5764b8);if(Array[_0x27a941(0x1af)](_0x1e4c40)&&_0x5161a8[_0x27a941(0xfd)](_0x1e4c40[_0x27a941(0x165)],0x0)&&_0x1e4c40[0x0]['question']&&_0x1e4c40[0x0][_0x27a941(0x193)])return _0x1e4c40;}catch(_0x282360){}const _0x2e4828=[],_0x225133=_0x5764b8[_0x27a941(0x1a8)](/(?:Q:|Question:?|^\d+\.?)\s*(.+?)(?:A:|Answer:?)\s*(.+?)(?=(?:Q:|Question:?|^\d+\.?)|$)/gis);_0x225133&&_0x5161a8['OAfdY'](_0x225133['length'],0x0)&&_0x225133[_0x27a941(0x146)](_0x181c0f=>{const _0x4a727c=_0x27a941,_0x2a25ff=_0x181c0f[_0x4a727c(0x1a8)](/(?:Q:|Question:?|^\d+\.?)\s*(.+?)(?=A:|Answer:?)/is),_0x197c3f=_0x181c0f[_0x4a727c(0x1a8)](/(?:A:|Answer:?)\s*(.+?)$/is);_0x2a25ff&&_0x197c3f&&_0x2e4828['push']({'question':_0x2a25ff[0x1]['trim'](),'answer':_0x197c3f[0x1]['trim']()});});if(_0x5161a8[_0x27a941(0x1ba)](_0x2e4828['length'],0x0)){const _0x51d433=_0x5764b8[_0x27a941(0x178)](/\n\s*\n|\d+\s*[).]|\bQ\d*\s*[:.]/);for(let _0x31d134=0x0;_0x31d134<_0x51d433['length'];_0x31d134++){const _0x3542df=_0x51d433[_0x31d134]['trim']();if(!_0x3542df)continue;const _0x2732b2=[_0x5161a8['CgxmF'],'A:',_0x5161a8[_0x27a941(0x120)],_0x5161a8[_0x27a941(0x1cd)]];let _0x21660e=_0x3542df,_0x22c3e4='';for(const _0x1f2024 of _0x2732b2){if(_0x3542df[_0x27a941(0x104)](_0x1f2024)){const _0x496051=_0x3542df[_0x27a941(0x178)](_0x1f2024);_0x21660e=_0x496051[0x0][_0x27a941(0x1a4)](),_0x22c3e4=_0x496051[0x1][_0x27a941(0x1a4)]();break;}}_0x5161a8[_0x27a941(0xf6)](_0x21660e,_0x22c3e4)&&_0x2e4828[_0x27a941(0x17b)]({'question':_0x21660e,'answer':_0x22c3e4});}}return _0x2e4828[_0x27a941(0x165)]===0x0&&aiLanguageSession&&console[_0x27a941(0x119)](_0x5161a8['xmDXU']),console[_0x27a941(0x119)](_0x5161a8[_0x27a941(0xf2)],_0x2e4828),_0x2e4828;}catch(_0x126baf){return Logger[_0x27a941(0xeb)](_0x5161a8['Hbfkq'],_0x126baf),console[_0x27a941(0x119)](_0x5161a8[_0x27a941(0x13d)],_0x126baf),null;}}[_0x471a2b(0x1d3)](_0x4420fb){const _0x488a88=_0x471a2b,_0x3f0751={'rbvEj':_0x488a88(0x11b),'GRMKL':_0x488a88(0x105),'Ivqmg':_0x488a88(0x1c1),'gLjbn':_0x488a88(0x1a7)};this[_0x488a88(0x13e)]={'questions':_0x4420fb,'currentQuestionIndex':0x0,'userAnswers':Array(_0x4420fb['length'])[_0x488a88(0x114)](''),'isRecording':![],'recordingTimeout':null,'minimumWordCount':0x5,'wordCount':0x0,'accumulatedAnswer':''};const _0x27c7e8=document[_0x488a88(0xf1)](_0x3f0751[_0x488a88(0x18b)]),_0x20c79e=document[_0x488a88(0xf1)](_0x488a88(0x199));if(_0x27c7e8)_0x27c7e8[_0x488a88(0x1c8)][_0x488a88(0x12f)]=_0x488a88(0x105);if(_0x20c79e)_0x20c79e['style'][_0x488a88(0x12f)]=_0x3f0751[_0x488a88(0x177)];this[_0x488a88(0x185)][_0x488a88(0x1c8)][_0x488a88(0x12f)]=_0x3f0751[_0x488a88(0x16f)],this[_0x488a88(0xe5)](_0x3f0751['gLjbn'],_0x4420fb),this[_0x488a88(0x16b)]();}['loadCurrentQuestion'](){const _0xaa042a=_0x471a2b,_0x4298a8={'Cdwan':_0xaa042a(0x105),'UceJd':_0xaa042a(0x1b5),'ezUhi':function(_0x2bc167,_0x10e1b2){return _0x2bc167+_0x10e1b2;}};this[_0xaa042a(0xfa)][_0xaa042a(0x1c8)][_0xaa042a(0x12f)]=_0x4298a8[_0xaa042a(0xff)],this[_0xaa042a(0x1c9)][_0xaa042a(0x1c8)]['display']=_0x4298a8['Cdwan'],this[_0xaa042a(0x14e)][_0xaa042a(0x1c8)][_0xaa042a(0x12f)]=_0xaa042a(0x105),this[_0xaa042a(0x190)]['style'][_0xaa042a(0x12f)]=_0xaa042a(0x105),this[_0xaa042a(0x13e)][_0xaa042a(0x164)]='',this['currentQuiz']['wordCount']=0x0;this['speechProcessor']&&this[_0xaa042a(0x1ae)]['resetAccumulatedText']();this[_0xaa042a(0x172)][_0xaa042a(0x175)]=_0x4298a8[_0xaa042a(0x1ab)];const _0x4b2060=this['currentQuiz'][_0xaa042a(0x14a)][this[_0xaa042a(0x13e)]['currentQuestionIndex']];this[_0xaa042a(0x1aa)][_0xaa042a(0x175)]=_0xaa042a(0x195)+_0x4298a8['ezUhi'](this[_0xaa042a(0x13e)][_0xaa042a(0x158)],0x1)+_0xaa042a(0x1b6)+this[_0xaa042a(0x13e)][_0xaa042a(0x14a)]['length']+_0xaa042a(0x1cb)+_0x4b2060[_0xaa042a(0x159)]+'</p>\x0a\x20\x20\x20\x20',this['emit'](_0xaa042a(0x188),{'index':this[_0xaa042a(0x13e)]['currentQuestionIndex'],'question':_0x4b2060}),this[_0xaa042a(0x1ae)][_0xaa042a(0x103)](_0x4b2060[_0xaa042a(0x159)])['then'](()=>this['speechProcessor']['startRecording'](this[_0xaa042a(0x13e)]));}[_0x471a2b(0x16e)](){const _0xc83487=_0x471a2b,_0x3e1b4e={'dumix':function(_0x37d228,_0x5dbd25){return _0x37d228<_0x5dbd25;},'oZGnT':function(_0xe7402a,_0x4755ba){return _0xe7402a-_0x4755ba;}};_0x3e1b4e[_0xc83487(0x135)](this['currentQuiz'][_0xc83487(0x158)],_0x3e1b4e[_0xc83487(0x1c3)](this[_0xc83487(0x13e)][_0xc83487(0x14a)][_0xc83487(0x165)],0x1))?(this['currentQuiz']['currentQuestionIndex']++,this[_0xc83487(0x1ae)]&&this[_0xc83487(0x1ae)][_0xc83487(0x10c)]&&this[_0xc83487(0x1ae)][_0xc83487(0xe8)](),this[_0xc83487(0x16b)]()):this[_0xc83487(0x169)]();}[_0x471a2b(0x169)](){const _0x81682b=_0x471a2b,_0x7611c1={'WLNyo':'none','DkrIy':_0x81682b(0x11b),'jmKyN':'flex','ryqsO':_0x81682b(0x176),'fiNYx':_0x81682b(0x131),'BGJiC':_0x81682b(0x1a1)};this[_0x81682b(0x185)][_0x81682b(0x175)]='\x0a\x20\x20\x20\x20\x20\x20<h2>Quiz\x20Completed!</h2>\x0a\x20\x20\x20\x20\x20\x20<p>You\x27ve\x20completed\x20all\x20'+this[_0x81682b(0x13e)][_0x81682b(0x14a)]['length']+'\x20questions.</p>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22quiz-summary\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+this['generateQuizSummary']()+_0x81682b(0x143),this['emit'](_0x7611c1[_0x81682b(0x150)],{'questions':this[_0x81682b(0x13e)][_0x81682b(0x14a)],'answers':this[_0x81682b(0x13e)][_0x81682b(0x19d)]}),document[_0x81682b(0xf1)](_0x7611c1[_0x81682b(0x17c)])[_0x81682b(0x191)](_0x81682b(0x173),()=>{const _0x42e8ca=_0x81682b;this['quizContainer'][_0x42e8ca(0x1c8)][_0x42e8ca(0x12f)]=_0x7611c1[_0x42e8ca(0x107)];const _0x41b706=document[_0x42e8ca(0xf1)](_0x42e8ca(0x199)),_0x12829a=document[_0x42e8ca(0xf1)](_0x7611c1[_0x42e8ca(0xec)]);if(_0x41b706)_0x41b706[_0x42e8ca(0x1c8)][_0x42e8ca(0x12f)]=_0x7611c1[_0x42e8ca(0x130)];if(_0x12829a)_0x12829a['style']['display']=_0x7611c1[_0x42e8ca(0x130)];this['emit'](_0x7611c1[_0x42e8ca(0x141)]);});}[_0x471a2b(0x144)](){const _0x2b34b9=_0x471a2b,_0x1a9179={'UxaZg':_0x2b34b9(0x11f),'seiFZ':function(_0xc360b5,_0xdb86d4){return _0xc360b5+_0xdb86d4;},'Dtwzt':'<div\x20class=\x22summary-container\x22>'};let _0x4608f4=_0x1a9179[_0x2b34b9(0x1c0)];return this['currentQuiz']['questions'][_0x2b34b9(0x146)]((_0x310f65,_0x5f5b11)=>{const _0x497a8e=_0x2b34b9,_0x250458=this['currentQuiz'][_0x497a8e(0x19d)][_0x5f5b11]||_0x1a9179[_0x497a8e(0x174)];_0x4608f4+=_0x497a8e(0x18d)+_0x1a9179['seiFZ'](_0x5f5b11,0x1)+_0x497a8e(0x13a)+_0x310f65[_0x497a8e(0x159)]+_0x497a8e(0xf4)+_0x250458+_0x497a8e(0x100)+_0x310f65[_0x497a8e(0x193)]+_0x497a8e(0x16a);}),_0x4608f4+=_0x2b34b9(0x1a0),_0x4608f4;}['on'](_0x341158,_0x324877){const _0x36050b=_0x471a2b;return!this[_0x36050b(0x198)][_0x341158]&&(this[_0x36050b(0x198)][_0x341158]=[]),this[_0x36050b(0x198)][_0x341158]['push'](_0x324877),this;}['off'](_0x1de9c0,_0x4682bb){const _0x456ae1=_0x471a2b;if(!this[_0x456ae1(0x198)][_0x1de9c0])return this;return!_0x4682bb?this[_0x456ae1(0x198)][_0x1de9c0]=[]:this[_0x456ae1(0x198)][_0x1de9c0]=this[_0x456ae1(0x198)][_0x1de9c0][_0x456ae1(0x12e)](_0x47ef8d=>_0x47ef8d!==_0x4682bb),this;}[_0x471a2b(0xe5)](_0x1daaf3,_0x22bfd6){const _0x9217d8=_0x471a2b;if(!this[_0x9217d8(0x198)][_0x1daaf3])return;this[_0x9217d8(0x198)][_0x1daaf3][_0x9217d8(0x146)](_0x173306=>_0x173306(_0x22bfd6));}}