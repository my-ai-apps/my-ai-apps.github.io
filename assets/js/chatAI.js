
/*!
Copyright © 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x566031=_0x1224;(function(_0x4ea87b,_0x1be444){const _0xd5b987=_0x1224,_0xf96ed=_0x4ea87b();while(!![]){try{const _0x452e99=-parseInt(_0xd5b987(0x12d))/0x1+parseInt(_0xd5b987(0x12f))/0x2*(-parseInt(_0xd5b987(0x10f))/0x3)+parseInt(_0xd5b987(0x149))/0x4*(parseInt(_0xd5b987(0x11e))/0x5)+parseInt(_0xd5b987(0x158))/0x6+-parseInt(_0xd5b987(0x134))/0x7+-parseInt(_0xd5b987(0x12a))/0x8*(-parseInt(_0xd5b987(0x159))/0x9)+-parseInt(_0xd5b987(0x146))/0xa*(parseInt(_0xd5b987(0x151))/0xb);if(_0x452e99===_0x1be444)break;else _0xf96ed['push'](_0xf96ed['shift']());}catch(_0x4cca08){_0xf96ed['push'](_0xf96ed['shift']());}}}(_0x5c55,0xb8993));import _0x4004ee from'./store.js';import{appendMessage,showTypingIndicator,hideTypingIndicator}from'./common.js';const defaultSettings={'apiUrl':_0x566031(0x11a),'apiToken':_0x566031(0x131),'modelName':_0x566031(0x115),'maxTokens':0x1000,'temperature':0.7,'topP':0x1,'systemPrompt':'Based\x20on\x20the\x20user’s\x20input,\x20determine\x20the\x20intended\x20quiz\x20topic.\x20Create\x20a\x20JSON\x20object\x20containing\x20a\x20set\x20of\x205\x20multiple-choice\x20questions\x20relevant\x20to\x20that\x20topic.\x20Each\x20question\x20should\x20include\x20the\x20fields\x20\x27question\x27\x20(the\x20quiz\x20question),\x20\x27options\x27\x20(single\x20answer\x20choice).\x20Format\x20the\x20output\x20to\x20the\x20pattern\x20below\x20{\x20\x27topic\x27:\x20\x27example_topic\x27,\x20\x27questions\x27:\x20[\x20{\x20\x27question\x27:\x20\x27Example\x20question?\x27,\x20\x27options\x27:\x20[\x27Option\x20A\x27],\x20\x27correctAnswer\x27:\x20\x27Option\x20B\x27\x20}\x20]\x20}'};function _0x1224(_0xb731c2,_0x5725f7){const _0x5c555b=_0x5c55();return _0x1224=function(_0x12240b,_0x2d73a8){_0x12240b=_0x12240b-0x10f;let _0x171d60=_0x5c555b[_0x12240b];return _0x171d60;},_0x1224(_0xb731c2,_0x5725f7);}let settings={...defaultSettings};function _0x5c55(){const _0xcd11f=['HVyte','getElementById','openai/Qwen2.5','choices','maxTokens','Omxwa','YRjJN','http://localhost:1234/v1','NxyZG','Bearer\x20','apiUrl','265qsxAMw','user','6|7|9|1|13|4|5|3|2|0|12|10|11|8','split','application/json','HXHqq','Xlmfh','style','HayzK','xUrMm','setItem','bQwAf','472CNHxMY','UPnJF','AwgyM','1062678bMVDDG','JzFiQ','1662584UDzsjY','getItem','sk-proj-66666666666666666666666666666666','json_object','chat-window','2207877lwTOml','DixWa','none','pXyPI','Lqkdl','settings','NogRb','value','flex','NUsZL','apiToken','en-US','POST','content','sendMessage','json','length','display','195120JPzsUB','topP','uWvBN','84956nvJsTK','tznBH','Error:\x20Failed\x20to\x20fetch\x20AI\x20response:\x20','eUbOL','systemPrompt','Omfcv','mjyts','onload','231KLzcBF','vameI','7|8|10|2|4|3|14|11|5|0|1|6|13|12|9','FkrVw','parse','ZDllk','AVAIw','8264304YPpoxm','133047bQxHut','speak','lang','Aomwt','vMweg','Error:\x20Could\x20not\x20parse\x20JSON\x20response.','user-input','/chat/completions','modelName','3FPVYoU','message','temperature','Mojab'];_0x5c55=function(){return _0xcd11f;};return _0x5c55();}function loadSettings(){const _0x50986f=_0x566031,_0x3a4aad={'lMMSO':_0x50986f(0x120),'MdIHS':_0x50986f(0x161),'AwgyM':_0x50986f(0x117),'mjyts':_0x50986f(0x13e),'JzFiQ':_0x50986f(0x11d),'FkrVw':_0x50986f(0x147),'vMweg':_0x50986f(0x111)},_0xa067f7=_0x3a4aad['lMMSO']['split']('|');let _0x5befe4=0x0;while(!![]){switch(_0xa067f7[_0x5befe4++]){case'0':document[_0x50986f(0x114)](_0x3a4aad['MdIHS'])[_0x50986f(0x13b)]=settings[_0x50986f(0x161)];continue;case'1':settings[_0x50986f(0x117)]=_0x4004ee['getItem'](_0x3a4aad[_0x50986f(0x12c)])||defaultSettings[_0x50986f(0x117)];continue;case'2':document[_0x50986f(0x114)](_0x3a4aad[_0x50986f(0x14f)])[_0x50986f(0x13b)]=settings[_0x50986f(0x13e)];continue;case'3':document[_0x50986f(0x114)](_0x3a4aad[_0x50986f(0x12e)])[_0x50986f(0x13b)]=settings[_0x50986f(0x11d)];continue;case'4':settings[_0x50986f(0x147)]=_0x4004ee[_0x50986f(0x130)](_0x3a4aad[_0x50986f(0x154)])||defaultSettings[_0x50986f(0x147)];continue;case'5':settings[_0x50986f(0x14d)]=_0x4004ee[_0x50986f(0x130)](_0x50986f(0x14d))||defaultSettings[_0x50986f(0x14d)];continue;case'6':settings[_0x50986f(0x11d)]=_0x4004ee[_0x50986f(0x130)](_0x50986f(0x11d))||defaultSettings['apiUrl'];continue;case'7':settings['apiToken']=_0x4004ee[_0x50986f(0x130)](_0x3a4aad[_0x50986f(0x14f)])||defaultSettings[_0x50986f(0x13e)];continue;case'8':document[_0x50986f(0x114)](_0x50986f(0x14d))[_0x50986f(0x13b)]=settings[_0x50986f(0x14d)];continue;case'9':settings[_0x50986f(0x161)]=_0x4004ee[_0x50986f(0x130)](_0x3a4aad['MdIHS'])||defaultSettings['modelName'];continue;case'10':document[_0x50986f(0x114)](_0x50986f(0x111))[_0x50986f(0x13b)]=settings[_0x50986f(0x111)];continue;case'11':document['getElementById'](_0x3a4aad[_0x50986f(0x154)])['value']=settings[_0x50986f(0x147)];continue;case'12':document[_0x50986f(0x114)](_0x3a4aad['AwgyM'])[_0x50986f(0x13b)]=settings[_0x50986f(0x117)];continue;case'13':settings[_0x50986f(0x111)]=_0x4004ee['getItem'](_0x3a4aad[_0x50986f(0x15d)])||defaultSettings[_0x50986f(0x111)];continue;}break;}}function saveSettings(){const _0x5dbf5b=_0x566031,_0x415864={'eUbOL':_0x5dbf5b(0x153),'Mojab':_0x5dbf5b(0x117),'Omfcv':_0x5dbf5b(0x111),'YRjJN':_0x5dbf5b(0x13e),'DixWa':function(_0x1a5f74){return _0x1a5f74();},'Xlmfh':'modelName','xUrMm':_0x5dbf5b(0x14d),'Aomwt':_0x5dbf5b(0x147)},_0x5fe190=_0x415864[_0x5dbf5b(0x14c)][_0x5dbf5b(0x121)]('|');let _0x5aedf8=0x0;while(!![]){switch(_0x5fe190[_0x5aedf8++]){case'0':_0x4004ee[_0x5dbf5b(0x128)](_0x5dbf5b(0x161),settings[_0x5dbf5b(0x161)]);continue;case'1':_0x4004ee['setItem'](_0x415864[_0x5dbf5b(0x112)],settings['maxTokens']);continue;case'2':settings[_0x5dbf5b(0x117)]=document[_0x5dbf5b(0x114)](_0x415864[_0x5dbf5b(0x112)])['value'];continue;case'3':settings[_0x5dbf5b(0x147)]=document[_0x5dbf5b(0x114)](_0x5dbf5b(0x147))[_0x5dbf5b(0x13b)];continue;case'4':settings[_0x5dbf5b(0x111)]=document[_0x5dbf5b(0x114)](_0x415864[_0x5dbf5b(0x14e)])['value'];continue;case'5':_0x4004ee[_0x5dbf5b(0x128)](_0x415864[_0x5dbf5b(0x119)],settings[_0x5dbf5b(0x13e)]);continue;case'6':_0x4004ee['setItem'](_0x5dbf5b(0x111),settings[_0x5dbf5b(0x111)]);continue;case'7':settings[_0x5dbf5b(0x11d)]=document[_0x5dbf5b(0x114)](_0x5dbf5b(0x11d))[_0x5dbf5b(0x13b)];continue;case'8':settings['apiToken']=document[_0x5dbf5b(0x114)](_0x5dbf5b(0x13e))[_0x5dbf5b(0x13b)];continue;case'9':_0x415864[_0x5dbf5b(0x135)](toggleSettings);continue;case'10':settings[_0x5dbf5b(0x161)]=document[_0x5dbf5b(0x114)](_0x415864[_0x5dbf5b(0x124)])[_0x5dbf5b(0x13b)];continue;case'11':_0x4004ee['setItem'](_0x5dbf5b(0x11d),settings[_0x5dbf5b(0x11d)]);continue;case'12':_0x4004ee[_0x5dbf5b(0x128)](_0x415864[_0x5dbf5b(0x127)],settings['systemPrompt']);continue;case'13':_0x4004ee[_0x5dbf5b(0x128)](_0x415864[_0x5dbf5b(0x15c)],settings[_0x5dbf5b(0x147)]);continue;case'14':settings[_0x5dbf5b(0x14d)]=document[_0x5dbf5b(0x114)](_0x415864['xUrMm'])[_0x5dbf5b(0x13b)];continue;}break;}}function toggleSettings(){const _0xed5335=_0x566031,_0x1cc3a6={'YGgpE':_0xed5335(0x139),'NxyZG':function(_0x5f36d3,_0x100add){return _0x5f36d3===_0x100add;},'BOQQT':_0xed5335(0x136)},_0x2046ed=document[_0xed5335(0x114)](_0x1cc3a6['YGgpE']);_0x2046ed['style']['display']=_0x1cc3a6[_0xed5335(0x11b)](_0x2046ed[_0xed5335(0x125)][_0xed5335(0x145)],'flex')?_0x1cc3a6['BOQQT']:_0xed5335(0x13c);}window['toggleSettings']=toggleSettings,window[_0x566031(0x142)]=sendMessage;async function sendMessage(){const _0x5473f1=_0x566031,_0x54de6f={'bQwAf':_0x5473f1(0x15f),'HayzK':function(_0x5c26d5,_0x44b077,_0x4982f6,_0x4fab2e){return _0x5c26d5(_0x44b077,_0x4982f6,_0x4fab2e);},'NogRb':_0x5473f1(0x133),'Lqkdl':_0x5473f1(0x11f),'NUsZL':function(_0x1c7ae3,_0x1ef141,_0x186eb6){return _0x1c7ae3(_0x1ef141,_0x186eb6);},'tznBH':'AI\x20is\x20typing...','AVAIw':function(_0xd3186e,_0x312d48,_0x4cc4f8){return _0xd3186e(_0x312d48,_0x4cc4f8);},'ZDllk':_0x5473f1(0x140),'Omxwa':'system','HVyte':function(_0x27845b,_0x2ac60b){return _0x27845b(_0x2ac60b);},'uWvBN':_0x5473f1(0x132),'HXHqq':function(_0x1e49eb,_0xdf3ba7){return _0x1e49eb>_0xdf3ba7;},'Bclyd':function(_0xc46b1,_0x42e4a2,_0x3fde21,_0x2cd28e){return _0xc46b1(_0x42e4a2,_0x3fde21,_0x2cd28e);},'vameI':function(_0x583636,_0x263d13){return _0x583636+_0x263d13;},'pXyPI':_0x5473f1(0x14b)},_0x582df6=document['getElementById'](_0x54de6f[_0x5473f1(0x129)])[_0x5473f1(0x13b)];if(!_0x582df6)return;_0x54de6f[_0x5473f1(0x126)](appendMessage,document['getElementById'](_0x54de6f[_0x5473f1(0x13a)]),_0x582df6,_0x54de6f[_0x5473f1(0x138)]),document[_0x5473f1(0x114)](_0x5473f1(0x15f))[_0x5473f1(0x13b)]='',_0x54de6f[_0x5473f1(0x13d)](showTypingIndicator,document[_0x5473f1(0x114)](_0x5473f1(0x133)),_0x54de6f[_0x5473f1(0x14a)]);try{const _0x22a71b=await _0x54de6f[_0x5473f1(0x157)](fetch,settings[_0x5473f1(0x11d)]+_0x5473f1(0x160),{'method':_0x54de6f[_0x5473f1(0x156)],'headers':{'Authorization':_0x5473f1(0x11c)+settings[_0x5473f1(0x13e)],'Content-Type':_0x5473f1(0x122)},'body':JSON['stringify']({'model':settings[_0x5473f1(0x161)],'messages':[{'role':_0x54de6f[_0x5473f1(0x118)],'content':settings[_0x5473f1(0x14d)]},{'role':_0x54de6f[_0x5473f1(0x138)],'content':_0x582df6}],'max_tokens':_0x54de6f[_0x5473f1(0x113)](parseInt,settings[_0x5473f1(0x117)]),'temperature':_0x54de6f[_0x5473f1(0x113)](parseFloat,settings['temperature']),'top_p':_0x54de6f[_0x5473f1(0x113)](parseFloat,settings['topP']),'frequency_penalty':0.5,'seed':0x1,'response_format':{'type':_0x54de6f[_0x5473f1(0x148)]}})}),_0x498e11=await _0x22a71b[_0x5473f1(0x143)]();hideTypingIndicator();if(_0x498e11[_0x5473f1(0x116)]&&_0x54de6f[_0x5473f1(0x123)](_0x498e11[_0x5473f1(0x116)][_0x5473f1(0x144)],0x0)){const _0x2783cc=_0x498e11[_0x5473f1(0x116)][0x0][_0x5473f1(0x110)][_0x5473f1(0x141)];_0x54de6f['Bclyd'](appendMessage,document[_0x5473f1(0x114)](_0x5473f1(0x133)),_0x2783cc,'ai');let _0x565f21;try{_0x565f21=JSON[_0x5473f1(0x155)](_0x2783cc),appendQuiz(_0x565f21);}catch(_0x3c82b1){_0x54de6f[_0x5473f1(0x126)](appendMessage,document[_0x5473f1(0x114)](_0x54de6f[_0x5473f1(0x13a)]),_0x5473f1(0x15e),'ai');}}}catch(_0x2d3e61){appendMessage(document[_0x5473f1(0x114)](_0x5473f1(0x133)),_0x54de6f[_0x5473f1(0x152)](_0x54de6f[_0x5473f1(0x137)],_0x2d3e61[_0x5473f1(0x110)]),'ai');}finally{hideTypingIndicator();}}function speakMessage(_0x5379f8){const _0x22286e=_0x566031,_0x5aafa7={'UPnJF':_0x22286e(0x13f)},_0xe61b0d=new SpeechSynthesisUtterance(_0x5379f8);_0xe61b0d[_0x22286e(0x15b)]=_0x5aafa7[_0x22286e(0x12b)],window['speechSynthesis'][_0x22286e(0x15a)](_0xe61b0d);}window[_0x566031(0x150)]=loadSettings;