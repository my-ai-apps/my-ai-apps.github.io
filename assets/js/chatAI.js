
/*!
Copyright © 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x137b2a=_0x4eba;(function(_0x553178,_0x34ff9b){const _0x57ba8f=_0x4eba,_0x38a307=_0x553178();while(!![]){try{const _0x3af715=parseInt(_0x57ba8f(0xdf))/0x1*(-parseInt(_0x57ba8f(0xcf))/0x2)+parseInt(_0x57ba8f(0xe3))/0x3*(parseInt(_0x57ba8f(0xb6))/0x4)+-parseInt(_0x57ba8f(0xf5))/0x5+-parseInt(_0x57ba8f(0xf0))/0x6*(-parseInt(_0x57ba8f(0xfa))/0x7)+parseInt(_0x57ba8f(0xd6))/0x8+-parseInt(_0x57ba8f(0xb0))/0x9+-parseInt(_0x57ba8f(0xb9))/0xa*(-parseInt(_0x57ba8f(0xc9))/0xb);if(_0x3af715===_0x34ff9b)break;else _0x38a307['push'](_0x38a307['shift']());}catch(_0x43116b){_0x38a307['push'](_0x38a307['shift']());}}}(_0x4b7f,0x85ff4));import _0x3c604b from'./store.js';function _0x4b7f(){const _0x4adaa9=['qVAJo','2189035qBeKdl','user-input','MPSOi','split','AI\x20is\x20typing...','27790xovYvF','content','json','onload','tbIbr','sk-proj-66666666666666666666666666666666','7527204OMBsNG','dXDqu','choices','bWyXx','vZAGt','toggleSettings','4147484feKBdc','none','RYCPY','94910AvhgEi','fKDPc','Error:\x20Failed\x20to\x20fetch\x20AI\x20response:\x20','display','value','style','agTOV','json_object','BFKqm','aktFV','speak','XEUdv','iFMYi','EsDgU','en-US','slGuS','1056zLIviO','eTZkr','systemPrompt','VPOCU','jADXl','modelName','6288iarner','getItem','ybgUK','length','Based\x20on\x20the\x20user’s\x20input,\x20determine\x20the\x20intended\x20quiz\x20topic.\x20Create\x20a\x20JSON\x20object\x20containing\x20a\x20set\x20of\x205\x20multiple-choice\x20questions\x20relevant\x20to\x20that\x20topic.\x20Each\x20question\x20should\x20include\x20the\x20fields\x20\x27question\x27\x20(the\x20quiz\x20question),\x20\x27options\x27\x20(single\x20answer\x20choice).\x20Format\x20the\x20output\x20to\x20the\x20pattern\x20below\x20{\x20\x27topic\x27:\x20\x27example_topic\x27,\x20\x27questions\x27:\x20[\x20{\x20\x27question\x27:\x20\x27Example\x20question?\x27,\x20\x27options\x27:\x20[\x27Option\x20A\x27],\x20\x27correctAnswer\x27:\x20\x27Option\x20B\x27\x20}\x20]\x20}','settings','8|1|2|10|6|4|7|9|11|3|13|12|0|5','3684288OLYiKk','parse','XgqoX','sendMessage','apiToken','maxTokens','jOVaS','application/json','egqeG','262UEOpjP','rlwQA','setItem','BRFNl','3kDgoYH','apiUrl','KXAMq','/chat/completions','blMpe','TVMuc','system','getElementById','chat-window','Mkuae','topP','QUgsv','Error:\x20Could\x20not\x20parse\x20JSON\x20response.','360QCTGfh','QWjSk','temperature','speechSynthesis'];_0x4b7f=function(){return _0x4adaa9;};return _0x4b7f();}import{appendMessage,showTypingIndicator,hideTypingIndicator}from'./common.js';function _0x4eba(_0x3f157c,_0x4d2412){const _0x4b7f69=_0x4b7f();return _0x4eba=function(_0x4eba05,_0x43c501){_0x4eba05=_0x4eba05-0xae;let _0x115f49=_0x4b7f69[_0x4eba05];return _0x115f49;},_0x4eba(_0x3f157c,_0x4d2412);}const defaultSettings={'apiUrl':'http://localhost:1234/v1','apiToken':_0x137b2a(0xaf),'modelName':'openai/Qwen2.5','maxTokens':0x1000,'temperature':0.7,'topP':0x1,'systemPrompt':_0x137b2a(0xd3)};let settings={...defaultSettings};function loadSettings(){const _0x23eada=_0x137b2a,_0x154d6e={'XgqoX':_0x23eada(0xd5),'dXDqu':_0x23eada(0xed),'blMpe':_0x23eada(0xda),'VPOCU':_0x23eada(0xce),'egqeG':'systemPrompt','BRFNl':_0x23eada(0xf2),'TVMuc':_0x23eada(0xe4),'iFMYi':'maxTokens'},_0x112ea9=_0x154d6e[_0x23eada(0xd8)][_0x23eada(0xf8)]('|');let _0xfa1263=0x0;while(!![]){switch(_0x112ea9[_0xfa1263++]){case'0':document[_0x23eada(0xea)](_0x154d6e[_0x23eada(0xb1)])[_0x23eada(0xbd)]=settings[_0x23eada(0xed)];continue;case'1':settings[_0x23eada(0xda)]=_0x3c604b[_0x23eada(0xd0)](_0x154d6e[_0x23eada(0xe7)])||defaultSettings[_0x23eada(0xda)];continue;case'2':settings[_0x23eada(0xce)]=_0x3c604b[_0x23eada(0xd0)](_0x23eada(0xce))||defaultSettings['modelName'];continue;case'3':document[_0x23eada(0xea)](_0x154d6e[_0x23eada(0xcc)])['value']=settings[_0x23eada(0xce)];continue;case'4':settings[_0x23eada(0xed)]=_0x3c604b[_0x23eada(0xd0)](_0x154d6e['dXDqu'])||defaultSettings[_0x23eada(0xed)];continue;case'5':document[_0x23eada(0xea)](_0x154d6e[_0x23eada(0xde)])['value']=settings['systemPrompt'];continue;case'6':settings[_0x23eada(0xf2)]=_0x3c604b['getItem'](_0x154d6e[_0x23eada(0xe2)])||defaultSettings[_0x23eada(0xf2)];continue;case'7':settings['systemPrompt']=_0x3c604b[_0x23eada(0xd0)]('systemPrompt')||defaultSettings['systemPrompt'];continue;case'8':settings[_0x23eada(0xe4)]=_0x3c604b[_0x23eada(0xd0)](_0x23eada(0xe4))||defaultSettings[_0x23eada(0xe4)];continue;case'9':document[_0x23eada(0xea)](_0x154d6e[_0x23eada(0xe8)])[_0x23eada(0xbd)]=settings[_0x23eada(0xe4)];continue;case'10':settings['maxTokens']=_0x3c604b[_0x23eada(0xd0)](_0x154d6e[_0x23eada(0xc5)])||defaultSettings[_0x23eada(0xdb)];continue;case'11':document['getElementById'](_0x154d6e[_0x23eada(0xe7)])[_0x23eada(0xbd)]=settings['apiToken'];continue;case'12':document[_0x23eada(0xea)](_0x154d6e[_0x23eada(0xe2)])[_0x23eada(0xbd)]=settings['temperature'];continue;case'13':document[_0x23eada(0xea)](_0x23eada(0xdb))['value']=settings['maxTokens'];continue;}break;}}function saveSettings(){const _0x3634d1=_0x137b2a,_0x1bc72a={'jOVaS':'14|0|12|8|4|10|13|9|5|2|6|7|11|3|1','uaFgk':_0x3634d1(0xda),'QUgsv':function(_0x4d9b20){return _0x4d9b20();},'ybgUK':_0x3634d1(0xce),'tbIbr':_0x3634d1(0xdb),'qVAJo':_0x3634d1(0xf2),'Mkuae':_0x3634d1(0xe4),'fKDPc':_0x3634d1(0xed)},_0x532ca3=_0x1bc72a[_0x3634d1(0xdc)][_0x3634d1(0xf8)]('|');let _0x125de0=0x0;while(!![]){switch(_0x532ca3[_0x125de0++]){case'0':settings[_0x3634d1(0xda)]=document[_0x3634d1(0xea)](_0x1bc72a['uaFgk'])['value'];continue;case'1':_0x1bc72a[_0x3634d1(0xee)](toggleSettings);continue;case'2':_0x3c604b[_0x3634d1(0xe1)](_0x1bc72a['ybgUK'],settings[_0x3634d1(0xce)]);continue;case'3':_0x3c604b[_0x3634d1(0xe1)](_0x3634d1(0xcb),settings['systemPrompt']);continue;case'4':settings['temperature']=document['getElementById'](_0x3634d1(0xf2))['value'];continue;case'5':_0x3c604b['setItem'](_0x3634d1(0xda),settings[_0x3634d1(0xda)]);continue;case'6':_0x3c604b[_0x3634d1(0xe1)](_0x1bc72a[_0x3634d1(0xae)],settings['maxTokens']);continue;case'7':_0x3c604b[_0x3634d1(0xe1)](_0x1bc72a[_0x3634d1(0xf4)],settings[_0x3634d1(0xf2)]);continue;case'8':settings[_0x3634d1(0xdb)]=document[_0x3634d1(0xea)](_0x1bc72a['tbIbr'])[_0x3634d1(0xbd)];continue;case'9':_0x3c604b['setItem'](_0x1bc72a[_0x3634d1(0xec)],settings['apiUrl']);continue;case'10':settings[_0x3634d1(0xed)]=document[_0x3634d1(0xea)](_0x1bc72a['fKDPc'])['value'];continue;case'11':_0x3c604b[_0x3634d1(0xe1)](_0x1bc72a[_0x3634d1(0xba)],settings[_0x3634d1(0xed)]);continue;case'12':settings[_0x3634d1(0xce)]=document[_0x3634d1(0xea)](_0x1bc72a[_0x3634d1(0xd1)])[_0x3634d1(0xbd)];continue;case'13':settings[_0x3634d1(0xcb)]=document[_0x3634d1(0xea)](_0x3634d1(0xcb))[_0x3634d1(0xbd)];continue;case'14':settings['apiUrl']=document['getElementById'](_0x1bc72a[_0x3634d1(0xec)])[_0x3634d1(0xbd)];continue;}break;}}function toggleSettings(){const _0x30e272=_0x137b2a,_0x2bfee9={'fdkBw':_0x30e272(0xd4),'vZAGt':function(_0x3ba217,_0x209b22){return _0x3ba217===_0x209b22;},'slGuS':'flex','agTOV':_0x30e272(0xb7)},_0x115afd=document['getElementById'](_0x2bfee9['fdkBw']);_0x115afd[_0x30e272(0xbe)]['display']=_0x2bfee9[_0x30e272(0xb4)](_0x115afd[_0x30e272(0xbe)][_0x30e272(0xbc)],_0x2bfee9[_0x30e272(0xc8)])?_0x2bfee9[_0x30e272(0xbf)]:_0x2bfee9[_0x30e272(0xc8)];}window[_0x137b2a(0xb5)]=toggleSettings,window[_0x137b2a(0xd9)]=sendMessage;async function sendMessage(){const _0x571dcb=_0x137b2a,_0x1a9f67={'jADXl':_0x571dcb(0xf6),'QWjSk':function(_0x4234f6,_0x1f2c7a,_0x3e90e2,_0x5902dd){return _0x4234f6(_0x1f2c7a,_0x3e90e2,_0x5902dd);},'BFKqm':_0x571dcb(0xeb),'KXAMq':'user','KBjlE':function(_0x5a9bd3,_0x245318,_0x464aa6){return _0x5a9bd3(_0x245318,_0x464aa6);},'XEUdv':_0x571dcb(0xf9),'EsDgU':function(_0x4d7598,_0x21d93d,_0x1cb7c0){return _0x4d7598(_0x21d93d,_0x1cb7c0);},'JHIpE':'POST','kiZYM':function(_0x209f53,_0x22c7d8){return _0x209f53(_0x22c7d8);},'rlwQA':function(_0x19ae21,_0x44b9d0){return _0x19ae21(_0x44b9d0);},'bWyXx':function(_0x11a157,_0x483688){return _0x11a157(_0x483688);},'aktFV':_0x571dcb(0xc0),'RYCPY':function(_0x17b312){return _0x17b312();},'eTZkr':function(_0x1193e4,_0x3198b3){return _0x1193e4>_0x3198b3;},'MPSOi':_0x571dcb(0xef),'UfiJA':_0x571dcb(0xbb)},_0x278215=document[_0x571dcb(0xea)](_0x1a9f67[_0x571dcb(0xcd)])[_0x571dcb(0xbd)];if(!_0x278215)return;_0x1a9f67[_0x571dcb(0xf1)](appendMessage,document['getElementById'](_0x1a9f67[_0x571dcb(0xc1)]),_0x278215,_0x1a9f67[_0x571dcb(0xe5)]),document[_0x571dcb(0xea)](_0x571dcb(0xf6))[_0x571dcb(0xbd)]='',_0x1a9f67['KBjlE'](showTypingIndicator,document['getElementById'](_0x1a9f67[_0x571dcb(0xc1)]),_0x1a9f67[_0x571dcb(0xc4)]);try{const _0x583f22=await _0x1a9f67[_0x571dcb(0xc6)](fetch,settings[_0x571dcb(0xe4)]+_0x571dcb(0xe6),{'method':_0x1a9f67['JHIpE'],'headers':{'Authorization':'Bearer\x20'+settings[_0x571dcb(0xda)],'Content-Type':_0x571dcb(0xdd)},'body':JSON['stringify']({'model':settings['modelName'],'messages':[{'role':_0x571dcb(0xe9),'content':settings[_0x571dcb(0xcb)]},{'role':_0x1a9f67[_0x571dcb(0xe5)],'content':_0x278215}],'max_tokens':_0x1a9f67['kiZYM'](parseInt,settings[_0x571dcb(0xdb)]),'temperature':_0x1a9f67[_0x571dcb(0xe0)](parseFloat,settings[_0x571dcb(0xf2)]),'top_p':_0x1a9f67[_0x571dcb(0xb3)](parseFloat,settings[_0x571dcb(0xed)]),'frequency_penalty':0.5,'seed':0x1,'response_format':{'type':_0x1a9f67[_0x571dcb(0xc2)]}})}),_0x10bf48=await _0x583f22[_0x571dcb(0xfc)]();_0x1a9f67[_0x571dcb(0xb8)](hideTypingIndicator);if(_0x10bf48[_0x571dcb(0xb2)]&&_0x1a9f67[_0x571dcb(0xca)](_0x10bf48['choices'][_0x571dcb(0xd2)],0x0)){const _0x361a79=_0x10bf48['choices'][0x0]['message'][_0x571dcb(0xfb)];_0x1a9f67[_0x571dcb(0xf1)](appendMessage,document[_0x571dcb(0xea)](_0x1a9f67['BFKqm']),_0x361a79,'ai');let _0x3ae530;try{_0x3ae530=JSON[_0x571dcb(0xd7)](_0x361a79),_0x1a9f67[_0x571dcb(0xe0)](appendQuiz,_0x3ae530);}catch(_0x519d53){_0x1a9f67[_0x571dcb(0xf1)](appendMessage,document[_0x571dcb(0xea)](_0x1a9f67['BFKqm']),_0x1a9f67[_0x571dcb(0xf7)],'ai');}}}catch(_0x33e80f){_0x1a9f67['QWjSk'](appendMessage,document['getElementById'](_0x1a9f67[_0x571dcb(0xc1)]),_0x1a9f67['UfiJA']+_0x33e80f['message'],'ai');}finally{_0x1a9f67[_0x571dcb(0xb8)](hideTypingIndicator);}}function speakMessage(_0x4a14cf){const _0x529759=_0x137b2a,_0x27dba7={'gwUBJ':_0x529759(0xc7)},_0xab050a=new SpeechSynthesisUtterance(_0x4a14cf);_0xab050a['lang']=_0x27dba7['gwUBJ'],window[_0x529759(0xf3)][_0x529759(0xc3)](_0xab050a);}window[_0x137b2a(0xfd)]=loadSettings;