
/*!
Copyright © 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x1a21c1=_0x27e1;function _0x4382(){const _0x19bb4b=['EmiKs','chat-window','sPzFM','KJorp','sendMessage','value','system','YgFHJ','eOXsf','749JYNeSL','eHABM','4ZpNLhK','en-US','Zvlza','json_object','XAcuf','sk-proj-66666666666666666666666666666666','speechSynthesis','0|11|9|1|5|2|8|4|3|10|12|13|6|7','display','application/json','message','rJwca','Bearer\x20','content','mgnZM','488590mVoNVL','systemPrompt','zFUfE','user-input','QvKiT','toggleSettings','etuxq','92392zZxrTX','setItem','BJcUs','speak','maxTokens','user','2nGsixH','sZjbl','temperature','KvbLC','791924AXrzJG','QAfIU','apiUrl','length','BGnGO','kVuUf','tGGCh','apiToken','dpXQg','43527220OBsqkh','OQKPR','QECpC','OhYiq','style','getElementById','split','openai/Qwen2.5','lang','modelName','BWKtY','uOBaV','POST','HIsPr','5178834KIasjz','99jutYDQ','RPIuX','json','NnJss','EUBHK','DfkJz','parse','topP','3181560GsIVCs','AYmdn','4|11|14|5|6|8|13|2|12|10|0|9|7|1|3','flex','NukkT','choices','getItem','548540Sqvvko','/chat/completions'];_0x4382=function(){return _0x19bb4b;};return _0x4382();}(function(_0x143ede,_0xf90603){const _0x164215=_0x27e1,_0x1bbc29=_0x143ede();while(!![]){try{const _0x125af9=-parseInt(_0x164215(0x22d))/0x1*(parseInt(_0x164215(0x229))/0x2)+-parseInt(_0x164215(0x1f9))/0x3+-parseInt(_0x164215(0x20d))/0x4*(-parseInt(_0x164215(0x21c))/0x5)+-parseInt(_0x164215(0x1f0))/0x6+-parseInt(_0x164215(0x20b))/0x7*(parseInt(_0x164215(0x223))/0x8)+parseInt(_0x164215(0x1f1))/0x9*(parseInt(_0x164215(0x200))/0xa)+parseInt(_0x164215(0x1e2))/0xb;if(_0x125af9===_0xf90603)break;else _0x1bbc29['push'](_0x1bbc29['shift']());}catch(_0x23de15){_0x1bbc29['push'](_0x1bbc29['shift']());}}}(_0x4382,0xac8f6));import _0x4ef455 from'./store.js';import{appendMessage,showTypingIndicator,hideTypingIndicator}from'./common.js';const defaultSettings={'apiUrl':'http://localhost:1234/v1','apiToken':_0x1a21c1(0x212),'modelName':_0x1a21c1(0x1e9),'maxTokens':0x1000,'temperature':0.7,'topP':0x1,'systemPrompt':'Based\x20on\x20the\x20user’s\x20input,\x20determine\x20the\x20intended\x20quiz\x20topic.\x20Create\x20a\x20JSON\x20object\x20containing\x20a\x20set\x20of\x205\x20multiple-choice\x20questions\x20relevant\x20to\x20that\x20topic.\x20Each\x20question\x20should\x20include\x20the\x20fields\x20\x27question\x27\x20(the\x20quiz\x20question),\x20\x27options\x27\x20(single\x20answer\x20choice).\x20Format\x20the\x20output\x20to\x20the\x20pattern\x20below\x20{\x20\x27topic\x27:\x20\x27example_topic\x27,\x20\x27questions\x27:\x20[\x20{\x20\x27question\x27:\x20\x27Example\x20question?\x27,\x20\x27options\x27:\x20[\x27Option\x20A\x27],\x20\x27correctAnswer\x27:\x20\x27Option\x20B\x27\x20}\x20]\x20}'};function _0x27e1(_0x526ab4,_0xad428e){const _0x438288=_0x4382();return _0x27e1=function(_0x27e146,_0xaea06e){_0x27e146=_0x27e146-0x1dd;let _0x52f651=_0x438288[_0x27e146];return _0x52f651;},_0x27e1(_0x526ab4,_0xad428e);}let settings={...defaultSettings};function loadSettings(){const _0x2c9ec7=_0x1a21c1,_0x4933c7={'sPzFM':_0x2c9ec7(0x214),'uOBaV':_0x2c9ec7(0x22f),'OhYiq':_0x2c9ec7(0x227),'dpXQg':'topP','YgFHJ':_0x2c9ec7(0x22b),'NnJss':_0x2c9ec7(0x21d),'AYmdn':_0x2c9ec7(0x1eb),'HIsPr':_0x2c9ec7(0x1e0)},_0x36f596=_0x4933c7[_0x2c9ec7(0x204)][_0x2c9ec7(0x1e8)]('|');let _0x2bf030=0x0;while(!![]){switch(_0x36f596[_0x2bf030++]){case'0':settings[_0x2c9ec7(0x22f)]=_0x4ef455['getItem'](_0x4933c7[_0x2c9ec7(0x1ed)])||defaultSettings['apiUrl'];continue;case'1':settings[_0x2c9ec7(0x227)]=_0x4ef455['getItem'](_0x4933c7[_0x2c9ec7(0x1e5)])||defaultSettings[_0x2c9ec7(0x227)];continue;case'2':settings[_0x2c9ec7(0x1f8)]=_0x4ef455[_0x2c9ec7(0x1ff)](_0x4933c7[_0x2c9ec7(0x1e1)])||defaultSettings[_0x2c9ec7(0x1f8)];continue;case'3':document[_0x2c9ec7(0x1e7)](_0x2c9ec7(0x1e0))[_0x2c9ec7(0x207)]=settings['apiToken'];continue;case'4':document[_0x2c9ec7(0x1e7)](_0x4933c7[_0x2c9ec7(0x1ed)])[_0x2c9ec7(0x207)]=settings[_0x2c9ec7(0x22f)];continue;case'5':settings['temperature']=_0x4ef455[_0x2c9ec7(0x1ff)](_0x4933c7[_0x2c9ec7(0x209)])||defaultSettings[_0x2c9ec7(0x22b)];continue;case'6':document[_0x2c9ec7(0x1e7)](_0x4933c7[_0x2c9ec7(0x1e1)])[_0x2c9ec7(0x207)]=settings[_0x2c9ec7(0x1f8)];continue;case'7':document[_0x2c9ec7(0x1e7)](_0x4933c7['NnJss'])[_0x2c9ec7(0x207)]=settings[_0x2c9ec7(0x21d)];continue;case'8':settings[_0x2c9ec7(0x21d)]=_0x4ef455[_0x2c9ec7(0x1ff)](_0x4933c7[_0x2c9ec7(0x1f4)])||defaultSettings[_0x2c9ec7(0x21d)];continue;case'9':settings[_0x2c9ec7(0x1eb)]=_0x4ef455[_0x2c9ec7(0x1ff)](_0x4933c7['AYmdn'])||defaultSettings['modelName'];continue;case'10':document[_0x2c9ec7(0x1e7)](_0x4933c7[_0x2c9ec7(0x1fa)])[_0x2c9ec7(0x207)]=settings[_0x2c9ec7(0x1eb)];continue;case'11':settings[_0x2c9ec7(0x1e0)]=_0x4ef455[_0x2c9ec7(0x1ff)](_0x4933c7[_0x2c9ec7(0x1ef)])||defaultSettings[_0x2c9ec7(0x1e0)];continue;case'12':document[_0x2c9ec7(0x1e7)](_0x4933c7[_0x2c9ec7(0x1e5)])['value']=settings['maxTokens'];continue;case'13':document[_0x2c9ec7(0x1e7)](_0x2c9ec7(0x22b))['value']=settings['temperature'];continue;}break;}}function saveSettings(){const _0x37edbe=_0x1a21c1,_0x3a5ee6={'zFUfE':_0x37edbe(0x227),'NukkT':_0x37edbe(0x21d),'Zvlza':_0x37edbe(0x22f),'XAcuf':function(_0x98467f){return _0x98467f();},'EUBHK':'temperature','RPIuX':'topP','BWKtY':_0x37edbe(0x1eb),'KvbLC':_0x37edbe(0x1e0)},_0x6c925=_0x37edbe(0x1fb)[_0x37edbe(0x1e8)]('|');let _0x3959f4=0x0;while(!![]){switch(_0x6c925[_0x3959f4++]){case'0':_0x4ef455[_0x37edbe(0x224)](_0x3a5ee6[_0x37edbe(0x21e)],settings[_0x37edbe(0x227)]);continue;case'1':_0x4ef455[_0x37edbe(0x224)](_0x3a5ee6[_0x37edbe(0x1fd)],settings['systemPrompt']);continue;case'2':_0x4ef455[_0x37edbe(0x224)](_0x3a5ee6['Zvlza'],settings[_0x37edbe(0x22f)]);continue;case'3':_0x3a5ee6[_0x37edbe(0x211)](toggleSettings);continue;case'4':settings[_0x37edbe(0x22f)]=document[_0x37edbe(0x1e7)](_0x3a5ee6[_0x37edbe(0x20f)])[_0x37edbe(0x207)];continue;case'5':settings[_0x37edbe(0x227)]=document[_0x37edbe(0x1e7)](_0x37edbe(0x227))['value'];continue;case'6':settings[_0x37edbe(0x22b)]=document['getElementById'](_0x3a5ee6[_0x37edbe(0x1f5)])[_0x37edbe(0x207)];continue;case'7':_0x4ef455['setItem'](_0x3a5ee6[_0x37edbe(0x1f2)],settings[_0x37edbe(0x1f8)]);continue;case'8':settings[_0x37edbe(0x1f8)]=document[_0x37edbe(0x1e7)](_0x3a5ee6[_0x37edbe(0x1f2)])[_0x37edbe(0x207)];continue;case'9':_0x4ef455[_0x37edbe(0x224)](_0x37edbe(0x22b),settings[_0x37edbe(0x22b)]);continue;case'10':_0x4ef455[_0x37edbe(0x224)](_0x3a5ee6[_0x37edbe(0x1ec)],settings[_0x37edbe(0x1eb)]);continue;case'11':settings[_0x37edbe(0x1e0)]=document['getElementById'](_0x3a5ee6[_0x37edbe(0x22c)])[_0x37edbe(0x207)];continue;case'12':_0x4ef455[_0x37edbe(0x224)](_0x37edbe(0x1e0),settings[_0x37edbe(0x1e0)]);continue;case'13':settings[_0x37edbe(0x21d)]=document[_0x37edbe(0x1e7)](_0x37edbe(0x21d))[_0x37edbe(0x207)];continue;case'14':settings['modelName']=document[_0x37edbe(0x1e7)](_0x3a5ee6[_0x37edbe(0x1ec)])[_0x37edbe(0x207)];continue;}break;}}function toggleSettings(){const _0x41cb0a=_0x1a21c1,_0x4698db={'tGGCh':'settings','Tiilb':function(_0x265810,_0x1708b5){return _0x265810===_0x1708b5;}},_0x54927f=document[_0x41cb0a(0x1e7)](_0x4698db[_0x41cb0a(0x1df)]);_0x54927f[_0x41cb0a(0x1e6)][_0x41cb0a(0x215)]=_0x4698db['Tiilb'](_0x54927f[_0x41cb0a(0x1e6)][_0x41cb0a(0x215)],'flex')?'none':_0x41cb0a(0x1fc);}window[_0x1a21c1(0x221)]=toggleSettings,window[_0x1a21c1(0x206)]=sendMessage;async function sendMessage(){const _0x4e8408=_0x1a21c1,_0x5f5def={'rJwca':function(_0x1a6f8e,_0xd2b124,_0xa10089,_0x38d8ee){return _0x1a6f8e(_0xd2b124,_0xa10089,_0x38d8ee);},'KJorp':_0x4e8408(0x203),'etuxq':_0x4e8408(0x228),'BJcUs':_0x4e8408(0x21f),'kVuUf':function(_0x2eebcf,_0x245129,_0x18551a){return _0x2eebcf(_0x245129,_0x18551a);},'QvKiT':'AI\x20is\x20typing...','BGnGO':_0x4e8408(0x1ee),'DfkJz':_0x4e8408(0x216),'sZjbl':_0x4e8408(0x208),'OQKPR':function(_0x378008,_0x515cc3){return _0x378008(_0x515cc3);},'QAfIU':function(_0x10deff,_0x352444){return _0x10deff(_0x352444);},'eOXsf':_0x4e8408(0x210),'WyKxQ':function(_0xb968f0){return _0xb968f0();},'XxrdX':function(_0x1931b1,_0x413fbd){return _0x1931b1>_0x413fbd;},'mgnZM':'Error:\x20Could\x20not\x20parse\x20JSON\x20response.','QECpC':function(_0x21a28d,_0x3897fe){return _0x21a28d+_0x3897fe;},'EmiKs':function(_0x2113fc){return _0x2113fc();}},_0x4d48d1=document[_0x4e8408(0x1e7)](_0x4e8408(0x21f))[_0x4e8408(0x207)];if(!_0x4d48d1)return;_0x5f5def[_0x4e8408(0x218)](appendMessage,document['getElementById'](_0x5f5def['KJorp']),_0x4d48d1,_0x5f5def[_0x4e8408(0x222)]),document['getElementById'](_0x5f5def[_0x4e8408(0x225)])[_0x4e8408(0x207)]='',_0x5f5def[_0x4e8408(0x1de)](showTypingIndicator,document[_0x4e8408(0x1e7)]('chat-window'),_0x5f5def[_0x4e8408(0x220)]);try{const _0x1f642b=await _0x5f5def[_0x4e8408(0x1de)](fetch,settings['apiUrl']+_0x4e8408(0x201),{'method':_0x5f5def[_0x4e8408(0x1dd)],'headers':{'Authorization':_0x4e8408(0x219)+settings['apiToken'],'Content-Type':_0x5f5def[_0x4e8408(0x1f6)]},'body':JSON['stringify']({'model':settings[_0x4e8408(0x1eb)],'messages':[{'role':_0x5f5def[_0x4e8408(0x22a)],'content':settings[_0x4e8408(0x21d)]},{'role':_0x5f5def[_0x4e8408(0x222)],'content':_0x4d48d1}],'max_tokens':_0x5f5def[_0x4e8408(0x1e3)](parseInt,settings[_0x4e8408(0x227)]),'temperature':_0x5f5def[_0x4e8408(0x1e3)](parseFloat,settings[_0x4e8408(0x22b)]),'top_p':_0x5f5def[_0x4e8408(0x22e)](parseFloat,settings[_0x4e8408(0x1f8)]),'frequency_penalty':0.5,'seed':0x1,'response_format':{'type':_0x5f5def[_0x4e8408(0x20a)]}})}),_0xeee47b=await _0x1f642b[_0x4e8408(0x1f3)]();_0x5f5def['WyKxQ'](hideTypingIndicator);if(_0xeee47b[_0x4e8408(0x1fe)]&&_0x5f5def['XxrdX'](_0xeee47b['choices'][_0x4e8408(0x230)],0x0)){const _0x31effb=_0xeee47b[_0x4e8408(0x1fe)][0x0][_0x4e8408(0x217)][_0x4e8408(0x21a)];_0x5f5def['rJwca'](appendMessage,document[_0x4e8408(0x1e7)](_0x5f5def[_0x4e8408(0x205)]),_0x31effb,'ai');let _0x55f237;try{_0x55f237=JSON[_0x4e8408(0x1f7)](_0x31effb),_0x5f5def[_0x4e8408(0x1e3)](appendQuiz,_0x55f237);}catch(_0x4870c1){appendMessage(document[_0x4e8408(0x1e7)](_0x5f5def['KJorp']),_0x5f5def[_0x4e8408(0x21b)],'ai');}}}catch(_0xfe6f61){_0x5f5def[_0x4e8408(0x218)](appendMessage,document[_0x4e8408(0x1e7)](_0x5f5def['KJorp']),_0x5f5def[_0x4e8408(0x1e4)]('Error:\x20Failed\x20to\x20fetch\x20AI\x20response:\x20',_0xfe6f61['message']),'ai');}finally{_0x5f5def[_0x4e8408(0x202)](hideTypingIndicator);}}function speakMessage(_0x4c7324){const _0xa86d8a=_0x1a21c1,_0x42e40d={'eHABM':_0xa86d8a(0x20e)},_0x4bf90c=new SpeechSynthesisUtterance(_0x4c7324);_0x4bf90c[_0xa86d8a(0x1ea)]=_0x42e40d[_0xa86d8a(0x20c)],window[_0xa86d8a(0x213)][_0xa86d8a(0x226)](_0x4bf90c);}window['onload']=loadSettings;