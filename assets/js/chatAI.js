
/*!
Copyright © 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x163aec=_0x590e;(function(_0x3dcef3,_0x29fb0b){const _0x56c8a2=_0x590e,_0x53b3e1=_0x3dcef3();while(!![]){try{const _0xba47df=-parseInt(_0x56c8a2(0x99))/0x1+parseInt(_0x56c8a2(0xe4))/0x2*(parseInt(_0x56c8a2(0xbe))/0x3)+parseInt(_0x56c8a2(0xab))/0x4*(parseInt(_0x56c8a2(0xa2))/0x5)+parseInt(_0x56c8a2(0xac))/0x6*(parseInt(_0x56c8a2(0xdb))/0x7)+parseInt(_0x56c8a2(0xa8))/0x8*(-parseInt(_0x56c8a2(0xb1))/0x9)+-parseInt(_0x56c8a2(0xbb))/0xa*(parseInt(_0x56c8a2(0xa7))/0xb)+parseInt(_0x56c8a2(0xaf))/0xc;if(_0xba47df===_0x29fb0b)break;else _0x53b3e1['push'](_0x53b3e1['shift']());}catch(_0x4fcf76){_0x53b3e1['push'](_0x53b3e1['shift']());}}}(_0xe380,0x292ab));import _0x42e4af from'./store.js';import{appendMessage,showTypingIndicator,hideTypingIndicator}from'./common.js';const defaultSettings={'apiUrl':'http://localhost:1234/v1','apiToken':_0x163aec(0xe5),'modelName':_0x163aec(0xdf),'maxTokens':0x1000,'temperature':0.7,'topP':0x1,'systemPrompt':_0x163aec(0xea)};let settings={...defaultSettings};function _0xe380(){const _0x5eaa1e=['sendMessage','YbvXK','tiqMH','axvUp','18174ENPqds','sk-proj-66666666666666666666666666666666','setItem','topP','user','Jkyty','Based\x20on\x20the\x20user’s\x20input,\x20determine\x20the\x20intended\x20quiz\x20topic.\x20Create\x20a\x20JSON\x20object\x20containing\x20a\x20set\x20of\x205\x20multiple-choice\x20questions\x20relevant\x20to\x20that\x20topic.\x20Each\x20question\x20should\x20include\x20the\x20fields\x20\x27question\x27\x20(the\x20quiz\x20question),\x20\x27options\x27\x20(single\x20answer\x20choice).\x20Format\x20the\x20output\x20to\x20the\x20pattern\x20below\x20{\x20\x27topic\x27:\x20\x27example_topic\x27,\x20\x27questions\x27:\x20[\x20{\x20\x27question\x27:\x20\x27Example\x20question?\x27,\x20\x27options\x27:\x20[\x27Option\x20A\x27],\x20\x27correctAnswer\x27:\x20\x27Option\x20B\x27\x20}\x20]\x20}','style','apiToken','WoOYE','320823wcaDbP','POST','UpPaZ','Sdsrs','Error:\x20Could\x20not\x20parse\x20JSON\x20response.','temperature','jdufT','IhanO','settings','733190HrBkSH','message','speechSynthesis','lPUcV','DRZIC','11QJWrlC','914344QCyGYT','/chat/completions','maxTokens','8AEXvoK','380274xOBRMi','EPKNQ','Error:\x20Failed\x20to\x20fetch\x20AI\x20response:\x20','4476648tmEpDl','display','18jbDySz','Kjsgr','stringify','vhDZX','YenON','chat-window','system','BgoRm','none','application/json','2661170HNfaPm','flex','pTzwn','84svSNzK','NZnpp','BEMXv','getItem','txhbH','TaCIr','user-input','AKkHH','GEhTj','apiUrl','OVtNF','systemPrompt','DzPVl','OSNcJ','rmKVA','AI\x20is\x20typing...','waorn','getElementById','Bearer\x20','lBXeb','length','onload','modelName','SkfsY','cwrWq','value','json_object','choices','2|12|10|5|6|13|3|8|11|1|0|9|4|7','7ffXyyU','content','en-US','json','openai/Qwen2.5'];_0xe380=function(){return _0x5eaa1e;};return _0xe380();}function _0x590e(_0x28e02c,_0x55e874){const _0xe38067=_0xe380();return _0x590e=function(_0x590e3b,_0x588bbf){_0x590e3b=_0x590e3b-0x97;let _0x29a8c9=_0xe38067[_0x590e3b];return _0x29a8c9;},_0x590e(_0x28e02c,_0x55e874);}function loadSettings(){const _0x2f1c97=_0x163aec,_0x50716f={'Kjsgr':_0x2f1c97(0xda),'DRZIC':'maxTokens','GEhTj':_0x2f1c97(0xd4),'vhDZX':_0x2f1c97(0xc9),'aUPXc':'topP','TaCIr':'temperature','rmKVA':_0x2f1c97(0xc7),'jdufT':_0x2f1c97(0x97)},_0x26b450=_0x50716f[_0x2f1c97(0xb2)]['split']('|');let _0x3f1d5c=0x0;while(!![]){switch(_0x26b450[_0x3f1d5c++]){case'0':document[_0x2f1c97(0xcf)](_0x50716f[_0x2f1c97(0xa6)])[_0x2f1c97(0xd7)]=settings[_0x2f1c97(0xaa)];continue;case'1':document['getElementById'](_0x50716f[_0x2f1c97(0xc6)])[_0x2f1c97(0xd7)]=settings[_0x2f1c97(0xd4)];continue;case'2':settings[_0x2f1c97(0xc7)]=_0x42e4af[_0x2f1c97(0xc1)](_0x2f1c97(0xc7))||defaultSettings[_0x2f1c97(0xc7)];continue;case'3':settings[_0x2f1c97(0xc9)]=_0x42e4af[_0x2f1c97(0xc1)](_0x50716f[_0x2f1c97(0xb4)])||defaultSettings[_0x2f1c97(0xc9)];continue;case'4':document[_0x2f1c97(0xcf)](_0x50716f['aUPXc'])[_0x2f1c97(0xd7)]=settings[_0x2f1c97(0xe7)];continue;case'5':settings[_0x2f1c97(0xaa)]=_0x42e4af[_0x2f1c97(0xc1)]('maxTokens')||defaultSettings[_0x2f1c97(0xaa)];continue;case'6':settings['temperature']=_0x42e4af[_0x2f1c97(0xc1)](_0x50716f[_0x2f1c97(0xc3)])||defaultSettings[_0x2f1c97(0x9e)];continue;case'7':document[_0x2f1c97(0xcf)](_0x50716f['vhDZX'])[_0x2f1c97(0xd7)]=settings['systemPrompt'];continue;case'8':document['getElementById'](_0x50716f[_0x2f1c97(0xcc)])[_0x2f1c97(0xd7)]=settings[_0x2f1c97(0xc7)];continue;case'9':document[_0x2f1c97(0xcf)](_0x50716f[_0x2f1c97(0xc3)])['value']=settings['temperature'];continue;case'10':settings['modelName']=_0x42e4af[_0x2f1c97(0xc1)](_0x50716f[_0x2f1c97(0xc6)])||defaultSettings[_0x2f1c97(0xd4)];continue;case'11':document[_0x2f1c97(0xcf)](_0x50716f[_0x2f1c97(0x9f)])['value']=settings['apiToken'];continue;case'12':settings['apiToken']=_0x42e4af[_0x2f1c97(0xc1)]('apiToken')||defaultSettings[_0x2f1c97(0x97)];continue;case'13':settings['topP']=_0x42e4af['getItem'](_0x50716f['aUPXc'])||defaultSettings[_0x2f1c97(0xe7)];continue;}break;}}function saveSettings(){const _0x311eb5=_0x163aec,_0x5a4621={'lPUcV':'apiUrl','axvUp':'apiToken','OVtNF':_0x311eb5(0xd4),'cwrWq':_0x311eb5(0xaa),'DzPVl':_0x311eb5(0x9e),'NZnpp':_0x311eb5(0xe7),'OSNcJ':'systemPrompt','YenON':function(_0x1e87ef){return _0x1e87ef();}};settings[_0x311eb5(0xc7)]=document[_0x311eb5(0xcf)](_0x5a4621[_0x311eb5(0xa5)])[_0x311eb5(0xd7)],settings[_0x311eb5(0x97)]=document['getElementById'](_0x5a4621[_0x311eb5(0xe3)])[_0x311eb5(0xd7)],settings[_0x311eb5(0xd4)]=document['getElementById'](_0x5a4621['OVtNF'])[_0x311eb5(0xd7)],settings['maxTokens']=document[_0x311eb5(0xcf)](_0x5a4621[_0x311eb5(0xd6)])[_0x311eb5(0xd7)],settings[_0x311eb5(0x9e)]=document[_0x311eb5(0xcf)](_0x5a4621[_0x311eb5(0xca)])[_0x311eb5(0xd7)],settings[_0x311eb5(0xe7)]=document[_0x311eb5(0xcf)](_0x5a4621[_0x311eb5(0xbf)])[_0x311eb5(0xd7)],settings[_0x311eb5(0xc9)]=document[_0x311eb5(0xcf)](_0x5a4621[_0x311eb5(0xcb)])[_0x311eb5(0xd7)],_0x42e4af[_0x311eb5(0xe6)](_0x5a4621[_0x311eb5(0xa5)],settings[_0x311eb5(0xc7)]),_0x42e4af['setItem'](_0x5a4621[_0x311eb5(0xe3)],settings['apiToken']),_0x42e4af[_0x311eb5(0xe6)](_0x5a4621[_0x311eb5(0xc8)],settings[_0x311eb5(0xd4)]),_0x42e4af[_0x311eb5(0xe6)]('maxTokens',settings[_0x311eb5(0xaa)]),_0x42e4af[_0x311eb5(0xe6)](_0x5a4621[_0x311eb5(0xca)],settings[_0x311eb5(0x9e)]),_0x42e4af[_0x311eb5(0xe6)](_0x5a4621[_0x311eb5(0xbf)],settings[_0x311eb5(0xe7)]),_0x42e4af[_0x311eb5(0xe6)](_0x5a4621[_0x311eb5(0xcb)],settings[_0x311eb5(0xc9)]),_0x5a4621[_0x311eb5(0xb5)](toggleSettings);}function toggleSettings(){const _0xb8d93d=_0x163aec,_0x1af5ea={'Jkyty':_0xb8d93d(0xa1),'tiqMH':function(_0x28fb49,_0x5940de){return _0x28fb49===_0x5940de;},'JWdVm':_0xb8d93d(0xbc),'zjNsh':_0xb8d93d(0xb9)},_0x2c48ac=document[_0xb8d93d(0xcf)](_0x1af5ea[_0xb8d93d(0xe9)]);_0x2c48ac[_0xb8d93d(0xeb)][_0xb8d93d(0xb0)]=_0x1af5ea[_0xb8d93d(0xe2)](_0x2c48ac[_0xb8d93d(0xeb)]['display'],_0x1af5ea['JWdVm'])?_0x1af5ea['zjNsh']:'flex';}window['toggleSettings']=toggleSettings,window[_0x163aec(0xe0)]=sendMessage;async function sendMessage(){const _0xc24fd9=_0x163aec,_0x4958b3={'SkfsY':_0xc24fd9(0xc4),'gzqaE':function(_0xa3baa3,_0x3399cb,_0x102560,_0x515a49){return _0xa3baa3(_0x3399cb,_0x102560,_0x515a49);},'txhbH':_0xc24fd9(0xb6),'ADELX':_0xc24fd9(0xe8),'dvivm':function(_0x1bccfb,_0x58b74c,_0x1ad8f7){return _0x1bccfb(_0x58b74c,_0x1ad8f7);},'YbvXK':_0xc24fd9(0xcd),'CkApJ':function(_0x121968,_0x574c3a,_0x2d9705){return _0x121968(_0x574c3a,_0x2d9705);},'waorn':_0xc24fd9(0x9a),'jzBEi':_0xc24fd9(0xba),'IhanO':_0xc24fd9(0xb7),'EPKNQ':function(_0x3725d6,_0x175ea0){return _0x3725d6(_0x175ea0);},'WoOYE':function(_0x49f711,_0x5dd33a){return _0x49f711(_0x5dd33a);},'UpPaZ':_0xc24fd9(0xd8),'BgoRm':function(_0x4b77c0){return _0x4b77c0();},'BEMXv':function(_0x389d3a,_0xe68fb9){return _0x389d3a>_0xe68fb9;},'lBXeb':function(_0x3b96fa,_0x3ee40,_0x34c6ed,_0x53b228){return _0x3b96fa(_0x3ee40,_0x34c6ed,_0x53b228);},'pTzwn':function(_0x172a20,_0x584c13){return _0x172a20+_0x584c13;},'Sdsrs':_0xc24fd9(0xae)},_0x275b38=document[_0xc24fd9(0xcf)](_0x4958b3[_0xc24fd9(0xd5)])[_0xc24fd9(0xd7)];if(!_0x275b38)return;_0x4958b3['gzqaE'](appendMessage,document['getElementById'](_0x4958b3[_0xc24fd9(0xc2)]),_0x275b38,_0x4958b3['ADELX']),document[_0xc24fd9(0xcf)](_0x4958b3[_0xc24fd9(0xd5)])[_0xc24fd9(0xd7)]='',_0x4958b3['dvivm'](showTypingIndicator,document['getElementById'](_0x4958b3['txhbH']),_0x4958b3[_0xc24fd9(0xe1)]);try{const _0x4d01e7=await _0x4958b3['CkApJ'](fetch,settings[_0xc24fd9(0xc7)]+_0xc24fd9(0xa9),{'method':_0x4958b3[_0xc24fd9(0xce)],'headers':{'Authorization':_0xc24fd9(0xd0)+settings['apiToken'],'Content-Type':_0x4958b3['jzBEi']},'body':JSON[_0xc24fd9(0xb3)]({'model':settings[_0xc24fd9(0xd4)],'messages':[{'role':_0x4958b3[_0xc24fd9(0xa0)],'content':settings[_0xc24fd9(0xc9)]},{'role':_0xc24fd9(0xe8),'content':_0x275b38}],'max_tokens':_0x4958b3[_0xc24fd9(0xad)](parseInt,settings[_0xc24fd9(0xaa)]),'temperature':_0x4958b3['EPKNQ'](parseFloat,settings[_0xc24fd9(0x9e)]),'top_p':_0x4958b3[_0xc24fd9(0x98)](parseFloat,settings['topP']),'frequency_penalty':0.5,'seed':0x1,'response_format':{'type':_0x4958b3[_0xc24fd9(0x9b)]}})}),_0x3b6b7e=await _0x4d01e7[_0xc24fd9(0xde)]();_0x4958b3[_0xc24fd9(0xb8)](hideTypingIndicator);if(_0x3b6b7e['choices']&&_0x4958b3[_0xc24fd9(0xc0)](_0x3b6b7e[_0xc24fd9(0xd9)][_0xc24fd9(0xd2)],0x0)){const _0x56b020=_0x3b6b7e['choices'][0x0]['message'][_0xc24fd9(0xdc)];_0x4958b3[_0xc24fd9(0xd1)](appendMessage,document['getElementById'](_0x4958b3[_0xc24fd9(0xc2)]),_0x56b020,'ai');let _0x3eabed;try{_0x3eabed=JSON['parse'](_0x56b020),_0x4958b3[_0xc24fd9(0xad)](appendQuiz,_0x3eabed);}catch(_0xbfb853){appendMessage(document[_0xc24fd9(0xcf)](_0x4958b3[_0xc24fd9(0xc2)]),_0xc24fd9(0x9d),'ai');}}}catch(_0x57a749){appendMessage(document[_0xc24fd9(0xcf)](_0x4958b3[_0xc24fd9(0xc2)]),_0x4958b3[_0xc24fd9(0xbd)](_0x4958b3[_0xc24fd9(0x9c)],_0x57a749[_0xc24fd9(0xa3)]),'ai');}finally{_0x4958b3[_0xc24fd9(0xb8)](hideTypingIndicator);}}function speakMessage(_0x5a05a0){const _0x3aa988=_0x163aec,_0x136c23={'AKkHH':_0x3aa988(0xdd)},_0x6e33a8=new SpeechSynthesisUtterance(_0x5a05a0);_0x6e33a8['lang']=_0x136c23[_0x3aa988(0xc5)],window[_0x3aa988(0xa4)]['speak'](_0x6e33a8);}window[_0x163aec(0xd3)]=loadSettings;