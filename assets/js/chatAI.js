
/*!
Copyright © 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x4881b3=_0x66ac;function _0x3279(){const _0x335398=['lGRvj','onload','8|4|12|5|11|0|1|10|2|3|6|7|9|13','2039068ZPkFUW','Error:\x20Could\x20not\x20parse\x20JSON\x20response.','chat-window','modelName','display','363LerSFb','systemPrompt','temperature','speak','topP','choices','RRxBw','parse','ujdEd','getElementById','none','yWsaz','413416FQACRU','speechSynthesis','271278xRCnRQ','VGIsN','getItem','openai/Qwen2.5','HIDrz','SuYIp','user-input','HHNwM','zOSWi','split','wWvIn','3qbgCOu','lang','en-US','apiToken','UJuOV','AI\x20is\x20typing...','JuCrN','yrBij','uJKSj','value','15EjaXHP','YfcVf','sendMessage','POST','702pOojVY','system','style','4004BfmOYG','YywHO','maxTokens','28884DOyNUj','BqJnO','application/json','setItem','1373013rKHJxl','flex','PNSku','Based\x20on\x20the\x20user’s\x20input,\x20determine\x20the\x20intended\x20quiz\x20topic.\x20Create\x20a\x20JSON\x20object\x20containing\x20a\x20set\x20of\x205\x20multiple-choice\x20questions\x20relevant\x20to\x20that\x20topic.\x20Each\x20question\x20should\x20include\x20the\x20fields\x20\x27question\x27\x20(the\x20quiz\x20question),\x20\x27options\x27\x20(single\x20answer\x20choice).\x20Format\x20the\x20output\x20to\x20the\x20pattern\x20below\x20{\x20\x27topic\x27:\x20\x27example_topic\x27,\x20\x27questions\x27:\x20[\x20{\x20\x27question\x27:\x20\x27Example\x20question?\x27,\x20\x27options\x27:\x20[\x27Option\x20A\x27],\x20\x27correctAnswer\x27:\x20\x27Option\x20B\x27\x20}\x20]\x20}','rQRLT','2413776bAODkI','apiUrl','stringify','CNHOk','/chat/completions','vTdUA','FQwQa','json_object','user','20sjYGFA','3142iOdlgb','CcBiB','7CXxJwl','OgEXa','wjWWs','message','3|14|8|9|13|0|2|7|6|10|4|1|11|5|12','uoKIN','json'];_0x3279=function(){return _0x335398;};return _0x3279();}(function(_0x54567a,_0x2d8a9d){const _0x15fd69=_0x66ac,_0xcf4fae=_0x54567a();while(!![]){try{const _0x3d19c5=-parseInt(_0x15fd69(0x18f))/0x1*(parseInt(_0x15fd69(0x17e))/0x2)+-parseInt(_0x15fd69(0x1a8))/0x3*(-parseInt(_0x15fd69(0x18a))/0x4)+-parseInt(_0x15fd69(0x1b2))/0x5*(-parseInt(_0x15fd69(0x1c5))/0x6)+parseInt(_0x15fd69(0x180))/0x7*(parseInt(_0x15fd69(0x19b))/0x8)+parseInt(_0x15fd69(0x1c0))/0x9*(-parseInt(_0x15fd69(0x17d))/0xa)+parseInt(_0x15fd69(0x1b9))/0xb*(parseInt(_0x15fd69(0x1bc))/0xc)+parseInt(_0x15fd69(0x1b6))/0xd*(-parseInt(_0x15fd69(0x19d))/0xe);if(_0x3d19c5===_0x2d8a9d)break;else _0xcf4fae['push'](_0xcf4fae['shift']());}catch(_0x553929){_0xcf4fae['push'](_0xcf4fae['shift']());}}}(_0x3279,0xb072f));import _0x3d84a7 from'./store.js';import{appendMessage,showTypingIndicator,hideTypingIndicator}from'./common.js';const defaultSettings={'apiUrl':'http://localhost:1234/v1','apiToken':'sk-proj-66666666666666666666666666666666','modelName':_0x4881b3(0x1a0),'maxTokens':0x1000,'temperature':0.7,'topP':0x1,'systemPrompt':_0x4881b3(0x1c3)};let settings={...defaultSettings};function loadSettings(){const _0x108f56=_0x4881b3,_0x451f22={'WSVrt':_0x108f56(0x189),'YywHO':_0x108f56(0x190),'SuYIp':'apiToken','HIDrz':'modelName','rQRLT':'maxTokens','lGRvj':_0x108f56(0x191),'SkikS':_0x108f56(0x1c6)},_0x40c50d=_0x451f22['WSVrt'][_0x108f56(0x1a6)]('|');let _0x15c47f=0x0;while(!![]){switch(_0x40c50d[_0x15c47f++]){case'0':settings[_0x108f56(0x193)]=_0x3d84a7[_0x108f56(0x19f)]('topP')||defaultSettings['topP'];continue;case'1':settings[_0x108f56(0x190)]=_0x3d84a7[_0x108f56(0x19f)](_0x451f22[_0x108f56(0x1ba)])||defaultSettings[_0x108f56(0x190)];continue;case'2':document[_0x108f56(0x198)](_0x451f22[_0x108f56(0x1a2)])['value']=settings['apiToken'];continue;case'3':document[_0x108f56(0x198)](_0x451f22[_0x108f56(0x1a1)])[_0x108f56(0x1b1)]=settings[_0x108f56(0x18d)];continue;case'4':settings['apiToken']=_0x3d84a7[_0x108f56(0x19f)](_0x451f22[_0x108f56(0x1a2)])||defaultSettings[_0x108f56(0x1ab)];continue;case'5':settings[_0x108f56(0x1bb)]=_0x3d84a7['getItem'](_0x451f22[_0x108f56(0x1c4)])||defaultSettings[_0x108f56(0x1bb)];continue;case'6':document[_0x108f56(0x198)](_0x451f22[_0x108f56(0x1c4)])['value']=settings['maxTokens'];continue;case'7':document[_0x108f56(0x198)](_0x451f22[_0x108f56(0x187)])[_0x108f56(0x1b1)]=settings[_0x108f56(0x191)];continue;case'8':settings[_0x108f56(0x1c6)]=_0x3d84a7[_0x108f56(0x19f)](_0x451f22['SkikS'])||defaultSettings[_0x108f56(0x1c6)];continue;case'9':document[_0x108f56(0x198)](_0x108f56(0x193))[_0x108f56(0x1b1)]=settings[_0x108f56(0x193)];continue;case'10':document[_0x108f56(0x198)](_0x108f56(0x1c6))['value']=settings['apiUrl'];continue;case'11':settings['temperature']=_0x3d84a7[_0x108f56(0x19f)](_0x451f22['lGRvj'])||defaultSettings[_0x108f56(0x191)];continue;case'12':settings['modelName']=_0x3d84a7[_0x108f56(0x19f)](_0x451f22[_0x108f56(0x1a1)])||defaultSettings[_0x108f56(0x18d)];continue;case'13':document['getElementById'](_0x451f22['YywHO'])[_0x108f56(0x1b1)]=settings['systemPrompt'];continue;}break;}}function _0x66ac(_0x139401,_0x4166f0){const _0x32795e=_0x3279();return _0x66ac=function(_0x66accd,_0x300c51){_0x66accd=_0x66accd-0x179;let _0x1ab0d5=_0x32795e[_0x66accd];return _0x1ab0d5;},_0x66ac(_0x139401,_0x4166f0);}function saveSettings(){const _0x1733c4=_0x4881b3,_0x587e69={'JnTsl':_0x1733c4(0x193),'uoKIN':_0x1733c4(0x191),'mQCse':_0x1733c4(0x1c6),'wjWWs':_0x1733c4(0x1bb),'WaTbw':_0x1733c4(0x190),'OgEXa':_0x1733c4(0x1ab),'YfcVf':_0x1733c4(0x18d),'JuCrN':function(_0xff9348){return _0xff9348();}},_0x150d91=_0x1733c4(0x184)[_0x1733c4(0x1a6)]('|');let _0x2e9847=0x0;while(!![]){switch(_0x150d91[_0x2e9847++]){case'0':settings[_0x1733c4(0x193)]=document['getElementById'](_0x587e69['JnTsl'])[_0x1733c4(0x1b1)];continue;case'1':_0x3d84a7[_0x1733c4(0x1bf)](_0x587e69[_0x1733c4(0x185)],settings['temperature']);continue;case'2':settings[_0x1733c4(0x190)]=document['getElementById'](_0x1733c4(0x190))['value'];continue;case'3':settings[_0x1733c4(0x1c6)]=document[_0x1733c4(0x198)](_0x587e69['mQCse'])['value'];continue;case'4':_0x3d84a7[_0x1733c4(0x1bf)](_0x587e69[_0x1733c4(0x182)],settings['maxTokens']);continue;case'5':_0x3d84a7[_0x1733c4(0x1bf)](_0x587e69['WaTbw'],settings['systemPrompt']);continue;case'6':_0x3d84a7['setItem'](_0x587e69[_0x1733c4(0x181)],settings['apiToken']);continue;case'7':_0x3d84a7[_0x1733c4(0x1bf)](_0x1733c4(0x1c6),settings[_0x1733c4(0x1c6)]);continue;case'8':settings['modelName']=document[_0x1733c4(0x198)](_0x1733c4(0x18d))[_0x1733c4(0x1b1)];continue;case'9':settings[_0x1733c4(0x1bb)]=document[_0x1733c4(0x198)](_0x587e69['wjWWs'])[_0x1733c4(0x1b1)];continue;case'10':_0x3d84a7[_0x1733c4(0x1bf)](_0x587e69[_0x1733c4(0x1b3)],settings[_0x1733c4(0x18d)]);continue;case'11':_0x3d84a7[_0x1733c4(0x1bf)](_0x1733c4(0x193),settings[_0x1733c4(0x193)]);continue;case'12':_0x587e69[_0x1733c4(0x1ae)](toggleSettings);continue;case'13':settings[_0x1733c4(0x191)]=document[_0x1733c4(0x198)](_0x587e69['uoKIN'])['value'];continue;case'14':settings[_0x1733c4(0x1ab)]=document[_0x1733c4(0x198)](_0x587e69['OgEXa'])['value'];continue;}break;}}function toggleSettings(){const _0x5292e4=_0x4881b3,_0x4b47c5={'UJuOV':'settings','HHNwM':function(_0x2149ca,_0x13186d){return _0x2149ca===_0x13186d;},'FQwQa':_0x5292e4(0x1c1)},_0x3ad352=document[_0x5292e4(0x198)](_0x4b47c5[_0x5292e4(0x1ac)]);_0x3ad352[_0x5292e4(0x1b8)][_0x5292e4(0x18e)]=_0x4b47c5[_0x5292e4(0x1a4)](_0x3ad352['style'][_0x5292e4(0x18e)],_0x4b47c5[_0x5292e4(0x17a)])?_0x5292e4(0x199):_0x4b47c5[_0x5292e4(0x17a)];}window['toggleSettings']=toggleSettings,window[_0x4881b3(0x1b4)]=sendMessage;async function sendMessage(){const _0x50dd7f=_0x4881b3,_0xee689={'RRxBw':_0x50dd7f(0x1a3),'BqJnO':function(_0x456819,_0x186236,_0x2a52b1,_0x4966f4){return _0x456819(_0x186236,_0x2a52b1,_0x4966f4);},'wWvIn':_0x50dd7f(0x18c),'vTdUA':function(_0x10e09c,_0x19685c,_0x554d55){return _0x10e09c(_0x19685c,_0x554d55);},'uJKSj':_0x50dd7f(0x1ad),'PNSku':_0x50dd7f(0x1b5),'yWsaz':_0x50dd7f(0x1be),'CNHOk':_0x50dd7f(0x17c),'VGIsN':function(_0x86f44b,_0x24b391){return _0x86f44b(_0x24b391);},'zOSWi':_0x50dd7f(0x17b),'CcBiB':function(_0x34a5f6){return _0x34a5f6();},'KASAR':function(_0x41478b,_0x19b1ab){return _0x41478b>_0x19b1ab;},'yrBij':_0x50dd7f(0x18b),'ujdEd':function(_0x7828d8,_0x10db69){return _0x7828d8+_0x10db69;}},_0x5b05f9=document[_0x50dd7f(0x198)](_0xee689[_0x50dd7f(0x195)])['value'];if(!_0x5b05f9)return;_0xee689[_0x50dd7f(0x1bd)](appendMessage,document[_0x50dd7f(0x198)](_0xee689[_0x50dd7f(0x1a7)]),_0x5b05f9,'user'),document[_0x50dd7f(0x198)](_0xee689[_0x50dd7f(0x195)])[_0x50dd7f(0x1b1)]='',_0xee689[_0x50dd7f(0x179)](showTypingIndicator,document[_0x50dd7f(0x198)](_0xee689[_0x50dd7f(0x1a7)]),_0xee689[_0x50dd7f(0x1b0)]);try{const _0x4a58fd=await _0xee689[_0x50dd7f(0x179)](fetch,settings['apiUrl']+_0x50dd7f(0x1c9),{'method':_0xee689[_0x50dd7f(0x1c2)],'headers':{'Authorization':'Bearer\x20'+settings['apiToken'],'Content-Type':_0xee689[_0x50dd7f(0x19a)]},'body':JSON[_0x50dd7f(0x1c7)]({'model':settings[_0x50dd7f(0x18d)],'messages':[{'role':_0x50dd7f(0x1b7),'content':settings[_0x50dd7f(0x190)]},{'role':_0xee689[_0x50dd7f(0x1c8)],'content':_0x5b05f9}],'max_tokens':_0xee689['VGIsN'](parseInt,settings['maxTokens']),'temperature':_0xee689[_0x50dd7f(0x19e)](parseFloat,settings[_0x50dd7f(0x191)]),'top_p':parseFloat(settings[_0x50dd7f(0x193)]),'frequency_penalty':0.5,'seed':0x1,'response_format':{'type':_0xee689[_0x50dd7f(0x1a5)]}})}),_0x412801=await _0x4a58fd[_0x50dd7f(0x186)]();_0xee689[_0x50dd7f(0x17f)](hideTypingIndicator);if(_0x412801[_0x50dd7f(0x194)]&&_0xee689['KASAR'](_0x412801[_0x50dd7f(0x194)]['length'],0x0)){const _0x48d43d=_0x412801[_0x50dd7f(0x194)][0x0][_0x50dd7f(0x183)]['content'];_0xee689[_0x50dd7f(0x1bd)](appendMessage,document[_0x50dd7f(0x198)](_0xee689[_0x50dd7f(0x1a7)]),_0x48d43d,'ai');let _0x254aef;try{_0x254aef=JSON[_0x50dd7f(0x196)](_0x48d43d),appendQuiz(_0x254aef);}catch(_0x29743e){appendMessage(document[_0x50dd7f(0x198)](_0xee689[_0x50dd7f(0x1a7)]),_0xee689[_0x50dd7f(0x1af)],'ai');}}}catch(_0x5dd4f0){_0xee689[_0x50dd7f(0x1bd)](appendMessage,document[_0x50dd7f(0x198)](_0x50dd7f(0x18c)),_0xee689[_0x50dd7f(0x197)]('Error:\x20Failed\x20to\x20fetch\x20AI\x20response:\x20',_0x5dd4f0[_0x50dd7f(0x183)]),'ai');}finally{hideTypingIndicator();}}function speakMessage(_0x45fd61){const _0x44fa93=_0x4881b3,_0x1f0f14={'GNwlk':_0x44fa93(0x1aa)},_0x4f4a60=new SpeechSynthesisUtterance(_0x45fd61);_0x4f4a60[_0x44fa93(0x1a9)]=_0x1f0f14['GNwlk'],window[_0x44fa93(0x19c)][_0x44fa93(0x192)](_0x4f4a60);}window[_0x4881b3(0x188)]=loadSettings;