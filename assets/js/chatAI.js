
/*!
Copyright © 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x336804=_0x2852;(function(_0x46cbdb,_0x1066a3){const _0x203d02=_0x2852,_0x355024=_0x46cbdb();while(!![]){try{const _0x19e095=parseInt(_0x203d02(0x122))/0x1+parseInt(_0x203d02(0x118))/0x2+-parseInt(_0x203d02(0x11a))/0x3+-parseInt(_0x203d02(0x130))/0x4+-parseInt(_0x203d02(0xef))/0x5+-parseInt(_0x203d02(0xf1))/0x6+-parseInt(_0x203d02(0xeb))/0x7*(-parseInt(_0x203d02(0x128))/0x8);if(_0x19e095===_0x1066a3)break;else _0x355024['push'](_0x355024['shift']());}catch(_0x1f57ab){_0x355024['push'](_0x355024['shift']());}}}(_0x307a,0x52e96));import _0x2db74d from'./store.js';import{appendMessage,showTypingIndicator,hideTypingIndicator}from'./common.js';const defaultSettings={'apiUrl':'http://localhost:1234/v1','apiToken':_0x336804(0x109),'modelName':'openai/Qwen2.5','maxTokens':0x1000,'temperature':0.7,'topP':0x1,'systemPrompt':_0x336804(0xf2)};let settings={...defaultSettings};function _0x2852(_0x1972a3,_0x3dea8a){const _0x307a29=_0x307a();return _0x2852=function(_0x2852d5,_0x4fad30){_0x2852d5=_0x2852d5-0xea;let _0x235539=_0x307a29[_0x2852d5];return _0x235539;},_0x2852(_0x1972a3,_0x3dea8a);}function loadSettings(){const _0x3c812e=_0x336804,_0x41dcd4={'ilDHC':_0x3c812e(0x12e),'CCbVX':_0x3c812e(0x121),'eSuNH':_0x3c812e(0x124),'RfFKC':_0x3c812e(0x133),'xQkqm':'systemPrompt','Mvket':_0x3c812e(0x126),'jwgnW':_0x3c812e(0x11e),'vBkdo':_0x3c812e(0x12b)},_0x16b281=_0x41dcd4[_0x3c812e(0xfe)][_0x3c812e(0x117)]('|');let _0x56e9f6=0x0;while(!![]){switch(_0x16b281[_0x56e9f6++]){case'0':settings[_0x3c812e(0x121)]=_0x2db74d[_0x3c812e(0x134)](_0x41dcd4[_0x3c812e(0x10b)])||defaultSettings['maxTokens'];continue;case'1':settings['systemPrompt']=_0x2db74d[_0x3c812e(0x134)]('systemPrompt')||defaultSettings[_0x3c812e(0x12d)];continue;case'2':settings['temperature']=_0x2db74d[_0x3c812e(0x134)](_0x41dcd4[_0x3c812e(0x103)])||defaultSettings[_0x3c812e(0x124)];continue;case'3':settings['modelName']=_0x2db74d[_0x3c812e(0x134)](_0x3c812e(0x11e))||defaultSettings['modelName'];continue;case'4':document['getElementById'](_0x41dcd4[_0x3c812e(0x100)])['value']=settings[_0x3c812e(0x133)];continue;case'5':document['getElementById'](_0x41dcd4[_0x3c812e(0x10e)])[_0x3c812e(0x113)]=settings['systemPrompt'];continue;case'6':settings['apiUrl']=_0x2db74d[_0x3c812e(0x134)](_0x41dcd4[_0x3c812e(0x129)])||defaultSettings[_0x3c812e(0x126)];continue;case'7':document[_0x3c812e(0xed)](_0x41dcd4[_0x3c812e(0x129)])[_0x3c812e(0x113)]=settings[_0x3c812e(0x126)];continue;case'8':document[_0x3c812e(0xed)](_0x3c812e(0x121))['value']=settings[_0x3c812e(0x121)];continue;case'9':settings[_0x3c812e(0x133)]=_0x2db74d[_0x3c812e(0x134)](_0x3c812e(0x133))||defaultSettings['apiToken'];continue;case'10':document[_0x3c812e(0xed)](_0x41dcd4['jwgnW'])['value']=settings[_0x3c812e(0x11e)];continue;case'11':document[_0x3c812e(0xed)](_0x3c812e(0x12b))['value']=settings[_0x3c812e(0x12b)];continue;case'12':document[_0x3c812e(0xed)](_0x41dcd4['eSuNH'])[_0x3c812e(0x113)]=settings[_0x3c812e(0x124)];continue;case'13':settings[_0x3c812e(0x12b)]=_0x2db74d[_0x3c812e(0x134)](_0x41dcd4['vBkdo'])||defaultSettings[_0x3c812e(0x12b)];continue;}break;}}function saveSettings(){const _0x2ff7c2=_0x336804,_0x66db0b={'hbzrD':_0x2ff7c2(0x126),'hemRX':_0x2ff7c2(0x133),'MCxQS':_0x2ff7c2(0x11e),'mrckV':_0x2ff7c2(0x121),'OZYGU':_0x2ff7c2(0x124),'OUfpI':_0x2ff7c2(0x12b),'KFIqb':_0x2ff7c2(0x12d),'VuHEh':function(_0x1a6021){return _0x1a6021();}};settings[_0x2ff7c2(0x126)]=document[_0x2ff7c2(0xed)](_0x66db0b[_0x2ff7c2(0x112)])['value'],settings['apiToken']=document[_0x2ff7c2(0xed)](_0x66db0b[_0x2ff7c2(0x10c)])[_0x2ff7c2(0x113)],settings[_0x2ff7c2(0x11e)]=document['getElementById'](_0x66db0b[_0x2ff7c2(0xf4)])[_0x2ff7c2(0x113)],settings[_0x2ff7c2(0x121)]=document[_0x2ff7c2(0xed)](_0x66db0b[_0x2ff7c2(0x125)])['value'],settings[_0x2ff7c2(0x124)]=document['getElementById'](_0x66db0b['OZYGU'])[_0x2ff7c2(0x113)],settings[_0x2ff7c2(0x12b)]=document[_0x2ff7c2(0xed)](_0x66db0b[_0x2ff7c2(0xea)])[_0x2ff7c2(0x113)],settings[_0x2ff7c2(0x12d)]=document[_0x2ff7c2(0xed)](_0x2ff7c2(0x12d))[_0x2ff7c2(0x113)],_0x2db74d[_0x2ff7c2(0x105)](_0x66db0b[_0x2ff7c2(0x112)],settings[_0x2ff7c2(0x126)]),_0x2db74d['setItem'](_0x66db0b['hemRX'],settings[_0x2ff7c2(0x133)]),_0x2db74d[_0x2ff7c2(0x105)](_0x66db0b[_0x2ff7c2(0xf4)],settings[_0x2ff7c2(0x11e)]),_0x2db74d['setItem'](_0x66db0b[_0x2ff7c2(0x125)],settings[_0x2ff7c2(0x121)]),_0x2db74d[_0x2ff7c2(0x105)](_0x66db0b[_0x2ff7c2(0x11c)],settings[_0x2ff7c2(0x124)]),_0x2db74d['setItem'](_0x66db0b[_0x2ff7c2(0xea)],settings['topP']),_0x2db74d[_0x2ff7c2(0x105)](_0x66db0b[_0x2ff7c2(0x106)],settings['systemPrompt']),_0x66db0b[_0x2ff7c2(0x12c)](toggleSettings);}function toggleSettings(){const _0x2c70b=_0x336804,_0x5d1384={'unIuM':_0x2c70b(0x10a),'awqUy':'flex'},_0x3c47b8=document[_0x2c70b(0xed)](_0x5d1384['unIuM']);_0x3c47b8['style'][_0x2c70b(0x115)]=_0x3c47b8[_0x2c70b(0xff)]['display']===_0x5d1384[_0x2c70b(0xfa)]?_0x2c70b(0x127):'flex';}function _0x307a(){const _0x57f545=['application/json','OZYGU','toggleSettings','modelName','en-US','rOlpv','maxTokens','175919pqWZUb','speechSynthesis','temperature','mrckV','apiUrl','none','12027520Haqrfp','Mvket','user','topP','VuHEh','systemPrompt','6|9|3|0|2|13|1|7|4|10|8|12|11|5','AI\x20is\x20typing...','1526824oEuCji','choices','xUqUQ','apiToken','getItem','BSJlC','OUfpI','7uwtuMU','HJqrd','getElementById','Smaxd','2815440KmgWAY','user-input','2190864rboNUw','Based\x20on\x20the\x20user’s\x20input,\x20determine\x20the\x20intended\x20quiz\x20topic.\x20Create\x20a\x20JSON\x20object\x20containing\x20a\x20set\x20of\x205\x20multiple-choice\x20questions\x20relevant\x20to\x20that\x20topic.\x20Each\x20question\x20should\x20include\x20the\x20fields\x20\x27question\x27\x20(the\x20quiz\x20question),\x20\x27options\x27\x20(single\x20answer\x20choice).\x20Format\x20the\x20output\x20to\x20the\x20pattern\x20below\x20{\x20\x27topic\x27:\x20\x27example_topic\x27,\x20\x27questions\x27:\x20[\x20{\x20\x27question\x27:\x20\x27Example\x20question?\x27,\x20\x27options\x27:\x20[\x27Option\x20A\x27],\x20\x27correctAnswer\x27:\x20\x27Option\x20B\x27\x20}\x20]\x20}','message','MCxQS','length','jCoLq','stringify','content','Error:\x20Failed\x20to\x20fetch\x20AI\x20response:\x20','awqUy','WcHrX','LtCGT','onload','ilDHC','style','RfFKC','UTPZz','fgUGV','eSuNH','PONsd','setItem','KFIqb','POST','LlImh','sk-proj-66666666666666666666666666666666','settings','CCbVX','hemRX','system','xQkqm','speak','sOdxe','qlMjQ','hbzrD','value','xepaq','display','kqRuj','split','595280sFhRgU','lang','982365FjMAoT'];_0x307a=function(){return _0x57f545;};return _0x307a();}window[_0x336804(0x11d)]=toggleSettings,window['sendMessage']=sendMessage;async function sendMessage(){const _0x1ab742=_0x336804,_0x422059={'LlImh':_0x1ab742(0xf0),'HJqrd':function(_0x5aaf65,_0x2c9766,_0x89fd77,_0x45a219){return _0x5aaf65(_0x2c9766,_0x89fd77,_0x45a219);},'Smaxd':'chat-window','LtCGT':_0x1ab742(0x12a),'sOdxe':function(_0xecebb7,_0x4221ad,_0x21b8d3){return _0xecebb7(_0x4221ad,_0x21b8d3);},'jCoLq':_0x1ab742(0x11b),'qlMjQ':function(_0x94d026,_0x207058){return _0x94d026(_0x207058);},'kqRuj':function(_0x44c2cb,_0x585bbe){return _0x44c2cb(_0x585bbe);},'PONsd':'json_object','xepaq':function(_0x513095){return _0x513095();},'UTPZz':function(_0x3fe327,_0xc88183){return _0x3fe327>_0xc88183;},'WcHrX':'Error:\x20Could\x20not\x20parse\x20JSON\x20response.','rOlpv':function(_0x561bfb,_0x191778,_0x210f68,_0x225c84){return _0x561bfb(_0x191778,_0x210f68,_0x225c84);},'BSJlC':function(_0x5eb8ab,_0x505dd7){return _0x5eb8ab+_0x505dd7;},'fgUGV':_0x1ab742(0xf9)},_0x52c385=document[_0x1ab742(0xed)](_0x422059[_0x1ab742(0x108)])[_0x1ab742(0x113)];if(!_0x52c385)return;_0x422059[_0x1ab742(0xec)](appendMessage,document[_0x1ab742(0xed)](_0x422059[_0x1ab742(0xee)]),_0x52c385,_0x422059[_0x1ab742(0xfc)]),document['getElementById'](_0x422059[_0x1ab742(0x108)])[_0x1ab742(0x113)]='',showTypingIndicator(document[_0x1ab742(0xed)](_0x422059[_0x1ab742(0xee)]),_0x1ab742(0x12f));try{const _0x26264f=await _0x422059[_0x1ab742(0x110)](fetch,settings[_0x1ab742(0x126)]+'/chat/completions',{'method':_0x1ab742(0x107),'headers':{'Authorization':'Bearer\x20'+settings[_0x1ab742(0x133)],'Content-Type':_0x422059[_0x1ab742(0xf6)]},'body':JSON[_0x1ab742(0xf7)]({'model':settings[_0x1ab742(0x11e)],'messages':[{'role':_0x1ab742(0x10d),'content':settings[_0x1ab742(0x12d)]},{'role':'user','content':_0x52c385}],'max_tokens':_0x422059[_0x1ab742(0x111)](parseInt,settings['maxTokens']),'temperature':_0x422059[_0x1ab742(0x116)](parseFloat,settings[_0x1ab742(0x124)]),'top_p':parseFloat(settings['topP']),'frequency_penalty':0.5,'seed':0x1,'response_format':{'type':_0x422059[_0x1ab742(0x104)]}})}),_0xbaf161=await _0x26264f['json']();_0x422059[_0x1ab742(0x114)](hideTypingIndicator);if(_0xbaf161[_0x1ab742(0x131)]&&_0x422059[_0x1ab742(0x101)](_0xbaf161[_0x1ab742(0x131)][_0x1ab742(0xf5)],0x0)){const _0x2b1560=_0xbaf161[_0x1ab742(0x131)][0x0][_0x1ab742(0xf3)][_0x1ab742(0xf8)];_0x422059[_0x1ab742(0xec)](appendMessage,document[_0x1ab742(0xed)](_0x422059[_0x1ab742(0xee)]),_0x2b1560,'ai');let _0x114bb6;try{_0x114bb6=JSON['parse'](_0x2b1560),appendQuiz(_0x114bb6);}catch(_0x1aba1f){appendMessage(document[_0x1ab742(0xed)](_0x422059[_0x1ab742(0xee)]),_0x422059[_0x1ab742(0xfb)],'ai');}}}catch(_0x298929){_0x422059[_0x1ab742(0x120)](appendMessage,document['getElementById'](_0x422059[_0x1ab742(0xee)]),_0x422059[_0x1ab742(0x135)](_0x422059[_0x1ab742(0x102)],_0x298929[_0x1ab742(0xf3)]),'ai');}finally{_0x422059[_0x1ab742(0x114)](hideTypingIndicator);}}function speakMessage(_0x47d16d){const _0x3fbe51=_0x336804,_0x47492e={'xUqUQ':_0x3fbe51(0x11f)},_0x22f843=new SpeechSynthesisUtterance(_0x47d16d);_0x22f843[_0x3fbe51(0x119)]=_0x47492e[_0x3fbe51(0x132)],window[_0x3fbe51(0x123)][_0x3fbe51(0x10f)](_0x22f843);}window[_0x336804(0xfd)]=loadSettings;