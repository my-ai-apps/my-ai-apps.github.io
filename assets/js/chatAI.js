
/*!
Copyright © 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0xfe1fbe=_0x9685;(function(_0x49b411,_0x57190d){const _0x4399b4=_0x9685,_0x545df0=_0x49b411();while(!![]){try{const _0x346e24=parseInt(_0x4399b4(0x1ee))/0x1*(parseInt(_0x4399b4(0x200))/0x2)+-parseInt(_0x4399b4(0x1db))/0x3+-parseInt(_0x4399b4(0x202))/0x4*(parseInt(_0x4399b4(0x1bb))/0x5)+parseInt(_0x4399b4(0x206))/0x6+parseInt(_0x4399b4(0x1d1))/0x7*(-parseInt(_0x4399b4(0x1d4))/0x8)+parseInt(_0x4399b4(0x1e0))/0x9+parseInt(_0x4399b4(0x1dc))/0xa;if(_0x346e24===_0x57190d)break;else _0x545df0['push'](_0x545df0['shift']());}catch(_0x111c24){_0x545df0['push'](_0x545df0['shift']());}}}(_0x2ca0,0x4d355));import _0x44fdde from'./store.js';import{appendMessage,showTypingIndicator,hideTypingIndicator}from'./common.js';const defaultSettings={'apiUrl':'http://localhost:1234/v1','apiToken':'sk-proj-66666666666666666666666666666666','modelName':_0xfe1fbe(0x1d0),'maxTokens':0x1000,'temperature':0.7,'topP':0x1,'systemPrompt':_0xfe1fbe(0x1c9)};function _0x2ca0(){const _0x15fe0c=['en-US','MrPjw','xlKCU','Error:\x20Could\x20not\x20parse\x20JSON\x20response.','ivbQU','fYRGk','vkcmm','1BbQCJr','wGaIK','LSFNP','LxCdq','apiUrl','apiToken','temperature','Error:\x20Failed\x20to\x20fetch\x20AI\x20response:\x20','pVThd','EuUMZ','topP','getElementById','AI\x20is\x20typing...','/chat/completions','display','vSXhV','POST','cxAYj','613328eWotAj','ToNUX','4bIsUfN','settings','value','json_object','1856046FzMtpv','stringify','ftPzu','AGDQk','Uqwma','nElAe','13|4|7|2|11|0|6|12|8|5|3|10|1|9','json','1081715vaBCtO','oxAMW','message','style','YunMu','SJYFx','setItem','getItem','speechSynthesis','choices','chat-window','toggleSettings','cWmlr','length','Based\x20on\x20the\x20user’s\x20input,\x20determine\x20the\x20intended\x20quiz\x20topic.\x20Create\x20a\x20JSON\x20object\x20containing\x20a\x20set\x20of\x205\x20multiple-choice\x20questions\x20relevant\x20to\x20that\x20topic.\x20Each\x20question\x20should\x20include\x20the\x20fields\x20\x27question\x27\x20(the\x20quiz\x20question),\x20\x27options\x27\x20(single\x20answer\x20choice).\x20Format\x20the\x20output\x20to\x20the\x20pattern\x20below\x20{\x20\x27topic\x27:\x20\x27example_topic\x27,\x20\x27questions\x27:\x20[\x20{\x20\x27question\x27:\x20\x27Example\x20question?\x27,\x20\x27options\x27:\x20[\x27Option\x20A\x27],\x20\x27correctAnswer\x27:\x20\x27Option\x20B\x27\x20}\x20]\x20}','onload','content','lang','system','user','12|4|14|10|8|0|1|11|7|5|13|3|9|6|2','openai/Qwen2.5','20426QTNoYI','FDJBL','DuylV','56CdzLGZ','OZpkm','maxTokens','Bearer\x20','flex','application/json','split','1624533tFmhXP','2124510FLMWhX','jZXGa','JqDMC','NUqQH','2394621IUqhgM','systemPrompt','RTKDn','user-input','jfzqz','LYkLx','modelName'];_0x2ca0=function(){return _0x15fe0c;};return _0x2ca0();}function _0x9685(_0x20d999,_0x1717a1){const _0x2ca076=_0x2ca0();return _0x9685=function(_0x9685b0,_0x3c518d){_0x9685b0=_0x9685b0-0x1b7;let _0x97f276=_0x2ca076[_0x9685b0];return _0x97f276;},_0x9685(_0x20d999,_0x1717a1);}let settings={...defaultSettings};function loadSettings(){const _0x146e23=_0xfe1fbe,_0x5e59d6={'jZXGa':'topP','LSFNP':'maxTokens','JqDMC':'apiToken','wGaIK':_0x146e23(0x1e6),'AGDQk':'systemPrompt','OZpkm':'temperature','MrPjw':_0x146e23(0x1f2)},_0x309e09=_0x146e23(0x1b9)['split']('|');let _0x1435ca=0x0;while(!![]){switch(_0x309e09[_0x1435ca++]){case'0':settings[_0x146e23(0x1f8)]=_0x44fdde[_0x146e23(0x1c2)](_0x5e59d6[_0x146e23(0x1dd)])||defaultSettings[_0x146e23(0x1f8)];continue;case'1':document[_0x146e23(0x1f9)](_0x5e59d6['jZXGa'])[_0x146e23(0x204)]=settings[_0x146e23(0x1f8)];continue;case'2':settings['maxTokens']=_0x44fdde[_0x146e23(0x1c2)](_0x5e59d6['LSFNP'])||defaultSettings[_0x146e23(0x1d6)];continue;case'3':document[_0x146e23(0x1f9)](_0x5e59d6[_0x146e23(0x1f0)])[_0x146e23(0x204)]=settings[_0x146e23(0x1d6)];continue;case'4':settings[_0x146e23(0x1f3)]=_0x44fdde[_0x146e23(0x1c2)](_0x5e59d6[_0x146e23(0x1de)])||defaultSettings[_0x146e23(0x1f3)];continue;case'5':document[_0x146e23(0x1f9)](_0x5e59d6[_0x146e23(0x1ef)])[_0x146e23(0x204)]=settings[_0x146e23(0x1e6)];continue;case'6':settings[_0x146e23(0x1e1)]=_0x44fdde['getItem'](_0x5e59d6['AGDQk'])||defaultSettings[_0x146e23(0x1e1)];continue;case'7':settings[_0x146e23(0x1e6)]=_0x44fdde[_0x146e23(0x1c2)](_0x5e59d6['wGaIK'])||defaultSettings[_0x146e23(0x1e6)];continue;case'8':document[_0x146e23(0x1f9)](_0x5e59d6[_0x146e23(0x1de)])[_0x146e23(0x204)]=settings[_0x146e23(0x1f3)];continue;case'9':document['getElementById'](_0x5e59d6[_0x146e23(0x209)])[_0x146e23(0x204)]=settings[_0x146e23(0x1e1)];continue;case'10':document[_0x146e23(0x1f9)](_0x5e59d6[_0x146e23(0x1d5)])['value']=settings[_0x146e23(0x1f4)];continue;case'11':settings['temperature']=_0x44fdde[_0x146e23(0x1c2)](_0x5e59d6[_0x146e23(0x1d5)])||defaultSettings['temperature'];continue;case'12':document[_0x146e23(0x1f9)](_0x5e59d6['MrPjw'])[_0x146e23(0x204)]=settings[_0x146e23(0x1f2)];continue;case'13':settings[_0x146e23(0x1f2)]=_0x44fdde[_0x146e23(0x1c2)](_0x5e59d6[_0x146e23(0x1e8)])||defaultSettings[_0x146e23(0x1f2)];continue;}break;}}function saveSettings(){const _0x443004=_0xfe1fbe,_0x3af914={'cWmlr':_0x443004(0x1cf),'EuUMZ':_0x443004(0x1f8),'xlKCU':'systemPrompt','ZkZdc':_0x443004(0x1f4),'Uqwma':_0x443004(0x1f3),'vSXhV':_0x443004(0x1f2),'jfzqz':_0x443004(0x1d6),'MsElm':_0x443004(0x1e6)},_0x312478=_0x3af914[_0x443004(0x1c7)][_0x443004(0x1da)]('|');let _0x11c726=0x0;while(!![]){switch(_0x312478[_0x11c726++]){case'0':settings[_0x443004(0x1f8)]=document[_0x443004(0x1f9)](_0x3af914[_0x443004(0x1f7)])[_0x443004(0x204)];continue;case'1':settings['systemPrompt']=document[_0x443004(0x1f9)](_0x3af914[_0x443004(0x1e9)])['value'];continue;case'2':toggleSettings();continue;case'3':_0x44fdde[_0x443004(0x1c1)](_0x3af914['ZkZdc'],settings[_0x443004(0x1f4)]);continue;case'4':settings['apiToken']=document['getElementById'](_0x3af914[_0x443004(0x1b7)])[_0x443004(0x204)];continue;case'5':_0x44fdde[_0x443004(0x1c1)](_0x443004(0x1e6),settings[_0x443004(0x1e6)]);continue;case'6':_0x44fdde[_0x443004(0x1c1)](_0x3af914[_0x443004(0x1e9)],settings[_0x443004(0x1e1)]);continue;case'7':_0x44fdde[_0x443004(0x1c1)](_0x3af914[_0x443004(0x1b7)],settings[_0x443004(0x1f3)]);continue;case'8':settings[_0x443004(0x1f4)]=document['getElementById'](_0x443004(0x1f4))['value'];continue;case'9':_0x44fdde[_0x443004(0x1c1)](_0x3af914[_0x443004(0x1f7)],settings['topP']);continue;case'10':settings[_0x443004(0x1d6)]=document[_0x443004(0x1f9)](_0x443004(0x1d6))[_0x443004(0x204)];continue;case'11':_0x44fdde[_0x443004(0x1c1)](_0x3af914['vSXhV'],settings[_0x443004(0x1f2)]);continue;case'12':settings[_0x443004(0x1f2)]=document['getElementById'](_0x3af914[_0x443004(0x1fd)])[_0x443004(0x204)];continue;case'13':_0x44fdde[_0x443004(0x1c1)](_0x3af914[_0x443004(0x1e4)],settings[_0x443004(0x1d6)]);continue;case'14':settings['modelName']=document[_0x443004(0x1f9)](_0x3af914['MsElm'])['value'];continue;}break;}}function toggleSettings(){const _0x2daf7c=_0xfe1fbe,_0x4641b8={'NUqQH':_0x2daf7c(0x203),'pVThd':function(_0x1be459,_0x1fe34c){return _0x1be459===_0x1fe34c;},'oxAMW':_0x2daf7c(0x1d8),'vkcmm':'none'},_0x2b5ca4=document[_0x2daf7c(0x1f9)](_0x4641b8[_0x2daf7c(0x1df)]);_0x2b5ca4[_0x2daf7c(0x1be)][_0x2daf7c(0x1fc)]=_0x4641b8[_0x2daf7c(0x1f6)](_0x2b5ca4[_0x2daf7c(0x1be)][_0x2daf7c(0x1fc)],_0x4641b8[_0x2daf7c(0x1bc)])?_0x4641b8[_0x2daf7c(0x1ed)]:_0x4641b8['oxAMW'];}window[_0xfe1fbe(0x1c6)]=toggleSettings,window['sendMessage']=sendMessage;async function sendMessage(){const _0x3c3d34=_0xfe1fbe,_0x1344b1={'RTKDn':_0x3c3d34(0x1e3),'SJYFx':_0x3c3d34(0x1c5),'oLFnU':function(_0x4bbbb3,_0xa406ff,_0x5a61b8){return _0x4bbbb3(_0xa406ff,_0x5a61b8);},'DuylV':_0x3c3d34(0x1fa),'iKjnX':_0x3c3d34(0x1fe),'cxAYj':_0x3c3d34(0x1d9),'fYRGk':_0x3c3d34(0x1cd),'nElAe':'user','ftPzu':function(_0x17936b,_0x13145f){return _0x17936b(_0x13145f);},'YunMu':function(_0x2d72ea,_0x55676f){return _0x2d72ea(_0x55676f);},'FJVTc':_0x3c3d34(0x205),'LxCdq':function(_0x2b30fa){return _0x2b30fa();},'ToNUX':function(_0x56bf70,_0x7a7e8a){return _0x56bf70>_0x7a7e8a;},'ivbQU':function(_0x381e8f,_0x118d00,_0x47fab0,_0xde0e53){return _0x381e8f(_0x118d00,_0x47fab0,_0xde0e53);},'ubxEc':_0x3c3d34(0x1ea),'ETwQZ':function(_0x492fed,_0x250833){return _0x492fed+_0x250833;},'FDJBL':_0x3c3d34(0x1f5)},_0x476480=document[_0x3c3d34(0x1f9)](_0x1344b1[_0x3c3d34(0x1e2)])['value'];if(!_0x476480)return;appendMessage(document[_0x3c3d34(0x1f9)](_0x1344b1['SJYFx']),_0x476480,_0x3c3d34(0x1ce)),document[_0x3c3d34(0x1f9)](_0x1344b1[_0x3c3d34(0x1e2)])[_0x3c3d34(0x204)]='',_0x1344b1['oLFnU'](showTypingIndicator,document[_0x3c3d34(0x1f9)](_0x1344b1['SJYFx']),_0x1344b1[_0x3c3d34(0x1d3)]);try{const _0x2cd13e=await fetch(settings['apiUrl']+_0x3c3d34(0x1fb),{'method':_0x1344b1['iKjnX'],'headers':{'Authorization':_0x3c3d34(0x1d7)+settings[_0x3c3d34(0x1f3)],'Content-Type':_0x1344b1[_0x3c3d34(0x1ff)]},'body':JSON[_0x3c3d34(0x207)]({'model':settings['modelName'],'messages':[{'role':_0x1344b1[_0x3c3d34(0x1ec)],'content':settings[_0x3c3d34(0x1e1)]},{'role':_0x1344b1[_0x3c3d34(0x1b8)],'content':_0x476480}],'max_tokens':_0x1344b1[_0x3c3d34(0x208)](parseInt,settings['maxTokens']),'temperature':_0x1344b1[_0x3c3d34(0x1bf)](parseFloat,settings[_0x3c3d34(0x1f4)]),'top_p':parseFloat(settings[_0x3c3d34(0x1f8)]),'frequency_penalty':0.5,'seed':0x1,'response_format':{'type':_0x1344b1['FJVTc']}})}),_0x25ce0f=await _0x2cd13e[_0x3c3d34(0x1ba)]();_0x1344b1[_0x3c3d34(0x1f1)](hideTypingIndicator);if(_0x25ce0f[_0x3c3d34(0x1c4)]&&_0x1344b1[_0x3c3d34(0x201)](_0x25ce0f[_0x3c3d34(0x1c4)][_0x3c3d34(0x1c8)],0x0)){const _0x13cf25=_0x25ce0f[_0x3c3d34(0x1c4)][0x0][_0x3c3d34(0x1bd)][_0x3c3d34(0x1cb)];_0x1344b1[_0x3c3d34(0x1eb)](appendMessage,document[_0x3c3d34(0x1f9)](_0x1344b1[_0x3c3d34(0x1c0)]),_0x13cf25,'ai');let _0x12bca7;try{_0x12bca7=JSON['parse'](_0x13cf25),appendQuiz(_0x12bca7);}catch(_0x573ab2){_0x1344b1[_0x3c3d34(0x1eb)](appendMessage,document['getElementById'](_0x1344b1[_0x3c3d34(0x1c0)]),_0x1344b1['ubxEc'],'ai');}}}catch(_0x52da3d){_0x1344b1[_0x3c3d34(0x1eb)](appendMessage,document[_0x3c3d34(0x1f9)](_0x1344b1[_0x3c3d34(0x1c0)]),_0x1344b1['ETwQZ'](_0x1344b1[_0x3c3d34(0x1d2)],_0x52da3d[_0x3c3d34(0x1bd)]),'ai');}finally{hideTypingIndicator();}}function speakMessage(_0x1ba4a6){const _0x104764=_0xfe1fbe,_0x6350c9={'LYkLx':_0x104764(0x1e7)},_0x196345=new SpeechSynthesisUtterance(_0x1ba4a6);_0x196345[_0x104764(0x1cc)]=_0x6350c9[_0x104764(0x1e5)],window[_0x104764(0x1c3)]['speak'](_0x196345);}window[_0xfe1fbe(0x1ca)]=loadSettings;