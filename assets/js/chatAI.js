
/*!
Copyright © 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x405d87=_0x5f26;function _0x53b1(){const _0x4bea45=['openai/Qwen2.5','lang','EFrWo','flex','speak','239860kVaIUc','sk-proj-66666666666666666666666666666666','maxTokens','1990278HoDaOo','Based\x20on\x20the\x20user’s\x20input,\x20determine\x20the\x20intended\x20quiz\x20topic.\x20Create\x20a\x20JSON\x20object\x20containing\x20a\x20set\x20of\x205\x20multiple-choice\x20questions\x20relevant\x20to\x20that\x20topic.\x20Each\x20question\x20should\x20include\x20the\x20fields\x20\x27question\x27\x20(the\x20quiz\x20question),\x20\x27options\x27\x20(single\x20answer\x20choice).\x20Format\x20the\x20output\x20to\x20the\x20pattern\x20below\x20{\x20\x27topic\x27:\x20\x27example_topic\x27,\x20\x27questions\x27:\x20[\x20{\x20\x27question\x27:\x20\x27Example\x20question?\x27,\x20\x27options\x27:\x20[\x27Option\x20A\x27],\x20\x27correctAnswer\x27:\x20\x27Option\x20B\x27\x20}\x20]\x20}','gZLtC','temperature','hEXJa','pqRIO','user','setItem','ZfLTb','gkzUU','8iNjjGE','7881696qBRuAB','OCccM','xxivG','getElementById','MOANP','application/json','sendMessage','89947daJxoX','dqIUQ','/chat/completions','none','display','user-input','ojbjq','apiToken','chat-window','6zxyPMN','systemPrompt','POST','content','3977897gIjKUa','wdcPz','DYHbn','modelName','8273550wbXeNw','bFHHe','EOiHV','choices','style','rPFnE','70ZbDfrb','split','WWnxm','JlEck','FaMyM','qMifT','length','settings','apiUrl','json_object','112MPkJVj','pVjHx','UZneH','Error:\x20Could\x20not\x20parse\x20JSON\x20response.','VQbCi','getItem','Bearer\x20','value','yuttk','24918wbrrKu','topP','parse','7|9|4|2|5|6|3|10|0|1|13|12|11|8','NvZGC','http://localhost:1234/v1','en-US','toggleSettings','system','cKcpq','kjrsm','message'];_0x53b1=function(){return _0x4bea45;};return _0x53b1();}(function(_0x1f98be,_0xc1902b){const _0x49de1f=_0x5f26,_0x20009e=_0x1f98be();while(!![]){try{const _0xd8f781=parseInt(_0x49de1f(0x146))/0x1*(parseInt(_0x49de1f(0x14f))/0x2)+parseInt(_0x49de1f(0x184))/0x3+parseInt(_0x49de1f(0x181))/0x4*(parseInt(_0x49de1f(0x15d))/0x5)+parseInt(_0x49de1f(0x170))/0x6*(parseInt(_0x49de1f(0x167))/0x7)+-parseInt(_0x49de1f(0x18e))/0x8*(parseInt(_0x49de1f(0x13f))/0x9)+-parseInt(_0x49de1f(0x157))/0xa+parseInt(_0x49de1f(0x153))/0xb;if(_0xd8f781===_0xc1902b)break;else _0x20009e['push'](_0x20009e['shift']());}catch(_0x1ee672){_0x20009e['push'](_0x20009e['shift']());}}}(_0x53b1,0x79859));import _0x540d9a from'./store.js';import{appendMessage,showTypingIndicator,hideTypingIndicator}from'./common.js';const defaultSettings={'apiUrl':_0x405d87(0x175),'apiToken':_0x405d87(0x182),'modelName':_0x405d87(0x17c),'maxTokens':0x1000,'temperature':0.7,'topP':0x1,'systemPrompt':_0x405d87(0x185)};let settings={...defaultSettings};function loadSettings(){const _0x4a4163=_0x405d87,_0x54b92d={'Ltpbd':_0x4a4163(0x173),'NvZGC':_0x4a4163(0x14d),'cKcpq':'modelName','VQbCi':_0x4a4163(0x183),'UZneH':_0x4a4163(0x150),'yuttk':_0x4a4163(0x187),'kjrsm':'topP','dqIUQ':'apiUrl'},_0x355b76=_0x54b92d['Ltpbd'][_0x4a4163(0x15e)]('|');let _0x4e0b45=0x0;while(!![]){switch(_0x355b76[_0x4e0b45++]){case'0':document['getElementById'](_0x54b92d['NvZGC'])[_0x4a4163(0x16e)]=settings['apiToken'];continue;case'1':document[_0x4a4163(0x142)](_0x54b92d[_0x4a4163(0x179)])[_0x4a4163(0x16e)]=settings[_0x4a4163(0x156)];continue;case'2':settings[_0x4a4163(0x183)]=_0x540d9a[_0x4a4163(0x16c)](_0x54b92d[_0x4a4163(0x16b)])||defaultSettings[_0x4a4163(0x183)];continue;case'3':settings[_0x4a4163(0x150)]=_0x540d9a[_0x4a4163(0x16c)](_0x54b92d[_0x4a4163(0x169)])||defaultSettings[_0x4a4163(0x150)];continue;case'4':settings[_0x4a4163(0x156)]=_0x540d9a[_0x4a4163(0x16c)](_0x4a4163(0x156))||defaultSettings['modelName'];continue;case'5':settings[_0x4a4163(0x187)]=_0x540d9a[_0x4a4163(0x16c)](_0x54b92d[_0x4a4163(0x16f)])||defaultSettings['temperature'];continue;case'6':settings['topP']=_0x540d9a[_0x4a4163(0x16c)](_0x54b92d['kjrsm'])||defaultSettings[_0x4a4163(0x171)];continue;case'7':settings[_0x4a4163(0x165)]=_0x540d9a['getItem'](_0x54b92d['dqIUQ'])||defaultSettings[_0x4a4163(0x165)];continue;case'8':document[_0x4a4163(0x142)](_0x54b92d[_0x4a4163(0x169)])['value']=settings[_0x4a4163(0x150)];continue;case'9':settings['apiToken']=_0x540d9a[_0x4a4163(0x16c)](_0x54b92d[_0x4a4163(0x174)])||defaultSettings['apiToken'];continue;case'10':document[_0x4a4163(0x142)](_0x54b92d[_0x4a4163(0x147)])[_0x4a4163(0x16e)]=settings[_0x4a4163(0x165)];continue;case'11':document[_0x4a4163(0x142)](_0x54b92d[_0x4a4163(0x17a)])[_0x4a4163(0x16e)]=settings[_0x4a4163(0x171)];continue;case'12':document[_0x4a4163(0x142)](_0x54b92d[_0x4a4163(0x16f)])[_0x4a4163(0x16e)]=settings[_0x4a4163(0x187)];continue;case'13':document[_0x4a4163(0x142)](_0x54b92d[_0x4a4163(0x16b)])[_0x4a4163(0x16e)]=settings['maxTokens'];continue;}break;}}function saveSettings(){const _0x26a692=_0x405d87,_0x2b663f={'wtIJe':'6|10|13|9|12|7|4|1|8|0|3|11|2|14|5','huYqj':_0x26a692(0x156),'pqRIO':_0x26a692(0x183),'xxivG':_0x26a692(0x150),'ojbjq':function(_0x163116){return _0x163116();},'MOANP':'apiToken','gkzUU':_0x26a692(0x187)},_0x58b59c=_0x2b663f['wtIJe'][_0x26a692(0x15e)]('|');let _0x337ea7=0x0;while(!![]){switch(_0x58b59c[_0x337ea7++]){case'0':_0x540d9a[_0x26a692(0x18b)](_0x2b663f['huYqj'],settings[_0x26a692(0x156)]);continue;case'1':_0x540d9a['setItem'](_0x26a692(0x165),settings[_0x26a692(0x165)]);continue;case'2':_0x540d9a['setItem'](_0x26a692(0x171),settings[_0x26a692(0x171)]);continue;case'3':_0x540d9a[_0x26a692(0x18b)](_0x2b663f['pqRIO'],settings[_0x26a692(0x183)]);continue;case'4':settings[_0x26a692(0x150)]=document[_0x26a692(0x142)](_0x2b663f[_0x26a692(0x141)])[_0x26a692(0x16e)];continue;case'5':_0x2b663f[_0x26a692(0x14c)](toggleSettings);continue;case'6':settings[_0x26a692(0x165)]=document[_0x26a692(0x142)](_0x26a692(0x165))[_0x26a692(0x16e)];continue;case'7':settings[_0x26a692(0x171)]=document['getElementById'](_0x26a692(0x171))[_0x26a692(0x16e)];continue;case'8':_0x540d9a[_0x26a692(0x18b)](_0x26a692(0x14d),settings['apiToken']);continue;case'9':settings[_0x26a692(0x183)]=document[_0x26a692(0x142)](_0x2b663f[_0x26a692(0x189)])[_0x26a692(0x16e)];continue;case'10':settings[_0x26a692(0x14d)]=document[_0x26a692(0x142)](_0x2b663f[_0x26a692(0x143)])[_0x26a692(0x16e)];continue;case'11':_0x540d9a[_0x26a692(0x18b)](_0x2b663f[_0x26a692(0x18d)],settings[_0x26a692(0x187)]);continue;case'12':settings[_0x26a692(0x187)]=document['getElementById'](_0x26a692(0x187))[_0x26a692(0x16e)];continue;case'13':settings['modelName']=document[_0x26a692(0x142)]('modelName')['value'];continue;case'14':_0x540d9a[_0x26a692(0x18b)](_0x26a692(0x150),settings[_0x26a692(0x150)]);continue;}break;}}function _0x5f26(_0x593393,_0x32c621){const _0x53b12a=_0x53b1();return _0x5f26=function(_0x5f2686,_0x3f96b1){_0x5f2686=_0x5f2686-0x13f;let _0x3abfb5=_0x53b12a[_0x5f2686];return _0x3abfb5;},_0x5f26(_0x593393,_0x32c621);}function toggleSettings(){const _0x548799=_0x405d87,_0x529c8f={'JlEck':_0x548799(0x164),'EFrWo':_0x548799(0x17f)},_0x3bfa3e=document[_0x548799(0x142)](_0x529c8f[_0x548799(0x160)]);_0x3bfa3e[_0x548799(0x15b)][_0x548799(0x14a)]=_0x3bfa3e[_0x548799(0x15b)]['display']===_0x529c8f[_0x548799(0x17e)]?_0x548799(0x149):_0x529c8f[_0x548799(0x17e)];}window[_0x405d87(0x177)]=toggleSettings,window[_0x405d87(0x145)]=sendMessage;async function sendMessage(){const _0x1c0cb4=_0x405d87,_0x36ad55={'bFHHe':function(_0x1664e2,_0x2d4769,_0x6a46e0,_0x3656f7){return _0x1664e2(_0x2d4769,_0x6a46e0,_0x3656f7);},'rPFnE':_0x1c0cb4(0x14e),'pVjHx':'user','wdcPz':_0x1c0cb4(0x14b),'EOiHV':function(_0xbd18a9,_0x293d61,_0x40c653){return _0xbd18a9(_0x293d61,_0x40c653);},'qMifT':_0x1c0cb4(0x151),'OCccM':_0x1c0cb4(0x144),'eJReQ':_0x1c0cb4(0x178),'WWnxm':function(_0x2d43d6,_0x192b53){return _0x2d43d6(_0x192b53);},'lnAEN':_0x1c0cb4(0x166),'FaMyM':function(_0x19507e){return _0x19507e();},'DYHbn':function(_0x5850db,_0x2d7d17){return _0x5850db>_0x2d7d17;},'gZLtC':function(_0x21d509,_0x502225){return _0x21d509(_0x502225);},'hEXJa':_0x1c0cb4(0x16a),'krDnq':'Error:\x20Failed\x20to\x20fetch\x20AI\x20response:\x20','mooav':function(_0x504d11){return _0x504d11();}},_0x5e20bd=document[_0x1c0cb4(0x142)](_0x1c0cb4(0x14b))[_0x1c0cb4(0x16e)];if(!_0x5e20bd)return;_0x36ad55[_0x1c0cb4(0x158)](appendMessage,document['getElementById'](_0x36ad55[_0x1c0cb4(0x15c)]),_0x5e20bd,_0x36ad55[_0x1c0cb4(0x168)]),document[_0x1c0cb4(0x142)](_0x36ad55[_0x1c0cb4(0x154)])[_0x1c0cb4(0x16e)]='',showTypingIndicator(document[_0x1c0cb4(0x142)](_0x36ad55[_0x1c0cb4(0x15c)]),'AI\x20is\x20typing...');try{const _0x212bfd=await _0x36ad55[_0x1c0cb4(0x159)](fetch,settings[_0x1c0cb4(0x165)]+_0x1c0cb4(0x148),{'method':_0x36ad55[_0x1c0cb4(0x162)],'headers':{'Authorization':_0x1c0cb4(0x16d)+settings[_0x1c0cb4(0x14d)],'Content-Type':_0x36ad55[_0x1c0cb4(0x140)]},'body':JSON['stringify']({'model':settings[_0x1c0cb4(0x156)],'messages':[{'role':_0x36ad55['eJReQ'],'content':settings['systemPrompt']},{'role':_0x1c0cb4(0x18a),'content':_0x5e20bd}],'max_tokens':_0x36ad55[_0x1c0cb4(0x15f)](parseInt,settings[_0x1c0cb4(0x183)]),'temperature':_0x36ad55[_0x1c0cb4(0x15f)](parseFloat,settings[_0x1c0cb4(0x187)]),'top_p':parseFloat(settings[_0x1c0cb4(0x171)]),'frequency_penalty':0.5,'seed':0x1,'response_format':{'type':_0x36ad55['lnAEN']}})}),_0x511b38=await _0x212bfd['json']();_0x36ad55[_0x1c0cb4(0x161)](hideTypingIndicator);if(_0x511b38[_0x1c0cb4(0x15a)]&&_0x36ad55[_0x1c0cb4(0x155)](_0x511b38[_0x1c0cb4(0x15a)][_0x1c0cb4(0x163)],0x0)){const _0x3462d9=_0x511b38[_0x1c0cb4(0x15a)][0x0][_0x1c0cb4(0x17b)][_0x1c0cb4(0x152)];appendMessage(document['getElementById'](_0x1c0cb4(0x14e)),_0x3462d9,'ai');let _0x4a436d;try{_0x4a436d=JSON[_0x1c0cb4(0x172)](_0x3462d9),_0x36ad55[_0x1c0cb4(0x186)](appendQuiz,_0x4a436d);}catch(_0x4c25db){appendMessage(document['getElementById'](_0x1c0cb4(0x14e)),_0x36ad55[_0x1c0cb4(0x188)],'ai');}}}catch(_0x3a9ef3){_0x36ad55[_0x1c0cb4(0x158)](appendMessage,document[_0x1c0cb4(0x142)]('chat-window'),_0x36ad55['krDnq']+_0x3a9ef3[_0x1c0cb4(0x17b)],'ai');}finally{_0x36ad55['mooav'](hideTypingIndicator);}}function speakMessage(_0x4547fc){const _0x592292=_0x405d87,_0x2356c5={'ZfLTb':_0x592292(0x176)},_0x729124=new SpeechSynthesisUtterance(_0x4547fc);_0x729124[_0x592292(0x17d)]=_0x2356c5[_0x592292(0x18c)],window['speechSynthesis'][_0x592292(0x180)](_0x729124);}window['onload']=loadSettings;