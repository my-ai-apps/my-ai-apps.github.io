
/*!
Copyright © 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x177533=_0x1c8d;function _0x1c8d(_0x394d42,_0x5247c7){const _0x4125dc=_0x4125();return _0x1c8d=function(_0x1c8d4c,_0x347e13){_0x1c8d4c=_0x1c8d4c-0x11b;let _0x3c2415=_0x4125dc[_0x1c8d4c];return _0x3c2415;},_0x1c8d(_0x394d42,_0x5247c7);}(function(_0x5744b6,_0x1b3204){const _0x1b7ee3=_0x1c8d,_0x32c4c2=_0x5744b6();while(!![]){try{const _0x42b4f7=-parseInt(_0x1b7ee3(0x127))/0x1+parseInt(_0x1b7ee3(0x159))/0x2*(-parseInt(_0x1b7ee3(0x161))/0x3)+-parseInt(_0x1b7ee3(0x126))/0x4+parseInt(_0x1b7ee3(0x137))/0x5*(-parseInt(_0x1b7ee3(0x157))/0x6)+parseInt(_0x1b7ee3(0x151))/0x7*(-parseInt(_0x1b7ee3(0x142))/0x8)+-parseInt(_0x1b7ee3(0x131))/0x9+parseInt(_0x1b7ee3(0x13d))/0xa;if(_0x42b4f7===_0x1b3204)break;else _0x32c4c2['push'](_0x32c4c2['shift']());}catch(_0x22fffb){_0x32c4c2['push'](_0x32c4c2['shift']());}}}(_0x4125,0xec440));import _0x41b603 from'./store.js';import{appendMessage,showTypingIndicator,hideTypingIndicator}from'./common.js';const defaultSettings={'apiUrl':_0x177533(0x136),'apiToken':_0x177533(0x155),'modelName':_0x177533(0x156),'maxTokens':0x1000,'temperature':0.7,'topP':0x1,'systemPrompt':_0x177533(0x153)};let settings={...defaultSettings};function loadSettings(){const _0x447dcd=_0x177533,_0xbd7b8={'XhUvi':_0x447dcd(0x11c),'QSnpc':_0x447dcd(0x13e),'zCgnc':_0x447dcd(0x149),'ylHPu':_0x447dcd(0x14d),'XNULk':'maxTokens','mRFaO':'topP','BFYHq':'systemPrompt'};settings[_0x447dcd(0x11c)]=_0x41b603['getItem'](_0xbd7b8['XhUvi'])||defaultSettings['apiUrl'],settings[_0x447dcd(0x13e)]=_0x41b603[_0x447dcd(0x124)](_0xbd7b8['QSnpc'])||defaultSettings[_0x447dcd(0x13e)],settings[_0x447dcd(0x149)]=_0x41b603[_0x447dcd(0x124)](_0xbd7b8[_0x447dcd(0x13a)])||defaultSettings[_0x447dcd(0x149)],settings[_0x447dcd(0x158)]=_0x41b603[_0x447dcd(0x124)]('maxTokens')||defaultSettings['maxTokens'],settings[_0x447dcd(0x14d)]=_0x41b603[_0x447dcd(0x124)](_0xbd7b8['ylHPu'])||defaultSettings['temperature'],settings['topP']=_0x41b603[_0x447dcd(0x124)]('topP')||defaultSettings[_0x447dcd(0x146)],settings[_0x447dcd(0x15b)]=_0x41b603[_0x447dcd(0x124)](_0x447dcd(0x15b))||defaultSettings[_0x447dcd(0x15b)],document[_0x447dcd(0x12e)](_0xbd7b8['XhUvi'])[_0x447dcd(0x139)]=settings['apiUrl'],document[_0x447dcd(0x12e)](_0xbd7b8[_0x447dcd(0x11f)])['value']=settings[_0x447dcd(0x13e)],document[_0x447dcd(0x12e)](_0x447dcd(0x149))[_0x447dcd(0x139)]=settings[_0x447dcd(0x149)],document[_0x447dcd(0x12e)](_0xbd7b8[_0x447dcd(0x128)])[_0x447dcd(0x139)]=settings['maxTokens'],document[_0x447dcd(0x12e)](_0x447dcd(0x14d))[_0x447dcd(0x139)]=settings['temperature'],document[_0x447dcd(0x12e)](_0xbd7b8['mRFaO'])[_0x447dcd(0x139)]=settings['topP'],document[_0x447dcd(0x12e)](_0xbd7b8[_0x447dcd(0x125)])['value']=settings[_0x447dcd(0x15b)];}function saveSettings(){const _0x3031fb=_0x177533,_0x27e4f1={'teOFq':'apiUrl','FCRMS':'apiToken','liKdx':'modelName','oUYOg':_0x3031fb(0x158),'NSZvF':_0x3031fb(0x146),'aOXRz':_0x3031fb(0x15b),'DOHSX':function(_0x1fcb9e){return _0x1fcb9e();}};settings[_0x3031fb(0x11c)]=document[_0x3031fb(0x12e)](_0x27e4f1[_0x3031fb(0x147)])['value'],settings[_0x3031fb(0x13e)]=document['getElementById'](_0x27e4f1[_0x3031fb(0x11e)])[_0x3031fb(0x139)],settings[_0x3031fb(0x149)]=document['getElementById'](_0x27e4f1['liKdx'])[_0x3031fb(0x139)],settings[_0x3031fb(0x158)]=document[_0x3031fb(0x12e)](_0x27e4f1[_0x3031fb(0x160)])[_0x3031fb(0x139)],settings['temperature']=document[_0x3031fb(0x12e)](_0x3031fb(0x14d))[_0x3031fb(0x139)],settings[_0x3031fb(0x146)]=document[_0x3031fb(0x12e)](_0x27e4f1[_0x3031fb(0x122)])[_0x3031fb(0x139)],settings[_0x3031fb(0x15b)]=document['getElementById'](_0x27e4f1[_0x3031fb(0x135)])[_0x3031fb(0x139)],_0x41b603[_0x3031fb(0x15a)](_0x27e4f1[_0x3031fb(0x147)],settings[_0x3031fb(0x11c)]),_0x41b603[_0x3031fb(0x15a)](_0x27e4f1['FCRMS'],settings[_0x3031fb(0x13e)]),_0x41b603[_0x3031fb(0x15a)](_0x27e4f1[_0x3031fb(0x14b)],settings[_0x3031fb(0x149)]),_0x41b603[_0x3031fb(0x15a)](_0x27e4f1['oUYOg'],settings[_0x3031fb(0x158)]),_0x41b603[_0x3031fb(0x15a)](_0x3031fb(0x14d),settings[_0x3031fb(0x14d)]),_0x41b603[_0x3031fb(0x15a)](_0x27e4f1[_0x3031fb(0x122)],settings[_0x3031fb(0x146)]),_0x41b603[_0x3031fb(0x15a)](_0x27e4f1[_0x3031fb(0x135)],settings['systemPrompt']),_0x27e4f1['DOHSX'](toggleSettings);}function _0x4125(){const _0x4ba327=['QSnpc','AzWQS','saqSA','NSZvF','user','getItem','BFYHq','1349768fFvWCy','1643224FmUZQD','XNULk','zJaqI','Bearer\x20','speechSynthesis','user-input','flex','getElementById','uwhge','TNQIl','8113248uNMhCo','speak','display','Error:\x20Could\x20not\x20parse\x20JSON\x20response.','aOXRz','http://localhost:1234/v1','45jCgxHm','BuThD','value','zCgnc','toggleSettings','POST','69956110nBRAmH','apiToken','HyTRs','none','chat-window','1326776DPvNuZ','content','Jcolm','raGaO','topP','teOFq','Vanfk','modelName','style','liKdx','tXFcK','temperature','LPKIa','en-US','eQvmU','28AQJcAa','TgdCV','Based\x20on\x20the\x20user’s\x20input,\x20determine\x20the\x20intended\x20quiz\x20topic.\x20Create\x20a\x20JSON\x20object\x20containing\x20a\x20set\x20of\x205\x20multiple-choice\x20questions\x20relevant\x20to\x20that\x20topic.\x20Each\x20question\x20should\x20include\x20the\x20fields\x20\x27question\x27\x20(the\x20quiz\x20question),\x20\x27options\x27\x20(single\x20answer\x20choice).\x20Format\x20the\x20output\x20to\x20the\x20pattern\x20below\x20{\x20\x27topic\x27:\x20\x27example_topic\x27,\x20\x27questions\x27:\x20[\x20{\x20\x27question\x27:\x20\x27Example\x20question?\x27,\x20\x27options\x27:\x20[\x27Option\x20A\x27],\x20\x27correctAnswer\x27:\x20\x27Option\x20B\x27\x20}\x20]\x20}','AIbZK','sk-proj-66666666666666666666666666666666','openai/Qwen2.5','462288ZZmFtC','maxTokens','318sspLhd','setItem','systemPrompt','kBZyF','parse','WtBWh','sendMessage','oUYOg','33753tPkZHv','lang','qDFan','apiUrl','choices','FCRMS'];_0x4125=function(){return _0x4ba327;};return _0x4125();}function toggleSettings(){const _0x1b5720=_0x177533,_0x1e326b={'TNQIl':'settings','BuThD':_0x1b5720(0x12d)},_0x3d8e37=document[_0x1b5720(0x12e)](_0x1e326b[_0x1b5720(0x130)]);_0x3d8e37[_0x1b5720(0x14a)][_0x1b5720(0x133)]=_0x3d8e37[_0x1b5720(0x14a)][_0x1b5720(0x133)]===_0x1b5720(0x12d)?_0x1b5720(0x140):_0x1e326b[_0x1b5720(0x138)];}window[_0x177533(0x13b)]=toggleSettings,window[_0x177533(0x15f)]=sendMessage;async function sendMessage(){const _0x289aa1=_0x177533,_0xd2e8d4={'AzWQS':_0x289aa1(0x12c),'kBZyF':'chat-window','raGaO':_0x289aa1(0x123),'saqSA':'AI\x20is\x20typing...','Jcolm':function(_0xdaf49c,_0x2959ef,_0xf9a357){return _0xdaf49c(_0x2959ef,_0xf9a357);},'TgdCV':_0x289aa1(0x13c),'LPKIa':'application/json','BysSo':'system','mJaPU':function(_0x30c31d,_0x8d6039){return _0x30c31d(_0x8d6039);},'tXFcK':'json_object','eQvmU':function(_0x3151e1){return _0x3151e1();},'hVIEW':function(_0x153c75,_0x4d3345){return _0x153c75>_0x4d3345;},'AIbZK':function(_0xa8ccc7,_0x5713fc,_0x5d139d,_0x2e6a9f){return _0xa8ccc7(_0x5713fc,_0x5d139d,_0x2e6a9f);},'wAcdh':function(_0x1c302c,_0x2f3308){return _0x1c302c(_0x2f3308);},'WtBWh':function(_0x11844d,_0x14b8e6,_0x23661e,_0x57323e){return _0x11844d(_0x14b8e6,_0x23661e,_0x57323e);},'qDFan':_0x289aa1(0x134),'Vanfk':function(_0x52f9af,_0x570bce,_0x3a2c50,_0x799846){return _0x52f9af(_0x570bce,_0x3a2c50,_0x799846);},'HyTRs':function(_0x365853,_0x200085){return _0x365853+_0x200085;},'zJaqI':'Error:\x20Failed\x20to\x20fetch\x20AI\x20response:\x20'},_0x33fb35=document[_0x289aa1(0x12e)](_0xd2e8d4['AzWQS'])[_0x289aa1(0x139)];if(!_0x33fb35)return;appendMessage(document[_0x289aa1(0x12e)](_0xd2e8d4['kBZyF']),_0x33fb35,_0xd2e8d4[_0x289aa1(0x145)]),document[_0x289aa1(0x12e)](_0xd2e8d4[_0x289aa1(0x120)])[_0x289aa1(0x139)]='',showTypingIndicator(document[_0x289aa1(0x12e)](_0xd2e8d4[_0x289aa1(0x15c)]),_0xd2e8d4[_0x289aa1(0x121)]);try{const _0x49df25=await _0xd2e8d4[_0x289aa1(0x144)](fetch,settings[_0x289aa1(0x11c)]+'/chat/completions',{'method':_0xd2e8d4[_0x289aa1(0x152)],'headers':{'Authorization':_0x289aa1(0x12a)+settings[_0x289aa1(0x13e)],'Content-Type':_0xd2e8d4[_0x289aa1(0x14e)]},'body':JSON['stringify']({'model':settings[_0x289aa1(0x149)],'messages':[{'role':_0xd2e8d4['BysSo'],'content':settings[_0x289aa1(0x15b)]},{'role':_0xd2e8d4[_0x289aa1(0x145)],'content':_0x33fb35}],'max_tokens':parseInt(settings['maxTokens']),'temperature':_0xd2e8d4['mJaPU'](parseFloat,settings[_0x289aa1(0x14d)]),'top_p':parseFloat(settings[_0x289aa1(0x146)]),'frequency_penalty':0.5,'seed':0x1,'response_format':{'type':_0xd2e8d4[_0x289aa1(0x14c)]}})}),_0x58dc0f=await _0x49df25['json']();_0xd2e8d4[_0x289aa1(0x150)](hideTypingIndicator);if(_0x58dc0f[_0x289aa1(0x11d)]&&_0xd2e8d4['hVIEW'](_0x58dc0f['choices']['length'],0x0)){const _0x41835d=_0x58dc0f[_0x289aa1(0x11d)][0x0]['message'][_0x289aa1(0x143)];_0xd2e8d4[_0x289aa1(0x154)](appendMessage,document['getElementById'](_0x289aa1(0x141)),_0x41835d,'ai');let _0x5b907c;try{_0x5b907c=JSON[_0x289aa1(0x15d)](_0x41835d),_0xd2e8d4['wAcdh'](appendQuiz,_0x5b907c);}catch(_0x176862){_0xd2e8d4[_0x289aa1(0x15e)](appendMessage,document[_0x289aa1(0x12e)](_0xd2e8d4[_0x289aa1(0x15c)]),_0xd2e8d4[_0x289aa1(0x11b)],'ai');}}}catch(_0x3f3cc1){_0xd2e8d4[_0x289aa1(0x148)](appendMessage,document['getElementById'](_0xd2e8d4['kBZyF']),_0xd2e8d4[_0x289aa1(0x13f)](_0xd2e8d4[_0x289aa1(0x129)],_0x3f3cc1['message']),'ai');}finally{hideTypingIndicator();}}function speakMessage(_0x53f6d8){const _0xb5f72c=_0x177533,_0xacac60={'uwhge':_0xb5f72c(0x14f)},_0x112979=new SpeechSynthesisUtterance(_0x53f6d8);_0x112979[_0xb5f72c(0x162)]=_0xacac60[_0xb5f72c(0x12f)],window[_0xb5f72c(0x12b)][_0xb5f72c(0x132)](_0x112979);}window['onload']=loadSettings;