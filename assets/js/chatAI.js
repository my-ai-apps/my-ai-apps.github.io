
/*!
Copyright © 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x1aaae7=_0x1ae7;(function(_0x119d26,_0xf45c8b){const _0x495224=_0x1ae7,_0x44e740=_0x119d26();while(!![]){try{const _0x545689=parseInt(_0x495224(0x1e8))/0x1*(parseInt(_0x495224(0x215))/0x2)+-parseInt(_0x495224(0x20d))/0x3+parseInt(_0x495224(0x204))/0x4*(-parseInt(_0x495224(0x203))/0x5)+parseInt(_0x495224(0x1da))/0x6+parseInt(_0x495224(0x1f3))/0x7+parseInt(_0x495224(0x1e2))/0x8*(parseInt(_0x495224(0x1fd))/0x9)+parseInt(_0x495224(0x1f2))/0xa*(-parseInt(_0x495224(0x1ca))/0xb);if(_0x545689===_0xf45c8b)break;else _0x44e740['push'](_0x44e740['shift']());}catch(_0x5611ac){_0x44e740['push'](_0x44e740['shift']());}}}(_0x5182,0xd6e86));import _0x3292ba from'./store.js';import{appendMessage,showTypingIndicator,hideTypingIndicator}from'./common.js';const defaultSettings={'apiUrl':_0x1aaae7(0x1d1),'apiToken':_0x1aaae7(0x208),'modelName':_0x1aaae7(0x213),'maxTokens':0x1000,'temperature':0.7,'topP':0x1,'systemPrompt':_0x1aaae7(0x209)};let settings={...defaultSettings};function loadSettings(){const _0x71087c=_0x1aaae7,_0x25437d={'uYdmi':'11|12|9|1|6|3|10|8|2|5|4|13|7|0','rysKf':_0x71087c(0x212),'CtZyh':_0x71087c(0x1f8),'SUImT':_0x71087c(0x20c),'DCnJT':'modelName','DsPoo':_0x71087c(0x1e0),'YOLeg':_0x71087c(0x1fc)},_0x3463db=_0x25437d[_0x71087c(0x1ff)]['split']('|');let _0x307bba=0x0;while(!![]){switch(_0x3463db[_0x307bba++]){case'0':document[_0x71087c(0x205)](_0x25437d['rysKf'])[_0x71087c(0x1d6)]=settings[_0x71087c(0x212)];continue;case'1':settings[_0x71087c(0x1f8)]=_0x3292ba[_0x71087c(0x1cb)](_0x25437d[_0x71087c(0x206)])||defaultSettings[_0x71087c(0x1f8)];continue;case'2':document['getElementById']('apiToken')[_0x71087c(0x1d6)]=settings['apiToken'];continue;case'3':settings[_0x71087c(0x20c)]=_0x3292ba[_0x71087c(0x1cb)](_0x25437d[_0x71087c(0x1ea)])||defaultSettings['topP'];continue;case'4':document[_0x71087c(0x205)](_0x25437d['CtZyh'])[_0x71087c(0x1d6)]=settings[_0x71087c(0x1f8)];continue;case'5':document[_0x71087c(0x205)](_0x25437d[_0x71087c(0x1ee)])[_0x71087c(0x1d6)]=settings[_0x71087c(0x1cc)];continue;case'6':settings['temperature']=_0x3292ba[_0x71087c(0x1cb)](_0x25437d[_0x71087c(0x1db)])||defaultSettings[_0x71087c(0x1e0)];continue;case'7':document[_0x71087c(0x205)](_0x25437d[_0x71087c(0x1ea)])[_0x71087c(0x1d6)]=settings['topP'];continue;case'8':document[_0x71087c(0x205)](_0x25437d['YOLeg'])[_0x71087c(0x1d6)]=settings['apiUrl'];continue;case'9':settings['modelName']=_0x3292ba['getItem'](_0x25437d[_0x71087c(0x1ee)])||defaultSettings[_0x71087c(0x1cc)];continue;case'10':settings['systemPrompt']=_0x3292ba['getItem'](_0x25437d['rysKf'])||defaultSettings[_0x71087c(0x212)];continue;case'11':settings[_0x71087c(0x1fc)]=_0x3292ba['getItem'](_0x25437d[_0x71087c(0x1e6)])||defaultSettings[_0x71087c(0x1fc)];continue;case'12':settings[_0x71087c(0x207)]=_0x3292ba[_0x71087c(0x1cb)]('apiToken')||defaultSettings[_0x71087c(0x207)];continue;case'13':document[_0x71087c(0x205)](_0x25437d[_0x71087c(0x1db)])[_0x71087c(0x1d6)]=settings[_0x71087c(0x1e0)];continue;}break;}}function _0x5182(){const _0xa9f99=['3967689vjLErd','JuUCY','aGsyO','sendMessage','Bearer\x20','systemPrompt','openai/Qwen2.5','oNKFt','86hnSPjK','KJVfI','22ksOAMx','getItem','modelName','Gswwp','Error:\x20Failed\x20to\x20fetch\x20AI\x20response:\x20','length','display','http://localhost:1234/v1','XZmCn','/chat/completions','CsdqA','POST','value','ACeYD','CbaNJ','dEuZN','1296366wRHYge','DsPoo','XvdHw','xLCza','GTdje','nqBOE','temperature','choices','4064248LEgVnX','speechSynthesis','thbxO','split','YOLeg','flex','37092JpPhBz','speak','SUImT','user','lang','content','DCnJT','11|10|13|8|6|4|1|3|2|5|14|12|0|9|7','style','yGbYk','1176170mwTttG','3415685fMpslY','stringify','message','settings','aaCMm','maxTokens','en-US','application/json','user-input','apiUrl','27whdDqa','WFkBP','uYdmi','system','chat-window','bsjeX','989290sDnaqb','28yESlUx','getElementById','CtZyh','apiToken','sk-proj-66666666666666666666666666666666','Based\x20on\x20the\x20user’s\x20input,\x20determine\x20the\x20intended\x20quiz\x20topic.\x20Create\x20a\x20JSON\x20object\x20containing\x20a\x20set\x20of\x205\x20multiple-choice\x20questions\x20relevant\x20to\x20that\x20topic.\x20Each\x20question\x20should\x20include\x20the\x20fields\x20\x27question\x27\x20(the\x20quiz\x20question),\x20\x27options\x27\x20(single\x20answer\x20choice).\x20Format\x20the\x20output\x20to\x20the\x20pattern\x20below\x20{\x20\x27topic\x27:\x20\x27example_topic\x27,\x20\x27questions\x27:\x20[\x20{\x20\x27question\x27:\x20\x27Example\x20question?\x27,\x20\x27options\x27:\x20[\x27Option\x20A\x27],\x20\x27correctAnswer\x27:\x20\x27Option\x20B\x27\x20}\x20]\x20}','setItem','parse','topP'];_0x5182=function(){return _0xa9f99;};return _0x5182();}function saveSettings(){const _0x3dedf3=_0x1aaae7,_0x5cb6e4={'KJVfI':_0x3dedf3(0x1ef),'yOthR':_0x3dedf3(0x20c),'yGbYk':'systemPrompt','OUWhQ':_0x3dedf3(0x1fc),'aGsyO':function(_0x1c9c3f){return _0x1c9c3f();},'CsdqA':_0x3dedf3(0x1f8),'GTdje':_0x3dedf3(0x1e0),'yUrNT':'modelName'},_0x2047ae=_0x5cb6e4[_0x3dedf3(0x216)][_0x3dedf3(0x1e5)]('|');let _0x5815a5=0x0;while(!![]){switch(_0x2047ae[_0x5815a5++]){case'0':_0x3292ba[_0x3dedf3(0x20a)](_0x5cb6e4['yOthR'],settings[_0x3dedf3(0x20c)]);continue;case'1':settings[_0x3dedf3(0x212)]=document[_0x3dedf3(0x205)](_0x5cb6e4[_0x3dedf3(0x1f1)])[_0x3dedf3(0x1d6)];continue;case'2':_0x3292ba[_0x3dedf3(0x20a)](_0x3dedf3(0x207),settings[_0x3dedf3(0x207)]);continue;case'3':_0x3292ba[_0x3dedf3(0x20a)](_0x5cb6e4['OUWhQ'],settings[_0x3dedf3(0x1fc)]);continue;case'4':settings[_0x3dedf3(0x20c)]=document[_0x3dedf3(0x205)]('topP')['value'];continue;case'5':_0x3292ba[_0x3dedf3(0x20a)](_0x3dedf3(0x1cc),settings[_0x3dedf3(0x1cc)]);continue;case'6':settings['temperature']=document[_0x3dedf3(0x205)](_0x3dedf3(0x1e0))[_0x3dedf3(0x1d6)];continue;case'7':_0x5cb6e4[_0x3dedf3(0x20f)](toggleSettings);continue;case'8':settings['maxTokens']=document[_0x3dedf3(0x205)](_0x5cb6e4[_0x3dedf3(0x1d4)])['value'];continue;case'9':_0x3292ba[_0x3dedf3(0x20a)](_0x5cb6e4[_0x3dedf3(0x1f1)],settings['systemPrompt']);continue;case'10':settings[_0x3dedf3(0x207)]=document[_0x3dedf3(0x205)]('apiToken')[_0x3dedf3(0x1d6)];continue;case'11':settings[_0x3dedf3(0x1fc)]=document[_0x3dedf3(0x205)]('apiUrl')[_0x3dedf3(0x1d6)];continue;case'12':_0x3292ba[_0x3dedf3(0x20a)](_0x5cb6e4[_0x3dedf3(0x1de)],settings[_0x3dedf3(0x1e0)]);continue;case'13':settings[_0x3dedf3(0x1cc)]=document[_0x3dedf3(0x205)](_0x5cb6e4['yUrNT'])[_0x3dedf3(0x1d6)];continue;case'14':_0x3292ba[_0x3dedf3(0x20a)](_0x5cb6e4[_0x3dedf3(0x1d4)],settings[_0x3dedf3(0x1f8)]);continue;}break;}}function toggleSettings(){const _0xcc1b8a=_0x1aaae7,_0x213c17={'dEuZN':_0xcc1b8a(0x1f6),'XvdHw':function(_0x47ba18,_0x45e3b1){return _0x47ba18===_0x45e3b1;}},_0x5dab52=document[_0xcc1b8a(0x205)](_0x213c17[_0xcc1b8a(0x1d9)]);_0x5dab52[_0xcc1b8a(0x1f0)]['display']=_0x213c17[_0xcc1b8a(0x1dc)](_0x5dab52[_0xcc1b8a(0x1f0)][_0xcc1b8a(0x1d0)],_0xcc1b8a(0x1e7))?'none':'flex';}window['toggleSettings']=toggleSettings,window[_0x1aaae7(0x210)]=sendMessage;async function sendMessage(){const _0x1f025d=_0x1aaae7,_0x3b40b8={'WFkBP':function(_0x49baa3,_0x338623,_0x40c34d,_0x52321b){return _0x49baa3(_0x338623,_0x40c34d,_0x52321b);},'oNKFt':_0x1f025d(0x201),'aaCMm':_0x1f025d(0x1fb),'Gswwp':function(_0x32d888,_0x4fe278,_0x10a30f){return _0x32d888(_0x4fe278,_0x10a30f);},'jtGlg':'AI\x20is\x20typing...','fYePL':function(_0x24cf54,_0x1c6980,_0x39b51a){return _0x24cf54(_0x1c6980,_0x39b51a);},'FmeeN':_0x1f025d(0x1d5),'nqBOE':_0x1f025d(0x200),'XZmCn':_0x1f025d(0x1eb),'JuUCY':function(_0x471655,_0x25ee5e){return _0x471655(_0x25ee5e);},'CbaNJ':function(_0x480663,_0xfd4007){return _0x480663(_0xfd4007);},'xLCza':'json_object','CfimL':function(_0x35ee7f){return _0x35ee7f();},'mYUio':function(_0x2540c2,_0x254595){return _0x2540c2+_0x254595;},'bsjeX':_0x1f025d(0x1ce),'ACeYD':function(_0x2bfa87){return _0x2bfa87();}},_0x2fc0be=document[_0x1f025d(0x205)](_0x1f025d(0x1fb))[_0x1f025d(0x1d6)];if(!_0x2fc0be)return;_0x3b40b8[_0x1f025d(0x1fe)](appendMessage,document[_0x1f025d(0x205)](_0x3b40b8[_0x1f025d(0x214)]),_0x2fc0be,_0x1f025d(0x1eb)),document[_0x1f025d(0x205)](_0x3b40b8[_0x1f025d(0x1f7)])[_0x1f025d(0x1d6)]='',_0x3b40b8[_0x1f025d(0x1cd)](showTypingIndicator,document[_0x1f025d(0x205)](_0x1f025d(0x201)),_0x3b40b8['jtGlg']);try{const _0x51d145=await _0x3b40b8['fYePL'](fetch,settings['apiUrl']+_0x1f025d(0x1d3),{'method':_0x3b40b8['FmeeN'],'headers':{'Authorization':_0x1f025d(0x211)+settings[_0x1f025d(0x207)],'Content-Type':_0x1f025d(0x1fa)},'body':JSON[_0x1f025d(0x1f4)]({'model':settings['modelName'],'messages':[{'role':_0x3b40b8[_0x1f025d(0x1df)],'content':settings[_0x1f025d(0x212)]},{'role':_0x3b40b8[_0x1f025d(0x1d2)],'content':_0x2fc0be}],'max_tokens':_0x3b40b8['JuUCY'](parseInt,settings['maxTokens']),'temperature':_0x3b40b8[_0x1f025d(0x20e)](parseFloat,settings[_0x1f025d(0x1e0)]),'top_p':_0x3b40b8[_0x1f025d(0x1d8)](parseFloat,settings[_0x1f025d(0x20c)]),'frequency_penalty':0.5,'seed':0x1,'response_format':{'type':_0x3b40b8[_0x1f025d(0x1dd)]}})}),_0xccebc4=await _0x51d145['json']();_0x3b40b8['CfimL'](hideTypingIndicator);if(_0xccebc4['choices']&&_0xccebc4[_0x1f025d(0x1e1)][_0x1f025d(0x1cf)]>0x0){const _0x5a0222=_0xccebc4['choices'][0x0][_0x1f025d(0x1f5)][_0x1f025d(0x1ed)];_0x3b40b8[_0x1f025d(0x1fe)](appendMessage,document['getElementById'](_0x3b40b8[_0x1f025d(0x214)]),_0x5a0222,'ai');let _0x396efa;try{_0x396efa=JSON[_0x1f025d(0x20b)](_0x5a0222),appendQuiz(_0x396efa);}catch(_0x9d7a1f){appendMessage(document[_0x1f025d(0x205)](_0x3b40b8[_0x1f025d(0x214)]),'Error:\x20Could\x20not\x20parse\x20JSON\x20response.','ai');}}}catch(_0x2c3159){_0x3b40b8[_0x1f025d(0x1fe)](appendMessage,document[_0x1f025d(0x205)](_0x3b40b8[_0x1f025d(0x214)]),_0x3b40b8['mYUio'](_0x3b40b8[_0x1f025d(0x202)],_0x2c3159['message']),'ai');}finally{_0x3b40b8[_0x1f025d(0x1d7)](hideTypingIndicator);}}function _0x1ae7(_0x3ee53f,_0x35857f){const _0x5182f5=_0x5182();return _0x1ae7=function(_0x1ae740,_0x528175){_0x1ae740=_0x1ae740-0x1ca;let _0x3c6a36=_0x5182f5[_0x1ae740];return _0x3c6a36;},_0x1ae7(_0x3ee53f,_0x35857f);}function speakMessage(_0x5eae89){const _0x2eef86=_0x1aaae7,_0x1935ae={'thbxO':_0x2eef86(0x1f9)},_0x534927=new SpeechSynthesisUtterance(_0x5eae89);_0x534927[_0x2eef86(0x1ec)]=_0x1935ae[_0x2eef86(0x1e4)],window[_0x2eef86(0x1e3)][_0x2eef86(0x1e9)](_0x534927);}window['onload']=loadSettings;