
/*!
Copyright © 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x320ac7=_0x39c6;(function(_0x3a73e8,_0x87f7e6){const _0x2845cc=_0x39c6,_0x5cbebe=_0x3a73e8();while(!![]){try{const _0x118f4e=-parseInt(_0x2845cc(0x112))/0x1+parseInt(_0x2845cc(0x135))/0x2+parseInt(_0x2845cc(0x116))/0x3+parseInt(_0x2845cc(0x113))/0x4+-parseInt(_0x2845cc(0x106))/0x5*(parseInt(_0x2845cc(0x141))/0x6)+-parseInt(_0x2845cc(0x12d))/0x7+parseInt(_0x2845cc(0x122))/0x8;if(_0x118f4e===_0x87f7e6)break;else _0x5cbebe['push'](_0x5cbebe['shift']());}catch(_0x198cef){_0x5cbebe['push'](_0x5cbebe['shift']());}}}(_0x4435,0x625b4));import _0x4d9327 from'./store.js';import{appendMessage,showTypingIndicator,hideTypingIndicator}from'./common.js';const defaultSettings={'apiUrl':'http://localhost:1234/v1','apiToken':_0x320ac7(0x131),'modelName':_0x320ac7(0x10d),'maxTokens':0x1000,'temperature':0.7,'topP':0x1,'systemPrompt':'Based\x20on\x20the\x20user’s\x20input,\x20determine\x20the\x20intended\x20quiz\x20topic.\x20Create\x20a\x20JSON\x20object\x20containing\x20a\x20set\x20of\x205\x20multiple-choice\x20questions\x20relevant\x20to\x20that\x20topic.\x20Each\x20question\x20should\x20include\x20the\x20fields\x20\x27question\x27\x20(the\x20quiz\x20question),\x20\x27options\x27\x20(single\x20answer\x20choice).\x20Format\x20the\x20output\x20to\x20the\x20pattern\x20below\x20{\x20\x27topic\x27:\x20\x27example_topic\x27,\x20\x27questions\x27:\x20[\x20{\x20\x27question\x27:\x20\x27Example\x20question?\x27,\x20\x27options\x27:\x20[\x27Option\x20A\x27],\x20\x27correctAnswer\x27:\x20\x27Option\x20B\x27\x20}\x20]\x20}'};let settings={...defaultSettings};function _0x4435(){const _0x4fca26=['1687135qFVHWV','fqikT','chat-window','getItem','parse','eUmts','Bearer\x20','openai/Qwen2.5','fgpaW','speak','display','/chat/completions','164637kHWUXg','3086260dUQQwj','choices','getElementById','2380128sUAzyl','CsDVa','NebSn','setItem','lang','application/json','jADby','settings','ZsSgr','topP','json','AI\x20is\x20typing...','999648xFZcdr','stringify','temperature','mvgrY','tYaor','DINWo','systemPrompt','wuYvL','POST','LzHsf','length','4852323BZDqaz','user-input','apiUrl','user','sk-proj-66666666666666666666666666666666','onload','speechSynthesis','value','491302QDJans','split','UGzxT','message','maxTokens','dBXty','content','aOxBn','toggleSettings','MSUTz','ihlqc','9|2|0|6|7|14|4|8|1|13|3|12|11|5|10','12JMvrZT','pHkpa','12|6|13|7|5|2|8|3|4|10|1|9|0|11','apiToken','AXhei','modelName','style','flex','NUmKL','system','Error:\x20Could\x20not\x20parse\x20JSON\x20response.'];_0x4435=function(){return _0x4fca26;};return _0x4435();}function loadSettings(){const _0x382a5f=_0x320ac7,_0x1366e3={'eUmts':_0x382a5f(0xfd),'jADby':_0x382a5f(0x11f),'UGzxT':_0x382a5f(0x139),'mvgrY':_0x382a5f(0x12f),'wuYvL':_0x382a5f(0xfe),'yOCNN':_0x382a5f(0x100)},_0x440402=_0x1366e3[_0x382a5f(0x10b)]['split']('|');let _0x250b18=0x0;while(!![]){switch(_0x440402[_0x250b18++]){case'0':document[_0x382a5f(0x115)](_0x1366e3[_0x382a5f(0x11c)])[_0x382a5f(0x134)]=settings[_0x382a5f(0x11f)];continue;case'1':document[_0x382a5f(0x115)](_0x1366e3[_0x382a5f(0x137)])[_0x382a5f(0x134)]=settings['maxTokens'];continue;case'2':settings[_0x382a5f(0x11f)]=_0x4d9327[_0x382a5f(0x109)](_0x1366e3[_0x382a5f(0x11c)])||defaultSettings[_0x382a5f(0x11f)];continue;case'3':document[_0x382a5f(0x115)](_0x1366e3[_0x382a5f(0x125)])[_0x382a5f(0x134)]=settings['apiUrl'];continue;case'4':document[_0x382a5f(0x115)](_0x1366e3[_0x382a5f(0x129)])[_0x382a5f(0x134)]=settings[_0x382a5f(0xfe)];continue;case'5':settings[_0x382a5f(0x124)]=_0x4d9327[_0x382a5f(0x109)](_0x382a5f(0x124))||defaultSettings[_0x382a5f(0x124)];continue;case'6':settings[_0x382a5f(0xfe)]=_0x4d9327[_0x382a5f(0x109)](_0x1366e3[_0x382a5f(0x129)])||defaultSettings[_0x382a5f(0xfe)];continue;case'7':settings[_0x382a5f(0x139)]=_0x4d9327[_0x382a5f(0x109)](_0x382a5f(0x139))||defaultSettings[_0x382a5f(0x139)];continue;case'8':settings['systemPrompt']=_0x4d9327[_0x382a5f(0x109)](_0x382a5f(0x128))||defaultSettings[_0x382a5f(0x128)];continue;case'9':document[_0x382a5f(0x115)](_0x382a5f(0x124))[_0x382a5f(0x134)]=settings['temperature'];continue;case'10':document['getElementById'](_0x1366e3['yOCNN'])['value']=settings[_0x382a5f(0x100)];continue;case'11':document['getElementById'](_0x382a5f(0x128))['value']=settings[_0x382a5f(0x128)];continue;case'12':settings[_0x382a5f(0x12f)]=_0x4d9327['getItem']('apiUrl')||defaultSettings[_0x382a5f(0x12f)];continue;case'13':settings[_0x382a5f(0x100)]=_0x4d9327[_0x382a5f(0x109)](_0x382a5f(0x100))||defaultSettings[_0x382a5f(0x100)];continue;}break;}}function saveSettings(){const _0x52b6b9=_0x320ac7,_0x16f07c={'MSUTz':_0x52b6b9(0x140),'AXhei':_0x52b6b9(0xfe),'NebSn':'maxTokens','fqikT':_0x52b6b9(0x128),'LzHsf':'temperature','ihlqc':_0x52b6b9(0x12f),'pHkpa':'topP'},_0x3d31c0=_0x16f07c[_0x52b6b9(0x13e)][_0x52b6b9(0x136)]('|');let _0x1d5e95=0x0;while(!![]){switch(_0x3d31c0[_0x1d5e95++]){case'0':settings[_0x52b6b9(0x100)]=document[_0x52b6b9(0x115)](_0x52b6b9(0x100))['value'];continue;case'1':_0x4d9327[_0x52b6b9(0x119)](_0x52b6b9(0xfe),settings['apiToken']);continue;case'2':settings[_0x52b6b9(0xfe)]=document[_0x52b6b9(0x115)](_0x16f07c[_0x52b6b9(0xff)])['value'];continue;case'3':_0x4d9327[_0x52b6b9(0x119)](_0x16f07c[_0x52b6b9(0x118)],settings[_0x52b6b9(0x139)]);continue;case'4':settings[_0x52b6b9(0x128)]=document['getElementById'](_0x16f07c[_0x52b6b9(0x107)])[_0x52b6b9(0x134)];continue;case'5':_0x4d9327[_0x52b6b9(0x119)](_0x16f07c[_0x52b6b9(0x107)],settings[_0x52b6b9(0x128)]);continue;case'6':settings[_0x52b6b9(0x139)]=document[_0x52b6b9(0x115)](_0x16f07c[_0x52b6b9(0x118)])[_0x52b6b9(0x134)];continue;case'7':settings[_0x52b6b9(0x124)]=document['getElementById'](_0x16f07c[_0x52b6b9(0x12b)])[_0x52b6b9(0x134)];continue;case'8':_0x4d9327[_0x52b6b9(0x119)](_0x16f07c[_0x52b6b9(0x13f)],settings['apiUrl']);continue;case'9':settings['apiUrl']=document[_0x52b6b9(0x115)](_0x52b6b9(0x12f))[_0x52b6b9(0x134)];continue;case'10':toggleSettings();continue;case'11':_0x4d9327['setItem'](_0x16f07c[_0x52b6b9(0x142)],settings['topP']);continue;case'12':_0x4d9327['setItem'](_0x16f07c[_0x52b6b9(0x12b)],settings[_0x52b6b9(0x124)]);continue;case'13':_0x4d9327[_0x52b6b9(0x119)]('modelName',settings[_0x52b6b9(0x100)]);continue;case'14':settings['topP']=document[_0x52b6b9(0x115)](_0x16f07c['pHkpa'])['value'];continue;}break;}}function toggleSettings(){const _0x38d5cd=_0x320ac7,_0x949e33={'HfwgH':_0x38d5cd(0x11d),'tYaor':_0x38d5cd(0x102)},_0x1c7bb1=document['getElementById'](_0x949e33['HfwgH']);_0x1c7bb1[_0x38d5cd(0x101)][_0x38d5cd(0x110)]=_0x1c7bb1[_0x38d5cd(0x101)][_0x38d5cd(0x110)]===_0x949e33[_0x38d5cd(0x126)]?'none':_0x949e33['tYaor'];}function _0x39c6(_0x16e759,_0x40c9f6){const _0x44357c=_0x4435();return _0x39c6=function(_0x39c6f7,_0x358f83){_0x39c6f7=_0x39c6f7-0xfd;let _0x50c741=_0x44357c[_0x39c6f7];return _0x50c741;},_0x39c6(_0x16e759,_0x40c9f6);}window[_0x320ac7(0x13d)]=toggleSettings,window['sendMessage']=sendMessage;async function sendMessage(){const _0xd70c5f=_0x320ac7,_0x13ef37={'aOxBn':function(_0x134320,_0xbcf54b,_0x3a1399,_0x1dd7bc){return _0x134320(_0xbcf54b,_0x3a1399,_0x1dd7bc);},'NUmKL':_0xd70c5f(0x108),'CsDVa':_0xd70c5f(0x12e),'RYvAo':function(_0xcdc487,_0x2d756f,_0x510b0c){return _0xcdc487(_0x2d756f,_0x510b0c);},'xEDus':function(_0x29276d,_0xdda43a,_0x4ff15e){return _0x29276d(_0xdda43a,_0x4ff15e);},'ZsSgr':_0xd70c5f(0x12a),'PifZV':_0xd70c5f(0x11b),'tjGpp':_0xd70c5f(0x104),'RgqRn':_0xd70c5f(0x130),'dBXty':function(_0x1416bb,_0x189600){return _0x1416bb(_0x189600);},'DINWo':'json_object','fgpaW':function(_0x251ba9){return _0x251ba9();},'LaQBw':_0xd70c5f(0x105)},_0x23f6ad=document[_0xd70c5f(0x115)](_0xd70c5f(0x12e))['value'];if(!_0x23f6ad)return;_0x13ef37[_0xd70c5f(0x13c)](appendMessage,document[_0xd70c5f(0x115)](_0x13ef37['NUmKL']),_0x23f6ad,_0xd70c5f(0x130)),document[_0xd70c5f(0x115)](_0x13ef37[_0xd70c5f(0x117)])[_0xd70c5f(0x134)]='',_0x13ef37['RYvAo'](showTypingIndicator,document[_0xd70c5f(0x115)](_0x13ef37['NUmKL']),_0xd70c5f(0x121));try{const _0x1bedae=await _0x13ef37['xEDus'](fetch,settings['apiUrl']+_0xd70c5f(0x111),{'method':_0x13ef37[_0xd70c5f(0x11e)],'headers':{'Authorization':_0xd70c5f(0x10c)+settings[_0xd70c5f(0xfe)],'Content-Type':_0x13ef37['PifZV']},'body':JSON[_0xd70c5f(0x123)]({'model':settings[_0xd70c5f(0x100)],'messages':[{'role':_0x13ef37['tjGpp'],'content':settings[_0xd70c5f(0x128)]},{'role':_0x13ef37['RgqRn'],'content':_0x23f6ad}],'max_tokens':parseInt(settings[_0xd70c5f(0x139)]),'temperature':parseFloat(settings[_0xd70c5f(0x124)]),'top_p':_0x13ef37[_0xd70c5f(0x13a)](parseFloat,settings[_0xd70c5f(0x11f)]),'frequency_penalty':0.5,'seed':0x1,'response_format':{'type':_0x13ef37[_0xd70c5f(0x127)]}})}),_0x12eb2b=await _0x1bedae[_0xd70c5f(0x120)]();_0x13ef37[_0xd70c5f(0x10e)](hideTypingIndicator);if(_0x12eb2b[_0xd70c5f(0x114)]&&_0x12eb2b[_0xd70c5f(0x114)][_0xd70c5f(0x12c)]>0x0){const _0x2a6528=_0x12eb2b[_0xd70c5f(0x114)][0x0][_0xd70c5f(0x138)][_0xd70c5f(0x13b)];appendMessage(document[_0xd70c5f(0x115)](_0x13ef37[_0xd70c5f(0x103)]),_0x2a6528,'ai');let _0x580983;try{_0x580983=JSON[_0xd70c5f(0x10a)](_0x2a6528),_0x13ef37['dBXty'](appendQuiz,_0x580983);}catch(_0x5ef77c){_0x13ef37[_0xd70c5f(0x13c)](appendMessage,document['getElementById'](_0x13ef37['NUmKL']),_0x13ef37['LaQBw'],'ai');}}}catch(_0x2c97b4){_0x13ef37[_0xd70c5f(0x13c)](appendMessage,document[_0xd70c5f(0x115)](_0x13ef37[_0xd70c5f(0x103)]),'Error:\x20Failed\x20to\x20fetch\x20AI\x20response:\x20'+_0x2c97b4[_0xd70c5f(0x138)],'ai');}finally{_0x13ef37[_0xd70c5f(0x10e)](hideTypingIndicator);}}function speakMessage(_0x354e11){const _0x402d45=_0x320ac7,_0x3bb746=new SpeechSynthesisUtterance(_0x354e11);_0x3bb746[_0x402d45(0x11a)]='en-US',window[_0x402d45(0x133)][_0x402d45(0x10f)](_0x3bb746);}window[_0x320ac7(0x132)]=loadSettings;