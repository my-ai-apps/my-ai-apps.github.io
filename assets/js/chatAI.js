
/*!
Copyright © 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x5d2123=_0x5c93;function _0x5c93(_0x187a10,_0x4e9cc6){const _0x2d6640=_0x2d66();return _0x5c93=function(_0x5c9367,_0x1052de){_0x5c9367=_0x5c9367-0x1b2;let _0x57eee1=_0x2d6640[_0x5c9367];return _0x57eee1;},_0x5c93(_0x187a10,_0x4e9cc6);}(function(_0x13e5d1,_0x153e65){const _0x2d0600=_0x5c93,_0x1c221b=_0x13e5d1();while(!![]){try{const _0x26e0d6=parseInt(_0x2d0600(0x1d9))/0x1*(parseInt(_0x2d0600(0x1f4))/0x2)+parseInt(_0x2d0600(0x1d4))/0x3*(parseInt(_0x2d0600(0x1ff))/0x4)+parseInt(_0x2d0600(0x1e3))/0x5*(-parseInt(_0x2d0600(0x1f6))/0x6)+-parseInt(_0x2d0600(0x1c4))/0x7*(parseInt(_0x2d0600(0x1ef))/0x8)+parseInt(_0x2d0600(0x1b7))/0x9*(-parseInt(_0x2d0600(0x1df))/0xa)+parseInt(_0x2d0600(0x1e1))/0xb+parseInt(_0x2d0600(0x1f0))/0xc*(parseInt(_0x2d0600(0x1f3))/0xd);if(_0x26e0d6===_0x153e65)break;else _0x1c221b['push'](_0x1c221b['shift']());}catch(_0x182179){_0x1c221b['push'](_0x1c221b['shift']());}}}(_0x2d66,0xd272b));import _0x7487f9 from'./store.js';import{appendMessage,showTypingIndicator,hideTypingIndicator}from'./common.js';const defaultSettings={'apiUrl':'http://localhost:1234/v1','apiToken':_0x5d2123(0x1c5),'modelName':'openai/Qwen2.5','maxTokens':0x1000,'temperature':0.7,'topP':0x1,'systemPrompt':_0x5d2123(0x1e8)};let settings={...defaultSettings};function loadSettings(){const _0x42b320=_0x5d2123,_0x449e32={'LVQhY':_0x42b320(0x1fd),'nyRSv':_0x42b320(0x1c0),'PHJmw':_0x42b320(0x1fe),'QZaFv':_0x42b320(0x1b8),'RrIIF':_0x42b320(0x1c6),'UmeWC':_0x42b320(0x1bd),'SwARj':_0x42b320(0x1ea),'LJMyA':_0x42b320(0x1db)},_0x4e2bab=_0x449e32['LVQhY']['split']('|');let _0x13bf60=0x0;while(!![]){switch(_0x4e2bab[_0x13bf60++]){case'0':settings['modelName']=_0x7487f9[_0x42b320(0x1be)](_0x449e32[_0x42b320(0x1cc)])||defaultSettings[_0x42b320(0x1c0)];continue;case'1':document[_0x42b320(0x1d0)](_0x449e32[_0x42b320(0x1b4)])[_0x42b320(0x1e0)]=settings[_0x42b320(0x1fe)];continue;case'2':document[_0x42b320(0x1d0)]('apiToken')[_0x42b320(0x1e0)]=settings['apiToken'];continue;case'3':settings['apiToken']=_0x7487f9[_0x42b320(0x1be)](_0x449e32[_0x42b320(0x1e9)])||defaultSettings[_0x42b320(0x1b8)];continue;case'4':document[_0x42b320(0x1d0)](_0x449e32[_0x42b320(0x1cc)])[_0x42b320(0x1e0)]=settings[_0x42b320(0x1c0)];continue;case'5':document[_0x42b320(0x1d0)](_0x449e32[_0x42b320(0x1d7)])[_0x42b320(0x1e0)]=settings['temperature'];continue;case'6':settings[_0x42b320(0x1c6)]=_0x7487f9['getItem'](_0x42b320(0x1c6))||defaultSettings[_0x42b320(0x1c6)];continue;case'7':settings['maxTokens']=_0x7487f9[_0x42b320(0x1be)](_0x449e32['UmeWC'])||defaultSettings[_0x42b320(0x1bd)];continue;case'8':document[_0x42b320(0x1d0)](_0x449e32[_0x42b320(0x1dd)])[_0x42b320(0x1e0)]=settings[_0x42b320(0x1bd)];continue;case'9':settings[_0x42b320(0x1ea)]=_0x7487f9[_0x42b320(0x1be)](_0x449e32[_0x42b320(0x1bb)])||defaultSettings[_0x42b320(0x1ea)];continue;case'10':settings['apiUrl']=_0x7487f9[_0x42b320(0x1be)](_0x449e32[_0x42b320(0x1b4)])||defaultSettings[_0x42b320(0x1fe)];continue;case'11':document[_0x42b320(0x1d0)](_0x449e32['LJMyA'])[_0x42b320(0x1e0)]=settings[_0x42b320(0x1db)];continue;case'12':document[_0x42b320(0x1d0)]('systemPrompt')[_0x42b320(0x1e0)]=settings[_0x42b320(0x1ea)];continue;case'13':settings[_0x42b320(0x1db)]=_0x7487f9['getItem'](_0x449e32[_0x42b320(0x1ed)])||defaultSettings[_0x42b320(0x1db)];continue;}break;}}function saveSettings(){const _0x2db142=_0x5d2123,_0x5dca31={'wuPcw':_0x2db142(0x1f8),'bwRYS':_0x2db142(0x1c0),'EtIdv':_0x2db142(0x1bd),'UDKRr':_0x2db142(0x1fe),'KjkLP':_0x2db142(0x1db),'lvzHf':'temperature','cJSOL':function(_0x1d37d6){return _0x1d37d6();},'fGRRh':_0x2db142(0x1b8),'SMevN':_0x2db142(0x1ea)},_0x3e00db=_0x5dca31['wuPcw'][_0x2db142(0x1ba)]('|');let _0x3a1b2c=0x0;while(!![]){switch(_0x3e00db[_0x3a1b2c++]){case'0':_0x7487f9['setItem'](_0x5dca31[_0x2db142(0x1d8)],settings['modelName']);continue;case'1':settings[_0x2db142(0x1bd)]=document['getElementById']('maxTokens')[_0x2db142(0x1e0)];continue;case'2':_0x7487f9[_0x2db142(0x1cb)](_0x5dca31[_0x2db142(0x1e2)],settings[_0x2db142(0x1bd)]);continue;case'3':_0x7487f9[_0x2db142(0x1cb)](_0x5dca31[_0x2db142(0x1d2)],settings[_0x2db142(0x1fe)]);continue;case'4':settings[_0x2db142(0x1c0)]=document[_0x2db142(0x1d0)](_0x5dca31[_0x2db142(0x1d8)])['value'];continue;case'5':settings[_0x2db142(0x1db)]=document['getElementById'](_0x5dca31[_0x2db142(0x1f1)])['value'];continue;case'6':_0x7487f9['setItem'](_0x5dca31[_0x2db142(0x1f5)],settings[_0x2db142(0x1c6)]);continue;case'7':_0x5dca31[_0x2db142(0x1d3)](toggleSettings);continue;case'8':_0x7487f9[_0x2db142(0x1cb)](_0x5dca31['fGRRh'],settings[_0x2db142(0x1b8)]);continue;case'9':_0x7487f9[_0x2db142(0x1cb)](_0x5dca31['KjkLP'],settings['topP']);continue;case'10':settings[_0x2db142(0x1ea)]=document[_0x2db142(0x1d0)](_0x2db142(0x1ea))[_0x2db142(0x1e0)];continue;case'11':settings[_0x2db142(0x1b8)]=document[_0x2db142(0x1d0)](_0x2db142(0x1b8))[_0x2db142(0x1e0)];continue;case'12':_0x7487f9[_0x2db142(0x1cb)](_0x5dca31[_0x2db142(0x1c2)],settings[_0x2db142(0x1ea)]);continue;case'13':settings['apiUrl']=document['getElementById'](_0x5dca31[_0x2db142(0x1d2)])[_0x2db142(0x1e0)];continue;case'14':settings[_0x2db142(0x1c6)]=document['getElementById'](_0x2db142(0x1c6))['value'];continue;}break;}}function toggleSettings(){const _0xea6a09=_0x5d2123,_0x4e7e74={'LslBp':_0xea6a09(0x1ce),'zBvnV':function(_0x13bfef,_0x53a03b){return _0x13bfef===_0x53a03b;},'aMouo':'none'},_0x5e1697=document[_0xea6a09(0x1d0)](_0x4e7e74[_0xea6a09(0x1c9)]);_0x5e1697['style'][_0xea6a09(0x1f2)]=_0x4e7e74['zBvnV'](_0x5e1697['style'][_0xea6a09(0x1f2)],'flex')?_0x4e7e74[_0xea6a09(0x1de)]:_0xea6a09(0x1fa);}window['toggleSettings']=toggleSettings,window[_0x5d2123(0x1bf)]=sendMessage;function _0x2d66(){const _0x2962e1=['FVDZE','XwBeb','LJMyA','BXEJP','2986824ZysOxo','2964jivUrn','KjkLP','display','47983yIfYHF','2972098kAunmm','lvzHf','96ivhfQo','speak','13|11|4|1|14|5|10|3|8|0|2|6|9|12|7','user','flex','chat-window','ozfNi','10|3|0|7|6|13|9|1|2|4|8|5|11|12','apiUrl','451196tgKRSh','Error:\x20Failed\x20to\x20fetch\x20AI\x20response:\x20','onload','PHJmw','AI\x20is\x20typing...','qmJbW','594531MQVjfS','apiToken','Bearer\x20','split','SwARj','/chat/completions','maxTokens','getItem','sendMessage','modelName','POST','SMevN','choices','21agsxNZ','sk-proj-66666666666666666666666666666666','temperature','wpClc','json','LslBp','bzQHg','setItem','nyRSv','tdrVc','settings','en-US','getElementById','dbpcx','UDKRr','cJSOL','3aVYruB','TvCJe','length','RrIIF','bwRYS','1qcxgRC','lang','topP','oboVa','UmeWC','aMouo','90JskNyj','value','4943796fgmTFs','EtIdv','119805BlyDkQ','Error:\x20Could\x20not\x20parse\x20JSON\x20response.','message','user-input','GtIJk','Based\x20on\x20the\x20user’s\x20input,\x20determine\x20the\x20intended\x20quiz\x20topic.\x20Create\x20a\x20JSON\x20object\x20containing\x20a\x20set\x20of\x205\x20multiple-choice\x20questions\x20relevant\x20to\x20that\x20topic.\x20Each\x20question\x20should\x20include\x20the\x20fields\x20\x27question\x27\x20(the\x20quiz\x20question),\x20\x27options\x27\x20(single\x20answer\x20choice).\x20Format\x20the\x20output\x20to\x20the\x20pattern\x20below\x20{\x20\x27topic\x27:\x20\x27example_topic\x27,\x20\x27questions\x27:\x20[\x20{\x20\x27question\x27:\x20\x27Example\x20question?\x27,\x20\x27options\x27:\x20[\x27Option\x20A\x27],\x20\x27correctAnswer\x27:\x20\x27Option\x20B\x27\x20}\x20]\x20}','QZaFv','systemPrompt'];_0x2d66=function(){return _0x2962e1;};return _0x2d66();}async function sendMessage(){const _0x21ed26=_0x5d2123,_0x1a1d72={'dbpcx':_0x21ed26(0x1e6),'fexLr':function(_0x380be9,_0x106880,_0x2725d1,_0x40f0be){return _0x380be9(_0x106880,_0x2725d1,_0x40f0be);},'FVDZE':_0x21ed26(0x1f9),'BXEJP':function(_0xd3c65a,_0x4712c3,_0x1b9a0e){return _0xd3c65a(_0x4712c3,_0x1b9a0e);},'TvCJe':_0x21ed26(0x1fb),'qmJbW':_0x21ed26(0x1b5),'QLRWz':_0x21ed26(0x1c1),'XwBeb':'system','ozfNi':function(_0x4d5376,_0xcec858){return _0x4d5376(_0xcec858);},'GtIJk':'json_object','oboVa':function(_0x5c2034,_0x4d988f){return _0x5c2034>_0x4d988f;},'tdrVc':function(_0x3f08c4,_0x48ee4f){return _0x3f08c4(_0x48ee4f);},'yuzPE':function(_0x499b32,_0x190077,_0x476dc4,_0x19338e){return _0x499b32(_0x190077,_0x476dc4,_0x19338e);},'bzQHg':function(_0x580a2a,_0x41a91d){return _0x580a2a+_0x41a91d;},'wpClc':function(_0x260a50){return _0x260a50();}},_0x179b6b=document['getElementById'](_0x1a1d72[_0x21ed26(0x1d1)])[_0x21ed26(0x1e0)];if(!_0x179b6b)return;_0x1a1d72['fexLr'](appendMessage,document['getElementById'](_0x21ed26(0x1fb)),_0x179b6b,_0x1a1d72[_0x21ed26(0x1eb)]),document[_0x21ed26(0x1d0)](_0x21ed26(0x1e6))[_0x21ed26(0x1e0)]='',_0x1a1d72[_0x21ed26(0x1ee)](showTypingIndicator,document['getElementById'](_0x1a1d72[_0x21ed26(0x1d5)]),_0x1a1d72[_0x21ed26(0x1b6)]);try{const _0x6ab536=await fetch(settings[_0x21ed26(0x1fe)]+_0x21ed26(0x1bc),{'method':_0x1a1d72['QLRWz'],'headers':{'Authorization':_0x21ed26(0x1b9)+settings[_0x21ed26(0x1b8)],'Content-Type':'application/json'},'body':JSON['stringify']({'model':settings[_0x21ed26(0x1c0)],'messages':[{'role':_0x1a1d72[_0x21ed26(0x1ec)],'content':settings[_0x21ed26(0x1ea)]},{'role':_0x1a1d72[_0x21ed26(0x1eb)],'content':_0x179b6b}],'max_tokens':_0x1a1d72[_0x21ed26(0x1fc)](parseInt,settings[_0x21ed26(0x1bd)]),'temperature':parseFloat(settings[_0x21ed26(0x1c6)]),'top_p':_0x1a1d72['ozfNi'](parseFloat,settings[_0x21ed26(0x1db)]),'frequency_penalty':0.5,'seed':0x1,'response_format':{'type':_0x1a1d72[_0x21ed26(0x1e7)]}})}),_0x277e72=await _0x6ab536[_0x21ed26(0x1c8)]();hideTypingIndicator();if(_0x277e72[_0x21ed26(0x1c3)]&&_0x1a1d72[_0x21ed26(0x1dc)](_0x277e72[_0x21ed26(0x1c3)][_0x21ed26(0x1d6)],0x0)){const _0x661a5f=_0x277e72['choices'][0x0]['message']['content'];appendMessage(document['getElementById'](_0x21ed26(0x1fb)),_0x661a5f,'ai');let _0x261267;try{_0x261267=JSON['parse'](_0x661a5f),_0x1a1d72[_0x21ed26(0x1cd)](appendQuiz,_0x261267);}catch(_0x251ca3){_0x1a1d72['yuzPE'](appendMessage,document[_0x21ed26(0x1d0)](_0x1a1d72[_0x21ed26(0x1d5)]),_0x21ed26(0x1e4),'ai');}}}catch(_0x3406ed){_0x1a1d72['yuzPE'](appendMessage,document[_0x21ed26(0x1d0)](_0x1a1d72[_0x21ed26(0x1d5)]),_0x1a1d72[_0x21ed26(0x1ca)](_0x21ed26(0x1b2),_0x3406ed[_0x21ed26(0x1e5)]),'ai');}finally{_0x1a1d72[_0x21ed26(0x1c7)](hideTypingIndicator);}}function speakMessage(_0x183f2f){const _0x45900e=_0x5d2123,_0x972f1a={'utPTz':_0x45900e(0x1cf)},_0x41392c=new SpeechSynthesisUtterance(_0x183f2f);_0x41392c[_0x45900e(0x1da)]=_0x972f1a['utPTz'],window['speechSynthesis'][_0x45900e(0x1f7)](_0x41392c);}window[_0x5d2123(0x1b3)]=loadSettings;