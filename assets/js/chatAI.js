
/*!
Copyright © 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
function _0x1b6e(_0x5f375b,_0x3f3d13){const _0x598d90=_0x598d();return _0x1b6e=function(_0x1b6e59,_0x2941fc){_0x1b6e59=_0x1b6e59-0x12f;let _0x20dd9f=_0x598d90[_0x1b6e59];return _0x20dd9f;},_0x1b6e(_0x5f375b,_0x3f3d13);}const _0x531403=_0x1b6e;(function(_0x7c4448,_0x53412c){const _0x27e189=_0x1b6e,_0xc36ef6=_0x7c4448();while(!![]){try{const _0x5250bc=-parseInt(_0x27e189(0x175))/0x1*(parseInt(_0x27e189(0x166))/0x2)+parseInt(_0x27e189(0x14e))/0x3+parseInt(_0x27e189(0x178))/0x4+parseInt(_0x27e189(0x15a))/0x5*(-parseInt(_0x27e189(0x136))/0x6)+-parseInt(_0x27e189(0x14a))/0x7*(-parseInt(_0x27e189(0x140))/0x8)+-parseInt(_0x27e189(0x14f))/0x9+parseInt(_0x27e189(0x137))/0xa;if(_0x5250bc===_0x53412c)break;else _0xc36ef6['push'](_0xc36ef6['shift']());}catch(_0x26b0e8){_0xc36ef6['push'](_0xc36ef6['shift']());}}}(_0x598d,0xddef4));import _0x4e9faa from'./store.js';function _0x598d(){const _0x488a89=['setItem','HAgoG','wFRoG','Error:\x20Failed\x20to\x20fetch\x20AI\x20response:\x20','openai/Qwen2.5','json_object','STslD','184QcITCA','topP','KQJVc','chat-window','fAbNX','user-input','sBrPV','http://localhost:1234/v1','Error:\x20Could\x20not\x20parse\x20JSON\x20response.','choices','483903qlkRxG','jCLLi','VvUWu','tlwmy','2371053UqMxyU','7869510xcvbkD','sk-proj-66666666666666666666666666666666','mijbM','QksIJ','Bearer\x20','value','getItem','getElementById','NLRES','RodEq','YJvSP','50VDKlgf','apiUrl','maxTokens','settings','modelName','stringify','temperature','lXdvx','application/json','luViN','systemPrompt','qXbTj','50xNQBoH','pjBCk','apiToken','inKSH','onload','none','JMcbV','message','display','POST','lang','KUBHC','/chat/completions','speak','yjYNW','59363ozOrMy','lTggI','Based\x20on\x20the\x20user’s\x20input,\x20determine\x20the\x20intended\x20quiz\x20topic.\x20Create\x20a\x20JSON\x20object\x20containing\x20a\x20set\x20of\x205\x20multiple-choice\x20questions\x20relevant\x20to\x20that\x20topic.\x20Each\x20question\x20should\x20include\x20the\x20fields\x20\x27question\x27\x20(the\x20quiz\x20question),\x20\x27options\x27\x20(single\x20answer\x20choice).\x20Format\x20the\x20output\x20to\x20the\x20pattern\x20below\x20{\x20\x27topic\x27:\x20\x27example_topic\x27,\x20\x27questions\x27:\x20[\x20{\x20\x27question\x27:\x20\x27Example\x20question?\x27,\x20\x27options\x27:\x20[\x27Option\x20A\x27],\x20\x27correctAnswer\x27:\x20\x27Option\x20B\x27\x20}\x20]\x20}','376836VKJccZ','AAESo','content','ynHnk','dCKZo','en-US','style','UaaVJ','vtINE','939036qJdcyh','23580420rKpgLJ','system'];_0x598d=function(){return _0x488a89;};return _0x598d();}import{appendMessage,showTypingIndicator,hideTypingIndicator}from'./common.js';const defaultSettings={'apiUrl':_0x531403(0x147),'apiToken':_0x531403(0x150),'modelName':_0x531403(0x13d),'maxTokens':0x1000,'temperature':0.7,'topP':0x1,'systemPrompt':_0x531403(0x177)};let settings={...defaultSettings};function loadSettings(){const _0x1e55c8=_0x531403,_0x5501b1={'NLRES':_0x1e55c8(0x15b),'fAbNX':_0x1e55c8(0x168),'sBrPV':_0x1e55c8(0x15c),'YJvSP':'temperature','XqwLj':'topP','KQJVc':'systemPrompt','yjYNW':_0x1e55c8(0x15e)};settings[_0x1e55c8(0x15b)]=_0x4e9faa[_0x1e55c8(0x155)](_0x5501b1[_0x1e55c8(0x157)])||defaultSettings[_0x1e55c8(0x15b)],settings[_0x1e55c8(0x168)]=_0x4e9faa[_0x1e55c8(0x155)](_0x5501b1[_0x1e55c8(0x144)])||defaultSettings[_0x1e55c8(0x168)],settings['modelName']=_0x4e9faa[_0x1e55c8(0x155)](_0x1e55c8(0x15e))||defaultSettings[_0x1e55c8(0x15e)],settings[_0x1e55c8(0x15c)]=_0x4e9faa[_0x1e55c8(0x155)](_0x5501b1[_0x1e55c8(0x146)])||defaultSettings[_0x1e55c8(0x15c)],settings['temperature']=_0x4e9faa[_0x1e55c8(0x155)](_0x5501b1[_0x1e55c8(0x159)])||defaultSettings[_0x1e55c8(0x160)],settings['topP']=_0x4e9faa[_0x1e55c8(0x155)](_0x5501b1['XqwLj'])||defaultSettings[_0x1e55c8(0x141)],settings[_0x1e55c8(0x164)]=_0x4e9faa[_0x1e55c8(0x155)](_0x5501b1[_0x1e55c8(0x142)])||defaultSettings[_0x1e55c8(0x164)],document[_0x1e55c8(0x156)](_0x1e55c8(0x15b))['value']=settings[_0x1e55c8(0x15b)],document[_0x1e55c8(0x156)](_0x5501b1[_0x1e55c8(0x144)])['value']=settings[_0x1e55c8(0x168)],document[_0x1e55c8(0x156)](_0x5501b1[_0x1e55c8(0x174)])[_0x1e55c8(0x154)]=settings[_0x1e55c8(0x15e)],document[_0x1e55c8(0x156)](_0x5501b1[_0x1e55c8(0x146)])[_0x1e55c8(0x154)]=settings[_0x1e55c8(0x15c)],document[_0x1e55c8(0x156)](_0x5501b1[_0x1e55c8(0x159)])['value']=settings[_0x1e55c8(0x160)],document[_0x1e55c8(0x156)](_0x5501b1['XqwLj'])[_0x1e55c8(0x154)]=settings['topP'],document['getElementById'](_0x5501b1['KQJVc'])['value']=settings[_0x1e55c8(0x164)];}function saveSettings(){const _0x142437=_0x531403,_0x2e115e={'JMcbV':_0x142437(0x15b),'VvUWu':_0x142437(0x168),'UaaVJ':_0x142437(0x15e),'lejmR':'temperature','mijbM':_0x142437(0x141),'inKSH':'systemPrompt','jCLLi':'maxTokens'};settings[_0x142437(0x15b)]=document[_0x142437(0x156)](_0x2e115e['JMcbV'])[_0x142437(0x154)],settings[_0x142437(0x168)]=document[_0x142437(0x156)](_0x2e115e[_0x142437(0x14c)])[_0x142437(0x154)],settings[_0x142437(0x15e)]=document[_0x142437(0x156)](_0x2e115e[_0x142437(0x134)])[_0x142437(0x154)],settings['maxTokens']=document[_0x142437(0x156)]('maxTokens')['value'],settings[_0x142437(0x160)]=document['getElementById'](_0x2e115e['lejmR'])[_0x142437(0x154)],settings[_0x142437(0x141)]=document[_0x142437(0x156)](_0x2e115e[_0x142437(0x151)])['value'],settings[_0x142437(0x164)]=document[_0x142437(0x156)](_0x2e115e[_0x142437(0x169)])[_0x142437(0x154)],_0x4e9faa['setItem'](_0x2e115e[_0x142437(0x16c)],settings['apiUrl']),_0x4e9faa[_0x142437(0x139)](_0x2e115e[_0x142437(0x14c)],settings['apiToken']),_0x4e9faa['setItem'](_0x2e115e[_0x142437(0x134)],settings[_0x142437(0x15e)]),_0x4e9faa[_0x142437(0x139)](_0x2e115e[_0x142437(0x14b)],settings[_0x142437(0x15c)]),_0x4e9faa[_0x142437(0x139)](_0x2e115e['lejmR'],settings['temperature']),_0x4e9faa[_0x142437(0x139)](_0x2e115e[_0x142437(0x151)],settings[_0x142437(0x141)]),_0x4e9faa['setItem'](_0x142437(0x164),settings['systemPrompt']),toggleSettings();}function toggleSettings(){const _0x42a3c8=_0x531403,_0x5ae1f3={'KUBHC':_0x42a3c8(0x15d),'STslD':function(_0x2fc8ab,_0x4a12eb){return _0x2fc8ab===_0x4a12eb;},'vtINE':'flex','RZBlE':_0x42a3c8(0x16b)},_0x1d8052=document['getElementById'](_0x5ae1f3[_0x42a3c8(0x171)]);_0x1d8052['style'][_0x42a3c8(0x16e)]=_0x5ae1f3[_0x42a3c8(0x13f)](_0x1d8052[_0x42a3c8(0x133)]['display'],_0x5ae1f3[_0x42a3c8(0x135)])?_0x5ae1f3['RZBlE']:_0x5ae1f3[_0x42a3c8(0x135)];}window['toggleSettings']=toggleSettings,window['sendMessage']=sendMessage;async function sendMessage(){const _0xf43e48=_0x531403,_0x1de161={'FNufH':'user-input','wFRoG':function(_0x2de000,_0x55db63,_0x5473bf,_0x277f62){return _0x2de000(_0x55db63,_0x5473bf,_0x277f62);},'ynHnk':_0xf43e48(0x143),'lTggI':'user','lXdvx':'AI\x20is\x20typing...','RodEq':function(_0x132b2f,_0x50e3ba,_0x3dc031){return _0x132b2f(_0x50e3ba,_0x3dc031);},'lAPHC':_0xf43e48(0x16f),'dCKZo':_0xf43e48(0x162),'HAgoG':function(_0x5b953a,_0x288d2e){return _0x5b953a(_0x288d2e);},'luViN':function(_0x1f27ba){return _0x1f27ba();},'tlwmy':function(_0x4f6e7d,_0x503242){return _0x4f6e7d>_0x503242;},'QksIJ':function(_0x5117c0,_0x2dd617){return _0x5117c0(_0x2dd617);},'pjBCk':_0xf43e48(0x148),'AAESo':function(_0x2bf1dc,_0x26d8c2){return _0x2bf1dc+_0x26d8c2;},'qXbTj':_0xf43e48(0x13c),'Gfjgd':function(_0x53f775){return _0x53f775();}},_0x39ef01=document[_0xf43e48(0x156)](_0x1de161['FNufH'])['value'];if(!_0x39ef01)return;_0x1de161[_0xf43e48(0x13b)](appendMessage,document[_0xf43e48(0x156)](_0x1de161[_0xf43e48(0x130)]),_0x39ef01,_0x1de161['lTggI']),document['getElementById'](_0xf43e48(0x145))[_0xf43e48(0x154)]='',showTypingIndicator(document[_0xf43e48(0x156)](_0x1de161[_0xf43e48(0x130)]),_0x1de161[_0xf43e48(0x161)]);try{const _0x46ba1e=await _0x1de161[_0xf43e48(0x158)](fetch,settings[_0xf43e48(0x15b)]+_0xf43e48(0x172),{'method':_0x1de161['lAPHC'],'headers':{'Authorization':_0xf43e48(0x153)+settings[_0xf43e48(0x168)],'Content-Type':_0x1de161[_0xf43e48(0x131)]},'body':JSON[_0xf43e48(0x15f)]({'model':settings[_0xf43e48(0x15e)],'messages':[{'role':_0xf43e48(0x138),'content':settings[_0xf43e48(0x164)]},{'role':_0x1de161[_0xf43e48(0x176)],'content':_0x39ef01}],'max_tokens':parseInt(settings[_0xf43e48(0x15c)]),'temperature':_0x1de161[_0xf43e48(0x13a)](parseFloat,settings[_0xf43e48(0x160)]),'top_p':_0x1de161[_0xf43e48(0x13a)](parseFloat,settings['topP']),'frequency_penalty':0.5,'seed':0x1,'response_format':{'type':_0xf43e48(0x13e)}})}),_0x3ea7ac=await _0x46ba1e['json']();_0x1de161[_0xf43e48(0x163)](hideTypingIndicator);if(_0x3ea7ac[_0xf43e48(0x149)]&&_0x1de161[_0xf43e48(0x14d)](_0x3ea7ac[_0xf43e48(0x149)]['length'],0x0)){const _0x51d1e5=_0x3ea7ac[_0xf43e48(0x149)][0x0][_0xf43e48(0x16d)][_0xf43e48(0x12f)];_0x1de161[_0xf43e48(0x13b)](appendMessage,document[_0xf43e48(0x156)](_0x1de161[_0xf43e48(0x130)]),_0x51d1e5,'ai');let _0x3aa5dc;try{_0x3aa5dc=JSON['parse'](_0x51d1e5),_0x1de161[_0xf43e48(0x152)](appendQuiz,_0x3aa5dc);}catch(_0x5ecfd8){_0x1de161[_0xf43e48(0x13b)](appendMessage,document['getElementById']('chat-window'),_0x1de161[_0xf43e48(0x167)],'ai');}}}catch(_0xadec2e){appendMessage(document['getElementById'](_0x1de161[_0xf43e48(0x130)]),_0x1de161[_0xf43e48(0x179)](_0x1de161[_0xf43e48(0x165)],_0xadec2e[_0xf43e48(0x16d)]),'ai');}finally{_0x1de161['Gfjgd'](hideTypingIndicator);}}function speakMessage(_0x6abf){const _0x34c2d1=_0x531403,_0x46203a=new SpeechSynthesisUtterance(_0x6abf);_0x46203a[_0x34c2d1(0x170)]=_0x34c2d1(0x132),window['speechSynthesis'][_0x34c2d1(0x173)](_0x46203a);}window[_0x531403(0x16a)]=loadSettings;