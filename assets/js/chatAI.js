
/*!
Copyright © 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x127e5a=_0x48c9;(function(_0x594fc0,_0x359fd0){const _0x4c1fd4=_0x48c9,_0x53a340=_0x594fc0();while(!![]){try{const _0x8c18e=-parseInt(_0x4c1fd4(0xb9))/0x1+parseInt(_0x4c1fd4(0xb3))/0x2+parseInt(_0x4c1fd4(0x76))/0x3+parseInt(_0x4c1fd4(0x68))/0x4*(parseInt(_0x4c1fd4(0xa6))/0x5)+parseInt(_0x4c1fd4(0x6e))/0x6*(-parseInt(_0x4c1fd4(0xaa))/0x7)+-parseInt(_0x4c1fd4(0xac))/0x8*(parseInt(_0x4c1fd4(0x99))/0x9)+parseInt(_0x4c1fd4(0x6f))/0xa*(parseInt(_0x4c1fd4(0x98))/0xb);if(_0x8c18e===_0x359fd0)break;else _0x53a340['push'](_0x53a340['shift']());}catch(_0x4a6fd4){_0x53a340['push'](_0x53a340['shift']());}}}(_0x50a1,0xd7bb6));import _0x3a86fc from'./store.js';import{appendMessage,showTypingIndicator,hideTypingIndicator}from'./common.js';const defaultSettings={'apiUrl':_0x127e5a(0xbb),'apiToken':_0x127e5a(0x79),'modelName':'openai/Qwen2.5','maxTokens':0x1000,'temperature':0.7,'topP':0x1,'systemPrompt':_0x127e5a(0x8e)};function _0x50a1(){const _0x47b3d0=['384618YzFDMC','TQdSG','http://localhost:1234/v1','zSDUK','phfTi','4kNSzJp','none','jMqQl','user','CQwjS','apiToken','10182zLDTIa','80sKEOOa','ghFzh','Cytyu','ItCKV','xoXfz','settings','NcUmw','310563fFTgFc','speechSynthesis','apiUrl','sk-proj-66666666666666666666666666666666','TXZza','split','bnwOc','getElementById','POST','onload','parse','vlvbL','topP','maxTokens','rhwOZ','system','value','length','systemPrompt','NsDTv','PSvSr','modelName','json_object','eesak','Based\x20on\x20the\x20user’s\x20input,\x20determine\x20the\x20intended\x20quiz\x20topic.\x20Create\x20a\x20JSON\x20object\x20containing\x20a\x20set\x20of\x205\x20multiple-choice\x20questions\x20relevant\x20to\x20that\x20topic.\x20Each\x20question\x20should\x20include\x20the\x20fields\x20\x27question\x27\x20(the\x20quiz\x20question),\x20\x27options\x27\x20(single\x20answer\x20choice).\x20Format\x20the\x20output\x20to\x20the\x20pattern\x20below\x20{\x20\x27topic\x27:\x20\x27example_topic\x27,\x20\x27questions\x27:\x20[\x20{\x20\x27question\x27:\x20\x27Example\x20question?\x27,\x20\x27options\x27:\x20[\x27Option\x20A\x27],\x20\x27correctAnswer\x27:\x20\x27Option\x20B\x27\x20}\x20]\x20}','application/json','EdKfi','chat-window','Error:\x20Failed\x20to\x20fetch\x20AI\x20response:\x20','JBDjb','setItem','QhkZU','yRnSi','LaQse','1391522LmAJUI','910782YpTrnT','content','message','yTMFi','Bearer\x20','wraNz','speak','style','OjHXn','ViLzJ','rrHqg','display','/chat/completions','2892460KnwDIs','Error:\x20Could\x20not\x20parse\x20JSON\x20response.','4|10|14|12|1|7|6|8|9|0|2|13|3|11|5','bHEOR','2359HOOzLG','AI\x20is\x20typing...','8EUOYxy','Dqmfo','toggleSettings','sendMessage','temperature','iWXgY','stringify','494628HioNSN','user-input','jdMhp','getItem','kiYJo','XkWGZ'];_0x50a1=function(){return _0x47b3d0;};return _0x50a1();}let settings={...defaultSettings};function _0x48c9(_0x39c18e,_0x55b525){const _0x50a151=_0x50a1();return _0x48c9=function(_0x48c940,_0x4d70af){_0x48c940=_0x48c940-0x66;let _0xbe1a6f=_0x50a151[_0x48c940];return _0xbe1a6f;},_0x48c9(_0x39c18e,_0x55b525);}function loadSettings(){const _0x273f06=_0x127e5a,_0x4ff92f={'LaQse':_0x273f06(0x78),'yRnSi':_0x273f06(0x6d),'xoXfz':'modelName','QhkZU':_0x273f06(0x83),'CQwjS':_0x273f06(0xb0),'zSDUK':_0x273f06(0x88),'rhwOZ':_0x273f06(0x82)};settings[_0x273f06(0x78)]=_0x3a86fc[_0x273f06(0xb6)](_0x4ff92f[_0x273f06(0x97)])||defaultSettings[_0x273f06(0x78)],settings['apiToken']=_0x3a86fc['getItem'](_0x4ff92f['yRnSi'])||defaultSettings[_0x273f06(0x6d)],settings[_0x273f06(0x8b)]=_0x3a86fc[_0x273f06(0xb6)](_0x4ff92f['xoXfz'])||defaultSettings[_0x273f06(0x8b)],settings[_0x273f06(0x83)]=_0x3a86fc[_0x273f06(0xb6)](_0x4ff92f[_0x273f06(0x95)])||defaultSettings[_0x273f06(0x83)],settings[_0x273f06(0xb0)]=_0x3a86fc[_0x273f06(0xb6)](_0x4ff92f[_0x273f06(0x6c)])||defaultSettings[_0x273f06(0xb0)],settings['topP']=_0x3a86fc['getItem']('topP')||defaultSettings[_0x273f06(0x82)],settings[_0x273f06(0x88)]=_0x3a86fc[_0x273f06(0xb6)](_0x4ff92f[_0x273f06(0x66)])||defaultSettings[_0x273f06(0x88)],document[_0x273f06(0x7d)](_0x4ff92f[_0x273f06(0x97)])[_0x273f06(0x86)]=settings[_0x273f06(0x78)],document[_0x273f06(0x7d)](_0x4ff92f[_0x273f06(0x96)])[_0x273f06(0x86)]=settings['apiToken'],document['getElementById'](_0x4ff92f[_0x273f06(0x73)])['value']=settings['modelName'],document[_0x273f06(0x7d)](_0x4ff92f['QhkZU'])['value']=settings[_0x273f06(0x83)],document[_0x273f06(0x7d)](_0x273f06(0xb0))[_0x273f06(0x86)]=settings[_0x273f06(0xb0)],document[_0x273f06(0x7d)](_0x4ff92f[_0x273f06(0x84)])[_0x273f06(0x86)]=settings[_0x273f06(0x82)],document['getElementById'](_0x273f06(0x88))['value']=settings[_0x273f06(0x88)];}function saveSettings(){const _0x51798b=_0x127e5a,_0x53c761={'MESow':_0x51798b(0xa8),'NcUmw':_0x51798b(0x8b),'JBDjb':_0x51798b(0xb0),'eesak':_0x51798b(0x83),'Dqmfo':_0x51798b(0x82),'pgWWP':function(_0x104d1d){return _0x104d1d();},'TXZza':_0x51798b(0x88),'jdMhp':'apiUrl','wraNz':'apiToken'},_0x563923=_0x53c761['MESow'][_0x51798b(0x7b)]('|');let _0x1ccfb6=0x0;while(!![]){switch(_0x563923[_0x1ccfb6++]){case'0':_0x3a86fc['setItem'](_0x53c761[_0x51798b(0x75)],settings[_0x51798b(0x8b)]);continue;case'1':settings['temperature']=document['getElementById'](_0x53c761[_0x51798b(0x93)])[_0x51798b(0x86)];continue;case'2':_0x3a86fc[_0x51798b(0x94)](_0x53c761['eesak'],settings[_0x51798b(0x83)]);continue;case'3':_0x3a86fc['setItem'](_0x53c761[_0x51798b(0xad)],settings['topP']);continue;case'4':settings[_0x51798b(0x78)]=document['getElementById'](_0x51798b(0x78))[_0x51798b(0x86)];continue;case'5':_0x53c761['pgWWP'](toggleSettings);continue;case'6':settings[_0x51798b(0x88)]=document['getElementById'](_0x53c761['TXZza'])[_0x51798b(0x86)];continue;case'7':settings[_0x51798b(0x82)]=document[_0x51798b(0x7d)](_0x53c761[_0x51798b(0xad)])['value'];continue;case'8':_0x3a86fc[_0x51798b(0x94)](_0x53c761[_0x51798b(0xb5)],settings[_0x51798b(0x78)]);continue;case'9':_0x3a86fc[_0x51798b(0x94)](_0x53c761[_0x51798b(0x9e)],settings[_0x51798b(0x6d)]);continue;case'10':settings[_0x51798b(0x6d)]=document['getElementById'](_0x53c761[_0x51798b(0x9e)])[_0x51798b(0x86)];continue;case'11':_0x3a86fc['setItem'](_0x53c761[_0x51798b(0x7a)],settings['systemPrompt']);continue;case'12':settings[_0x51798b(0x83)]=document[_0x51798b(0x7d)](_0x53c761[_0x51798b(0x8d)])[_0x51798b(0x86)];continue;case'13':_0x3a86fc[_0x51798b(0x94)](_0x53c761[_0x51798b(0x93)],settings[_0x51798b(0xb0)]);continue;case'14':settings[_0x51798b(0x8b)]=document['getElementById'](_0x53c761[_0x51798b(0x75)])[_0x51798b(0x86)];continue;}break;}}function toggleSettings(){const _0x167979=_0x127e5a,_0x2eb3e5={'XkWGZ':_0x167979(0x74),'iWXgY':'flex','bHEOR':_0x167979(0x69)},_0x2cafe6=document['getElementById'](_0x2eb3e5[_0x167979(0xb8)]);_0x2cafe6[_0x167979(0xa0)]['display']=_0x2cafe6[_0x167979(0xa0)][_0x167979(0xa4)]===_0x2eb3e5[_0x167979(0xb1)]?_0x2eb3e5[_0x167979(0xa9)]:_0x2eb3e5[_0x167979(0xb1)];}window[_0x127e5a(0xae)]=toggleSettings,window[_0x127e5a(0xaf)]=sendMessage;async function sendMessage(){const _0xe7964=_0x127e5a,_0x5e3901={'uMpVv':_0xe7964(0xb4),'kiYJo':function(_0xc8e164,_0x3e1862,_0x5db097,_0x4d8778){return _0xc8e164(_0x3e1862,_0x5db097,_0x4d8778);},'ViLzJ':_0xe7964(0x91),'PSvSr':_0xe7964(0x6b),'Cytyu':_0xe7964(0xab),'ItCKV':function(_0x5ae240,_0x12b7d3,_0x19999c){return _0x5ae240(_0x12b7d3,_0x19999c);},'TQdSG':_0xe7964(0x7e),'OjHXn':_0xe7964(0x8f),'bnwOc':_0xe7964(0x85),'ghFzh':function(_0x58276c,_0xb1d825){return _0x58276c(_0xb1d825);},'aQJcF':function(_0x5469b4,_0xbaf10f){return _0x5469b4(_0xbaf10f);},'EdKfi':_0xe7964(0x8c),'NsDTv':function(_0x451074){return _0x451074();},'GxZOV':function(_0x44bd4d,_0x7cf0a6){return _0x44bd4d>_0x7cf0a6;},'vlvbL':function(_0xab7ed0,_0x222815,_0x1808cc,_0x100f30){return _0xab7ed0(_0x222815,_0x1808cc,_0x100f30);},'yTMFi':_0xe7964(0xa7),'phfTi':function(_0x8fbd28,_0x1484ec){return _0x8fbd28+_0x1484ec;},'jMqQl':_0xe7964(0x92)},_0x2ec740=document['getElementById'](_0x5e3901['uMpVv'])[_0xe7964(0x86)];if(!_0x2ec740)return;_0x5e3901['kiYJo'](appendMessage,document[_0xe7964(0x7d)](_0x5e3901['ViLzJ']),_0x2ec740,_0x5e3901[_0xe7964(0x8a)]),document[_0xe7964(0x7d)](_0x5e3901['uMpVv'])[_0xe7964(0x86)]='',showTypingIndicator(document[_0xe7964(0x7d)](_0x5e3901[_0xe7964(0xa2)]),_0x5e3901[_0xe7964(0x71)]);try{const _0xbee13c=await _0x5e3901[_0xe7964(0x72)](fetch,settings[_0xe7964(0x78)]+_0xe7964(0xa5),{'method':_0x5e3901[_0xe7964(0xba)],'headers':{'Authorization':_0xe7964(0x9d)+settings[_0xe7964(0x6d)],'Content-Type':_0x5e3901[_0xe7964(0xa1)]},'body':JSON[_0xe7964(0xb2)]({'model':settings[_0xe7964(0x8b)],'messages':[{'role':_0x5e3901[_0xe7964(0x7c)],'content':settings[_0xe7964(0x88)]},{'role':_0x5e3901['PSvSr'],'content':_0x2ec740}],'max_tokens':_0x5e3901[_0xe7964(0x70)](parseInt,settings['maxTokens']),'temperature':_0x5e3901['aQJcF'](parseFloat,settings[_0xe7964(0xb0)]),'top_p':_0x5e3901[_0xe7964(0x70)](parseFloat,settings[_0xe7964(0x82)]),'frequency_penalty':0.5,'seed':0x1,'response_format':{'type':_0x5e3901[_0xe7964(0x90)]}})}),_0xe99d25=await _0xbee13c['json']();_0x5e3901[_0xe7964(0x89)](hideTypingIndicator);if(_0xe99d25['choices']&&_0x5e3901['GxZOV'](_0xe99d25['choices'][_0xe7964(0x87)],0x0)){const _0x409715=_0xe99d25['choices'][0x0][_0xe7964(0x9b)][_0xe7964(0x9a)];_0x5e3901[_0xe7964(0x81)](appendMessage,document['getElementById'](_0x5e3901[_0xe7964(0xa2)]),_0x409715,'ai');let _0x41b621;try{_0x41b621=JSON[_0xe7964(0x80)](_0x409715),appendQuiz(_0x41b621);}catch(_0x3b5ef0){_0x5e3901[_0xe7964(0x81)](appendMessage,document[_0xe7964(0x7d)](_0x5e3901[_0xe7964(0xa2)]),_0x5e3901[_0xe7964(0x9c)],'ai');}}}catch(_0xd928a1){_0x5e3901[_0xe7964(0xb7)](appendMessage,document['getElementById'](_0x5e3901[_0xe7964(0xa2)]),_0x5e3901[_0xe7964(0x67)](_0x5e3901[_0xe7964(0x6a)],_0xd928a1['message']),'ai');}finally{_0x5e3901[_0xe7964(0x89)](hideTypingIndicator);}}function speakMessage(_0x14ac62){const _0x3c9fb3=_0x127e5a,_0x2f00c8={'rrHqg':'en-US'},_0x3a7553=new SpeechSynthesisUtterance(_0x14ac62);_0x3a7553['lang']=_0x2f00c8[_0x3c9fb3(0xa3)],window[_0x3c9fb3(0x77)][_0x3c9fb3(0x9f)](_0x3a7553);}window[_0x127e5a(0x7f)]=loadSettings;