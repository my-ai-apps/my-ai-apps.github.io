
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x57db9e=_0x101e;(function(_0x4d20e8,_0x32b3d7){const _0x19811b=_0x101e,_0x1ac4b1=_0x4d20e8();while(!![]){try{const _0x12b450=parseInt(_0x19811b(0xa8))/0x1*(-parseInt(_0x19811b(0xc2))/0x2)+-parseInt(_0x19811b(0xa5))/0x3+-parseInt(_0x19811b(0x10f))/0x4*(-parseInt(_0x19811b(0xbd))/0x5)+parseInt(_0x19811b(0xf1))/0x6*(parseInt(_0x19811b(0x125))/0x7)+-parseInt(_0x19811b(0x14b))/0x8*(-parseInt(_0x19811b(0x9c))/0x9)+-parseInt(_0x19811b(0x151))/0xa+parseInt(_0x19811b(0x148))/0xb*(parseInt(_0x19811b(0xd1))/0xc);if(_0x12b450===_0x32b3d7)break;else _0x1ac4b1['push'](_0x1ac4b1['shift']());}catch(_0x18cfeb){_0x1ac4b1['push'](_0x1ac4b1['shift']());}}}(_0x4ee2,0x7767f));import{Logger,displayError,showStatus}from'./common.js';import{MLCEngineWrapper}from'./model/mlcEngineWrapper.js';function _0x4ee2(){const _0x1f7f56=['[AIAdapter]\x20Cleanup\x20complete.','897544htJXlP','IKJAB','split','body','Error\x20Stacktrace','rxRQi','6125540oopHOe','modelType','[Init]\x20Failed\x20to\x20initialize\x20AI\x20language\x20model\x20session:','PTFBN','HRqHk','You\x20are\x20a\x20helpful\x20assistant5.','âŒ\x20_checkWebGPUSupport:\x20WebGPU\x20Check\x20Error:','modelIdentifier','72wcBhoh','aiLanguageSession','StrFG','zrplk','jsVNp','MLC\x20model\x20generation\x20error:','useBrowserAI','wwQFs','vWUTM','2022546MMBNwv','languageModel','cleanup','1247rrIQNX','decode','ðŸ§¹\x20[aiAdapter]\x20Cleaned\x20response:','generateResponseStream','oPQQe','WrVrY','getReader','YXgpj','ðŸ›‘\x20Response\x20is\x20already\x20an\x20object,\x20skipping\x20JSON.parse.','create','text-generation','isModelLoaded','cBHWY','mlc','log','delta','promptStreaming','json','XrKlE','trace','Error\x20generating\x20response\x20using\x20MLC\x20model.\x20Falling\x20back\x20to\x20alternative.','35MYRmsX','Using\x20browser\x20AI:\x20useBrowserAI=','syrvq','IApmH','loadingProgress','1362kgNKrg','BKgVM','groupEnd','bdZdD','cleanJSONMarkdown:\x20Raw\x20JSON\x20response:\x20','\x22\x20not\x20recognized.','OpenAI\x20API\x20call\x20error:','getItem','MLC\x20model\x20streaming\x20error:','Lfxvr','systemRole','QPMOX','isModelCached','TDSEh','Phi-3.5-mini-instruct','8533584JsNkqw','close','stringify','_instance','getInstance','sessionConfig','textContent','WGHEo','http://localhost:1234/v1/chat/completions','open_ai','sk-proj-1234567890','Error\x20generating\x20AI\x20response\x20using\x20OpenAI\x20API.','application/json','srjht','âŒ\x20_checkWebGPUSupport:\x20WebGPU\x20not\x20supported\x20in\x20this\x20browser','zMoDJ','BROWSER_AI','Main','\x20ms','TsrJa','mark','Initialization\x20Error:','cleanJSONMarkdown','GenjJ','browser_ai','Model\x20identifier\x20\x22','temperature','match','content','jsMmk','KHnkG','q4f32_1','822BNmCZM','engineWrapper','mlc-ai/TinyLlama-1.1B-Chat-v0.4-{quantization}-MLC','requestAdapter','âœ…\x20WebGPU\x20fully\x20supported','modelConfig','eiKyx','ucuTr','1|2|0|3|4','oUClE','object','MbpqJ','_checkWebGPUSupport','CiZlU','mlc-ai/Phi-3.5-mini-instruct-{quantization}-MLC','useWebWorker','mlc_ai','GgyBH','[Init]\x20Language\x20model\x20session\x20already\x20exists:','qoiPX','POST','tOLLl','ðŸ¤–\x20[aiAdapter]\x20Raw\x20AI\x20Response:','VsuXH','Etwyp','group','init','You\x20are\x20a\x20helpful\x20assistant1.','RslYE','includes','14788iRobxl','isInitialized','jiuNC','modelLoadStart','Bearer\x20','LRKFb','TinyLlama-1.1B-Chat-v0.4','progressPercent','âœ…\x20Model\x20Loaded\x20Successfully\x20in\x20','Error:\x20','SzBRF','3|4|1|2|5|0','error','ziTPU','[Init]\x20âœ…\x20Language\x20model\x20session\x20created\x20successfully:','warn','[MLC]\x20Loading\x20progress:','vVODI','statusText','defaultModel','EOEzQ','message','14273qmaIba','startTime','progressText','HvrfY','loadingStats','QSMDA','freeze','Error\x20generating\x20AI\x20response\x20using\x20browser\x20model.','MLC','progress','EDnGI','generateText','MODEL_CONFIG','ADeWU','âœ…\x20BrowserAI\x20Model\x20Loaded\x20Successfully','topK','âŒ\x20_checkWebGPUSupport:\x20No\x20WebGPU\x20adapter\x20found','8|2|6|12|5|16|11|13|3|15|4|14|9|1|0|18|17|10|20|7|19','Streaming\x20error:','aHfGA','âœ…\x20Model\x20Loaded\x20Successfully','[Init]\x20Creating\x20AI\x20language\x20model\x20session...','FDyzx','OpenAI\x20API\x20error:\x20','Eocud','status','Browser\x20AI\x20session\x20error:','gpu','info','[Init]\x20No\x20suitable\x20AI\x20model\x20found.\x20Falling\x20back\x20to\x20OpenAI\x20API.','lgKaK','[Fallback]\x20Using\x20default\x20model:','null','read','AIAdapter\x20is\x20not\x20initialized.\x20Please\x20call\x20init()\x20first.','22FpOAoH','q4f16_1'];_0x4ee2=function(){return _0x1f7f56;};return _0x4ee2();}const OpenAIURL=_0x57db9e(0xd9),apiKey=_0x57db9e(0xdb),defaultModelName='tinyllama-1.1b-chat-v0.4';export const ModelTypes=Object[_0x57db9e(0x12b)]({'NULL':_0x57db9e(0x145),'MLC_AI':_0x57db9e(0x101),'BROWSER_AI':_0x57db9e(0xe9),'OPEN_AI':_0x57db9e(0xda)});export class AIAdapter{static [_0x57db9e(0xd4)]=null;static[_0x57db9e(0xd5)](_0x36666a=defaultModelName){const _0x8e0000=_0x57db9e;return!AIAdapter['_instance']&&(AIAdapter['_instance']=new AIAdapter(_0x36666a)),AIAdapter[_0x8e0000(0xd4)];}constructor(_0x344b74=defaultModelName){const _0xc4b216=_0x57db9e,_0x29205d={'bQGdg':_0xc4b216(0x136),'Etwyp':_0xc4b216(0xb5),'HRqHk':_0xc4b216(0x115),'LRKFb':_0xc4b216(0xf3),'QSMDA':_0xc4b216(0x149),'jsVNp':_0xc4b216(0xf0),'TDSEh':_0xc4b216(0xd0),'SzBRF':_0xc4b216(0xb2),'oUClE':_0xc4b216(0xff),'oPQQe':_0xc4b216(0x99),'GenjJ':_0xc4b216(0x112),'ziTPU':'[AIAdapter:constructor]\x20Browser\x20AI\x20API\x20available:'},_0x297ebe=_0x29205d['bQGdg'][_0xc4b216(0x14d)]('|');let _0x483131=0x0;while(!![]){switch(_0x297ebe[_0x483131++]){case'0':this[_0xc4b216(0xf6)]=this['customModels'][this[_0xc4b216(0x9b)]]||this['MODEL_CONFIG'][this[_0xc4b216(0x9b)]];continue;case'1':this[_0xc4b216(0x131)]={'tinyllama-1.1b-chat-v0.4':{'engine':_0x29205d[_0xc4b216(0x109)],'modelName':_0x29205d[_0xc4b216(0x98)],'modelType':'text-generation','repo':_0x29205d[_0xc4b216(0x114)],'quantizations':[_0x29205d[_0xc4b216(0x12a)],'q4f32_1'],'defaultQuantization':_0x29205d[_0xc4b216(0xa0)],'pipeline':_0xc4b216(0xb2)},'phi-3.5-mini-instruct':{'engine':_0x29205d[_0xc4b216(0x109)],'modelName':_0x29205d[_0xc4b216(0xcf)],'modelType':_0x29205d[_0xc4b216(0x119)],'repo':_0x29205d[_0xc4b216(0xfa)],'quantizations':[_0xc4b216(0x149),_0x29205d[_0xc4b216(0xa0)]],'defaultQuantization':_0x29205d[_0xc4b216(0xa0)],'pipeline':_0x29205d['SzBRF']}};continue;case'2':AIAdapter['_instance']=this;continue;case'3':this['systemRole']=_0x29205d[_0xc4b216(0xac)];continue;case'4':performance[_0xc4b216(0xe5)](_0x29205d[_0xc4b216(0xe8)]);continue;case'5':this[_0xc4b216(0x9b)]=_0x344b74;continue;case'6':this['customModels']={};continue;case'7':console['log'](_0x29205d[_0xc4b216(0x11c)],this[_0xc4b216(0xa2)]);continue;case'8':if(AIAdapter['_instance'])return AIAdapter['_instance'];continue;case'9':this[_0xc4b216(0x129)]={'startTime':this[_0xc4b216(0x126)],'progress':0x0,'estimatedTimeRemaining':null};continue;case'10':this[_0xc4b216(0xf2)]=new MLCEngineWrapper(this['modelConfig'],this[_0xc4b216(0x100)]);continue;case'11':this[_0xc4b216(0x127)]='';continue;case'12':this[_0xc4b216(0x100)]=!![];continue;case'13':this['progressPercent']=0x0;continue;case'14':this[_0xc4b216(0x126)]=performance['now']();continue;case'15':this['modelType']=ModelTypes['NULL'];continue;case'16':this['loadingProgress']=0x0;continue;case'17':this['isInitialized']=![];continue;case'18':if(!this[_0xc4b216(0xf6)])throw new Error(_0xc4b216(0xea)+this[_0xc4b216(0x9b)]+_0xc4b216(0xc7));continue;case'19':this[_0xc4b216(0x9d)]=null;continue;case'20':this[_0xc4b216(0xa2)]=!!(self['ai']&&self['ai']['languageModel']);continue;}break;}}async['_checkWebGPUSupport'](){const _0x2d2986=_0x57db9e,_0x2fc2d9={'IApmH':_0x2d2986(0xdf),'wMIXp':_0x2d2986(0x135),'vVODI':_0x2d2986(0xf5),'VsuXH':_0x2d2986(0x9a)};if(!navigator[_0x2d2986(0x140)])return console[_0x2d2986(0x11b)](_0x2fc2d9[_0x2d2986(0xc0)]),![];try{const _0x146576=await navigator[_0x2d2986(0x140)][_0x2d2986(0xf4)]();if(!_0x146576)return console[_0x2d2986(0x11b)](_0x2fc2d9['wMIXp']),![];return console[_0x2d2986(0xb6)](_0x2fc2d9[_0x2d2986(0x120)]),!![];}catch(_0x1ece2d){return console[_0x2d2986(0x11b)](_0x2fc2d9[_0x2d2986(0x108)],_0x1ece2d),![];}}async[_0x57db9e(0x10b)](){const _0x3f3e99=_0x57db9e,_0x1853a6={'wwQFs':'Worker','ADeWU':function(_0x1904ee,_0x1d5d35){return _0x1904ee/_0x1d5d35;},'StrFG':function(_0x370d57,_0x43edaa){return _0x370d57-_0x43edaa;},'qoiPX':function(_0x5c6ef9,_0x1d6d0a){return _0x5c6ef9>_0x1d6d0a;},'TSqdw':function(_0x2712f9,_0x378512){return _0x2712f9/_0x378512;},'MbpqJ':function(_0x386431,_0xbeb505){return _0x386431*_0xbeb505;},'CiZlU':function(_0x39af6d,_0x2556b4){return _0x39af6d*_0x2556b4;},'FDyzx':'[MLC]\x20Loading\x20model\x20from\x20cache','IKJAB':'Loading\x20model\x20from\x20cache','srjht':function(_0x42b054,_0x44a2aa,_0x59a77a){return _0x42b054(_0x44a2aa,_0x59a77a);},'lgKaK':function(_0x3cf642,_0x314ba5,_0x3c0114){return _0x3cf642(_0x314ba5,_0x3c0114);},'aHfGA':function(_0x8311f6,_0x3067c5){return _0x8311f6*_0x3067c5;},'EOEzQ':_0x3f3e99(0x10c),'PTFBN':_0x3f3e99(0x11d),'zMoDJ':_0x3f3e99(0x103),'OjIBy':_0x3f3e99(0x133),'YdiDP':_0x3f3e99(0x96),'syrvq':function(_0x3493ac,_0x554c03){return _0x3493ac(_0x554c03);},'oVySH':'[Init]\x20Failed\x20to\x20initialize\x20AI\x20model\x20session.','qYOad':_0x3f3e99(0x139),'bdZdD':_0x3f3e99(0xf9),'WGHEo':_0x3f3e99(0x14f),'RslYE':'AI\x20Initialization\x20Failure'};try{const _0x489ef7=await this[_0x3f3e99(0xfd)]();if(!this[_0x3f3e99(0x110)])try{this[_0x3f3e99(0xd6)]=JSON['parse'](localStorage[_0x3f3e99(0xc9)]('sessionConfig'))||{'temperature':0x1,'topK':0x3,'topP':0.9,'maxTokens':0x400,'systemRole':this[_0x3f3e99(0xcc)]||_0x1853a6[_0x3f3e99(0x123)]},await this[_0x3f3e99(0xf2)]['loadModel'](this[_0x3f3e99(0xf6)],{'useWorker':this['useWebWorker'],'onProgress':_0x28518c=>{const _0x533327=_0x3f3e99;console[_0x533327(0xb6)]('['+(this[_0x533327(0x100)]?_0x1853a6[_0x533327(0xa3)]:_0x533327(0xe2))+']\x20Progress:',_0x28518c);const _0x43774a=performance['now'](),_0x92a33e=_0x1853a6[_0x533327(0x132)](_0x1853a6[_0x533327(0x9e)](_0x43774a,this[_0x533327(0x126)]),0x3e8);this[_0x533327(0x116)]=_0x28518c[_0x533327(0x12e)],this[_0x533327(0x127)]=_0x28518c['text'],console[_0x533327(0xb6)](_0x533327(0x11f),this['progressPercent']);let _0x3834ad=0x0;if(_0x1853a6[_0x533327(0x104)](this[_0x533327(0x116)],0x0)){const _0x2dac8d=_0x1853a6['TSqdw'](_0x92a33e,_0x1853a6[_0x533327(0xfc)](this[_0x533327(0x116)],0x64));_0x3834ad=_0x1853a6[_0x533327(0xfe)](_0x2dac8d,0x64-this[_0x533327(0x116)]*0x64),this['loadingProgress']=this[_0x533327(0x116)]*0x64,this['loadingStats']={'startTime':this['startTime'],'progress':this[_0x533327(0x116)],'estimatedTimeRemaining':_0x3834ad};}else{if(this[_0x533327(0x127)][_0x533327(0x10e)](_0x1853a6[_0x533327(0x13b)])){console[_0x533327(0xb6)](_0x1853a6[_0x533327(0x14c)]);const _0x4c8626=this[_0x533327(0x127)][_0x533327(0xec)](/Loading model from cache\[(\d+)\/(\d+)\]/);if(_0x4c8626){const _0x1f7776=_0x1853a6[_0x533327(0xde)](parseInt,_0x4c8626[0x1],0xa),_0x3dcab9=_0x1853a6[_0x533327(0x143)](parseInt,_0x4c8626[0x2],0xa);this['loadingProgress']=_0x1853a6[_0x533327(0x132)](_0x1f7776,_0x3dcab9);const _0x3e6b8b=_0x92a33e/_0x1f7776,_0x292f6c=_0x3dcab9-_0x1f7776;_0x3834ad=_0x1853a6[_0x533327(0x138)](_0x3e6b8b,_0x292f6c),this['loadingProgress']=_0x1853a6[_0x533327(0xfc)](this[_0x533327(0xc1)],0x64),this['loadingStats']={'startTime':this[_0x533327(0x126)],'progress':this[_0x533327(0xc1)],'estimatedTimeRemaining':_0x3834ad};}}}}});const _0x468c49=performance['now'](),_0x59a2cd=_0x1853a6[_0x3f3e99(0x9e)](_0x468c49,this[_0x3f3e99(0x126)])['toFixed'](0x2);return this['modelType']=ModelTypes[_0x3f3e99(0x12d)],this['progressText']=_0x3f3e99(0x117)+_0x59a2cd+_0x3f3e99(0xe3),this[_0x3f3e99(0x110)]=!![],this[_0x3f3e99(0x116)]=0x64,{'success':!![],'modelType':ModelTypes[_0x3f3e99(0x12d)]};}catch(_0x3d509f){statusArea[_0x3f3e99(0xd7)]=_0x3f3e99(0x118)+_0x3d509f[_0x3f3e99(0x124)],console[_0x3f3e99(0x11b)](_0x3d509f);};if(!this[_0x3f3e99(0x110)]){if(this[_0x3f3e99(0xa2)]&&self['ai']&&self['ai'][_0x3f3e99(0xa6)])try{const _0x97d9e8=_0x3f3e99(0x11a)[_0x3f3e99(0x14d)]('|');let _0xfe1de=0x0;while(!![]){switch(_0x97d9e8[_0xfe1de++]){case'0':return{'success':!![],'modelType':ModelTypes[_0x3f3e99(0xe1)]};case'1':this[_0x3f3e99(0x95)]=ModelTypes[_0x3f3e99(0xe1)];continue;case'2':this[_0x3f3e99(0x116)]=0x64;continue;case'3':!this['aiLanguageSession']?(console['log'](_0x3f3e99(0x13a)),this[_0x3f3e99(0x9d)]=await self['ai']['languageModel'][_0x3f3e99(0xb1)]({'temperature':this[_0x3f3e99(0xd6)]['temperature'],'topK':this[_0x3f3e99(0xd6)]['topK']}),console[_0x3f3e99(0xb6)](_0x1853a6[_0x3f3e99(0x97)],this[_0x3f3e99(0x9d)]),Logger[_0x3f3e99(0x141)]('[Init]\x20BrowserAI\x20session\x20initialized\x20with\x20Temperature:\x20'+this[_0x3f3e99(0xd6)][_0x3f3e99(0xeb)]+',\x20TopK:\x20'+this[_0x3f3e99(0xd6)][_0x3f3e99(0x134)])):console[_0x3f3e99(0xb6)](_0x1853a6[_0x3f3e99(0xe0)],this[_0x3f3e99(0x9d)]);continue;case'4':this[_0x3f3e99(0x110)]=!![];continue;case'5':this[_0x3f3e99(0x127)]=_0x1853a6['OjIBy'];continue;}break;}}catch(_0x3b943c){console['error'](_0x1853a6['YdiDP'],_0x3b943c),_0x1853a6[_0x3f3e99(0xbf)](displayError,_0x1853a6['oVySH']);}}return!this[_0x3f3e99(0x110)]&&(console[_0x3f3e99(0x11e)](_0x3f3e99(0x142)),this[_0x3f3e99(0x95)]=ModelTypes['OPEN_AI']),this['progressPercent']=0x64,this[_0x3f3e99(0x127)]=_0x1853a6['qYOad'],{'success':!![],'modelType':this[_0x3f3e99(0x95)]};}catch(_0x4a9c46){const _0x3d3561=_0x1853a6[_0x3f3e99(0xc5)][_0x3f3e99(0x14d)]('|');let _0x47e9a8=0x0;while(!![]){switch(_0x3d3561[_0x47e9a8++]){case'0':console[_0x3f3e99(0xbb)](_0x1853a6[_0x3f3e99(0xd8)]);continue;case'1':console[_0x3f3e99(0x10a)](_0x1853a6[_0x3f3e99(0x10d)]);continue;case'2':console[_0x3f3e99(0x11b)](_0x3f3e99(0xe6),_0x4a9c46);continue;case'3':console[_0x3f3e99(0xc4)]();continue;case'4':return{'success':![],'error':_0x4a9c46[_0x3f3e99(0x124)]};}break;}}}[_0x57db9e(0xe7)](_0x193890){const _0x3f1a25=_0x57db9e,_0x1ec927={'vWUTM':_0x3f1a25(0xc6),'KHnkG':function(_0x2176f0,_0x5f49e7){return _0x2176f0===_0x5f49e7;},'XrKlE':_0x3f1a25(0xfb),'ObcCP':_0x3f1a25(0xb0)};console[_0x3f1a25(0xb6)](_0x1ec927[_0x3f1a25(0xa4)],_0x193890);let _0x144b53=_0x193890;if(_0x1ec927[_0x3f1a25(0xef)](typeof _0x144b53,_0x1ec927[_0x3f1a25(0xba)]))return console[_0x3f1a25(0xb6)](_0x1ec927['ObcCP']),_0x144b53;}async['generateResponse'](_0x2109a2){const _0x200fbd=_0x57db9e,_0x14c85b={'rxRQi':_0x200fbd(0x147),'QPMOX':_0x200fbd(0xbc),'Lfxvr':_0x200fbd(0x107),'tOLLl':_0x200fbd(0xaa),'Aqtzw':_0x200fbd(0x13f),'jiuNC':_0x200fbd(0x105),'BKgVM':_0x200fbd(0xdd),'rnmAq':_0x200fbd(0xc8),'filAX':function(_0x32ee38,_0x4cd606){return _0x32ee38(_0x4cd606);}};if(!this[_0x200fbd(0x110)])throw new Error(_0x14c85b[_0x200fbd(0x150)]);if(this[_0x200fbd(0xf2)]?.[_0x200fbd(0xb3)]())try{return await this[_0x200fbd(0xf2)][_0x200fbd(0x130)](_0x2109a2,{...this[_0x200fbd(0xd6)],...options});}catch(_0x2f53e){console[_0x200fbd(0x11b)](_0x200fbd(0xa1),_0x2f53e),displayError(_0x14c85b[_0x200fbd(0xcd)]);}if(this[_0x200fbd(0xa2)]&&this[_0x200fbd(0x9d)])try{const _0xc25763=await this[_0x200fbd(0x9d)]['prompt'](_0x2109a2);console[_0x200fbd(0xb6)](_0x14c85b[_0x200fbd(0xcb)],_0xc25763);let _0x43d40b=this['cleanJSONMarkdown'](_0xc25763);return _0x43d40b={'choices':[{'message':{'content':_0x43d40b}}]},console[_0x200fbd(0xb6)](_0x14c85b[_0x200fbd(0x106)],_0x43d40b),_0x43d40b;}catch(_0x39b5a3){console[_0x200fbd(0x11b)](_0x14c85b['Aqtzw'],_0x39b5a3),displayError(_0x200fbd(0x12c));}console[_0x200fbd(0x11e)](_0x200fbd(0x144),this[_0x200fbd(0x122)]);try{const _0x192047=await fetch(OpenAIURL,{'method':_0x14c85b[_0x200fbd(0x111)],'headers':{'Authorization':'Bearer\x20'+apiKey,'Content-Type':_0x14c85b[_0x200fbd(0xc3)]},'body':JSON[_0x200fbd(0xd3)]({'model':this['defaultModel'],'messages':_0x2109a2,'temperature':this[_0x200fbd(0xd6)][_0x200fbd(0xeb)],'stream':![]})});if(!_0x192047['ok'])throw new Error(_0x200fbd(0x13c)+_0x192047[_0x200fbd(0x13e)]+'\x20'+_0x192047[_0x200fbd(0x121)]);return await _0x192047[_0x200fbd(0xb9)]();}catch(_0x196240){console[_0x200fbd(0x11b)](_0x14c85b['rnmAq'],_0x196240),_0x14c85b['filAX'](displayError,_0x200fbd(0xdc));}}async[_0x57db9e(0xab)](_0x4fb8d4,_0x288123,_0x529e2c={}){const _0x436c64=_0x57db9e,_0x31a409={'cBHWY':function(_0x53f538,_0x3c8348,_0x5d696c){return _0x53f538(_0x3c8348,_0x5d696c);},'YXgpj':function(_0x5cfba2,_0x33ee50){return _0x5cfba2(_0x33ee50);},'ucuTr':_0x436c64(0xca),'TsrJa':_0x436c64(0xbc),'jsMmk':_0x436c64(0xbe),'Eocud':'[BrowserAI]\x20generateResponseStream\x20','zIPGG':'Browser\x20AI\x20streaming\x20error:','EDnGI':function(_0x2ede79,_0x104eb4){return _0x2ede79(_0x104eb4);},'WrVrY':_0x436c64(0x105),'HvrfY':_0x436c64(0xdd),'eiKyx':'OpenAI\x20streaming\x20error:','GgyBH':'Error\x20generating\x20response\x20using\x20OpenAI\x20API.'};if(!this[_0x436c64(0x110)])throw new Error(_0x436c64(0x147));const _0x254170=async _0x50f094=>{const _0x597651=_0x436c64;let _0x78aa9='';try{for await(const _0x504b50 of _0x50f094){const _0x179ac6=_0x504b50['choices']?.[0x0]?.[_0x597651(0xb7)]?.[_0x597651(0xed)]??'';_0x78aa9+=_0x179ac6;if(_0x288123)_0x31a409[_0x597651(0xb4)](_0x288123,_0x179ac6,_0x78aa9);}}catch(_0x112c1c){console['error'](_0x597651(0x137),_0x112c1c);}return _0x78aa9;};if(this[_0x436c64(0xf2)]?.[_0x436c64(0xb3)]())try{const _0x33cba8={...this['sessionConfig'],..._0x529e2c,'stream':!![]},_0x5a203d=await this['engineWrapper'][_0x436c64(0xab)](_0x4fb8d4,_0x33cba8);return await _0x31a409[_0x436c64(0xaf)](_0x254170,_0x5a203d);}catch(_0x4800a9){console[_0x436c64(0x11b)](_0x31a409[_0x436c64(0xf8)],_0x4800a9),_0x31a409['YXgpj'](displayError,_0x31a409[_0x436c64(0xe4)]);}console[_0x436c64(0xb6)](_0x31a409[_0x436c64(0xee)],this[_0x436c64(0xa2)],this[_0x436c64(0x9d)]);if(this[_0x436c64(0xa2)]&&this[_0x436c64(0x9d)]){console[_0x436c64(0xb6)](_0x31a409[_0x436c64(0x13d)]);try{const _0x5981ba=await this[_0x436c64(0x9d)][_0x436c64(0xb8)](JSON['stringify'](_0x4fb8d4));let _0x2a00f3='';for await(const _0x25df2f of _0x5981ba){_0x2a00f3+=_0x25df2f,_0x288123(_0x25df2f,_0x2a00f3);}}catch(_0xcd23b6){console[_0x436c64(0x11b)](_0x31a409['zIPGG'],_0xcd23b6),_0x31a409[_0x436c64(0x12f)](displayError,'Error\x20generating\x20AI\x20response\x20using\x20browser\x20model.');}}else try{const _0x543c49=await _0x31a409[_0x436c64(0xb4)](fetch,OpenAIURL,{'method':_0x31a409[_0x436c64(0xad)],'headers':{'Authorization':_0x436c64(0x113)+apiKey,'Content-Type':_0x31a409[_0x436c64(0x128)]},'body':JSON[_0x436c64(0xd3)]({'model':this[_0x436c64(0x122)],'messages':_0x4fb8d4,'temperature':this[_0x436c64(0xd6)]['temperature'],'stream':!![]})});if(!_0x543c49['ok'])throw new Error(_0x436c64(0x13c)+_0x543c49['status']+'\x20'+_0x543c49[_0x436c64(0x121)]);const _0x592871=_0x543c49[_0x436c64(0x14e)][_0x436c64(0xae)]();let _0x30c980=new TextDecoder(),_0x510e7d=![],_0x33ab75='';while(!_0x510e7d){const {value:_0x1359b2,done:_0x17a234}=await _0x592871[_0x436c64(0x146)]();_0x510e7d=_0x17a234;if(_0x1359b2){const _0x312826=_0x30c980[_0x436c64(0xa9)](_0x1359b2);_0x33ab75+=_0x312826,_0x31a409[_0x436c64(0xb4)](_0x288123,_0x312826,_0x33ab75);}}}catch(_0x419069){console['error'](_0x31a409[_0x436c64(0xf7)],_0x419069),_0x31a409[_0x436c64(0x12f)](displayError,_0x31a409[_0x436c64(0x102)]);}}[_0x57db9e(0xce)](){const _0x53a736=_0x57db9e;if(!this[_0x53a736(0xf2)])return![];return this[_0x53a736(0xf2)][_0x53a736(0xce)]();}[_0x57db9e(0xa7)](){const _0x251b22=_0x57db9e,_0x3b14f2={'zrplk':_0x251b22(0x14a)};this[_0x251b22(0x9d)]&&this[_0x251b22(0x9d)][_0x251b22(0xd2)](),this[_0x251b22(0xf2)]&&this['engineWrapper'][_0x251b22(0xa7)](),console[_0x251b22(0xb6)](_0x3b14f2[_0x251b22(0x9f)]);}}function _0x101e(_0x21d2a9,_0x314660){const _0x4ee2d5=_0x4ee2();return _0x101e=function(_0x101e27,_0x43cadd){_0x101e27=_0x101e27-0x95;let _0x21e26e=_0x4ee2d5[_0x101e27];return _0x21e26e;},_0x101e(_0x21d2a9,_0x314660);}export default AIAdapter;