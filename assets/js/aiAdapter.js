
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x479ad2=_0x4bfa;(function(_0x30c559,_0x21f794){const _0x50b17c=_0x4bfa,_0xbe9800=_0x30c559();while(!![]){try{const _0x3b8dc8=parseInt(_0x50b17c(0x217))/0x1*(parseInt(_0x50b17c(0x237))/0x2)+-parseInt(_0x50b17c(0x253))/0x3*(parseInt(_0x50b17c(0x277))/0x4)+parseInt(_0x50b17c(0x25f))/0x5+parseInt(_0x50b17c(0x274))/0x6*(parseInt(_0x50b17c(0x1fa))/0x7)+-parseInt(_0x50b17c(0x203))/0x8*(-parseInt(_0x50b17c(0x239))/0x9)+-parseInt(_0x50b17c(0x228))/0xa+-parseInt(_0x50b17c(0x247))/0xb*(parseInt(_0x50b17c(0x1f0))/0xc);if(_0x3b8dc8===_0x21f794)break;else _0xbe9800['push'](_0xbe9800['shift']());}catch(_0x2bf187){_0xbe9800['push'](_0xbe9800['shift']());}}}(_0x3069,0x1bb09));import{Logger,displayError,showStatus}from'./common.js';function _0x3069(){const _0x3c4df0=['customModels','dhlMy','36872IMatBO','Using\x20browser\x20AI:\x20useBrowserAI=','OpenAI\x20API\x20call\x20error:','[MLC]\x20Loading\x20model\x20from\x20cache','ðŸ›‘\x20Response\x20is\x20already\x20an\x20object,\x20skipping\x20JSON.parse.','NuUVC','toFixed','Error\x20Stacktrace','[MLC]\x20Loading\x20progress:','âŒ\x20_checkWebGPUSupport:\x20WebGPU\x20not\x20supported\x20in\x20this\x20browser','[Init]\x20Failed\x20to\x20initialize\x20AI\x20language\x20model\x20session:','MbjcK','36819CFxBdY','eULis','[BrowserAI]\x20generateResponseStream\x20','text','MLC','Model\x20identifier\x20\x22','useBrowserAI','aRKQm','epIwB','cleanJSONMarkdown','nBKQI','CoCSU','877605dNfKXB','warn','UaWxE','POST','lBLgg','stringify','NULL','init','trace','lrmpq','body','MODEL_CONFIG','includes','info','âœ…\x20Model\x20Loaded\x20Successfully\x20in\x20','DzznF','[Init]\x20âœ…\x20Language\x20model\x20session\x20created\x20successfully:','JxUbR','AIAdapter\x20is\x20not\x20initialized.\x20Please\x20call\x20init()\x20first.','CEGBW','decode','6366crGmoO','isModelLoaded','mlc_ai','8xuQWuM','freeze','Bearer\x20','cleanup','kIhMr','text-generation','Browser\x20AI\x20streaming\x20error:','You\x20are\x20a\x20helpful\x20assistant.','BrslM','_checkWebGPUSupport','engineWrapper','Error\x20generating\x20AI\x20response\x20using\x20OpenAI\x20API.','Phi-3.5-mini-instruct','UcDet','statusText','modelIdentifier','application/json','now','TinyLlama-1.1B-Chat-v0.4','unpAJ','yBmMX','promptStreaming','mwMmz','RFMJC','tinyllama-1.1b-chat-v0.4','BROWSER_AI','Error\x20generating\x20response\x20using\x20OpenAI\x20API.','status','isModelCached','Worker','startTime','groupEnd','isInitialized','modelLoadStart','whIZa','error','ienSN','EBdrD','defaultModel','oLdJb','elodE','json','tdPUP','CamBI','mlc','match','816KqIZOm','âŒ\x20_checkWebGPUSupport:\x20No\x20WebGPU\x20adapter\x20found','progressPercent','uwDkZ','Main','JdXfh','generateResponse',']\x20Progress:','Fdhnr','gpu','301QybDiH','progress','FzuiV','[AIAdapter:constructor]\x20Browser\x20AI\x20API\x20available:','[AIAdapter]\x20Cleanup\x20complete.','close','aiLanguageSession','YnVdE','useWebWorker','56AibIjh','AI\x20Initialization\x20Failure','requestAdapter','YmUDP','MLC\x20model\x20generation\x20error:','mAxNq','ubOTl','zpfyC','âŒ\x20_checkWebGPUSupport:\x20WebGPU\x20Check\x20Error:','Loading\x20model\x20from\x20cache','VhlvM','_instance','http://localhost:1234/v1/chat/completions','wzlLa','message','[Init]\x20Failed\x20to\x20initialize\x20AI\x20model\x20session.','[Init]\x20Creating\x20AI\x20language\x20model\x20session...','cMUYW','getItem','sessionConfig','161074yEqQbJ','loadingStats','Browser\x20AI\x20session\x20error:','loadingProgress','ðŸ§¹\x20[aiAdapter]\x20Cleaned\x20response:','ðŸ¤–\x20[aiAdapter]\x20Raw\x20AI\x20Response:','lcHoF','modelConfig','create','read','\x22\x20not\x20recognized.','Error\x20generating\x20AI\x20response\x20using\x20browser\x20model.','oFqKe','languageModel','modelType','Initialization\x20Error:','open_ai','425830koYJKF','generateResponseStream','OpenAI\x20API\x20error:\x20','progressText','[Init]\x20BrowserAI\x20session\x20initialized\x20with\x20Temperature:\x20','Streaming\x20error:','UdkhD','parse','topK','q4f32_1','MLC\x20model\x20streaming\x20error:','KapeI','zxGhE','eyLSj','OpenAI\x20streaming\x20error:','2VApNGs','yrAcz','33768WaZckx','WOiSH','mark','log','3|1|5|0|4|2','temperature','1|0|3|2|4','mlc-ai/Phi-3.5-mini-instruct-{quantization}-MLC','OYYoX','split','getInstance','browser_ai'];_0x3069=function(){return _0x3c4df0;};return _0x3069();}import{MLCEngineWrapper}from'./model/mlcEngineWrapper.js';const OpenAIURL=_0x479ad2(0x20f),apiKey='sk-proj-1234567890',defaultModelName=_0x479ad2(0x1da);export const ModelTypes=Object[_0x479ad2(0x278)]({'NULL':'null','MLC_AI':_0x479ad2(0x276),'BROWSER_AI':_0x479ad2(0x244),'OPEN_AI':_0x479ad2(0x227)});function _0x4bfa(_0xcd51a3,_0x57d694){const _0x306985=_0x3069();return _0x4bfa=function(_0x4bfad8,_0x2b1222){_0x4bfad8=_0x4bfad8-0x1cc;let _0x4b2efc=_0x306985[_0x4bfad8];return _0x4b2efc;},_0x4bfa(_0xcd51a3,_0x57d694);}export class AIAdapter{static ['_instance']=null;static[_0x479ad2(0x243)](_0x55800c=defaultModelName){const _0x1e9e3e=_0x479ad2;return!AIAdapter[_0x1e9e3e(0x20e)]&&(AIAdapter[_0x1e9e3e(0x20e)]=new AIAdapter(_0x55800c)),AIAdapter[_0x1e9e3e(0x20e)];}constructor(_0x1e1c7a=defaultModelName){const _0x50be9d=_0x479ad2,_0x34a3f0={'JdXfh':_0x50be9d(0x1e3),'whIZa':_0x50be9d(0x1ee),'oFqKe':'mlc-ai/TinyLlama-1.1B-Chat-v0.4-{quantization}-MLC','MbjcK':'q4f16_1','eyLSj':_0x50be9d(0x231),'aRKQm':_0x50be9d(0x27c),'lAJZU':_0x50be9d(0x1ce),'FwrUs':_0x50be9d(0x216),'zVBNp':_0x50be9d(0x27e),'CamBI':_0x50be9d(0x1fd)};if(AIAdapter[_0x50be9d(0x20e)])return AIAdapter[_0x50be9d(0x20e)];AIAdapter[_0x50be9d(0x20e)]=this,this['customModels']={},this[_0x50be9d(0x202)]=!![],this[_0x50be9d(0x1d1)]=_0x1e1c7a,this['loadingProgress']=0x0,this[_0x50be9d(0x22b)]='',this[_0x50be9d(0x1f2)]=0x0,this[_0x50be9d(0x225)]=ModelTypes[_0x50be9d(0x265)],performance[_0x50be9d(0x23b)](_0x34a3f0[_0x50be9d(0x1f5)]),this[_0x50be9d(0x1e0)]=performance['now'](),this[_0x50be9d(0x218)]={'startTime':this['startTime'],'progress':0x0,'estimatedTimeRemaining':null},this[_0x50be9d(0x26a)]={'tinyllama-1.1b-chat-v0.4':{'engine':_0x34a3f0[_0x50be9d(0x1e4)],'modelName':_0x50be9d(0x1d4),'modelType':_0x50be9d(0x27c),'repo':_0x34a3f0[_0x50be9d(0x223)],'quantizations':[_0x34a3f0[_0x50be9d(0x252)],_0x34a3f0[_0x50be9d(0x235)]],'defaultQuantization':_0x34a3f0[_0x50be9d(0x235)],'pipeline':_0x34a3f0[_0x50be9d(0x25a)]},'phi-3.5-mini-instruct':{'engine':_0x34a3f0[_0x50be9d(0x1e4)],'modelName':_0x34a3f0['lAJZU'],'modelType':_0x34a3f0['aRKQm'],'repo':_0x50be9d(0x240),'quantizations':[_0x34a3f0['MbjcK'],'q4f32_1'],'defaultQuantization':_0x34a3f0[_0x50be9d(0x235)],'pipeline':_0x34a3f0[_0x50be9d(0x25a)]}},this[_0x50be9d(0x21e)]=this[_0x50be9d(0x245)][this[_0x50be9d(0x1d1)]]||this[_0x50be9d(0x26a)][this[_0x50be9d(0x1d1)]];if(!this['modelConfig'])throw new Error(_0x50be9d(0x258)+this[_0x50be9d(0x1d1)]+_0x50be9d(0x221));this['isInitialized']=![],this[_0x50be9d(0x216)]=JSON[_0x50be9d(0x22f)](localStorage[_0x50be9d(0x215)](_0x34a3f0['FwrUs']))||{'temperature':0x1,'topK':0x3,'topP':0.9,'maxTokens':0x400,'systemRole':_0x34a3f0['zVBNp']},this[_0x50be9d(0x1cc)]=new MLCEngineWrapper(this['modelConfig'],this[_0x50be9d(0x202)]),this[_0x50be9d(0x259)]=!!(self['ai']&&self['ai'][_0x50be9d(0x224)]),console['log'](_0x34a3f0[_0x50be9d(0x1ed)],this['useBrowserAI']),this['aiLanguageSession']=null;}async['_checkWebGPUSupport'](){const _0xc6e5b7=_0x479ad2,_0x59b45c={'VhlvM':_0xc6e5b7(0x250),'lrmpq':_0xc6e5b7(0x1f1),'BrslM':'âœ…\x20WebGPU\x20fully\x20supported','Fdhnr':_0xc6e5b7(0x20b)};if(!navigator['gpu'])return console[_0xc6e5b7(0x1e5)](_0x59b45c[_0xc6e5b7(0x20d)]),![];try{const _0x12cd53=await navigator[_0xc6e5b7(0x1f9)][_0xc6e5b7(0x205)]();if(!_0x12cd53)return console[_0xc6e5b7(0x1e5)](_0x59b45c[_0xc6e5b7(0x268)]),![];return console[_0xc6e5b7(0x23c)](_0x59b45c[_0xc6e5b7(0x27f)]),!![];}catch(_0x825865){return console[_0xc6e5b7(0x1e5)](_0x59b45c[_0xc6e5b7(0x1f8)],_0x825865),![];}}async[_0x479ad2(0x266)](){const _0x3cea70=_0x479ad2,_0x5c86e6={'FzuiV':_0x3cea70(0x1df),'UcDet':_0x3cea70(0x1f4),'yBmMX':function(_0x5b5c4f,_0x157f7d){return _0x5b5c4f/_0x157f7d;},'lTTDC':function(_0x2c4808,_0x47102d){return _0x2c4808>_0x47102d;},'yrAcz':function(_0xed9901,_0x4b94b9){return _0xed9901*_0x4b94b9;},'lcHoF':function(_0x3d1f0f,_0x47dc9b){return _0x3d1f0f-_0x47dc9b;},'dhlMy':function(_0x347178,_0x1142ee){return _0x347178*_0x1142ee;},'mwMmz':_0x3cea70(0x24a),'rcTEM':_0x3cea70(0x20c),'iWMND':function(_0x4b4862,_0x46638b){return _0x4b4862/_0x46638b;},'wzlLa':function(_0x5437d8,_0x6319fc){return _0x5437d8-_0x6319fc;},'HCsBu':function(_0x24f0ea,_0x1ae427){return _0x24f0ea*_0x1ae427;},'kIhMr':_0x3cea70(0x23d),'uwDkZ':_0x3cea70(0x213),'EBdrD':_0x3cea70(0x26f),'rwznw':'[Init]\x20Language\x20model\x20session\x20already\x20exists:','ubOTl':'âœ…\x20BrowserAI\x20Model\x20Loaded\x20Successfully','elodE':_0x3cea70(0x251),'unpAJ':function(_0x191ba1,_0x145151){return _0x191ba1(_0x145151);},'DOrUi':_0x3cea70(0x212),'TNJuI':'[Init]\x20No\x20suitable\x20AI\x20model\x20found.\x20Falling\x20back\x20to\x20OpenAI\x20API.','NuUVC':_0x3cea70(0x23f),'RFMJC':_0x3cea70(0x204),'OYYoX':_0x3cea70(0x24e)};try{const _0x10af06=await this[_0x3cea70(0x280)]();if(!this[_0x3cea70(0x1e2)])try{await this[_0x3cea70(0x1cc)]['loadModel'](this[_0x3cea70(0x21e)],{'useWorker':this[_0x3cea70(0x202)],'onProgress':_0x596a76=>{const _0xcc0535=_0x3cea70;console[_0xcc0535(0x23c)]('['+(this[_0xcc0535(0x202)]?_0x5c86e6[_0xcc0535(0x1fc)]:_0x5c86e6[_0xcc0535(0x1cf)])+_0xcc0535(0x1f7),_0x596a76);const _0x20c23b=performance['now'](),_0x1a7448=_0x5c86e6[_0xcc0535(0x1d6)](_0x20c23b-this[_0xcc0535(0x1e0)],0x3e8);this[_0xcc0535(0x1f2)]=_0x596a76[_0xcc0535(0x1fb)],this[_0xcc0535(0x22b)]=_0x596a76[_0xcc0535(0x256)],console['log'](_0xcc0535(0x24f),this['progressPercent']);let _0x9edbcf=0x0;if(_0x5c86e6['lTTDC'](this[_0xcc0535(0x1f2)],0x0)){const _0x754bbe=_0x1a7448/_0x5c86e6[_0xcc0535(0x238)](this[_0xcc0535(0x1f2)],0x64);_0x9edbcf=_0x754bbe*_0x5c86e6[_0xcc0535(0x21d)](0x64,_0x5c86e6[_0xcc0535(0x246)](this[_0xcc0535(0x1f2)],0x64)),this[_0xcc0535(0x21a)]=_0x5c86e6['dhlMy'](this[_0xcc0535(0x1f2)],0x64),this[_0xcc0535(0x218)]={'startTime':this[_0xcc0535(0x1e0)],'progress':this['progressPercent'],'estimatedTimeRemaining':_0x9edbcf};}else{if(this[_0xcc0535(0x22b)][_0xcc0535(0x26b)](_0x5c86e6[_0xcc0535(0x1d8)])){console[_0xcc0535(0x23c)](_0x5c86e6['rcTEM']);const _0x563330=this[_0xcc0535(0x22b)][_0xcc0535(0x1ef)](/Loading model from cache\[(\d+)\/(\d+)\]/);if(_0x563330){const _0x5f3cac=parseInt(_0x563330[0x1],0xa),_0x5a9433=parseInt(_0x563330[0x2],0xa);this[_0xcc0535(0x21a)]=_0x5c86e6['iWMND'](_0x5f3cac,_0x5a9433);const _0x146522=_0x5c86e6[_0xcc0535(0x1d6)](_0x1a7448,_0x5f3cac),_0x5918e8=_0x5c86e6[_0xcc0535(0x210)](_0x5a9433,_0x5f3cac);_0x9edbcf=_0x146522*_0x5918e8,this[_0xcc0535(0x21a)]=_0x5c86e6['HCsBu'](this[_0xcc0535(0x21a)],0x64),this[_0xcc0535(0x218)]={'startTime':this[_0xcc0535(0x1e0)],'progress':this['loadingProgress'],'estimatedTimeRemaining':_0x9edbcf};}}}}});const _0x4ccbfe=performance[_0x3cea70(0x1d3)](),_0x5e0208=(_0x4ccbfe-this[_0x3cea70(0x1e0)])[_0x3cea70(0x24d)](0x2);return this[_0x3cea70(0x225)]=ModelTypes[_0x3cea70(0x257)],this[_0x3cea70(0x22b)]=_0x3cea70(0x26d)+_0x5e0208+'\x20ms',this[_0x3cea70(0x1e2)]=!![],this[_0x3cea70(0x1f2)]=0x64,{'success':!![],'modelType':ModelTypes['MLC']};}catch(_0x4fbee5){statusArea['textContent']='Error:\x20'+_0x4fbee5['message'],console[_0x3cea70(0x1e5)](_0x4fbee5);};if(!this[_0x3cea70(0x1e2)]){if(this[_0x3cea70(0x259)]&&self['ai']&&self['ai']['languageModel'])try{const _0x254d20=_0x5c86e6[_0x3cea70(0x27b)][_0x3cea70(0x242)]('|');let _0x2ab115=0x0;while(!![]){switch(_0x254d20[_0x2ab115++]){case'0':this['progressPercent']=0x64;continue;case'1':this[_0x3cea70(0x1e2)]=!![];continue;case'2':return{'success':!![],'modelType':ModelTypes[_0x3cea70(0x1db)]};case'3':!this[_0x3cea70(0x200)]?(console['log'](_0x5c86e6[_0x3cea70(0x1f3)]),this['aiLanguageSession']=await self['ai'][_0x3cea70(0x224)][_0x3cea70(0x21f)]({'temperature':this['sessionConfig'][_0x3cea70(0x23e)],'topK':this['sessionConfig']['topK']}),console['log'](_0x5c86e6[_0x3cea70(0x1e7)],this[_0x3cea70(0x200)]),Logger[_0x3cea70(0x26c)](_0x3cea70(0x22c)+this[_0x3cea70(0x216)][_0x3cea70(0x23e)]+',\x20TopK:\x20'+this['sessionConfig'][_0x3cea70(0x230)])):console[_0x3cea70(0x23c)](_0x5c86e6['rwznw'],this['aiLanguageSession']);continue;case'4':this[_0x3cea70(0x22b)]=_0x5c86e6[_0x3cea70(0x209)];continue;case'5':this[_0x3cea70(0x225)]=ModelTypes[_0x3cea70(0x1db)];continue;}break;}}catch(_0x51f2ec){console[_0x3cea70(0x1e5)](_0x5c86e6[_0x3cea70(0x1ea)],_0x51f2ec),_0x5c86e6[_0x3cea70(0x1d5)](displayError,_0x5c86e6['DOrUi']);}}return!this['isInitialized']&&(console['warn'](_0x5c86e6['TNJuI']),this[_0x3cea70(0x225)]=ModelTypes['OPEN_AI']),this[_0x3cea70(0x1f2)]=0x64,this[_0x3cea70(0x22b)]='âœ…\x20Model\x20Loaded\x20Successfully',{'success':!![],'modelType':this['modelType']};}catch(_0x297050){const _0x9b1d5f=_0x5c86e6[_0x3cea70(0x24c)][_0x3cea70(0x242)]('|');let _0x485d83=0x0;while(!![]){switch(_0x9b1d5f[_0x485d83++]){case'0':console[_0x3cea70(0x1e5)](_0x3cea70(0x226),_0x297050);continue;case'1':console['group'](_0x5c86e6[_0x3cea70(0x1d9)]);continue;case'2':console[_0x3cea70(0x1e1)]();continue;case'3':console[_0x3cea70(0x267)](_0x5c86e6[_0x3cea70(0x241)]);continue;case'4':return{'success':![],'error':_0x297050[_0x3cea70(0x211)]};}break;}}}[_0x479ad2(0x25c)](_0x3cb961){const _0x2de5d5=_0x479ad2,_0x2aadcf={'mAxNq':'cleanJSONMarkdown:\x20Raw\x20JSON\x20response:\x20','QMCdr':function(_0x4472f5,_0x19e16b){return _0x4472f5===_0x19e16b;},'JxUbR':'object'};console[_0x2de5d5(0x23c)](_0x2aadcf[_0x2de5d5(0x208)],_0x3cb961);let _0x38546f=_0x3cb961;if(_0x2aadcf['QMCdr'](typeof _0x38546f,_0x2aadcf[_0x2de5d5(0x270)]))return console[_0x2de5d5(0x23c)](_0x2de5d5(0x24b)),_0x38546f;}async[_0x479ad2(0x1f6)](_0x38b8de){const _0x1f9c40=_0x479ad2,_0x232564={'zpfyC':_0x1f9c40(0x271),'CoCSU':_0x1f9c40(0x207),'UaWxE':'Error\x20generating\x20response\x20using\x20MLC\x20model.\x20Falling\x20back\x20to\x20alternative.','sRMLm':_0x1f9c40(0x21c),'RSPMT':_0x1f9c40(0x21b),'nBKQI':_0x1f9c40(0x219),'YnVdE':_0x1f9c40(0x222),'DGkVG':'[Fallback]\x20Using\x20default\x20model:','CEGBW':function(_0x13e4fc,_0x4123fb,_0x4c454c){return _0x13e4fc(_0x4123fb,_0x4c454c);},'DzznF':_0x1f9c40(0x262),'mfLfr':_0x1f9c40(0x1d2),'YmUDP':_0x1f9c40(0x249),'WOiSH':function(_0x433202,_0xe7611a){return _0x433202(_0xe7611a);},'epIwB':_0x1f9c40(0x1cd)};if(!this[_0x1f9c40(0x1e2)])throw new Error(_0x232564[_0x1f9c40(0x20a)]);if(this[_0x1f9c40(0x1cc)]?.[_0x1f9c40(0x275)]())try{return await this[_0x1f9c40(0x1cc)]['generateText'](_0x38b8de,{...this['sessionConfig'],...options});}catch(_0x21a71e){console['error'](_0x232564[_0x1f9c40(0x25e)],_0x21a71e),displayError(_0x232564[_0x1f9c40(0x261)]);}if(this[_0x1f9c40(0x259)]&&this['aiLanguageSession'])try{const _0xae432=await this[_0x1f9c40(0x200)]['prompt'](_0x38b8de);console[_0x1f9c40(0x23c)](_0x232564['sRMLm'],_0xae432);let _0x44712a=this[_0x1f9c40(0x25c)](_0xae432);return _0x44712a={'choices':[{'message':{'content':_0x44712a}}]},console[_0x1f9c40(0x23c)](_0x232564['RSPMT'],_0x44712a),_0x44712a;}catch(_0x25ccdc){console[_0x1f9c40(0x1e5)](_0x232564[_0x1f9c40(0x25d)],_0x25ccdc),displayError(_0x232564[_0x1f9c40(0x201)]);}console[_0x1f9c40(0x260)](_0x232564['DGkVG'],this[_0x1f9c40(0x1e8)]);try{const _0x11e535=await _0x232564[_0x1f9c40(0x272)](fetch,OpenAIURL,{'method':_0x232564[_0x1f9c40(0x26e)],'headers':{'Authorization':_0x1f9c40(0x279)+apiKey,'Content-Type':_0x232564['mfLfr']},'body':JSON[_0x1f9c40(0x264)]({'model':this[_0x1f9c40(0x1e8)],'messages':_0x38b8de,'temperature':this[_0x1f9c40(0x216)][_0x1f9c40(0x23e)],'stream':![]})});if(!_0x11e535['ok'])throw new Error(_0x1f9c40(0x22a)+_0x11e535[_0x1f9c40(0x1dd)]+'\x20'+_0x11e535[_0x1f9c40(0x1d0)]);return await _0x11e535[_0x1f9c40(0x1eb)]();}catch(_0x35f66e){console['error'](_0x232564[_0x1f9c40(0x206)],_0x35f66e),_0x232564[_0x1f9c40(0x23a)](displayError,_0x232564[_0x1f9c40(0x25b)]);}}async[_0x479ad2(0x229)](_0x5a74d4,_0x1fd210,_0x2a8972={}){const _0x297317=_0x479ad2,_0x54e07e={'UdkhD':_0x297317(0x22d),'zFRpM':function(_0x2410ad,_0x27c19e){return _0x2410ad(_0x27c19e);},'eULis':_0x297317(0x248),'lBLgg':_0x297317(0x255),'oLdJb':function(_0x236525,_0x2f8ff8,_0x1ef7d1){return _0x236525(_0x2f8ff8,_0x1ef7d1);},'KaIpj':_0x297317(0x27d),'cMUYW':function(_0x586d68,_0x52f214){return _0x586d68(_0x52f214);},'zxGhE':_0x297317(0x1d2),'ienSN':_0x297317(0x236),'KapeI':function(_0x28def2,_0x16b371){return _0x28def2(_0x16b371);},'dgDpS':_0x297317(0x1dc)};if(!this[_0x297317(0x1e2)])throw new Error(_0x297317(0x271));const _0x228805=async _0x5a22e7=>{const _0x417021=_0x297317;let _0x42a07d='';try{for await(const _0x22e929 of _0x5a22e7){const _0x404634=_0x22e929['choices']?.[0x0]?.['delta']?.['content']??'';_0x42a07d+=_0x404634;if(_0x1fd210)_0x1fd210(_0x404634,_0x42a07d);}}catch(_0x26db10){console['error'](_0x54e07e[_0x417021(0x22e)],_0x26db10);}return _0x42a07d;};if(this['engineWrapper']?.[_0x297317(0x275)]())try{const _0x3d72e0={...this[_0x297317(0x216)],..._0x2a8972,'stream':!![]},_0x1df3c3=await this['engineWrapper'][_0x297317(0x229)](_0x5a74d4,_0x3d72e0);return await _0x54e07e['zFRpM'](_0x228805,_0x1df3c3);}catch(_0x1f3d7d){console[_0x297317(0x1e5)](_0x297317(0x232),_0x1f3d7d),displayError('Error\x20generating\x20response\x20using\x20MLC\x20model.\x20Falling\x20back\x20to\x20alternative.');}console['log'](_0x54e07e[_0x297317(0x254)],this[_0x297317(0x259)],this['aiLanguageSession']);if(this['useBrowserAI']&&this['aiLanguageSession']){console[_0x297317(0x23c)](_0x54e07e[_0x297317(0x263)]);try{const _0x2b05a6=await this[_0x297317(0x200)][_0x297317(0x1d7)](JSON[_0x297317(0x264)](_0x5a74d4));let _0x3a8675='';for await(const _0x126697 of _0x2b05a6){_0x3a8675+=_0x126697,_0x54e07e[_0x297317(0x1e9)](_0x1fd210,_0x126697,_0x3a8675);}}catch(_0x2634e2){console[_0x297317(0x1e5)](_0x54e07e['KaIpj'],_0x2634e2),_0x54e07e[_0x297317(0x214)](displayError,_0x297317(0x222));}}else try{const _0xe0de62=await _0x54e07e[_0x297317(0x1e9)](fetch,OpenAIURL,{'method':_0x297317(0x262),'headers':{'Authorization':_0x297317(0x279)+apiKey,'Content-Type':_0x54e07e[_0x297317(0x234)]},'body':JSON['stringify']({'model':this[_0x297317(0x1e8)],'messages':_0x5a74d4,'temperature':this[_0x297317(0x216)][_0x297317(0x23e)],'stream':!![]})});if(!_0xe0de62['ok'])throw new Error(_0x297317(0x22a)+_0xe0de62['status']+'\x20'+_0xe0de62['statusText']);const _0x2f866e=_0xe0de62[_0x297317(0x269)]['getReader']();let _0x1c69d9=new TextDecoder(),_0x28439b=![],_0x5dbbf6='';while(!_0x28439b){const {value:_0x3e78fe,done:_0xb3953d}=await _0x2f866e[_0x297317(0x220)]();_0x28439b=_0xb3953d;if(_0x3e78fe){const _0x5df848=_0x1c69d9[_0x297317(0x273)](_0x3e78fe);_0x5dbbf6+=_0x5df848,_0x54e07e[_0x297317(0x1e9)](_0x1fd210,_0x5df848,_0x5dbbf6);}}}catch(_0x227c68){console[_0x297317(0x1e5)](_0x54e07e[_0x297317(0x1e6)],_0x227c68),_0x54e07e[_0x297317(0x233)](displayError,_0x54e07e['dgDpS']);}}['isModelCached'](){const _0x155ee0=_0x479ad2;if(!this['engineWrapper'])return![];return this[_0x155ee0(0x1cc)][_0x155ee0(0x1de)]();}[_0x479ad2(0x27a)](){const _0x5e8723=_0x479ad2,_0x514e8b={'tdPUP':_0x5e8723(0x1fe)};this['aiLanguageSession']&&this[_0x5e8723(0x200)][_0x5e8723(0x1ff)](),this[_0x5e8723(0x1cc)]&&this[_0x5e8723(0x1cc)][_0x5e8723(0x27a)](),console[_0x5e8723(0x23c)](_0x514e8b[_0x5e8723(0x1ec)]);}}export default AIAdapter;