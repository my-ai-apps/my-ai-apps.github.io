
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x437863=_0x6e65;(function(_0x4ceaf5,_0x34beab){const _0x3a5f14=_0x6e65,_0x1e599b=_0x4ceaf5();while(!![]){try{const _0x3b538b=-parseInt(_0x3a5f14(0x1f2))/0x1+-parseInt(_0x3a5f14(0x1b4))/0x2+-parseInt(_0x3a5f14(0x1f6))/0x3+-parseInt(_0x3a5f14(0x1f5))/0x4+-parseInt(_0x3a5f14(0x208))/0x5*(parseInt(_0x3a5f14(0x1e6))/0x6)+-parseInt(_0x3a5f14(0x1e8))/0x7*(-parseInt(_0x3a5f14(0x1e0))/0x8)+-parseInt(_0x3a5f14(0x1d7))/0x9*(-parseInt(_0x3a5f14(0x201))/0xa);if(_0x3b538b===_0x34beab)break;else _0x1e599b['push'](_0x1e599b['shift']());}catch(_0x37939f){_0x1e599b['push'](_0x1e599b['shift']());}}}(_0x1909,0xafb9b));import{Logger,displayError,showStatus}from'./common.js';import{MLCEngineWrapper}from'./model/mlcEngineWrapper.js';function _0x1909(){const _0x1a9c6a=['Bearer\x20','null','close','ddWLL','includes','Main','status','[Init]\x20âœ…\x20Language\x20model\x20session\x20created\x20successfully:','loadingStats','601420NWWzHH','read','loadingProgress','statusText','[MLC]\x20Loading\x20model\x20from\x20cache','q4f32_1','PpoeU','153070ypqmcA','Adkha','[AIAdapter:constructor]\x20Browser\x20AI\x20API\x20available:','generateResponse','info','customModels','error','JhXVT','Tntwq','useBrowserAI',']\x20Progress:','TinyLlama-1.1B-Chat-v0.4','group','engineWrapper','[AIAdapter]\x20Cleanup\x20complete.','MTUCk','NULL',',\x20TopK:\x20','lIVcv','EOUGF','cleanJSONMarkdown','promptStreaming','[BrowserAI]\x20generateResponseStream\x20','generateText','ucDXE','getItem','application/json','modelConfig','OpenAI\x20API\x20error:\x20','âŒ\x20_checkWebGPUSupport:\x20No\x20WebGPU\x20adapter\x20found','now','Using\x20browser\x20AI:\x20useBrowserAI=','WgEkh','split','uTFES','[Init]\x20Creating\x20AI\x20language\x20model\x20session...','Browser\x20AI\x20session\x20error:','getReader','stringify','decode','_checkWebGPUSupport','Zvdly','startTime','[Init]\x20BrowserAI\x20session\x20initialized\x20with\x20Temperature:\x20','BqBGJ','\x22\x20not\x20recognized.','Model\x20identifier\x20\x22','[Init]\x20Language\x20model\x20session\x20already\x20exists:','progressText','warn','IPxSW','Streaming\x20error:','Kgwll','progressPercent','MLC','temperature','BROWSER_AI','content','Initialization\x20Error:','nETPs','fybBp','3|0|2|1|4','HxZQb','YXTnA','aiLanguageSession','freeze','PNqjN','Browser\x20AI\x20streaming\x20error:','text-generation','[Init]\x20No\x20suitable\x20AI\x20model\x20found.\x20Falling\x20back\x20to\x20OpenAI\x20API.','q4f16_1','loadModel','log','POST','init','WlLEn','trace','object','cleanup','systemRole','gpu','getInstance','generateResponseStream','sessionConfig','OPEN_AI','isModelCached','Worker','âœ…\x20WebGPU\x20fully\x20supported','fcmTe','2144192QDuEfv','mark','useWebWorker','ySLmN','zRxVl','NRqWi','ðŸ›‘\x20Response\x20is\x20already\x20an\x20object,\x20skipping\x20JSON.parse.','fUukx','defaultModel','VWBTN','MODEL_CONFIG','textContent','iVzxd','mlc_ai','isInitialized','QWCiz','GtIxN','yXRGn','prompt','wUnIL','You\x20are\x20a\x20helpful\x20assistant1.','choices','HFjqp','Error:\x20','YIHGN','DyrCx','âŒ\x20_checkWebGPUSupport:\x20WebGPU\x20Check\x20Error:','âœ…\x20BrowserAI\x20Model\x20Loaded\x20Successfully','You\x20are\x20a\x20helpful\x20assistant5.','modelIdentifier','Berhc','isModelLoaded','mlc','EDvfu','languageModel','522fupzUX','open_ai','browser_ai','_instance','delta','OpenAI\x20streaming\x20error:','match','Loading\x20model\x20from\x20cache','requestAdapter','1410568dIcVWl','TDPan','ðŸ¤–\x20[aiAdapter]\x20Raw\x20AI\x20Response:','modelLoadStart','IAvCX','toFixed','276CGItVu','QaWAo','49ahPJoe','topK','progress','modelType','ujipr','ljERh','Error\x20generating\x20AI\x20response\x20using\x20OpenAI\x20API.','http://localhost:1234/v1/chat/completions','qlmji','parse','305180XBjdVL','AI\x20Initialization\x20Failure','uqPEP','3611960SewIvc','942606hZXPKD','MLC\x20model\x20streaming\x20error:'];_0x1909=function(){return _0x1a9c6a;};return _0x1909();}const OpenAIURL=_0x437863(0x1ef),apiKey='sk-proj-1234567890',defaultModelName='tinyllama-1.1b-chat-v0.4';function _0x6e65(_0x1a3beb,_0x543167){const _0x1909ba=_0x1909();return _0x6e65=function(_0x6e659a,_0x2a654a){_0x6e659a=_0x6e659a-0x193;let _0x402d99=_0x1909ba[_0x6e659a];return _0x402d99;},_0x6e65(_0x1a3beb,_0x543167);}export const ModelTypes=Object[_0x437863(0x19c)]({'NULL':_0x437863(0x1f9),'MLC_AI':_0x437863(0x1c1),'BROWSER_AI':_0x437863(0x1d9),'OPEN_AI':_0x437863(0x1d8)});export class AIAdapter{static [_0x437863(0x1da)]=null;static[_0x437863(0x1ac)](_0x561c07=defaultModelName){const _0x45a31d=_0x437863;return!AIAdapter['_instance']&&(AIAdapter[_0x45a31d(0x1da)]=new AIAdapter(_0x561c07)),AIAdapter[_0x45a31d(0x1da)];}constructor(_0x2909ae=defaultModelName){const _0x597304=_0x437863,_0xd39042={'qlmji':_0x597304(0x1e3),'bhipl':_0x597304(0x213),'HxZQb':'mlc-ai/TinyLlama-1.1B-Chat-v0.4-{quantization}-MLC','WgEkh':_0x597304(0x206),'iVzxd':_0x597304(0x19f),'NQBWD':'Phi-3.5-mini-instruct','WlLEn':'mlc-ai/Phi-3.5-mini-instruct-{quantization}-MLC','uqPEP':_0x597304(0x1a1),'HFjqp':_0x597304(0x20a)};if(AIAdapter[_0x597304(0x1da)])return AIAdapter[_0x597304(0x1da)];AIAdapter['_instance']=this,this['customModels']={},this[_0x597304(0x1b6)]=!![],this['modelIdentifier']=_0x2909ae,this['loadingProgress']=0x0,this[_0x597304(0x238)]='',this[_0x597304(0x23d)]=0x0,this[_0x597304(0x1aa)]=_0x597304(0x1d0),this['modelType']=ModelTypes[_0x597304(0x218)],performance[_0x597304(0x1b5)](_0xd39042[_0x597304(0x1f0)]),this[_0x597304(0x232)]=performance[_0x597304(0x226)](),this['loadingStats']={'startTime':this[_0x597304(0x232)],'progress':0x0,'estimatedTimeRemaining':null},this[_0x597304(0x1be)]={'tinyllama-1.1b-chat-v0.4':{'engine':_0x597304(0x1d4),'modelName':_0xd39042['bhipl'],'modelType':_0x597304(0x19f),'repo':_0xd39042[_0x597304(0x199)],'quantizations':['q4f16_1',_0xd39042[_0x597304(0x228)]],'defaultQuantization':_0xd39042[_0x597304(0x228)],'pipeline':_0xd39042[_0x597304(0x1c0)]},'phi-3.5-mini-instruct':{'engine':_0x597304(0x1d4),'modelName':_0xd39042['NQBWD'],'modelType':_0x597304(0x19f),'repo':_0xd39042[_0x597304(0x1a6)],'quantizations':[_0xd39042[_0x597304(0x1f4)],_0xd39042[_0x597304(0x228)]],'defaultQuantization':_0xd39042[_0x597304(0x228)],'pipeline':_0xd39042[_0x597304(0x1c0)]}},this[_0x597304(0x223)]=this[_0x597304(0x20d)][this[_0x597304(0x1d1)]]||this[_0x597304(0x1be)][this[_0x597304(0x1d1)]];if(!this[_0x597304(0x223)])throw new Error(_0x597304(0x236)+this['modelIdentifier']+_0x597304(0x235));this['isInitialized']=![],this[_0x597304(0x215)]=new MLCEngineWrapper(this['modelConfig'],this[_0x597304(0x1b6)]),this['useBrowserAI']=!!(self['ai']&&self['ai']['languageModel']),console[_0x597304(0x1a3)](_0xd39042[_0x597304(0x1ca)],this[_0x597304(0x211)]),this[_0x597304(0x19b)]=null;}async[_0x437863(0x230)](){const _0x559f88=_0x437863,_0x1adaff={'ZBoOA':'âŒ\x20_checkWebGPUSupport:\x20WebGPU\x20not\x20supported\x20in\x20this\x20browser','EOUGF':_0x559f88(0x225),'QaWAo':_0x559f88(0x1b2)};if(!navigator[_0x559f88(0x1ab)])return console['error'](_0x1adaff['ZBoOA']),![];try{const _0x516356=await navigator[_0x559f88(0x1ab)][_0x559f88(0x1df)]();if(!_0x516356)return console[_0x559f88(0x20e)](_0x1adaff[_0x559f88(0x21b)]),![];return console['log'](_0x1adaff[_0x559f88(0x1e7)]),!![];}catch(_0x91e501){return console['error'](_0x559f88(0x1ce),_0x91e501),![];}}async[_0x437863(0x1a5)](){const _0x428aa8=_0x437863,_0x48324d={'ujipr':_0x428aa8(0x1b1),'Berhc':function(_0x4d26e4,_0x2ee7ce){return _0x4d26e4/_0x2ee7ce;},'IAvCX':function(_0x536eb0,_0x21024a){return _0x536eb0-_0x21024a;},'nETPs':function(_0x2e316d,_0xe6c58c){return _0x2e316d>_0xe6c58c;},'wUnIL':function(_0x3a1a00,_0x57f0fd){return _0x3a1a00*_0x57f0fd;},'DyrCx':function(_0x298404,_0x1a4e9e){return _0x298404*_0x1a4e9e;},'MTUCk':_0x428aa8(0x205),'GHsFO':function(_0x371da6,_0x381dea,_0x3575c0){return _0x371da6(_0x381dea,_0x3575c0);},'JBbmq':_0x428aa8(0x1ae),'yXRGn':function(_0x432535,_0x25bea1){return _0x432535-_0x25bea1;},'lIVcv':'4|3|5|0|1|2','LnQHy':_0x428aa8(0x1cf),'Kgwll':_0x428aa8(0x22b),'bYdow':_0x428aa8(0x1ff),'Hwibc':_0x428aa8(0x237),'YXTnA':'[Init]\x20Failed\x20to\x20initialize\x20AI\x20language\x20model\x20session:','zRxVl':function(_0x5af7a8,_0x3e1089){return _0x5af7a8(_0x3e1089);},'PNqjN':'[Init]\x20Failed\x20to\x20initialize\x20AI\x20model\x20session.','fcmTe':_0x428aa8(0x1a0),'pMtcV':_0x428aa8(0x198),'JoEGJ':_0x428aa8(0x195),'Zvdly':'Error\x20Stacktrace'};try{const _0x17d2cf=await this[_0x428aa8(0x230)]();if(!this['isInitialized'])try{this[_0x428aa8(0x1ae)]=JSON[_0x428aa8(0x1f1)](localStorage[_0x428aa8(0x221)](_0x48324d['JBbmq']))||{'temperature':0x1,'topK':0x3,'topP':0.9,'maxTokens':0x400,'systemRole':this['systemRole']||_0x428aa8(0x1c8)},await this[_0x428aa8(0x215)][_0x428aa8(0x1a2)](this[_0x428aa8(0x223)],{'useWorker':this[_0x428aa8(0x1b6)],'onProgress':_0x2694f6=>{const _0x10b90d=_0x428aa8;console[_0x10b90d(0x1a3)]('['+(this[_0x10b90d(0x1b6)]?_0x48324d[_0x10b90d(0x1ec)]:_0x10b90d(0x1fd))+_0x10b90d(0x212),_0x2694f6);const _0x39add0=performance[_0x10b90d(0x226)](),_0x4efc1b=_0x48324d[_0x10b90d(0x1d2)](_0x48324d[_0x10b90d(0x1e4)](_0x39add0,this[_0x10b90d(0x232)]),0x3e8);this[_0x10b90d(0x23d)]=_0x2694f6[_0x10b90d(0x1ea)],this[_0x10b90d(0x238)]=_0x2694f6['text'],console[_0x10b90d(0x1a3)]('[MLC]\x20Loading\x20progress:',this[_0x10b90d(0x23d)]);let _0x576804=0x0;if(_0x48324d[_0x10b90d(0x196)](this[_0x10b90d(0x23d)],0x0)){const _0x4612e8=_0x48324d[_0x10b90d(0x1d2)](_0x4efc1b,_0x48324d[_0x10b90d(0x1c7)](this['progressPercent'],0x64));_0x576804=_0x48324d[_0x10b90d(0x1c7)](_0x4612e8,0x64-_0x48324d['wUnIL'](this['progressPercent'],0x64)),this[_0x10b90d(0x203)]=_0x48324d[_0x10b90d(0x1cd)](this[_0x10b90d(0x23d)],0x64),this[_0x10b90d(0x200)]={'startTime':this[_0x10b90d(0x232)],'progress':this[_0x10b90d(0x23d)],'estimatedTimeRemaining':_0x576804};}else{if(this[_0x10b90d(0x238)][_0x10b90d(0x1fc)](_0x48324d[_0x10b90d(0x217)])){console[_0x10b90d(0x1a3)](_0x10b90d(0x1de));const _0x4a4f0c=this[_0x10b90d(0x238)][_0x10b90d(0x1dd)](/Loading model from cache\[(\d+)\/(\d+)\]/);if(_0x4a4f0c){const _0x3c3e28=parseInt(_0x4a4f0c[0x1],0xa),_0x4043da=_0x48324d['GHsFO'](parseInt,_0x4a4f0c[0x2],0xa);this['loadingProgress']=_0x3c3e28/_0x4043da;const _0x175776=_0x48324d[_0x10b90d(0x1d2)](_0x4efc1b,_0x3c3e28),_0xca6cb3=_0x48324d['IAvCX'](_0x4043da,_0x3c3e28);_0x576804=_0x175776*_0xca6cb3,this['loadingProgress']=this[_0x10b90d(0x203)]*0x64,this[_0x10b90d(0x200)]={'startTime':this['startTime'],'progress':this[_0x10b90d(0x203)],'estimatedTimeRemaining':_0x576804};}}}}});const _0x49e2fe=performance[_0x428aa8(0x226)](),_0x1355a7=_0x48324d[_0x428aa8(0x1c5)](_0x49e2fe,this['startTime'])[_0x428aa8(0x1e5)](0x2);return this[_0x428aa8(0x1eb)]=ModelTypes[_0x428aa8(0x23e)],this['progressText']='âœ…\x20Model\x20Loaded\x20Successfully\x20in\x20'+_0x1355a7+'\x20ms',this['isInitialized']=!![],this[_0x428aa8(0x23d)]=0x64,{'success':!![],'modelType':ModelTypes[_0x428aa8(0x23e)]};}catch(_0x4eb75b){statusArea[_0x428aa8(0x1bf)]=_0x428aa8(0x1cb)+_0x4eb75b['message'],console['error'](_0x4eb75b);};if(!this[_0x428aa8(0x1c2)]){if(this['useBrowserAI']&&self['ai']&&self['ai'][_0x428aa8(0x1d6)])try{const _0x360f6a=_0x48324d[_0x428aa8(0x21a)][_0x428aa8(0x229)]('|');let _0x172389=0x0;while(!![]){switch(_0x360f6a[_0x172389++]){case'0':this[_0x428aa8(0x23d)]=0x64;continue;case'1':this[_0x428aa8(0x238)]=_0x48324d['LnQHy'];continue;case'2':return{'success':!![],'modelType':ModelTypes[_0x428aa8(0x193)]};case'3':this[_0x428aa8(0x1c2)]=!![];continue;case'4':!this[_0x428aa8(0x19b)]?(console[_0x428aa8(0x1a3)](_0x48324d[_0x428aa8(0x23c)]),this['aiLanguageSession']=await self['ai']['languageModel']['create']({'temperature':this[_0x428aa8(0x1ae)][_0x428aa8(0x23f)],'topK':this[_0x428aa8(0x1ae)][_0x428aa8(0x1e9)]}),console[_0x428aa8(0x1a3)](_0x48324d['bYdow'],this[_0x428aa8(0x19b)]),Logger[_0x428aa8(0x20c)](_0x428aa8(0x233)+this[_0x428aa8(0x1ae)][_0x428aa8(0x23f)]+_0x428aa8(0x219)+this[_0x428aa8(0x1ae)][_0x428aa8(0x1e9)])):console['log'](_0x48324d['Hwibc'],this[_0x428aa8(0x19b)]);continue;case'5':this['modelType']=ModelTypes['BROWSER_AI'];continue;}break;}}catch(_0x2dcce7){console['error'](_0x48324d[_0x428aa8(0x19a)],_0x2dcce7),_0x48324d[_0x428aa8(0x1b8)](displayError,_0x48324d[_0x428aa8(0x19d)]);}}return!this[_0x428aa8(0x1c2)]&&(console[_0x428aa8(0x239)](_0x48324d[_0x428aa8(0x1b3)]),this[_0x428aa8(0x1eb)]=ModelTypes[_0x428aa8(0x1af)]),this['progressPercent']=0x64,this[_0x428aa8(0x238)]='âœ…\x20Model\x20Loaded\x20Successfully',{'success':!![],'modelType':this[_0x428aa8(0x1eb)]};}catch(_0x2fcc6e){const _0x589531=_0x48324d['pMtcV'][_0x428aa8(0x229)]('|');let _0x1b3c2c=0x0;while(!![]){switch(_0x589531[_0x1b3c2c++]){case'0':console['error'](_0x48324d['JoEGJ'],_0x2fcc6e);continue;case'1':console['groupEnd']();continue;case'2':console[_0x428aa8(0x1a7)](_0x48324d[_0x428aa8(0x231)]);continue;case'3':console[_0x428aa8(0x214)](_0x428aa8(0x1f3));continue;case'4':return{'success':![],'error':_0x2fcc6e['message']};}break;}}}[_0x437863(0x21c)](_0x193810){const _0x2e13fc=_0x437863,_0x308067={'ljERh':'cleanJSONMarkdown:\x20Raw\x20JSON\x20response:\x20','fUukx':function(_0x3c863b,_0x5e5963){return _0x3c863b===_0x5e5963;},'TUOBj':_0x2e13fc(0x1a8),'QWCiz':_0x2e13fc(0x1ba)};console[_0x2e13fc(0x1a3)](_0x308067[_0x2e13fc(0x1ed)],_0x193810);let _0x28019e=_0x193810;if(_0x308067[_0x2e13fc(0x1bb)](typeof _0x28019e,_0x308067['TUOBj']))return console['log'](_0x308067[_0x2e13fc(0x1c3)]),_0x28019e;}async[_0x437863(0x20b)](_0xaa694d){const _0x3bc252=_0x437863,_0xf4ac6={'FQiEq':'AIAdapter\x20is\x20not\x20initialized.\x20Please\x20call\x20init()\x20first.','VWBTN':function(_0x115a80,_0x185a3d){return _0x115a80(_0x185a3d);},'tJfRh':'Error\x20generating\x20response\x20using\x20MLC\x20model.\x20Falling\x20back\x20to\x20alternative.','YIHGN':'ðŸ§¹\x20[aiAdapter]\x20Cleaned\x20response:','paGCG':_0x3bc252(0x22c),'EDvfu':function(_0x414064,_0x4f8e63){return _0x414064(_0x4f8e63);},'NRqWi':'[Fallback]\x20Using\x20default\x20model:','HMNHw':_0x3bc252(0x1a4),'ySLmN':_0x3bc252(0x222),'GtIxN':'OpenAI\x20API\x20call\x20error:','uTFES':function(_0x3cc3c0,_0x29e220){return _0x3cc3c0(_0x29e220);}};if(!this[_0x3bc252(0x1c2)])throw new Error(_0xf4ac6['FQiEq']);if(this[_0x3bc252(0x215)]?.['isModelLoaded']())try{return await this[_0x3bc252(0x215)][_0x3bc252(0x21f)](_0xaa694d,{...this[_0x3bc252(0x1ae)],...options});}catch(_0x22c3e8){console[_0x3bc252(0x20e)]('MLC\x20model\x20generation\x20error:',_0x22c3e8),_0xf4ac6[_0x3bc252(0x1bd)](displayError,_0xf4ac6['tJfRh']);}if(this[_0x3bc252(0x211)]&&this['aiLanguageSession'])try{const _0x52601f=await this['aiLanguageSession'][_0x3bc252(0x1c6)](_0xaa694d);console[_0x3bc252(0x1a3)](_0x3bc252(0x1e2),_0x52601f);let _0xb4be17=this[_0x3bc252(0x21c)](_0x52601f);return _0xb4be17={'choices':[{'message':{'content':_0xb4be17}}]},console['log'](_0xf4ac6[_0x3bc252(0x1cc)],_0xb4be17),_0xb4be17;}catch(_0x95aa62){console[_0x3bc252(0x20e)](_0xf4ac6['paGCG'],_0x95aa62),_0xf4ac6[_0x3bc252(0x1d5)](displayError,'Error\x20generating\x20AI\x20response\x20using\x20browser\x20model.');}console[_0x3bc252(0x239)](_0xf4ac6[_0x3bc252(0x1b9)],this[_0x3bc252(0x1bc)]);try{const _0x1ed30d=await fetch(OpenAIURL,{'method':_0xf4ac6['HMNHw'],'headers':{'Authorization':'Bearer\x20'+apiKey,'Content-Type':_0xf4ac6[_0x3bc252(0x1b7)]},'body':JSON[_0x3bc252(0x22e)]({'model':this[_0x3bc252(0x1bc)],'messages':_0xaa694d,'temperature':this['sessionConfig'][_0x3bc252(0x23f)],'stream':![]})});if(!_0x1ed30d['ok'])throw new Error('OpenAI\x20API\x20error:\x20'+_0x1ed30d[_0x3bc252(0x1fe)]+'\x20'+_0x1ed30d[_0x3bc252(0x204)]);return await _0x1ed30d['json']();}catch(_0x48982a){console['error'](_0xf4ac6[_0x3bc252(0x1c4)],_0x48982a),_0xf4ac6[_0x3bc252(0x22a)](displayError,_0x3bc252(0x1ee));}}async['generateResponseStream'](_0x1922b4,_0x13af39,_0x18e9cb={}){const _0x595da0=_0x437863,_0x29c012={'PpoeU':_0x595da0(0x23b),'XylyF':'AIAdapter\x20is\x20not\x20initialized.\x20Please\x20call\x20init()\x20first.','Tntwq':function(_0x234df5,_0x53e92a){return _0x234df5(_0x53e92a);},'ourAq':_0x595da0(0x1f7),'fybBp':'Error\x20generating\x20response\x20using\x20MLC\x20model.\x20Falling\x20back\x20to\x20alternative.','TDPan':_0x595da0(0x227),'ddWLL':_0x595da0(0x21e),'VcGpy':function(_0x2a277e,_0x51b7dc,_0x371eba){return _0x2a277e(_0x51b7dc,_0x371eba);},'ucDXE':_0x595da0(0x19e),'IPxSW':'Error\x20generating\x20AI\x20response\x20using\x20browser\x20model.','BqBGJ':_0x595da0(0x1a4),'JiIjS':_0x595da0(0x222),'Adkha':_0x595da0(0x1dc),'JhXVT':'Error\x20generating\x20response\x20using\x20OpenAI\x20API.'};if(!this[_0x595da0(0x1c2)])throw new Error(_0x29c012['XylyF']);const _0x2067ad=async _0x218d86=>{const _0x3ff4e9=_0x595da0;let _0x38d6e5='';try{for await(const _0x49ec86 of _0x218d86){const _0xe76ab9=_0x49ec86[_0x3ff4e9(0x1c9)]?.[0x0]?.[_0x3ff4e9(0x1db)]?.[_0x3ff4e9(0x194)]??'';_0x38d6e5+=_0xe76ab9;if(_0x13af39)_0x13af39(_0xe76ab9,_0x38d6e5);}}catch(_0x2f4b43){console[_0x3ff4e9(0x20e)](_0x29c012[_0x3ff4e9(0x207)],_0x2f4b43);}return _0x38d6e5;};if(this[_0x595da0(0x215)]?.[_0x595da0(0x1d3)]())try{const _0x2e1f37={...this[_0x595da0(0x1ae)],..._0x18e9cb,'stream':!![]},_0x284b12=await this[_0x595da0(0x215)][_0x595da0(0x1ad)](_0x1922b4,_0x2e1f37);return await _0x29c012[_0x595da0(0x210)](_0x2067ad,_0x284b12);}catch(_0x419283){console['error'](_0x29c012['ourAq'],_0x419283),_0x29c012[_0x595da0(0x210)](displayError,_0x29c012[_0x595da0(0x197)]);}console[_0x595da0(0x1a3)](_0x29c012[_0x595da0(0x1e1)],this[_0x595da0(0x211)],this[_0x595da0(0x19b)]);if(this[_0x595da0(0x211)]&&this[_0x595da0(0x19b)]){console[_0x595da0(0x1a3)](_0x29c012[_0x595da0(0x1fb)]);try{const _0x40b7c6=await this['aiLanguageSession'][_0x595da0(0x21d)](JSON['stringify'](_0x1922b4));let _0x619bd4='';for await(const _0x55bb7a of _0x40b7c6){_0x619bd4+=_0x55bb7a,_0x29c012['VcGpy'](_0x13af39,_0x55bb7a,_0x619bd4);}}catch(_0x42bc3c){console[_0x595da0(0x20e)](_0x29c012[_0x595da0(0x220)],_0x42bc3c),_0x29c012['Tntwq'](displayError,_0x29c012[_0x595da0(0x23a)]);}}else try{const _0x481f78=await fetch(OpenAIURL,{'method':_0x29c012[_0x595da0(0x234)],'headers':{'Authorization':_0x595da0(0x1f8)+apiKey,'Content-Type':_0x29c012['JiIjS']},'body':JSON[_0x595da0(0x22e)]({'model':this[_0x595da0(0x1bc)],'messages':_0x1922b4,'temperature':this[_0x595da0(0x1ae)][_0x595da0(0x23f)],'stream':!![]})});if(!_0x481f78['ok'])throw new Error(_0x595da0(0x224)+_0x481f78[_0x595da0(0x1fe)]+'\x20'+_0x481f78[_0x595da0(0x204)]);const _0x5378a4=_0x481f78['body'][_0x595da0(0x22d)]();let _0x321a35=new TextDecoder(),_0x14d5a2=![],_0x4c4627='';while(!_0x14d5a2){const {value:_0x40ded5,done:_0x16b1da}=await _0x5378a4[_0x595da0(0x202)]();_0x14d5a2=_0x16b1da;if(_0x40ded5){const _0x441157=_0x321a35[_0x595da0(0x22f)](_0x40ded5);_0x4c4627+=_0x441157,_0x29c012['VcGpy'](_0x13af39,_0x441157,_0x4c4627);}}}catch(_0x2c733b){console[_0x595da0(0x20e)](_0x29c012[_0x595da0(0x209)],_0x2c733b),displayError(_0x29c012[_0x595da0(0x20f)]);}}[_0x437863(0x1b0)](){const _0x5df191=_0x437863;if(!this[_0x5df191(0x215)])return![];return this[_0x5df191(0x215)][_0x5df191(0x1b0)]();}[_0x437863(0x1a9)](){const _0x4375d7=_0x437863,_0x3e5758={'pDczr':_0x4375d7(0x216)};this[_0x4375d7(0x19b)]&&this[_0x4375d7(0x19b)][_0x4375d7(0x1fa)](),this[_0x4375d7(0x215)]&&this[_0x4375d7(0x215)][_0x4375d7(0x1a9)](),console['log'](_0x3e5758['pDczr']);}}export default AIAdapter;