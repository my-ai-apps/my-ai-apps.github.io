
/*!
Copyright ¬© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x201d77=_0x3bdb;(function(_0x2763a,_0x18c0e3){const _0x3921e2=_0x3bdb,_0x35de9e=_0x2763a();while(!![]){try{const _0x226809=parseInt(_0x3921e2(0x245))/0x1*(parseInt(_0x3921e2(0x20d))/0x2)+-parseInt(_0x3921e2(0x1ed))/0x3*(-parseInt(_0x3921e2(0x220))/0x4)+-parseInt(_0x3921e2(0x23c))/0x5+-parseInt(_0x3921e2(0x21a))/0x6+-parseInt(_0x3921e2(0x1b3))/0x7*(-parseInt(_0x3921e2(0x240))/0x8)+-parseInt(_0x3921e2(0x234))/0x9*(-parseInt(_0x3921e2(0x210))/0xa)+parseInt(_0x3921e2(0x246))/0xb*(-parseInt(_0x3921e2(0x216))/0xc);if(_0x226809===_0x18c0e3)break;else _0x35de9e['push'](_0x35de9e['shift']());}catch(_0x1f2425){_0x35de9e['push'](_0x35de9e['shift']());}}}(_0x571e,0x681d5));function _0x3bdb(_0x568e7c,_0x5f4b32){const _0x571e97=_0x571e();return _0x3bdb=function(_0x3bdb81,_0x1bdad1){_0x3bdb81=_0x3bdb81-0x199;let _0x1ee587=_0x571e97[_0x3bdb81];return _0x1ee587;},_0x3bdb(_0x568e7c,_0x5f4b32);}import{Logger,displayError,showStatus}from'./common.js';import{MLCEngineWrapper}from'./model/mlcEngineWrapper.js';const OpenAIURL=_0x201d77(0x1bf),apiKey=_0x201d77(0x1ae),defaultModelName='tinyllama-1.1b-chat-v0.4';export const ModelTypes=Object['freeze']({'NULL':_0x201d77(0x1e9),'MLC_AI':_0x201d77(0x1ee),'BROWSER_AI':_0x201d77(0x1ef),'OPEN_AI':_0x201d77(0x205)});export class AIAdapter{static ['_instance']=null;static[_0x201d77(0x1cf)](_0x6be8e6=defaultModelName){const _0x366fbc=_0x201d77;return!AIAdapter[_0x366fbc(0x1a4)]&&(AIAdapter['_instance']=new AIAdapter(_0x6be8e6)),AIAdapter[_0x366fbc(0x1a4)];}constructor(_0x329a12=defaultModelName){const _0x47c986=_0x201d77,_0x7efd3f={'DWjbL':_0x47c986(0x19a),'NrFmO':_0x47c986(0x214),'JtrLu':_0x47c986(0x21e),'okXKs':_0x47c986(0x244),'uUvnN':_0x47c986(0x1ac),'ZgPLt':_0x47c986(0x24e),'hHoPv':_0x47c986(0x1c5),'YgtKR':'mlc-ai/Phi-3.5-mini-instruct-{quantization}-MLC','drtfv':_0x47c986(0x235)};if(AIAdapter['_instance'])return AIAdapter['_instance'];AIAdapter['_instance']=this,this[_0x47c986(0x1fb)]={},this[_0x47c986(0x225)]=!![],this[_0x47c986(0x219)]=_0x329a12,this[_0x47c986(0x20a)]=0x0,this[_0x47c986(0x222)]='',this[_0x47c986(0x23e)]=0x0,this['systemRole']=_0x7efd3f[_0x47c986(0x1c9)],this[_0x47c986(0x1f4)]=ModelTypes[_0x47c986(0x215)],performance[_0x47c986(0x212)](_0x7efd3f['NrFmO']),this['startTime']=performance[_0x47c986(0x1bd)](),this[_0x47c986(0x1c3)]={'startTime':this['startTime'],'progress':0x0,'estimatedTimeRemaining':null},this['MODEL_CONFIG']={'tinyllama-1.1b-chat-v0.4':{'engine':_0x7efd3f[_0x47c986(0x200)],'modelName':_0x47c986(0x1a0),'modelType':_0x7efd3f['okXKs'],'repo':_0x7efd3f['uUvnN'],'quantizations':[_0x7efd3f[_0x47c986(0x1b9)],_0x7efd3f[_0x47c986(0x1d0)]],'defaultQuantization':_0x47c986(0x1c5),'pipeline':_0x7efd3f['okXKs']},'phi-3.5-mini-instruct':{'engine':'mlc','modelName':_0x47c986(0x1d4),'modelType':_0x7efd3f[_0x47c986(0x1f8)],'repo':_0x7efd3f[_0x47c986(0x1b6)],'quantizations':[_0x7efd3f[_0x47c986(0x1b9)],_0x7efd3f['hHoPv']],'defaultQuantization':'q4f32_1','pipeline':_0x7efd3f[_0x47c986(0x1f8)]}},this[_0x47c986(0x1c4)]=this[_0x47c986(0x1fb)][this[_0x47c986(0x219)]]||this[_0x47c986(0x1df)][this[_0x47c986(0x219)]];if(!this[_0x47c986(0x1c4)])throw new Error(_0x47c986(0x20b)+this[_0x47c986(0x219)]+_0x47c986(0x247));this['isInitialized']=![],this[_0x47c986(0x24b)]=new MLCEngineWrapper(this[_0x47c986(0x1c4)],this[_0x47c986(0x225)]),this[_0x47c986(0x1cb)]=!!(self['ai']&&self['ai'][_0x47c986(0x1cd)]),console[_0x47c986(0x1a3)](_0x7efd3f[_0x47c986(0x1eb)],this[_0x47c986(0x1cb)]),this[_0x47c986(0x1d5)]=null;}async['_checkWebGPUSupport'](){const _0x293555=_0x201d77,_0x46d136={'HEcyf':_0x293555(0x22b)};if(!navigator[_0x293555(0x239)])return console[_0x293555(0x21d)](_0x46d136[_0x293555(0x233)]),![];try{const _0x4edbb5=await navigator['gpu']['requestAdapter']();if(!_0x4edbb5)return console[_0x293555(0x21d)](_0x293555(0x1f6)),![];return console[_0x293555(0x1a3)](_0x293555(0x1fd)),!![];}catch(_0x512e19){return console[_0x293555(0x21d)]('‚ùå\x20_checkWebGPUSupport:\x20WebGPU\x20Check\x20Error:',_0x512e19),![];}}async['init'](){const _0x14ec04=_0x201d77,_0x4f68d4={'HOMLD':'Main','MTEbC':function(_0x4cac22,_0x4968a6){return _0x4cac22>_0x4968a6;},'WHmXU':function(_0x16cd8f,_0x12e237){return _0x16cd8f*_0x12e237;},'UDzsI':function(_0x1eeed1,_0x1edc55){return _0x1eeed1-_0x1edc55;},'WAQbI':function(_0x41d559,_0x5742ba){return _0x41d559*_0x5742ba;},'vMckL':function(_0x5b5ead,_0x552988){return _0x5b5ead*_0x552988;},'tehLI':_0x14ec04(0x1be),'JUvlU':function(_0x161985,_0x71044,_0x3361b7){return _0x161985(_0x71044,_0x3361b7);},'VuvNX':function(_0x30b64,_0x3bb8ee,_0x20674a){return _0x30b64(_0x3bb8ee,_0x20674a);},'GRWzJ':function(_0x4f7558,_0x2b5b30){return _0x4f7558/_0x2b5b30;},'rGYqV':function(_0x40c8ec,_0x64e3ec){return _0x40c8ec/_0x64e3ec;},'pBsRT':function(_0x5a7794,_0x120dbc){return _0x5a7794*_0x120dbc;},'yHOEL':'sessionConfig','XwNjO':_0x14ec04(0x1a2),'BJMhY':_0x14ec04(0x1ab),'zWiDV':_0x14ec04(0x1f2),'KCtdb':_0x14ec04(0x1f1),'tZyCO':_0x14ec04(0x207),'HLGqo':_0x14ec04(0x1f3),'IpRxK':function(_0x48c80d,_0xc5ca82){return _0x48c80d(_0xc5ca82);},'gKCBi':_0x14ec04(0x24d),'AJTNk':_0x14ec04(0x24f),'rpmlW':_0x14ec04(0x237),'ISMMa':'Initialization\x20Error:'};try{const _0x37b5b1=await this[_0x14ec04(0x231)]();if(!this[_0x14ec04(0x22e)])try{this['sessionConfig']=JSON[_0x14ec04(0x1a9)](localStorage[_0x14ec04(0x199)](_0x4f68d4[_0x14ec04(0x22c)]))||{'temperature':0x1,'topK':0x3,'topP':0.9,'maxTokens':0x400,'systemRole':this['systemRole']||_0x4f68d4[_0x14ec04(0x236)]},await this[_0x14ec04(0x24b)][_0x14ec04(0x1ea)](this[_0x14ec04(0x1c4)],{'useWorker':this[_0x14ec04(0x225)],'onProgress':_0x3e4636=>{const _0xd5adb3=_0x14ec04;console['log']('['+(this[_0xd5adb3(0x225)]?'Worker':_0x4f68d4['HOMLD'])+_0xd5adb3(0x1fe),_0x3e4636);const _0x4b655b=performance[_0xd5adb3(0x1bd)](),_0x153da3=(_0x4b655b-this['startTime'])/0x3e8;this[_0xd5adb3(0x23e)]=_0x3e4636['progress'],this['progressText']=_0x3e4636[_0xd5adb3(0x242)],console[_0xd5adb3(0x1a3)](_0xd5adb3(0x1f0),this['progressPercent']);let _0xaa7665=0x0;if(_0x4f68d4[_0xd5adb3(0x1d1)](this[_0xd5adb3(0x23e)],0x0)){const _0x27e948=_0x153da3/_0x4f68d4[_0xd5adb3(0x241)](this[_0xd5adb3(0x23e)],0x64);_0xaa7665=_0x4f68d4[_0xd5adb3(0x241)](_0x27e948,_0x4f68d4[_0xd5adb3(0x1b0)](0x64,_0x4f68d4['WAQbI'](this[_0xd5adb3(0x23e)],0x64))),this[_0xd5adb3(0x20a)]=_0x4f68d4[_0xd5adb3(0x230)](this[_0xd5adb3(0x23e)],0x64),this[_0xd5adb3(0x1c3)]={'startTime':this['startTime'],'progress':this[_0xd5adb3(0x23e)],'estimatedTimeRemaining':_0xaa7665};}else{if(this['progressText'][_0xd5adb3(0x1cc)](_0xd5adb3(0x20f))){console[_0xd5adb3(0x1a3)](_0x4f68d4[_0xd5adb3(0x1d8)]);const _0x521e9b=this[_0xd5adb3(0x222)][_0xd5adb3(0x221)](/Loading model from cache\[(\d+)\/(\d+)\]/);if(_0x521e9b){const _0x2130fc=_0x4f68d4['JUvlU'](parseInt,_0x521e9b[0x1],0xa),_0xda7fba=_0x4f68d4[_0xd5adb3(0x1b1)](parseInt,_0x521e9b[0x2],0xa);this[_0xd5adb3(0x20a)]=_0x4f68d4[_0xd5adb3(0x1d6)](_0x2130fc,_0xda7fba);const _0x4f4874=_0x4f68d4[_0xd5adb3(0x19f)](_0x153da3,_0x2130fc),_0x531ddf=_0xda7fba-_0x2130fc;_0xaa7665=_0x4f68d4['pBsRT'](_0x4f4874,_0x531ddf),this[_0xd5adb3(0x20a)]=this['loadingProgress']*0x64,this['loadingStats']={'startTime':this[_0xd5adb3(0x24c)],'progress':this[_0xd5adb3(0x20a)],'estimatedTimeRemaining':_0xaa7665};}}}}});const _0x3b1ba1=performance[_0x14ec04(0x1bd)](),_0x396d4a=_0x4f68d4[_0x14ec04(0x1b0)](_0x3b1ba1,this[_0x14ec04(0x24c)])[_0x14ec04(0x1ba)](0x2);return this[_0x14ec04(0x1f4)]=ModelTypes['MLC'],this[_0x14ec04(0x222)]=_0x14ec04(0x1f9)+_0x396d4a+'\x20ms',this[_0x14ec04(0x22e)]=!![],this[_0x14ec04(0x23e)]=0x64,{'success':!![],'modelType':ModelTypes[_0x14ec04(0x1ec)]};}catch(_0x14de4e){statusArea[_0x14ec04(0x1fa)]=_0x14ec04(0x213)+_0x14de4e[_0x14ec04(0x23b)],console[_0x14ec04(0x21d)](_0x14de4e);};if(!this['isInitialized']){if(this[_0x14ec04(0x1cb)]&&self['ai']&&self['ai'][_0x14ec04(0x1cd)])try{const _0x5e796e=_0x4f68d4['BJMhY'][_0x14ec04(0x1f7)]('|');let _0x2df8ee=0x0;while(!![]){switch(_0x5e796e[_0x2df8ee++]){case'0':!this[_0x14ec04(0x1d5)]?(console[_0x14ec04(0x1a3)](_0x14ec04(0x23d)),this[_0x14ec04(0x1d5)]=await self['ai'][_0x14ec04(0x1cd)][_0x14ec04(0x226)]({'temperature':this[_0x14ec04(0x1b5)][_0x14ec04(0x1a5)],'topK':this[_0x14ec04(0x1b5)][_0x14ec04(0x1e8)]}),console['log'](_0x4f68d4[_0x14ec04(0x224)],this[_0x14ec04(0x1d5)]),Logger[_0x14ec04(0x1ce)](_0x14ec04(0x21c)+this['sessionConfig'][_0x14ec04(0x1a5)]+_0x14ec04(0x206)+this[_0x14ec04(0x1b5)][_0x14ec04(0x1e8)])):console['log'](_0x4f68d4[_0x14ec04(0x1b7)],this[_0x14ec04(0x1d5)]);continue;case'1':this[_0x14ec04(0x22e)]=!![];continue;case'2':this[_0x14ec04(0x23e)]=0x64;continue;case'3':this[_0x14ec04(0x1f4)]=ModelTypes[_0x14ec04(0x1da)];continue;case'4':this[_0x14ec04(0x222)]=_0x4f68d4[_0x14ec04(0x227)];continue;case'5':return{'success':!![],'modelType':ModelTypes[_0x14ec04(0x1da)]};}break;}}catch(_0x12b03d){console[_0x14ec04(0x21d)](_0x4f68d4['HLGqo'],_0x12b03d),_0x4f68d4[_0x14ec04(0x223)](displayError,_0x14ec04(0x19b));}}return!this[_0x14ec04(0x22e)]&&(console['warn'](_0x4f68d4[_0x14ec04(0x1bb)]),this[_0x14ec04(0x1f4)]=ModelTypes['OPEN_AI']),this[_0x14ec04(0x23e)]=0x64,this[_0x14ec04(0x222)]=_0x4f68d4[_0x14ec04(0x23a)],{'success':!![],'modelType':this[_0x14ec04(0x1f4)]};}catch(_0x3a9119){const _0x521752=_0x4f68d4[_0x14ec04(0x1d9)][_0x14ec04(0x1f7)]('|');let _0x56579c=0x0;while(!![]){switch(_0x521752[_0x56579c++]){case'0':console[_0x14ec04(0x203)](_0x14ec04(0x243));continue;case'1':return{'success':![],'error':_0x3a9119['message']};case'2':console['group'](_0x14ec04(0x1e6));continue;case'3':console['groupEnd']();continue;case'4':console[_0x14ec04(0x21d)](_0x4f68d4[_0x14ec04(0x1db)],_0x3a9119);continue;}break;}}}[_0x201d77(0x1d2)](_0x1a207c){const _0x5aa28c=_0x201d77,_0x1fa074={'yAcQV':_0x5aa28c(0x1dd),'bVCUc':function(_0x1b7663,_0x6bff3c){return _0x1b7663===_0x6bff3c;},'Snsdt':_0x5aa28c(0x211),'OtpTF':_0x5aa28c(0x202)};console[_0x5aa28c(0x1a3)](_0x1fa074['yAcQV'],_0x1a207c);let _0x34203f=_0x1a207c;if(_0x1fa074[_0x5aa28c(0x1ff)](typeof _0x34203f,_0x1fa074[_0x5aa28c(0x20e)]))return console['log'](_0x1fa074[_0x5aa28c(0x20c)]),_0x34203f;}async[_0x201d77(0x1c8)](_0x57a29e){const _0x45f42c=_0x201d77,_0x341812={'ShHRM':_0x45f42c(0x1c0),'MxesC':_0x45f42c(0x1aa),'ADdui':function(_0x2f866c,_0x23e961){return _0x2f866c(_0x23e961);},'fUyTv':_0x45f42c(0x248),'sCokv':'ü§ñ\x20[aiAdapter]\x20Raw\x20AI\x20Response:','cURUM':'üßπ\x20[aiAdapter]\x20Cleaned\x20response:','AxNcJ':_0x45f42c(0x208),'AAQKY':'Error\x20generating\x20AI\x20response\x20using\x20browser\x20model.','JfzUK':_0x45f42c(0x1b2),'nfDox':_0x45f42c(0x1a1),'SYoSe':_0x45f42c(0x1dc),'ljgYD':'Error\x20generating\x20AI\x20response\x20using\x20OpenAI\x20API.'};if(!this[_0x45f42c(0x22e)])throw new Error(_0x341812[_0x45f42c(0x201)]);if(this['engineWrapper']?.[_0x45f42c(0x1c7)]())try{return await this['engineWrapper']['generateText'](_0x57a29e,{...this[_0x45f42c(0x1b5)],...options});}catch(_0x46f2){console[_0x45f42c(0x21d)](_0x341812[_0x45f42c(0x1a6)],_0x46f2),_0x341812[_0x45f42c(0x24a)](displayError,_0x341812[_0x45f42c(0x1e5)]);}if(this[_0x45f42c(0x1cb)]&&this[_0x45f42c(0x1d5)])try{const _0x3bc750=await this[_0x45f42c(0x1d5)][_0x45f42c(0x1e4)](_0x57a29e);console[_0x45f42c(0x1a3)](_0x341812[_0x45f42c(0x1bc)],_0x3bc750);let _0x15c224=this['cleanJSONMarkdown'](_0x3bc750);return _0x15c224={'choices':[{'message':{'content':_0x15c224}}]},console[_0x45f42c(0x1a3)](_0x341812[_0x45f42c(0x22f)],_0x15c224),_0x15c224;}catch(_0x28fc63){console[_0x45f42c(0x21d)](_0x341812['AxNcJ'],_0x28fc63),displayError(_0x341812[_0x45f42c(0x250)]);}console[_0x45f42c(0x1ca)](_0x341812[_0x45f42c(0x1b8)],this[_0x45f42c(0x217)]);try{const _0x53a263=await fetch(OpenAIURL,{'method':_0x341812[_0x45f42c(0x232)],'headers':{'Authorization':_0x45f42c(0x1e3)+apiKey,'Content-Type':_0x341812['SYoSe']},'body':JSON['stringify']({'model':this[_0x45f42c(0x217)],'messages':_0x57a29e,'temperature':this['sessionConfig'][_0x45f42c(0x1a5)],'stream':![]})});if(!_0x53a263['ok'])throw new Error('OpenAI\x20API\x20error:\x20'+_0x53a263[_0x45f42c(0x1c6)]+'\x20'+_0x53a263[_0x45f42c(0x251)]);return await _0x53a263['json']();}catch(_0x348979){console[_0x45f42c(0x21d)](_0x45f42c(0x21f),_0x348979),_0x341812[_0x45f42c(0x24a)](displayError,_0x341812[_0x45f42c(0x1c1)]);}}async[_0x201d77(0x1a7)](_0x5497f1,_0x2554aa,_0x1dbb9f={}){const _0x3ac89b=_0x201d77,_0x410407={'FlhHH':function(_0x581ec,_0x37b619,_0x103cbb){return _0x581ec(_0x37b619,_0x103cbb);},'ZRRKL':_0x3ac89b(0x1c0),'XMpPW':function(_0x550293,_0x20e378){return _0x550293(_0x20e378);},'TdzRS':_0x3ac89b(0x1e1),'DGmtq':function(_0x16fab2,_0x37d4e8){return _0x16fab2(_0x37d4e8);},'MnxtL':_0x3ac89b(0x248),'weHbN':'Using\x20browser\x20AI:\x20useBrowserAI=','zXqPU':'[BrowserAI]\x20generateResponseStream\x20','IQmvl':'Browser\x20AI\x20streaming\x20error:','opuQF':function(_0xa805f6,_0x51664a){return _0xa805f6(_0x51664a);},'qwSDZ':function(_0x2802e9,_0xf1c084,_0x2829b0){return _0x2802e9(_0xf1c084,_0x2829b0);},'NnXCs':_0x3ac89b(0x1a1),'TAoyD':_0x3ac89b(0x1b4),'ysswu':function(_0x59435e,_0xfdbb97){return _0x59435e(_0xfdbb97);},'gjBuZ':_0x3ac89b(0x1e0)};if(!this[_0x3ac89b(0x22e)])throw new Error(_0x410407[_0x3ac89b(0x228)]);const _0x69a44d=async _0x1f0e73=>{const _0x2ee917=_0x3ac89b;let _0x18eacc='';try{for await(const _0x33a9e3 of _0x1f0e73){const _0x2841ed=_0x33a9e3[_0x2ee917(0x1c2)]?.[0x0]?.['delta']?.[_0x2ee917(0x204)]??'';_0x18eacc+=_0x2841ed;if(_0x2554aa)_0x410407[_0x2ee917(0x1f5)](_0x2554aa,_0x2841ed,_0x18eacc);}}catch(_0x2ddc4c){console[_0x2ee917(0x21d)](_0x2ee917(0x1ad),_0x2ddc4c);}return _0x18eacc;};if(this[_0x3ac89b(0x24b)]?.[_0x3ac89b(0x1c7)]())try{const _0x53287d={...this[_0x3ac89b(0x1b5)],..._0x1dbb9f,'stream':!![]},_0x27b7d0=await this[_0x3ac89b(0x24b)][_0x3ac89b(0x1a7)](_0x5497f1,_0x53287d);return await _0x410407['XMpPW'](_0x69a44d,_0x27b7d0);}catch(_0x4a9aac){console['error'](_0x410407[_0x3ac89b(0x1d7)],_0x4a9aac),_0x410407[_0x3ac89b(0x1a8)](displayError,_0x410407[_0x3ac89b(0x19e)]);}console['log'](_0x410407[_0x3ac89b(0x22d)],this['useBrowserAI'],this[_0x3ac89b(0x1d5)]);if(this[_0x3ac89b(0x1cb)]&&this[_0x3ac89b(0x1d5)]){console[_0x3ac89b(0x1a3)](_0x410407[_0x3ac89b(0x229)]);try{const _0x3c486b=await this[_0x3ac89b(0x1d5)][_0x3ac89b(0x1fc)](JSON[_0x3ac89b(0x21b)](_0x5497f1));let _0x3878c1='';for await(const _0x5894dd of _0x3c486b){_0x3878c1+=_0x5894dd,_0x410407['FlhHH'](_0x2554aa,_0x5894dd,_0x3878c1);}}catch(_0x49de58){console[_0x3ac89b(0x21d)](_0x410407[_0x3ac89b(0x19c)],_0x49de58),_0x410407['opuQF'](displayError,_0x3ac89b(0x1d3));}}else try{const _0x2001bc=await _0x410407[_0x3ac89b(0x209)](fetch,OpenAIURL,{'method':_0x410407[_0x3ac89b(0x1e7)],'headers':{'Authorization':_0x3ac89b(0x1e3)+apiKey,'Content-Type':'application/json'},'body':JSON[_0x3ac89b(0x21b)]({'model':this['defaultModel'],'messages':_0x5497f1,'temperature':this[_0x3ac89b(0x1b5)][_0x3ac89b(0x1a5)],'stream':!![]})});if(!_0x2001bc['ok'])throw new Error('OpenAI\x20API\x20error:\x20'+_0x2001bc[_0x3ac89b(0x1c6)]+'\x20'+_0x2001bc['statusText']);const _0x20af11=_0x2001bc[_0x3ac89b(0x19d)]['getReader']();let _0xba81bb=new TextDecoder(),_0x5c8273=![],_0x40777b='';while(!_0x5c8273){const {value:_0x1e8f54,done:_0x21049e}=await _0x20af11['read']();_0x5c8273=_0x21049e;if(_0x1e8f54){const _0x3d1624=_0xba81bb[_0x3ac89b(0x249)](_0x1e8f54);_0x40777b+=_0x3d1624,_0x410407[_0x3ac89b(0x1f5)](_0x2554aa,_0x3d1624,_0x40777b);}}}catch(_0x507f5a){console[_0x3ac89b(0x21d)](_0x410407[_0x3ac89b(0x238)],_0x507f5a),_0x410407[_0x3ac89b(0x1e2)](displayError,_0x410407[_0x3ac89b(0x23f)]);}}['isModelCached'](){const _0x21fbc1=_0x201d77;if(!this[_0x21fbc1(0x24b)])return![];return this['engineWrapper'][_0x21fbc1(0x218)]();}[_0x201d77(0x1de)](){const _0x472cd4=_0x201d77,_0x3e0083={'ByzLv':_0x472cd4(0x22a)};this[_0x472cd4(0x1d5)]&&this[_0x472cd4(0x1d5)][_0x472cd4(0x1af)](),this['engineWrapper']&&this[_0x472cd4(0x24b)]['cleanup'](),console['log'](_0x3e0083['ByzLv']);}}export default AIAdapter;function _0x571e(){const _0x2153ad=['VuvNX','[Fallback]\x20Using\x20default\x20model:','129591SRhrJS','OpenAI\x20streaming\x20error:','sessionConfig','YgtKR','KCtdb','JfzUK','ZgPLt','toFixed','gKCBi','sCokv','now','Loading\x20model\x20from\x20cache','http://localhost:1234/v1/chat/completions','AIAdapter\x20is\x20not\x20initialized.\x20Please\x20call\x20init()\x20first.','ljgYD','choices','loadingStats','modelConfig','q4f32_1','status','isModelLoaded','generateResponse','DWjbL','warn','useBrowserAI','includes','languageModel','info','getInstance','hHoPv','MTEbC','cleanJSONMarkdown','Error\x20generating\x20AI\x20response\x20using\x20browser\x20model.','Phi-3.5-mini-instruct','aiLanguageSession','GRWzJ','TdzRS','tehLI','rpmlW','BROWSER_AI','ISMMa','application/json','cleanJSONMarkdown:\x20Raw\x20JSON\x20response:\x20','cleanup','MODEL_CONFIG','Error\x20generating\x20response\x20using\x20OpenAI\x20API.','MLC\x20model\x20streaming\x20error:','ysswu','Bearer\x20','prompt','fUyTv','AI\x20Initialization\x20Failure','NnXCs','topK','null','loadModel','drtfv','MLC','48207MadFTF','mlc_ai','browser_ai','[MLC]\x20Loading\x20progress:','[Init]\x20Language\x20model\x20session\x20already\x20exists:','[Init]\x20‚úÖ\x20Language\x20model\x20session\x20created\x20successfully:','[Init]\x20Failed\x20to\x20initialize\x20AI\x20language\x20model\x20session:','modelType','FlhHH','‚ùå\x20_checkWebGPUSupport:\x20No\x20WebGPU\x20adapter\x20found','split','okXKs','‚úÖ\x20Model\x20Loaded\x20Successfully\x20in\x20','textContent','customModels','promptStreaming','‚úÖ\x20WebGPU\x20fully\x20supported',']\x20Progress:','bVCUc','JtrLu','ShHRM','üõë\x20Response\x20is\x20already\x20an\x20object,\x20skipping\x20JSON.parse.','trace','content','open_ai',',\x20TopK:\x20','‚úÖ\x20BrowserAI\x20Model\x20Loaded\x20Successfully','Browser\x20AI\x20session\x20error:','qwSDZ','loadingProgress','Model\x20identifier\x20\x22','OtpTF','2GdJHkX','Snsdt','[MLC]\x20Loading\x20model\x20from\x20cache','704060sePrSc','object','mark','Error:\x20','modelLoadStart','NULL','12BLvgDr','defaultModel','isModelCached','modelIdentifier','1789452mNfGHt','stringify','[Init]\x20BrowserAI\x20session\x20initialized\x20with\x20Temperature:\x20','error','mlc','OpenAI\x20API\x20call\x20error:','176AagQEU','match','progressText','IpRxK','zWiDV','useWebWorker','create','tZyCO','ZRRKL','zXqPU','[AIAdapter]\x20Cleanup\x20complete.','‚ùå\x20_checkWebGPUSupport:\x20WebGPU\x20not\x20supported\x20in\x20this\x20browser','yHOEL','weHbN','isInitialized','cURUM','vMckL','_checkWebGPUSupport','nfDox','HEcyf','81tbSKDR','[AIAdapter:constructor]\x20Browser\x20AI\x20API\x20available:','XwNjO','2|4|0|3|1','TAoyD','gpu','AJTNk','message','613945OylrEo','[Init]\x20Creating\x20AI\x20language\x20model\x20session...','progressPercent','gjBuZ','64KqaxSn','WHmXU','text','Error\x20Stacktrace','text-generation','333584bWMKSd','10723834ZLjiBl','\x22\x20not\x20recognized.','Error\x20generating\x20response\x20using\x20MLC\x20model.\x20Falling\x20back\x20to\x20alternative.','decode','ADdui','engineWrapper','startTime','[Init]\x20No\x20suitable\x20AI\x20model\x20found.\x20Falling\x20back\x20to\x20OpenAI\x20API.','q4f16_1','‚úÖ\x20Model\x20Loaded\x20Successfully','AAQKY','statusText','getItem','You\x20are\x20a\x20helpful\x20assistant5.','[Init]\x20Failed\x20to\x20initialize\x20AI\x20model\x20session.','IQmvl','body','MnxtL','rGYqV','TinyLlama-1.1B-Chat-v0.4','POST','You\x20are\x20a\x20helpful\x20assistant1.','log','_instance','temperature','MxesC','generateResponseStream','DGmtq','parse','MLC\x20model\x20generation\x20error:','0|1|3|2|4|5','mlc-ai/TinyLlama-1.1B-Chat-v0.4-{quantization}-MLC','Streaming\x20error:','sk-proj-1234567890','close','UDzsI'];_0x571e=function(){return _0x2153ad;};return _0x571e();}