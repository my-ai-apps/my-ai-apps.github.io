
/*!
Copyright © 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x35b674=_0xc341;function _0x3050(){const _0x1a96f3=['text-generation','Phi-3.5-mini-instruct','sessionConfig','AHzAy','[Init]\x20Failed\x20to\x20initialize\x20AI\x20language\x20model\x20session:','BEfTH','CtWtl','Main','aiLanguageSession','languageModel','tinyllama-1.1b-chat-v0.4','[MLC]\x20Loading\x20progress:','❌\x20_checkWebGPUSupport:\x20WebGPU\x20Check\x20Error:','TinyLlama-1.1B-Chat-v0.4','modelType','YAAYf','defaultModel','[AIAdapter]\x20Cleanup\x20complete.','NULL','create','progressPercent','yDkVR','ixvwi','Browser\x20AI\x20streaming\x20error:','[MLC]\x20Loading\x20model\x20from\x20cache','getReader','1063338sCcdGl','loadModel','nLfNQ','[Fallback]\x20Using\x20default\x20model:','Bearer\x20','Loading\x20model\x20from\x20cache','ZMuFa','CWubB','status','mEiiq','mlc_ai','XgJHK','✅\x20Model\x20Loaded\x20Successfully','9|17|4|20|7|19|1|11|12|13|6|18|15|10|14|16|3|0|2|8|5','message','topK','q4f32_1','q4f16_1','Streaming\x20error:','NUCBo','mark','progressText','PNPFz','zlkoM','modelIdentifier','Browser\x20AI\x20session\x20error:','sqZip','Error\x20Stacktrace','json','eHxTV','includes','isModelLoaded','groupEnd','YETnZ','toFixed','OPEN_AI','5288PZIYXf','browser_ai','❌\x20_checkWebGPUSupport:\x20No\x20WebGPU\x20adapter\x20found','useWebWorker','✅\x20BrowserAI\x20Model\x20Loaded\x20Successfully','uTRSo','OpenAI\x20API\x20call\x20error:','body','snLeG','EdfpE','[Init]\x20Failed\x20to\x20initialize\x20AI\x20model\x20session.','engineWrapper','VTNjy','🤖\x20[aiAdapter]\x20Raw\x20AI\x20Response:','modelConfig','KFsMn','DGsBk','21YzseRA','generateText','Initialization\x20Error:','decode','Kghqw','OpenAI\x20streaming\x20error:','textContent','88JmJTLf','OpenAI\x20API\x20error:\x20','close','HCxOU','aeDSu','[Init]\x20✅\x20Language\x20model\x20session\x20created\x20successfully:','Error\x20generating\x20response\x20using\x20OpenAI\x20API.','info','loadingStats','object','SlAVG','824322hqYvrp','mlc-ai/Phi-3.5-mini-instruct-{quantization}-MLC','xgiQx','779494bWIRet','mlc','freeze','parse','http://localhost:1234/v1/chat/completions','Error\x20generating\x20AI\x20response\x20using\x20browser\x20model.','AIAdapter\x20is\x20not\x20initialized.\x20Please\x20call\x20init()\x20first.','log','46840ZfnSpt','\x20ms','11673vXzZfm','loKxB','cleanup','Worker','MLC\x20model\x20generation\x20error:','VUVDs','cWcAu','temperature','Error\x20generating\x20response\x20using\x20MLC\x20model.\x20Falling\x20back\x20to\x20alternative.','ssYqO','KJshC','gpu','application/json','getItem','POST','qApYS','ewbpB','0|3|2|1|4','Error:\x20','pIgGj','open_ai','loadingProgress','You\x20are\x20a\x20helpful\x20assistant.','stringify','BROWSER_AI','MLC\x20model\x20streaming\x20error:','yzxin','KJzIE','aWJHX','5611955SKNmew','prompt','[BrowserAI]\x20generateResponseStream\x20','TSEUI','LNYRk','useBrowserAI','7183CcmUQF','lnNPH','_instance','[Init]\x20Creating\x20AI\x20language\x20model\x20session...','null','init','cleanJSONMarkdown',']\x20Progress:','✅\x20Model\x20Loaded\x20Successfully\x20in\x20','AI\x20Initialization\x20Failure','TpkHU','generateResponseStream','now','🛑\x20Response\x20is\x20already\x20an\x20object,\x20skipping\x20JSON.parse.','PdVHQ','Model\x20identifier\x20\x22','bfoEI','[AIAdapter:constructor]\x20Browser\x20AI\x20API\x20available:','atxnL','❌\x20_checkWebGPUSupport:\x20WebGPU\x20not\x20supported\x20in\x20this\x20browser','iwfob','statusText','MLC','trace','_checkWebGPUSupport','BGdNL','[Init]\x20No\x20suitable\x20AI\x20model\x20found.\x20Falling\x20back\x20to\x20OpenAI\x20API.','sk-proj-1234567890','modelLoadStart','isInitialized','Using\x20browser\x20AI:\x20useBrowserAI=','✅\x20WebGPU\x20fully\x20supported','owbYB','split','MegcX','[Init]\x20Language\x20model\x20session\x20already\x20exists:','promptStreaming','customModels',',\x20TopK:\x20','error','getInstance','xszVx','164922TarhQx','warn','startTime','gMIZd','aikvx'];_0x3050=function(){return _0x1a96f3;};return _0x3050();}(function(_0x338fc4,_0x24efcd){const _0x58ecdc=_0xc341,_0x1b9634=_0x338fc4();while(!![]){try{const _0x6d5848=-parseInt(_0x58ecdc(0xa7))/0x1+parseInt(_0x58ecdc(0xaa))/0x2+parseInt(_0x58ecdc(0x101))/0x3*(-parseInt(_0x58ecdc(0x9c))/0x4)+-parseInt(_0x58ecdc(0xd1))/0x5+parseInt(_0x58ecdc(0x120))/0x6*(-parseInt(_0x58ecdc(0x95))/0x7)+parseInt(_0x58ecdc(0x144))/0x8*(parseInt(_0x58ecdc(0xb4))/0x9)+parseInt(_0x58ecdc(0xb2))/0xa*(parseInt(_0x58ecdc(0xd7))/0xb);if(_0x6d5848===_0x24efcd)break;else _0x1b9634['push'](_0x1b9634['shift']());}catch(_0x44d7f6){_0x1b9634['push'](_0x1b9634['shift']());}}}(_0x3050,0x96db2));import{Logger,displayError,showStatus}from'./common.js';function _0xc341(_0x5459b9,_0x4c3a13){const _0x30504e=_0x3050();return _0xc341=function(_0xc3414c,_0x4929a3){_0xc3414c=_0xc3414c-0x87;let _0x30a4d1=_0x30504e[_0xc3414c];return _0x30a4d1;},_0xc341(_0x5459b9,_0x4c3a13);}import{MLCEngineWrapper}from'./model/mlcEngineWrapper.js';const OpenAIURL=_0x35b674(0xae),apiKey=_0x35b674(0xf2),defaultModelName=_0x35b674(0x110);export const ModelTypes=Object[_0x35b674(0xac)]({'NULL':_0x35b674(0xdb),'MLC_AI':_0x35b674(0x12a),'BROWSER_AI':_0x35b674(0x145),'OPEN_AI':_0x35b674(0xc8)});export class AIAdapter{static [_0x35b674(0xd9)]=null;static[_0x35b674(0xff)](_0x24a164=defaultModelName){const _0x41a316=_0x35b674;return!AIAdapter[_0x41a316(0xd9)]&&(AIAdapter[_0x41a316(0xd9)]=new AIAdapter(_0x24a164)),AIAdapter[_0x41a316(0xd9)];}constructor(_0x3d60e0=defaultModelName){const _0x454c1a=_0x35b674,_0x505e74={'bfoEI':_0x454c1a(0x12d),'AHzAy':_0x454c1a(0x108),'Blihc':_0x454c1a(0xca),'xszVx':_0x454c1a(0xe8),'owbYB':_0x454c1a(0xf3),'BEfTH':_0x454c1a(0xab),'CtWtl':_0x454c1a(0x113),'PNPFz':_0x454c1a(0x131),'uTRSo':_0x454c1a(0x130),'cWcAu':_0x454c1a(0x106),'DdLKA':_0x454c1a(0x107)},_0x587475=_0x505e74[_0x454c1a(0xe7)]['split']('|');let _0x10d115=0x0;while(!![]){switch(_0x587475[_0x10d115++]){case'0':this[_0x454c1a(0x8f)]=new MLCEngineWrapper(this[_0x454c1a(0x92)],this[_0x454c1a(0x87)]);continue;case'1':this[_0x454c1a(0x135)]='';continue;case'2':this[_0x454c1a(0xd6)]=!!(self['ai']&&self['ai']['languageModel']);continue;case'3':this['sessionConfig']=JSON[_0x454c1a(0xad)](localStorage[_0x454c1a(0xc1)](_0x505e74[_0x454c1a(0x109)]))||{'temperature':0x1,'topK':0x3,'topP':0.9,'maxTokens':0x400,'systemRole':_0x505e74['Blihc']};continue;case'4':this[_0x454c1a(0xfc)]={};continue;case'5':this['aiLanguageSession']=null;continue;case'6':this[_0x454c1a(0x103)]=performance[_0x454c1a(0xe3)]();continue;case'7':this[_0x454c1a(0x138)]=_0x3d60e0;continue;case'8':console[_0x454c1a(0xb1)](_0x505e74[_0x454c1a(0x100)],this['useBrowserAI']);continue;case'9':if(AIAdapter[_0x454c1a(0xd9)])return AIAdapter['_instance'];continue;case'10':this[_0x454c1a(0x92)]=this[_0x454c1a(0xfc)][this[_0x454c1a(0x138)]]||this['MODEL_CONFIG'][this[_0x454c1a(0x138)]];continue;case'11':this['progressPercent']=0x0;continue;case'12':this[_0x454c1a(0x114)]=ModelTypes[_0x454c1a(0x118)];continue;case'13':performance[_0x454c1a(0x134)](_0x505e74[_0x454c1a(0xf7)]);continue;case'14':if(!this[_0x454c1a(0x92)])throw new Error(_0x454c1a(0xe6)+this['modelIdentifier']+'\x22\x20not\x20recognized.');continue;case'15':this['MODEL_CONFIG']={'tinyllama-1.1b-chat-v0.4':{'engine':_0x505e74[_0x454c1a(0x10b)],'modelName':_0x505e74[_0x454c1a(0x10c)],'modelType':'text-generation','repo':'mlc-ai/TinyLlama-1.1B-Chat-v0.4-{quantization}-MLC','quantizations':[_0x505e74[_0x454c1a(0x136)],_0x505e74['uTRSo']],'defaultQuantization':_0x505e74[_0x454c1a(0x89)],'pipeline':_0x505e74[_0x454c1a(0xba)]},'phi-3.5-mini-instruct':{'engine':_0x505e74['BEfTH'],'modelName':_0x505e74['DdLKA'],'modelType':_0x505e74['cWcAu'],'repo':_0x454c1a(0xa8),'quantizations':[_0x454c1a(0x131),_0x505e74['uTRSo']],'defaultQuantization':_0x505e74[_0x454c1a(0x89)],'pipeline':_0x454c1a(0x106)}};continue;case'16':this[_0x454c1a(0xf4)]=![];continue;case'17':AIAdapter[_0x454c1a(0xd9)]=this;continue;case'18':this[_0x454c1a(0xa4)]={'startTime':this[_0x454c1a(0x103)],'progress':0x0,'estimatedTimeRemaining':null};continue;case'19':this['loadingProgress']=0x0;continue;case'20':this[_0x454c1a(0x87)]=!![];continue;}break;}}async['_checkWebGPUSupport'](){const _0x491668=_0x35b674,_0x81277c={'KJshC':_0x491668(0xea),'WeTqx':_0x491668(0x112)};if(!navigator[_0x491668(0xbf)])return console[_0x491668(0xfe)](_0x81277c[_0x491668(0xbe)]),![];try{const _0x20bf36=await navigator[_0x491668(0xbf)]['requestAdapter']();if(!_0x20bf36)return console['error'](_0x491668(0x146)),![];return console['log'](_0x491668(0xf6)),!![];}catch(_0x58f753){return console[_0x491668(0xfe)](_0x81277c['WeTqx'],_0x58f753),![];}}async[_0x35b674(0xdc)](){const _0x3b13c3=_0x35b674,_0xccc840={'yzxin':_0x3b13c3(0xb7),'eHxTV':_0x3b13c3(0x10d),'UcibT':function(_0x1fe0aa,_0x29ed67){return _0x1fe0aa/_0x29ed67;},'BGdNL':function(_0x588acc,_0xdc8b4e){return _0x588acc-_0xdc8b4e;},'LviRn':function(_0x5eda01,_0x71df43){return _0x5eda01>_0x71df43;},'HCxOU':function(_0x260635,_0x29ec0c){return _0x260635/_0x29ec0c;},'KJzIE':function(_0x4f4e1a,_0x472725){return _0x4f4e1a*_0x472725;},'Kghqw':_0x3b13c3(0x11e),'DGsBk':_0x3b13c3(0x125),'pIgGj':function(_0x533745,_0x5ad6f9,_0x525459){return _0x533745(_0x5ad6f9,_0x525459);},'jeart':function(_0x2a6c2d,_0x22bff0,_0x1c9630){return _0x2a6c2d(_0x22bff0,_0x1c9630);},'ssYqO':function(_0x32ecfa,_0x4f021e){return _0x32ecfa/_0x4f021e;},'YAAYf':'2|5|1|0|4|3','TpkHU':_0x3b13c3(0xda),'MzRla':_0x3b13c3(0xa1),'KFsMn':_0x3b13c3(0xfa),'PdVHQ':_0x3b13c3(0x88),'CWubB':_0x3b13c3(0x10a),'yDkVR':function(_0x1b0d7c,_0x1f953e){return _0x1b0d7c(_0x1f953e);},'zlkoM':_0x3b13c3(0x8e),'XgJHK':_0x3b13c3(0xf1),'aikvx':_0x3b13c3(0x12c),'VTNjy':_0x3b13c3(0xc5),'qApYS':_0x3b13c3(0xe0),'LNYRk':_0x3b13c3(0x13b),'ixvwi':_0x3b13c3(0x97)};try{const _0x5f5d7a=await this[_0x3b13c3(0xef)]();if(!this['isInitialized'])try{await this['engineWrapper'][_0x3b13c3(0x121)](this['modelConfig'],{'useWorker':this[_0x3b13c3(0x87)],'onProgress':_0x3aab0d=>{const _0x5a0616=_0x3b13c3;console[_0x5a0616(0xb1)]('['+(this[_0x5a0616(0x87)]?_0xccc840[_0x5a0616(0xce)]:_0xccc840[_0x5a0616(0x13d)])+_0x5a0616(0xde),_0x3aab0d);const _0x5ac4be=performance[_0x5a0616(0xe3)](),_0x4332eb=_0xccc840['UcibT'](_0xccc840['BGdNL'](_0x5ac4be,this[_0x5a0616(0x103)]),0x3e8);this[_0x5a0616(0x11a)]=_0x3aab0d['progress'],this[_0x5a0616(0x135)]=_0x3aab0d['text'],console['log'](_0x5a0616(0x111),this[_0x5a0616(0x11a)]);let _0x7d9352=0x0;if(_0xccc840['LviRn'](this[_0x5a0616(0x11a)],0x0)){const _0x5cbe10=_0xccc840[_0x5a0616(0x9f)](_0x4332eb,_0xccc840['KJzIE'](this['progressPercent'],0x64));_0x7d9352=_0xccc840[_0x5a0616(0xcf)](_0x5cbe10,0x64-this[_0x5a0616(0x11a)]*0x64),this[_0x5a0616(0xc9)]=_0xccc840[_0x5a0616(0xcf)](this[_0x5a0616(0x11a)],0x64),this[_0x5a0616(0xa4)]={'startTime':this[_0x5a0616(0x103)],'progress':this['progressPercent'],'estimatedTimeRemaining':_0x7d9352};}else{if(this[_0x5a0616(0x135)][_0x5a0616(0x13e)](_0xccc840[_0x5a0616(0x99)])){console[_0x5a0616(0xb1)](_0xccc840[_0x5a0616(0x94)]);const _0x41ba26=this['progressText']['match'](/Loading model from cache\[(\d+)\/(\d+)\]/);if(_0x41ba26){const _0x105de9=_0xccc840[_0x5a0616(0xc7)](parseInt,_0x41ba26[0x1],0xa),_0x4c11a1=_0xccc840['jeart'](parseInt,_0x41ba26[0x2],0xa);this[_0x5a0616(0xc9)]=_0xccc840[_0x5a0616(0xbd)](_0x105de9,_0x4c11a1);const _0xed159e=_0xccc840['UcibT'](_0x4332eb,_0x105de9),_0x105e6b=_0xccc840[_0x5a0616(0xf0)](_0x4c11a1,_0x105de9);_0x7d9352=_0xed159e*_0x105e6b,this[_0x5a0616(0xc9)]=_0xccc840[_0x5a0616(0xcf)](this[_0x5a0616(0xc9)],0x64),this[_0x5a0616(0xa4)]={'startTime':this['startTime'],'progress':this[_0x5a0616(0xc9)],'estimatedTimeRemaining':_0x7d9352};}}}}});const _0xdfbcdf=performance[_0x3b13c3(0xe3)](),_0x1f36d5=_0xccc840['BGdNL'](_0xdfbcdf,this['startTime'])[_0x3b13c3(0x142)](0x2);return this['modelType']=ModelTypes[_0x3b13c3(0xed)],this[_0x3b13c3(0x135)]=_0x3b13c3(0xdf)+_0x1f36d5+_0x3b13c3(0xb3),this[_0x3b13c3(0xf4)]=!![],this[_0x3b13c3(0x11a)]=0x64,{'success':!![],'modelType':ModelTypes[_0x3b13c3(0xed)]};}catch(_0x21cf2a){statusArea[_0x3b13c3(0x9b)]=_0x3b13c3(0xc6)+_0x21cf2a[_0x3b13c3(0x12e)],console[_0x3b13c3(0xfe)](_0x21cf2a);};if(!this[_0x3b13c3(0xf4)]){if(this[_0x3b13c3(0xd6)]&&self['ai']&&self['ai'][_0x3b13c3(0x10f)])try{const _0x219697=_0xccc840[_0x3b13c3(0x115)][_0x3b13c3(0xf8)]('|');let _0x5eee7f=0x0;while(!![]){switch(_0x219697[_0x5eee7f++]){case'0':this[_0x3b13c3(0x11a)]=0x64;continue;case'1':this[_0x3b13c3(0x114)]=ModelTypes[_0x3b13c3(0xcc)];continue;case'2':!this[_0x3b13c3(0x10e)]?(console[_0x3b13c3(0xb1)](_0xccc840[_0x3b13c3(0xe1)]),this[_0x3b13c3(0x10e)]=await self['ai'][_0x3b13c3(0x10f)][_0x3b13c3(0x119)]({'temperature':this['sessionConfig'][_0x3b13c3(0xbb)],'topK':this[_0x3b13c3(0x108)][_0x3b13c3(0x12f)]}),console['log'](_0xccc840['MzRla'],this[_0x3b13c3(0x10e)]),Logger[_0x3b13c3(0xa3)]('[Init]\x20BrowserAI\x20session\x20initialized\x20with\x20Temperature:\x20'+this[_0x3b13c3(0x108)]['temperature']+_0x3b13c3(0xfd)+this['sessionConfig'][_0x3b13c3(0x12f)])):console[_0x3b13c3(0xb1)](_0xccc840[_0x3b13c3(0x93)],this[_0x3b13c3(0x10e)]);continue;case'3':return{'success':!![],'modelType':ModelTypes[_0x3b13c3(0xcc)]};case'4':this[_0x3b13c3(0x135)]=_0xccc840[_0x3b13c3(0xe5)];continue;case'5':this[_0x3b13c3(0xf4)]=!![];continue;}break;}}catch(_0xa71c58){console['error'](_0xccc840[_0x3b13c3(0x127)],_0xa71c58),_0xccc840[_0x3b13c3(0x11b)](displayError,_0xccc840[_0x3b13c3(0x137)]);}}return!this['isInitialized']&&(console[_0x3b13c3(0x102)](_0xccc840[_0x3b13c3(0x12b)]),this[_0x3b13c3(0x114)]=ModelTypes[_0x3b13c3(0x143)]),this[_0x3b13c3(0x11a)]=0x64,this['progressText']=_0xccc840[_0x3b13c3(0x105)],{'success':!![],'modelType':this[_0x3b13c3(0x114)]};}catch(_0x1f628b){const _0x1c9489=_0xccc840[_0x3b13c3(0x90)][_0x3b13c3(0xf8)]('|');let _0x192d83=0x0;while(!![]){switch(_0x1c9489[_0x192d83++]){case'0':console['group'](_0xccc840[_0x3b13c3(0xc3)]);continue;case'1':console[_0x3b13c3(0x140)]();continue;case'2':console[_0x3b13c3(0xee)](_0xccc840[_0x3b13c3(0xd5)]);continue;case'3':console[_0x3b13c3(0xfe)](_0xccc840[_0x3b13c3(0x11c)],_0x1f628b);continue;case'4':return{'success':![],'error':_0x1f628b[_0x3b13c3(0x12e)]};}break;}}}[_0x35b674(0xdd)](_0x2b3b0f){const _0x3c97c3=_0x35b674,_0x466c23={'fEDNe':'cleanJSONMarkdown:\x20Raw\x20JSON\x20response:\x20','aeDSu':function(_0x10f53d,_0x4d05d4){return _0x10f53d===_0x4d05d4;},'mEiiq':_0x3c97c3(0xa5),'OSJfN':_0x3c97c3(0xe4)};console[_0x3c97c3(0xb1)](_0x466c23['fEDNe'],_0x2b3b0f);let _0x5a761b=_0x2b3b0f;if(_0x466c23[_0x3c97c3(0xa0)](typeof _0x5a761b,_0x466c23[_0x3c97c3(0x129)]))return console[_0x3c97c3(0xb1)](_0x466c23['OSJfN']),_0x5a761b;}async['generateResponse'](_0x1ec604){const _0x5cd61f=_0x35b674,_0x48bf6a={'gMIZd':'AIAdapter\x20is\x20not\x20initialized.\x20Please\x20call\x20init()\x20first.','iwfob':function(_0x38482e,_0x443a4a){return _0x38482e(_0x443a4a);},'ewbpB':_0x5cd61f(0xbc),'aWJHX':'🧹\x20[aiAdapter]\x20Cleaned\x20response:','loKxB':_0x5cd61f(0x139),'EdfpE':_0x5cd61f(0xaf),'xgiQx':_0x5cd61f(0x123),'ngiuR':_0x5cd61f(0xc2),'cpIMP':_0x5cd61f(0xc0),'NxUCK':_0x5cd61f(0x8a),'snLeG':'Error\x20generating\x20AI\x20response\x20using\x20OpenAI\x20API.'};if(!this['isInitialized'])throw new Error(_0x48bf6a[_0x5cd61f(0x104)]);if(this['engineWrapper']?.[_0x5cd61f(0x13f)]())try{return await this[_0x5cd61f(0x8f)][_0x5cd61f(0x96)](_0x1ec604,{...this[_0x5cd61f(0x108)],...options});}catch(_0x4a67f4){console['error'](_0x5cd61f(0xb8),_0x4a67f4),_0x48bf6a[_0x5cd61f(0xeb)](displayError,_0x48bf6a[_0x5cd61f(0xc4)]);}if(this[_0x5cd61f(0xd6)]&&this[_0x5cd61f(0x10e)])try{const _0x180458=await this['aiLanguageSession'][_0x5cd61f(0xd2)](_0x1ec604);console[_0x5cd61f(0xb1)](_0x5cd61f(0x91),_0x180458);let _0x3f63ca=this[_0x5cd61f(0xdd)](_0x180458);return _0x3f63ca={'choices':[{'message':{'content':_0x3f63ca}}]},console[_0x5cd61f(0xb1)](_0x48bf6a[_0x5cd61f(0xd0)],_0x3f63ca),_0x3f63ca;}catch(_0x11e937){console[_0x5cd61f(0xfe)](_0x48bf6a[_0x5cd61f(0xb5)],_0x11e937),_0x48bf6a[_0x5cd61f(0xeb)](displayError,_0x48bf6a[_0x5cd61f(0x8d)]);}console[_0x5cd61f(0x102)](_0x48bf6a[_0x5cd61f(0xa9)],this['defaultModel']);try{const _0x533510=await fetch(OpenAIURL,{'method':_0x48bf6a['ngiuR'],'headers':{'Authorization':_0x5cd61f(0x124)+apiKey,'Content-Type':_0x48bf6a['cpIMP']},'body':JSON[_0x5cd61f(0xcb)]({'model':this[_0x5cd61f(0x116)],'messages':_0x1ec604,'temperature':this[_0x5cd61f(0x108)]['temperature'],'stream':![]})});if(!_0x533510['ok'])throw new Error(_0x5cd61f(0x9d)+_0x533510[_0x5cd61f(0x128)]+'\x20'+_0x533510[_0x5cd61f(0xec)]);return await _0x533510[_0x5cd61f(0x13c)]();}catch(_0x1842b4){console[_0x5cd61f(0xfe)](_0x48bf6a['NxUCK'],_0x1842b4),_0x48bf6a[_0x5cd61f(0xeb)](displayError,_0x48bf6a[_0x5cd61f(0x8c)]);}}async[_0x35b674(0xe2)](_0x245e2e,_0x107ee9,_0x22cd4c={}){const _0x3e0214=_0x35b674,_0x75e441={'MegcX':function(_0x3dc150,_0x4ad57f,_0x25416a){return _0x3dc150(_0x4ad57f,_0x25416a);},'sqZip':_0x3e0214(0xb0),'ZMuFa':function(_0x1d3799,_0x5977ae){return _0x1d3799(_0x5977ae);},'VUVDs':_0x3e0214(0xcd),'Hcdto':_0x3e0214(0xbc),'NUCBo':_0x3e0214(0xf5),'SlAVG':_0x3e0214(0x11d),'atxnL':_0x3e0214(0xc2),'TSEUI':_0x3e0214(0xc0),'YETnZ':function(_0x1c107a,_0x37be7d,_0x198800){return _0x1c107a(_0x37be7d,_0x198800);},'lnNPH':_0x3e0214(0x9a),'KoFPX':_0x3e0214(0xa2)};if(!this[_0x3e0214(0xf4)])throw new Error(_0x75e441[_0x3e0214(0x13a)]);const _0xdd686d=async _0x14d0c0=>{const _0x12a5a5=_0x3e0214;let _0x364e8e='';try{for await(const _0x1c3bf8 of _0x14d0c0){const _0x4e3bcb=_0x1c3bf8['choices']?.[0x0]?.['delta']?.['content']??'';_0x364e8e+=_0x4e3bcb;if(_0x107ee9)_0x75e441[_0x12a5a5(0xf9)](_0x107ee9,_0x4e3bcb,_0x364e8e);}}catch(_0x24f18d){console['error'](_0x12a5a5(0x132),_0x24f18d);}return _0x364e8e;};if(this[_0x3e0214(0x8f)]?.[_0x3e0214(0x13f)]())try{const _0x1ac68f={...this[_0x3e0214(0x108)],..._0x22cd4c,'stream':!![]},_0x1dbdee=await this[_0x3e0214(0x8f)]['generateResponseStream'](_0x245e2e,_0x1ac68f);return await _0x75e441['ZMuFa'](_0xdd686d,_0x1dbdee);}catch(_0x1993c8){console['error'](_0x75e441[_0x3e0214(0xb9)],_0x1993c8),displayError(_0x75e441['Hcdto']);}console[_0x3e0214(0xb1)](_0x75e441[_0x3e0214(0x133)],this[_0x3e0214(0xd6)],this[_0x3e0214(0x10e)]);if(this[_0x3e0214(0xd6)]&&this[_0x3e0214(0x10e)]){console[_0x3e0214(0xb1)](_0x3e0214(0xd3));try{const _0x28057c=await this[_0x3e0214(0x10e)][_0x3e0214(0xfb)](JSON['stringify'](_0x245e2e));let _0x8656e4='';for await(const _0xafcc6b of _0x28057c){_0x8656e4+=_0xafcc6b,_0x75e441[_0x3e0214(0xf9)](_0x107ee9,_0xafcc6b,_0x8656e4);}}catch(_0xf315f0){console['error'](_0x75e441[_0x3e0214(0xa6)],_0xf315f0),_0x75e441[_0x3e0214(0x126)](displayError,_0x3e0214(0xaf));}}else try{const _0x1e02f0=await _0x75e441[_0x3e0214(0xf9)](fetch,OpenAIURL,{'method':_0x75e441[_0x3e0214(0xe9)],'headers':{'Authorization':'Bearer\x20'+apiKey,'Content-Type':_0x75e441[_0x3e0214(0xd4)]},'body':JSON[_0x3e0214(0xcb)]({'model':this[_0x3e0214(0x116)],'messages':_0x245e2e,'temperature':this[_0x3e0214(0x108)]['temperature'],'stream':!![]})});if(!_0x1e02f0['ok'])throw new Error('OpenAI\x20API\x20error:\x20'+_0x1e02f0['status']+'\x20'+_0x1e02f0[_0x3e0214(0xec)]);const _0x35f0d9=_0x1e02f0[_0x3e0214(0x8b)][_0x3e0214(0x11f)]();let _0x29a3d2=new TextDecoder(),_0x43b067=![],_0x35a752='';while(!_0x43b067){const {value:_0x2304ed,done:_0xc37e00}=await _0x35f0d9['read']();_0x43b067=_0xc37e00;if(_0x2304ed){const _0x46c9fe=_0x29a3d2[_0x3e0214(0x98)](_0x2304ed);_0x35a752+=_0x46c9fe,_0x75e441[_0x3e0214(0x141)](_0x107ee9,_0x46c9fe,_0x35a752);}}}catch(_0xcc7e7){console[_0x3e0214(0xfe)](_0x75e441[_0x3e0214(0xd8)],_0xcc7e7),_0x75e441['ZMuFa'](displayError,_0x75e441['KoFPX']);}}['isModelCached'](){const _0x41e9b3=_0x35b674;if(!this[_0x41e9b3(0x8f)])return![];return this[_0x41e9b3(0x8f)]['isModelCached']();}[_0x35b674(0xb6)](){const _0x429b1b=_0x35b674,_0x5d0c56={'nLfNQ':_0x429b1b(0x117)};this[_0x429b1b(0x10e)]&&this[_0x429b1b(0x10e)][_0x429b1b(0x9e)](),this['engineWrapper']&&this[_0x429b1b(0x8f)][_0x429b1b(0xb6)](),console[_0x429b1b(0xb1)](_0x5d0c56[_0x429b1b(0x122)]);}}export default AIAdapter;