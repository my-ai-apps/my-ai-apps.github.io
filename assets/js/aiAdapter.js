
/*!
Copyright © 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x496b80=_0xe0ed;(function(_0xcb6599,_0x58c3f1){const _0x30f9a7=_0xe0ed,_0x2ccecb=_0xcb6599();while(!![]){try{const _0x3dced5=-parseInt(_0x30f9a7(0x23f))/0x1+-parseInt(_0x30f9a7(0x1c5))/0x2*(parseInt(_0x30f9a7(0x1fe))/0x3)+-parseInt(_0x30f9a7(0x23e))/0x4+parseInt(_0x30f9a7(0x1da))/0x5*(-parseInt(_0x30f9a7(0x1ab))/0x6)+-parseInt(_0x30f9a7(0x19f))/0x7+-parseInt(_0x30f9a7(0x1ce))/0x8*(-parseInt(_0x30f9a7(0x211))/0x9)+parseInt(_0x30f9a7(0x24f))/0xa;if(_0x3dced5===_0x58c3f1)break;else _0x2ccecb['push'](_0x2ccecb['shift']());}catch(_0x1ece1c){_0x2ccecb['push'](_0x2ccecb['shift']());}}}(_0x413c,0x80d7f));function _0x413c(){const _0x33846d=['isModelCached','cleanup','CWtQp','loadingProgress','🤖\x20[aiAdapter]\x20Raw\x20AI\x20Response:','[Init]\x20Creating\x20AI\x20language\x20model\x20session...','❌\x20_checkWebGPUSupport:\x20WebGPU\x20not\x20supported\x20in\x20this\x20browser','Browser\x20AI\x20streaming\x20error:','3357060BNwXQT','985327cbdQCl','4|8|9|18|6|16|10|14|12|20|2|19|15|13|7|17|5|0|11|1|3','lZhNy','zNJcp','Error\x20generating\x20response\x20using\x20OpenAI\x20API.','SIMpD','mlc-ai/TinyLlama-1.1B-Chat-v0.4-{quantization}-MLC','jvxIA','application/json','NaqTJ','stringify','modelLoadStart','browser_ai','temperature','languageModel','close','44816500QGfyZK','XkOxZ','parse','[Init]\x20Language\x20model\x20session\x20already\x20exists:','log','5203961KtFaeV','ibqWs','sblTr','requestAdapter','voTkO','group','generateResponseStream','getItem','MLC\x20model\x20streaming\x20error:','NULL','isModelLoaded','trace','186swEgzy','sessionConfig','progressPercent','Initialization\x20Error:','modelIdentifier','qPCHv','Worker','topK','jKsbt','UAyhv','body','json','getInstance',']\x20Progress:','MLC','useBrowserAI','now','modelConfig','[MLC]\x20Loading\x20progress:','[Fallback]\x20Using\x20default\x20model:','❌\x20_checkWebGPUSupport:\x20No\x20WebGPU\x20adapter\x20found','mKYXO','✅\x20Model\x20Loaded\x20Successfully\x20in\x20','pKwZM','choices','STBMN','1342rrlSih','✅\x20WebGPU\x20fully\x20supported','MLC\x20model\x20generation\x20error:','textContent','Model\x20identifier\x20\x22','PHkpm','BEcAZ','message','error','931984zbuiNN','OpenAI\x20streaming\x20error:','ibAKy','kGmcJ','q4f32_1','GIKqF','KIWIv','mlc-ai/Phi-3.5-mini-instruct-{quantization}-MLC','mlc_ai','tUhII','AIAdapter\x20is\x20not\x20initialized.\x20Please\x20call\x20init()\x20first.','includes','85610KvDWRt','ZaPfJ','match','generateResponse','🛑\x20Response\x20is\x20already\x20an\x20object,\x20skipping\x20JSON.parse.','text','isInitialized','fQmeZ','groupEnd','decode','LRRzp','systemRole','nPpVN','useWebWorker','KPNoY','text-generation','Error:\x20','getReader','Using\x20browser\x20AI:\x20useBrowserAI=','WHuIV','gQrVw','toFixed','modelType','[Init]\x20Failed\x20to\x20initialize\x20AI\x20model\x20session.','defaultModel','POST','mark','vsqeJ','[AIAdapter]\x20Cleanup\x20complete.','q4f16_1','progressText','null','OpenAI\x20API\x20call\x20error:','Main','HjNql','open_ai','4344nWmrqk','LSjfk','gpu','BcIBF','ZwPrc','JaqsT','TinyLlama-1.1B-Chat-v0.4','loadingStats','loadModel','statusText','BROWSER_AI','customModels','engineWrapper','AI\x20Initialization\x20Failure','Error\x20generating\x20response\x20using\x20MLC\x20model.\x20Falling\x20back\x20to\x20alternative.','jGWoy','Bearer\x20','[Init]\x20BrowserAI\x20session\x20initialized\x20with\x20Temperature:\x20','OPEN_AI','9cqifJC','create','info','pfzVK','seXcA','ylOak','\x22\x20not\x20recognized.','🧹\x20[aiAdapter]\x20Cleaned\x20response:','http://localhost:1234/v1/chat/completions','cleanJSONMarkdown','OpenAI\x20API\x20error:\x20','_instance','JmPVk','generateText','0|4|2|3|1|5','status','_checkWebGPUSupport','warn','content','yQJTf','startTime','sk-proj-1234567890','split','delta','cleanJSONMarkdown:\x20Raw\x20JSON\x20response:\x20','progress','init','Error\x20generating\x20AI\x20response\x20using\x20OpenAI\x20API.','CyfTG','tFZKu','✅\x20BrowserAI\x20Model\x20Loaded\x20Successfully','MODEL_CONFIG','Phi-3.5-mini-instruct','tinyllama-1.1b-chat-v0.4','CndZW','XfjTS','aiLanguageSession'];_0x413c=function(){return _0x33846d;};return _0x413c();}import{Logger,displayError,showStatus}from'./common.js';function _0xe0ed(_0x3628a7,_0x57bdc9){const _0x413cd5=_0x413c();return _0xe0ed=function(_0xe0ede2,_0x420a37){_0xe0ede2=_0xe0ede2-0x19c;let _0xdad8ec=_0x413cd5[_0xe0ede2];return _0xdad8ec;},_0xe0ed(_0x3628a7,_0x57bdc9);}import{MLCEngineWrapper}from'./model/mlcEngineWrapper.js';const OpenAIURL=_0x496b80(0x219),apiKey=_0x496b80(0x226),defaultModelName=_0x496b80(0x232);export const ModelTypes=Object['freeze']({'NULL':_0x496b80(0x1f9),'MLC_AI':_0x496b80(0x1d6),'BROWSER_AI':_0x496b80(0x24b),'OPEN_AI':_0x496b80(0x1fd)});export class AIAdapter{static [_0x496b80(0x21c)]=null;static[_0x496b80(0x1b7)](_0x3f172a=defaultModelName){const _0x3d908f=_0x496b80;return!AIAdapter[_0x3d908f(0x21c)]&&(AIAdapter[_0x3d908f(0x21c)]=new AIAdapter(_0x3f172a)),AIAdapter[_0x3d908f(0x21c)];}constructor(_0x186cbb=defaultModelName){const _0x576d1c=_0x496b80,_0x3e1159={'vCtMi':_0x576d1c(0x240),'ZfOJW':'You\x20are\x20a\x20helpful\x20assistant5.','kGmcJ':'mlc','gfcWC':_0x576d1c(0x204),'KIWIv':_0x576d1c(0x1e9),'voTkO':_0x576d1c(0x245),'JaqsT':'q4f32_1','nPpVN':_0x576d1c(0x231),'HjNql':_0x576d1c(0x1d5)},_0x7d91b2=_0x3e1159['vCtMi']['split']('|');let _0x587ef1=0x0;while(!![]){switch(_0x7d91b2[_0x587ef1++]){case'0':this['engineWrapper']=new MLCEngineWrapper(this[_0x576d1c(0x1bc)],this[_0x576d1c(0x1e7)]);continue;case'1':console[_0x576d1c(0x19e)]('[AIAdapter:constructor]\x20Browser\x20AI\x20API\x20available:',this[_0x576d1c(0x1ba)]);continue;case'2':performance[_0x576d1c(0x1f4)](_0x576d1c(0x24a));continue;case'3':this[_0x576d1c(0x235)]=null;continue;case'4':if(AIAdapter[_0x576d1c(0x21c)])return AIAdapter[_0x576d1c(0x21c)];continue;case'5':this['isInitialized']=![];continue;case'6':this[_0x576d1c(0x1af)]=_0x186cbb;continue;case'7':this[_0x576d1c(0x1bc)]=this['customModels'][this[_0x576d1c(0x1af)]]||this[_0x576d1c(0x230)][this[_0x576d1c(0x1af)]];continue;case'8':AIAdapter[_0x576d1c(0x21c)]=this;continue;case'9':this[_0x576d1c(0x209)]={};continue;case'10':this[_0x576d1c(0x1f8)]='';continue;case'11':this['useBrowserAI']=!!(self['ai']&&self['ai'][_0x576d1c(0x24d)]);continue;case'12':this[_0x576d1c(0x1e5)]=_0x3e1159['ZfOJW'];continue;case'13':this['MODEL_CONFIG']={'tinyllama-1.1b-chat-v0.4':{'engine':_0x3e1159[_0x576d1c(0x1d1)],'modelName':_0x3e1159['gfcWC'],'modelType':_0x3e1159[_0x576d1c(0x1d4)],'repo':_0x3e1159[_0x576d1c(0x1a3)],'quantizations':['q4f16_1',_0x576d1c(0x1d2)],'defaultQuantization':_0x3e1159['JaqsT'],'pipeline':_0x576d1c(0x1e9)},'phi-3.5-mini-instruct':{'engine':_0x3e1159[_0x576d1c(0x1d1)],'modelName':_0x3e1159[_0x576d1c(0x1e6)],'modelType':_0x576d1c(0x1e9),'repo':_0x3e1159[_0x576d1c(0x1fc)],'quantizations':[_0x576d1c(0x1f7),_0x3e1159[_0x576d1c(0x203)]],'defaultQuantization':_0x3e1159[_0x576d1c(0x203)],'pipeline':_0x3e1159['KIWIv']}};continue;case'14':this[_0x576d1c(0x1ad)]=0x0;continue;case'15':this[_0x576d1c(0x205)]={'startTime':this['startTime'],'progress':0x0,'estimatedTimeRemaining':null};continue;case'16':this[_0x576d1c(0x239)]=0x0;continue;case'17':if(!this['modelConfig'])throw new Error(_0x576d1c(0x1c9)+this['modelIdentifier']+_0x576d1c(0x217));continue;case'18':this['useWebWorker']=!![];continue;case'19':this[_0x576d1c(0x225)]=performance[_0x576d1c(0x1bb)]();continue;case'20':this[_0x576d1c(0x1f0)]=ModelTypes[_0x576d1c(0x1a8)];continue;}break;}}async[_0x496b80(0x221)](){const _0x2c9c74=_0x496b80,_0x3957a2={'tUhII':_0x2c9c74(0x23c)};if(!navigator[_0x2c9c74(0x200)])return console[_0x2c9c74(0x1cd)](_0x3957a2[_0x2c9c74(0x1d7)]),![];try{const _0x16466e=await navigator['gpu'][_0x2c9c74(0x1a2)]();if(!_0x16466e)return console[_0x2c9c74(0x1cd)](_0x2c9c74(0x1bf)),![];return console[_0x2c9c74(0x19e)](_0x2c9c74(0x1c6)),!![];}catch(_0x146a9f){return console[_0x2c9c74(0x1cd)]('❌\x20_checkWebGPUSupport:\x20WebGPU\x20Check\x20Error:',_0x146a9f),![];}}async[_0x496b80(0x22b)](){const _0x9e2579=_0x496b80,_0xa5aaa5={'GIKqF':_0x9e2579(0x1b1),'ZwPrc':function(_0x5ce302,_0x2649ab){return _0x5ce302-_0x2649ab;},'tAqOI':function(_0x41f6e6,_0xf6399b){return _0x41f6e6>_0xf6399b;},'STBMN':function(_0x355a6f,_0x1840cd){return _0x355a6f*_0x1840cd;},'fQmeZ':function(_0x512c81,_0x103adf){return _0x512c81*_0x103adf;},'vsqeJ':'[MLC]\x20Loading\x20model\x20from\x20cache','zNJcp':'Loading\x20model\x20from\x20cache','jvxIA':function(_0x92af6d,_0x622462,_0x283678){return _0x92af6d(_0x622462,_0x283678);},'NaqTJ':function(_0x4f741c,_0x231509){return _0x4f741c/_0x231509;},'CyfTG':function(_0x431ff3,_0x27a352){return _0x431ff3/_0x27a352;},'lZhNy':function(_0x433f31,_0x5edaa6){return _0x433f31*_0x5edaa6;},'feFQY':'sessionConfig','CndZW':function(_0xefda6c,_0x5a9bb7){return _0xefda6c-_0x5a9bb7;},'ibAKy':_0x9e2579(0x21f),'qPCHv':_0x9e2579(0x23b),'BEcAZ':'[Init]\x20✅\x20Language\x20model\x20session\x20created\x20successfully:','xbJcA':_0x9e2579(0x19d),'VICWW':_0x9e2579(0x22f),'XfjTS':_0x9e2579(0x1f1),'ylOak':'✅\x20Model\x20Loaded\x20Successfully','zilXc':'0|3|2|1|4','jAUZQ':_0x9e2579(0x20b),'CWtQp':'Error\x20Stacktrace','jGWoy':_0x9e2579(0x1ae)};try{const _0x440191=await this['_checkWebGPUSupport']();if(!this['isInitialized'])try{this[_0x9e2579(0x1ac)]=JSON[_0x9e2579(0x19c)](localStorage[_0x9e2579(0x1a6)](_0xa5aaa5['feFQY']))||{'temperature':0x1,'topK':0x3,'topP':0.9,'maxTokens':0x400,'systemRole':this['systemRole']||'You\x20are\x20a\x20helpful\x20assistant1.'},await this[_0x9e2579(0x20a)][_0x9e2579(0x206)](this[_0x9e2579(0x1bc)],{'useWorker':this[_0x9e2579(0x1e7)],'onProgress':_0xa7132=>{const _0x93dc2e=_0x9e2579;console[_0x93dc2e(0x19e)]('['+(this[_0x93dc2e(0x1e7)]?_0xa5aaa5[_0x93dc2e(0x1d3)]:_0x93dc2e(0x1fb))+_0x93dc2e(0x1b8),_0xa7132);const _0x530104=performance['now'](),_0x5df85c=_0xa5aaa5[_0x93dc2e(0x202)](_0x530104,this[_0x93dc2e(0x225)])/0x3e8;this[_0x93dc2e(0x1ad)]=_0xa7132[_0x93dc2e(0x22a)],this[_0x93dc2e(0x1f8)]=_0xa7132[_0x93dc2e(0x1df)],console[_0x93dc2e(0x19e)](_0x93dc2e(0x1bd),this[_0x93dc2e(0x1ad)]);let _0x53b964=0x0;if(_0xa5aaa5['tAqOI'](this[_0x93dc2e(0x1ad)],0x0)){const _0x48ad88=_0x5df85c/_0xa5aaa5[_0x93dc2e(0x1c4)](this[_0x93dc2e(0x1ad)],0x64);_0x53b964=_0x48ad88*(0x64-_0xa5aaa5[_0x93dc2e(0x1e1)](this[_0x93dc2e(0x1ad)],0x64)),this[_0x93dc2e(0x239)]=this[_0x93dc2e(0x1ad)]*0x64,this['loadingStats']={'startTime':this[_0x93dc2e(0x225)],'progress':this[_0x93dc2e(0x1ad)],'estimatedTimeRemaining':_0x53b964};}else{if(this[_0x93dc2e(0x1f8)][_0x93dc2e(0x1d9)](_0xa5aaa5[_0x93dc2e(0x1f5)])){console[_0x93dc2e(0x19e)](_0xa5aaa5[_0x93dc2e(0x242)]);const _0x1108c2=this[_0x93dc2e(0x1f8)][_0x93dc2e(0x1dc)](/Loading model from cache\[(\d+)\/(\d+)\]/);if(_0x1108c2){const _0x57145d=_0xa5aaa5['jvxIA'](parseInt,_0x1108c2[0x1],0xa),_0x2013d4=_0xa5aaa5[_0x93dc2e(0x246)](parseInt,_0x1108c2[0x2],0xa);this[_0x93dc2e(0x239)]=_0xa5aaa5[_0x93dc2e(0x248)](_0x57145d,_0x2013d4);const _0x31c9d5=_0xa5aaa5[_0x93dc2e(0x22d)](_0x5df85c,_0x57145d),_0xc36431=_0xa5aaa5[_0x93dc2e(0x202)](_0x2013d4,_0x57145d);_0x53b964=_0xa5aaa5[_0x93dc2e(0x241)](_0x31c9d5,_0xc36431),this[_0x93dc2e(0x239)]=_0xa5aaa5[_0x93dc2e(0x1c4)](this[_0x93dc2e(0x239)],0x64),this['loadingStats']={'startTime':this[_0x93dc2e(0x225)],'progress':this[_0x93dc2e(0x239)],'estimatedTimeRemaining':_0x53b964};}}}}});const _0x2833b7=performance[_0x9e2579(0x1bb)](),_0x4e7070=_0xa5aaa5[_0x9e2579(0x233)](_0x2833b7,this[_0x9e2579(0x225)])[_0x9e2579(0x1ef)](0x2);return this['modelType']=ModelTypes[_0x9e2579(0x1b9)],this[_0x9e2579(0x1f8)]=_0x9e2579(0x1c1)+_0x4e7070+'\x20ms',this[_0x9e2579(0x1e0)]=!![],this[_0x9e2579(0x1ad)]=0x64,{'success':!![],'modelType':ModelTypes['MLC']};}catch(_0xa3fc7c){statusArea[_0x9e2579(0x1c8)]=_0x9e2579(0x1ea)+_0xa3fc7c[_0x9e2579(0x1cc)],console[_0x9e2579(0x1cd)](_0xa3fc7c);};if(!this['isInitialized']){if(this['useBrowserAI']&&self['ai']&&self['ai']['languageModel'])try{const _0x372c8c=_0xa5aaa5[_0x9e2579(0x1d0)][_0x9e2579(0x227)]('|');let _0x457159=0x0;while(!![]){switch(_0x372c8c[_0x457159++]){case'0':!this[_0x9e2579(0x235)]?(console[_0x9e2579(0x19e)](_0xa5aaa5[_0x9e2579(0x1b0)]),this[_0x9e2579(0x235)]=await self['ai'][_0x9e2579(0x24d)][_0x9e2579(0x212)]({'temperature':this[_0x9e2579(0x1ac)][_0x9e2579(0x24c)],'topK':this['sessionConfig'][_0x9e2579(0x1b2)]}),console[_0x9e2579(0x19e)](_0xa5aaa5[_0x9e2579(0x1cb)],this[_0x9e2579(0x235)]),Logger[_0x9e2579(0x213)](_0x9e2579(0x20f)+this[_0x9e2579(0x1ac)][_0x9e2579(0x24c)]+',\x20TopK:\x20'+this['sessionConfig']['topK'])):console[_0x9e2579(0x19e)](_0xa5aaa5['xbJcA'],this[_0x9e2579(0x235)]);continue;case'1':this[_0x9e2579(0x1f8)]=_0xa5aaa5['VICWW'];continue;case'2':this['modelType']=ModelTypes[_0x9e2579(0x208)];continue;case'3':this[_0x9e2579(0x1ad)]=0x64;continue;case'4':this['isInitialized']=!![];continue;case'5':return{'success':!![],'modelType':ModelTypes[_0x9e2579(0x208)]};}break;}}catch(_0x4b6c35){console['error']('[Init]\x20Failed\x20to\x20initialize\x20AI\x20language\x20model\x20session:',_0x4b6c35),displayError(_0xa5aaa5[_0x9e2579(0x234)]);}}return!this['isInitialized']&&(console[_0x9e2579(0x222)]('[Init]\x20No\x20suitable\x20AI\x20model\x20found.\x20Falling\x20back\x20to\x20OpenAI\x20API.'),this[_0x9e2579(0x1f0)]=ModelTypes[_0x9e2579(0x210)]),this[_0x9e2579(0x1ad)]=0x64,this[_0x9e2579(0x1f8)]=_0xa5aaa5[_0x9e2579(0x216)],{'success':!![],'modelType':this[_0x9e2579(0x1f0)]};}catch(_0x30ceb1){const _0xa141da=_0xa5aaa5['zilXc'][_0x9e2579(0x227)]('|');let _0x343c63=0x0;while(!![]){switch(_0xa141da[_0x343c63++]){case'0':console[_0x9e2579(0x1a4)](_0xa5aaa5['jAUZQ']);continue;case'1':console[_0x9e2579(0x1e2)]();continue;case'2':console[_0x9e2579(0x1aa)](_0xa5aaa5[_0x9e2579(0x238)]);continue;case'3':console[_0x9e2579(0x1cd)](_0xa5aaa5[_0x9e2579(0x20d)],_0x30ceb1);continue;case'4':return{'success':![],'error':_0x30ceb1[_0x9e2579(0x1cc)]};}break;}}}[_0x496b80(0x21a)](_0x4d6ebe){const _0x4bc667=_0x496b80,_0x376574={'LRRzp':_0x4bc667(0x229),'pfzVK':function(_0x4cc50d,_0x3b5b9a){return _0x4cc50d===_0x3b5b9a;},'vetCs':_0x4bc667(0x1de)};console[_0x4bc667(0x19e)](_0x376574[_0x4bc667(0x1e4)],_0x4d6ebe);let _0x40b4fc=_0x4d6ebe;if(_0x376574[_0x4bc667(0x214)](typeof _0x40b4fc,'object'))return console[_0x4bc667(0x19e)](_0x376574['vetCs']),_0x40b4fc;}async[_0x496b80(0x1dd)](_0x5ec9bb){const _0x18e33d=_0x496b80,_0x5a74ae={'pKwZM':_0x18e33d(0x1c7),'XduQj':_0x18e33d(0x20c),'KPNoY':_0x18e33d(0x23a),'UAyhv':_0x18e33d(0x218),'SIMpD':'Browser\x20AI\x20session\x20error:','LSjfk':function(_0x5db6d3,_0x2f6404){return _0x5db6d3(_0x2f6404);},'opfyl':'Error\x20generating\x20AI\x20response\x20using\x20browser\x20model.','ykExH':_0x18e33d(0x1be),'ShZBV':function(_0x293c74,_0x29c5d,_0x431e13){return _0x293c74(_0x29c5d,_0x431e13);},'sblTr':_0x18e33d(0x1f3),'ZaPfJ':_0x18e33d(0x1fa),'YVCZR':_0x18e33d(0x22c)};if(!this['isInitialized'])throw new Error('AIAdapter\x20is\x20not\x20initialized.\x20Please\x20call\x20init()\x20first.');if(this[_0x18e33d(0x20a)]?.[_0x18e33d(0x1a9)]())try{return await this['engineWrapper'][_0x18e33d(0x21e)](_0x5ec9bb,{...this[_0x18e33d(0x1ac)],...options});}catch(_0x4feb33){console[_0x18e33d(0x1cd)](_0x5a74ae[_0x18e33d(0x1c2)],_0x4feb33),displayError(_0x5a74ae['XduQj']);}if(this[_0x18e33d(0x1ba)]&&this[_0x18e33d(0x235)])try{const _0x386403=await this['aiLanguageSession']['prompt'](_0x5ec9bb);console[_0x18e33d(0x19e)](_0x5a74ae[_0x18e33d(0x1e8)],_0x386403);let _0x4fe703=this['cleanJSONMarkdown'](_0x386403);return _0x4fe703={'choices':[{'message':{'content':_0x4fe703}}]},console[_0x18e33d(0x19e)](_0x5a74ae[_0x18e33d(0x1b4)],_0x4fe703),_0x4fe703;}catch(_0x57c72e){console[_0x18e33d(0x1cd)](_0x5a74ae[_0x18e33d(0x244)],_0x57c72e),_0x5a74ae[_0x18e33d(0x1ff)](displayError,_0x5a74ae['opfyl']);}console[_0x18e33d(0x222)](_0x5a74ae['ykExH'],this[_0x18e33d(0x1f2)]);try{const _0x578d3f=await _0x5a74ae['ShZBV'](fetch,OpenAIURL,{'method':_0x5a74ae[_0x18e33d(0x1a1)],'headers':{'Authorization':_0x18e33d(0x20e)+apiKey,'Content-Type':_0x18e33d(0x247)},'body':JSON[_0x18e33d(0x249)]({'model':this['defaultModel'],'messages':_0x5ec9bb,'temperature':this['sessionConfig'][_0x18e33d(0x24c)],'stream':![]})});if(!_0x578d3f['ok'])throw new Error(_0x18e33d(0x21b)+_0x578d3f[_0x18e33d(0x220)]+'\x20'+_0x578d3f[_0x18e33d(0x207)]);return await _0x578d3f[_0x18e33d(0x1b6)]();}catch(_0x200e4d){console[_0x18e33d(0x1cd)](_0x5a74ae[_0x18e33d(0x1db)],_0x200e4d),_0x5a74ae['LSjfk'](displayError,_0x5a74ae['YVCZR']);}}async['generateResponseStream'](_0xaba71,_0x498b52,_0x1ea09b={}){const _0x2f84de=_0x496b80,_0x3f7250={'seXcA':function(_0x547f71,_0x3eb412,_0x32d185){return _0x547f71(_0x3eb412,_0x32d185);},'JmPVk':function(_0x3e8ce7,_0x4ccca7){return _0x3e8ce7(_0x4ccca7);},'tFZKu':'[BrowserAI]\x20generateResponseStream\x20','XkOxZ':function(_0xcda8fe,_0x239706,_0x59bcb3){return _0xcda8fe(_0x239706,_0x59bcb3);},'gQrVw':_0x2f84de(0x23d),'zlTjk':'Error\x20generating\x20AI\x20response\x20using\x20browser\x20model.','PHkpm':function(_0x124f44,_0x3282e8,_0x55448b){return _0x124f44(_0x3282e8,_0x55448b);},'jKsbt':'POST','BcIBF':_0x2f84de(0x247),'WHuIV':_0x2f84de(0x1cf),'mKYXO':function(_0x318c08,_0x41941b){return _0x318c08(_0x41941b);},'yQJTf':_0x2f84de(0x243)};if(!this['isInitialized'])throw new Error(_0x2f84de(0x1d8));const _0x32cd88=async _0x11ebdf=>{const _0x3fa3d3=_0x2f84de;let _0x1b2d0a='';try{for await(const _0x3d0492 of _0x11ebdf){const _0x4acb9a=_0x3d0492[_0x3fa3d3(0x1c3)]?.[0x0]?.[_0x3fa3d3(0x228)]?.[_0x3fa3d3(0x223)]??'';_0x1b2d0a+=_0x4acb9a;if(_0x498b52)_0x3f7250[_0x3fa3d3(0x215)](_0x498b52,_0x4acb9a,_0x1b2d0a);}}catch(_0x238ad5){console[_0x3fa3d3(0x1cd)]('Streaming\x20error:',_0x238ad5);}return _0x1b2d0a;};if(this[_0x2f84de(0x20a)]?.['isModelLoaded']())try{const _0x188843={...this[_0x2f84de(0x1ac)],..._0x1ea09b,'stream':!![]},_0x1f99f7=await this[_0x2f84de(0x20a)][_0x2f84de(0x1a5)](_0xaba71,_0x188843);return await _0x3f7250[_0x2f84de(0x21d)](_0x32cd88,_0x1f99f7);}catch(_0x3fd1db){console['error'](_0x2f84de(0x1a7),_0x3fd1db),_0x3f7250[_0x2f84de(0x21d)](displayError,'Error\x20generating\x20response\x20using\x20MLC\x20model.\x20Falling\x20back\x20to\x20alternative.');}console[_0x2f84de(0x19e)](_0x2f84de(0x1ec),this[_0x2f84de(0x1ba)],this[_0x2f84de(0x235)]);if(this[_0x2f84de(0x1ba)]&&this[_0x2f84de(0x235)]){console[_0x2f84de(0x19e)](_0x3f7250[_0x2f84de(0x22e)]);try{const _0x1e5f4a=await this[_0x2f84de(0x235)]['promptStreaming'](JSON['stringify'](_0xaba71));let _0x1e6992='';for await(const _0x44fbba of _0x1e5f4a){_0x1e6992+=_0x44fbba,_0x3f7250[_0x2f84de(0x250)](_0x498b52,_0x44fbba,_0x1e6992);}}catch(_0x5dc7d5){console[_0x2f84de(0x1cd)](_0x3f7250[_0x2f84de(0x1ee)],_0x5dc7d5),_0x3f7250[_0x2f84de(0x21d)](displayError,_0x3f7250['zlTjk']);}}else try{const _0x45c030=await _0x3f7250[_0x2f84de(0x1ca)](fetch,OpenAIURL,{'method':_0x3f7250[_0x2f84de(0x1b3)],'headers':{'Authorization':_0x2f84de(0x20e)+apiKey,'Content-Type':_0x3f7250[_0x2f84de(0x201)]},'body':JSON[_0x2f84de(0x249)]({'model':this[_0x2f84de(0x1f2)],'messages':_0xaba71,'temperature':this[_0x2f84de(0x1ac)]['temperature'],'stream':!![]})});if(!_0x45c030['ok'])throw new Error('OpenAI\x20API\x20error:\x20'+_0x45c030[_0x2f84de(0x220)]+'\x20'+_0x45c030[_0x2f84de(0x207)]);const _0x36154e=_0x45c030[_0x2f84de(0x1b5)][_0x2f84de(0x1eb)]();let _0x1e10e4=new TextDecoder(),_0x4b3f61=![],_0x28651b='';while(!_0x4b3f61){const {value:_0x21d51f,done:_0x4391d0}=await _0x36154e['read']();_0x4b3f61=_0x4391d0;if(_0x21d51f){const _0x4b290e=_0x1e10e4[_0x2f84de(0x1e3)](_0x21d51f);_0x28651b+=_0x4b290e,_0x3f7250['seXcA'](_0x498b52,_0x4b290e,_0x28651b);}}}catch(_0x1b3a05){console['error'](_0x3f7250[_0x2f84de(0x1ed)],_0x1b3a05),_0x3f7250[_0x2f84de(0x1c0)](displayError,_0x3f7250[_0x2f84de(0x224)]);}}[_0x496b80(0x236)](){const _0x18aefc=_0x496b80;if(!this[_0x18aefc(0x20a)])return![];return this[_0x18aefc(0x20a)]['isModelCached']();}[_0x496b80(0x237)](){const _0x577f73=_0x496b80,_0x3213cc={'ibqWs':_0x577f73(0x1f6)};this[_0x577f73(0x235)]&&this[_0x577f73(0x235)][_0x577f73(0x24e)](),this[_0x577f73(0x20a)]&&this['engineWrapper'][_0x577f73(0x237)](),console[_0x577f73(0x19e)](_0x3213cc[_0x577f73(0x1a0)]);}}export default AIAdapter;