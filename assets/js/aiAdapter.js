
/*!
Copyright © 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x522149=_0x3570;(function(_0x88060b,_0x29f362){const _0x460769=_0x3570,_0x2882cd=_0x88060b();while(!![]){try{const _0x57c982=-parseInt(_0x460769(0x24d))/0x1+parseInt(_0x460769(0x1e5))/0x2*(-parseInt(_0x460769(0x1c4))/0x3)+parseInt(_0x460769(0x235))/0x4+parseInt(_0x460769(0x19f))/0x5*(parseInt(_0x460769(0x20a))/0x6)+parseInt(_0x460769(0x215))/0x7*(-parseInt(_0x460769(0x1ef))/0x8)+-parseInt(_0x460769(0x214))/0x9*(-parseInt(_0x460769(0x20e))/0xa)+-parseInt(_0x460769(0x1f4))/0xb;if(_0x57c982===_0x29f362)break;else _0x2882cd['push'](_0x2882cd['shift']());}catch(_0xae3ef5){_0x2882cd['push'](_0x2882cd['shift']());}}}(_0x1642,0x44dbd));function _0x1642(){const _0x536f8f=['🧹\x20[aiAdapter]\x20Cleaned\x20response:','message','MGyln','MWwmF','622072kPBkoE','defaultModel','eIAIC','[Init]\x20Language\x20model\x20session\x20already\x20exists:','dqYhr','17|2|6|14|11|0|4|8|3|7|15|9|10|18|12|13|1|16|20|19|5','sessionConfig','getReader','decode','hPGkv','OpenAI\x20API\x20call\x20error:','\x20ms','vaZqz','generateResponse','_checkWebGPUSupport','MLC','status','Browser\x20AI\x20streaming\x20error:','You\x20are\x20a\x20helpful\x20assistant1.','Loading\x20model\x20from\x20cache','read','NULL','now','group','118552AOrnFI','zrjeh','Motai','open_ai','5APfTZf','Error\x20Stacktrace','SIdLG','Error\x20generating\x20AI\x20response\x20using\x20browser\x20model.','useBrowserAI','warn','[MLC]\x20Loading\x20model\x20from\x20cache','OpenAI\x20streaming\x20error:','dHwYO','XoXII','nALky','log','languageModel','UerGi','MLC\x20model\x20generation\x20error:','temperature','q4f32_1','Model\x20identifier\x20\x22','You\x20are\x20a\x20helpful\x20assistant5.','parse','choices','0|3|2|4|1','✅\x20WebGPU\x20fully\x20supported','toFixed','PFWOV','[AIAdapter:constructor]\x20Browser\x20AI\x20API\x20available:','mlc','customModels','topK','GzDpT','AIAdapter\x20is\x20not\x20initialized.\x20Please\x20call\x20init()\x20first.','kFJlN','mlc_ai','engineWrapper','delta','[Init]\x20BrowserAI\x20session\x20initialized\x20with\x20Temperature:\x20','init','3RyopxN','loadingStats','generateText','AdcpK','dFztv','ZXzkR','cleanJSONMarkdown','\x22\x20not\x20recognized.','BROWSER_AI','Using\x20browser\x20AI:\x20useBrowserAI=','progress','http://localhost:1234/v1/chat/completions','application/json','MODEL_CONFIG','NbWGj','Phi-3.5-mini-instruct','progressText','cufyg','NgDuL','jsrrS','zhgAd','Bearer\x20','pvKvK','Error\x20generating\x20AI\x20response\x20using\x20OpenAI\x20API.','NUgJM','gpu','isInitialized','lXKhV','Error:\x20','oddlI','freeze','statusText','KDJtd','962492Jnmbwx','modelConfig','✅\x20Model\x20Loaded\x20Successfully','modelIdentifier','isModelLoaded','JGNAE','KIqSE','Browser\x20AI\x20session\x20error:','julXG','[Init]\x20Creating\x20AI\x20language\x20model\x20session...','24OMnQMp','content','cleanup','close','requestAdapter','1347841ZAymaA','qMjFx','VMPDq','QNTTp','Streaming\x20error:','OPEN_AI','loadingProgress','sLaUr','split','❌\x20_checkWebGPUSupport:\x20WebGPU\x20not\x20supported\x20in\x20this\x20browser','prompt','MLC\x20model\x20streaming\x20error:','❌\x20_checkWebGPUSupport:\x20No\x20WebGPU\x20adapter\x20found','startTime','QgeDT','[BrowserAI]\x20generateResponseStream\x20','OhQbg','mlc-ai/Phi-3.5-mini-instruct-{quantization}-MLC','🛑\x20Response\x20is\x20already\x20an\x20object,\x20skipping\x20JSON.parse.','[MLC]\x20Loading\x20progress:','cleanJSONMarkdown:\x20Raw\x20JSON\x20response:\x20','_instance','2600388bIubQX','OpenAI\x20API\x20error:\x20','FJidt','tinyllama-1.1b-chat-v0.4','1520IoHTgh','loadModel','RnepA','includes','[Init]\x20Failed\x20to\x20initialize\x20AI\x20language\x20model\x20session:','generateResponseStream','29916iadipC','209510jJmctX','sZbPK','mlc-ai/TinyLlama-1.1B-Chat-v0.4-{quantization}-MLC','gIcmA','[Init]\x20No\x20suitable\x20AI\x20model\x20found.\x20Falling\x20back\x20to\x20OpenAI\x20API.',',\x20TopK:\x20','text','MdDhT','systemRole','modelType','JlZVR','info','useWebWorker','pIxbb','mark','error','getInstance','EEKFW','oAAbj','aiLanguageSession','object','groupEnd','q4f16_1','POST','[Init]\x20Failed\x20to\x20initialize\x20AI\x20model\x20session.','OwXhd','xzaDQ','progressPercent'];_0x1642=function(){return _0x536f8f;};return _0x1642();}function _0x3570(_0xb8205d,_0x182279){const _0x1642e4=_0x1642();return _0x3570=function(_0x35709a,_0x2f1c04){_0x35709a=_0x35709a-0x19e;let _0x134487=_0x1642e4[_0x35709a];return _0x134487;},_0x3570(_0xb8205d,_0x182279);}import{Logger,displayError,showStatus}from'./common.js';import{MLCEngineWrapper}from'./model/mlcEngineWrapper.js';const OpenAIURL=_0x522149(0x1cf),apiKey='sk-proj-1234567890',defaultModelName=_0x522149(0x20d);export const ModelTypes=Object[_0x522149(0x1e2)]({'NULL':'null','MLC_AI':_0x522149(0x1bf),'BROWSER_AI':'browser_ai','OPEN_AI':_0x522149(0x19e)});export class AIAdapter{static [_0x522149(0x209)]=null;static[_0x522149(0x225)](_0x391c10=defaultModelName){const _0x1d77ad=_0x522149;return!AIAdapter[_0x1d77ad(0x209)]&&(AIAdapter[_0x1d77ad(0x209)]=new AIAdapter(_0x391c10)),AIAdapter[_0x1d77ad(0x209)];}constructor(_0x31a496=defaultModelName){const _0x25582d=_0x522149,_0x34f190={'dOSkD':_0x25582d(0x23a),'oNbbH':_0x25582d(0x1b1),'NgDuL':'TinyLlama-1.1B-Chat-v0.4','QgeDT':'text-generation','AdcpK':_0x25582d(0x217),'QNTTp':_0x25582d(0x1af),'kFJlN':_0x25582d(0x1b9),'wMSsC':_0x25582d(0x1d3),'qDhMq':_0x25582d(0x22b),'OpBlF':_0x25582d(0x1b8)},_0x188c04=_0x34f190['dOSkD'][_0x25582d(0x1fc)]('|');let _0x1bd733=0x0;while(!![]){switch(_0x188c04[_0x1bd733++]){case'0':this['loadingProgress']=0x0;continue;case'1':this[_0x25582d(0x1de)]=![];continue;case'2':AIAdapter[_0x25582d(0x209)]=this;continue;case'3':this[_0x25582d(0x21d)]=_0x34f190['oNbbH'];continue;case'4':this[_0x25582d(0x1d4)]='';continue;case'5':this['aiLanguageSession']=null;continue;case'6':this[_0x25582d(0x1ba)]={};continue;case'7':this[_0x25582d(0x21e)]=ModelTypes[_0x25582d(0x24a)];continue;case'8':this['progressPercent']=0x0;continue;case'9':this['startTime']=performance[_0x25582d(0x24b)]();continue;case'10':this[_0x25582d(0x1c5)]={'startTime':this[_0x25582d(0x201)],'progress':0x0,'estimatedTimeRemaining':null};continue;case'11':this[_0x25582d(0x1e8)]=_0x31a496;continue;case'12':this[_0x25582d(0x1e6)]=this[_0x25582d(0x1ba)][this[_0x25582d(0x1e8)]]||this[_0x25582d(0x1d1)][this['modelIdentifier']];continue;case'13':if(!this[_0x25582d(0x1e6)])throw new Error(_0x25582d(0x1b0)+this[_0x25582d(0x1e8)]+_0x25582d(0x1cb));continue;case'14':this['useWebWorker']=!![];continue;case'15':performance[_0x25582d(0x223)]('modelLoadStart');continue;case'16':this[_0x25582d(0x1c0)]=new MLCEngineWrapper(this[_0x25582d(0x1e6)],this[_0x25582d(0x221)]);continue;case'17':if(AIAdapter[_0x25582d(0x209)])return AIAdapter[_0x25582d(0x209)];continue;case'18':this[_0x25582d(0x1d1)]={'tinyllama-1.1b-chat-v0.4':{'engine':_0x25582d(0x1b9),'modelName':_0x34f190[_0x25582d(0x1d6)],'modelType':_0x34f190[_0x25582d(0x202)],'repo':_0x34f190[_0x25582d(0x1c7)],'quantizations':[_0x25582d(0x22b),_0x34f190[_0x25582d(0x1f7)]],'defaultQuantization':_0x34f190[_0x25582d(0x1f7)],'pipeline':_0x34f190[_0x25582d(0x202)]},'phi-3.5-mini-instruct':{'engine':_0x34f190[_0x25582d(0x1be)],'modelName':_0x34f190['wMSsC'],'modelType':_0x34f190[_0x25582d(0x202)],'repo':_0x25582d(0x205),'quantizations':[_0x34f190['qDhMq'],_0x25582d(0x1af)],'defaultQuantization':_0x34f190[_0x25582d(0x1f7)],'pipeline':_0x34f190[_0x25582d(0x202)]}};continue;case'19':console[_0x25582d(0x1aa)](_0x34f190['OpBlF'],this[_0x25582d(0x1a3)]);continue;case'20':this[_0x25582d(0x1a3)]=!!(self['ai']&&self['ai']['languageModel']);continue;}break;}}async[_0x522149(0x243)](){const _0x5f5864=_0x522149,_0x2a225f={'zrjeh':_0x5f5864(0x1fd),'VMPDq':_0x5f5864(0x200),'soNSp':'❌\x20_checkWebGPUSupport:\x20WebGPU\x20Check\x20Error:'};if(!navigator[_0x5f5864(0x1dd)])return console['error'](_0x2a225f[_0x5f5864(0x24e)]),![];try{const _0x5164f9=await navigator[_0x5f5864(0x1dd)][_0x5f5864(0x1f3)]();if(!_0x5164f9)return console['error'](_0x2a225f[_0x5f5864(0x1f6)]),![];return console['log'](_0x5f5864(0x1b5)),!![];}catch(_0x5d6640){return console['error'](_0x2a225f['soNSp'],_0x5d6640),![];}}async[_0x522149(0x1c3)](){const _0x21bb13=_0x522149,_0x241c5a={'RnepA':'Main','oddlI':function(_0x2f0612,_0x1b18e6){return _0x2f0612-_0x1b18e6;},'dphTc':function(_0x326ee4,_0x278af9){return _0x326ee4/_0x278af9;},'FJidt':function(_0x250faa,_0xe19ffb){return _0x250faa*_0xe19ffb;},'SIdLG':function(_0x5ea74f,_0x248a18){return _0x5ea74f*_0x248a18;},'BAvFs':_0x21bb13(0x1a5),'OhQbg':_0x21bb13(0x248),'uLBtN':function(_0x168d71,_0x58857d,_0x2d8586){return _0x168d71(_0x58857d,_0x2d8586);},'qhprS':function(_0x424933,_0x1630ff){return _0x424933/_0x1630ff;},'jflMa':function(_0x4b215b,_0x5ed5e1){return _0x4b215b-_0x5ed5e1;},'GzDpT':function(_0x594c1b,_0x1f7c85){return _0x594c1b*_0x1f7c85;},'qMjFx':_0x21bb13(0x23b),'zhgAd':_0x21bb13(0x247),'sLaUr':'3|4|1|2|0|5','XoXII':'✅\x20BrowserAI\x20Model\x20Loaded\x20Successfully','cufyg':_0x21bb13(0x1ee),'julXG':'[Init]\x20✅\x20Language\x20model\x20session\x20created\x20successfully:','dqYhr':_0x21bb13(0x238),'NbWGj':_0x21bb13(0x212),'uleMf':function(_0x2e75c7,_0x1cdf69){return _0x2e75c7(_0x1cdf69);},'sZbPK':_0x21bb13(0x22d),'JkVfK':_0x21bb13(0x219),'oAAbj':_0x21bb13(0x1e7),'NUgJM':_0x21bb13(0x1b4),'MGyln':_0x21bb13(0x1a0),'jsrrS':'Initialization\x20Error:'};try{const _0x44044=await this[_0x21bb13(0x243)]();if(!this[_0x21bb13(0x1de)])try{this[_0x21bb13(0x23b)]=JSON[_0x21bb13(0x1b2)](localStorage['getItem'](_0x241c5a[_0x21bb13(0x1f5)]))||{'temperature':0x1,'topK':0x3,'topP':0.9,'maxTokens':0x400,'systemRole':this[_0x21bb13(0x21d)]||_0x241c5a[_0x21bb13(0x1d8)]},await this[_0x21bb13(0x1c0)][_0x21bb13(0x20f)](this[_0x21bb13(0x1e6)],{'useWorker':this['useWebWorker'],'onProgress':_0x34e0e9=>{const _0xb778c8=_0x21bb13;console[_0xb778c8(0x1aa)]('['+(this[_0xb778c8(0x221)]?'Worker':_0x241c5a[_0xb778c8(0x210)])+']\x20Progress:',_0x34e0e9);const _0x3df339=performance[_0xb778c8(0x24b)](),_0x15b8da=_0x241c5a[_0xb778c8(0x1e1)](_0x3df339,this[_0xb778c8(0x201)])/0x3e8;this['progressPercent']=_0x34e0e9[_0xb778c8(0x1ce)],this[_0xb778c8(0x1d4)]=_0x34e0e9[_0xb778c8(0x21b)],console[_0xb778c8(0x1aa)](_0xb778c8(0x207),this[_0xb778c8(0x230)]);let _0x199f91=0x0;if(this['progressPercent']>0x0){const _0x3d032c=_0x241c5a['dphTc'](_0x15b8da,_0x241c5a[_0xb778c8(0x20c)](this[_0xb778c8(0x230)],0x64));_0x199f91=_0x241c5a['SIdLG'](_0x3d032c,_0x241c5a[_0xb778c8(0x1e1)](0x64,this['progressPercent']*0x64)),this['loadingProgress']=this[_0xb778c8(0x230)]*0x64,this[_0xb778c8(0x1c5)]={'startTime':this[_0xb778c8(0x201)],'progress':this[_0xb778c8(0x230)],'estimatedTimeRemaining':_0x199f91};}else{if(this['progressText'][_0xb778c8(0x211)](_0x241c5a['BAvFs'])){console[_0xb778c8(0x1aa)](_0x241c5a[_0xb778c8(0x204)]);const _0x369986=this[_0xb778c8(0x1d4)]['match'](/Loading model from cache\[(\d+)\/(\d+)\]/);if(_0x369986){const _0x222113=parseInt(_0x369986[0x1],0xa),_0x2bad1b=_0x241c5a['uLBtN'](parseInt,_0x369986[0x2],0xa);this['loadingProgress']=_0x241c5a['qhprS'](_0x222113,_0x2bad1b);const _0x2f906a=_0x241c5a['dphTc'](_0x15b8da,_0x222113),_0x10d677=_0x241c5a['jflMa'](_0x2bad1b,_0x222113);_0x199f91=_0x241c5a[_0xb778c8(0x1a1)](_0x2f906a,_0x10d677),this[_0xb778c8(0x1fa)]=_0x241c5a[_0xb778c8(0x1bc)](this[_0xb778c8(0x1fa)],0x64),this[_0xb778c8(0x1c5)]={'startTime':this[_0xb778c8(0x201)],'progress':this['loadingProgress'],'estimatedTimeRemaining':_0x199f91};}}}}});const _0x71dd77=performance[_0x21bb13(0x24b)](),_0x286f73=(_0x71dd77-this[_0x21bb13(0x201)])[_0x21bb13(0x1b6)](0x2);return this[_0x21bb13(0x21e)]=ModelTypes[_0x21bb13(0x244)],this['progressText']='✅\x20Model\x20Loaded\x20Successfully\x20in\x20'+_0x286f73+_0x21bb13(0x240),this[_0x21bb13(0x1de)]=!![],this[_0x21bb13(0x230)]=0x64,{'success':!![],'modelType':ModelTypes[_0x21bb13(0x244)]};}catch(_0x3a399c){statusArea['textContent']=_0x21bb13(0x1e0)+_0x3a399c['message'],console[_0x21bb13(0x224)](_0x3a399c);};if(!this[_0x21bb13(0x1de)]){if(this[_0x21bb13(0x1a3)]&&self['ai']&&self['ai'][_0x21bb13(0x1ab)])try{const _0x56a83e=_0x241c5a[_0x21bb13(0x1fb)][_0x21bb13(0x1fc)]('|');let _0x2a3e81=0x0;while(!![]){switch(_0x56a83e[_0x2a3e81++]){case'0':this[_0x21bb13(0x1d4)]=_0x241c5a[_0x21bb13(0x1a8)];continue;case'1':this['modelType']=ModelTypes['BROWSER_AI'];continue;case'2':this[_0x21bb13(0x230)]=0x64;continue;case'3':!this[_0x21bb13(0x228)]?(console[_0x21bb13(0x1aa)](_0x241c5a[_0x21bb13(0x1d5)]),this[_0x21bb13(0x228)]=await self['ai']['languageModel']['create']({'temperature':this[_0x21bb13(0x23b)][_0x21bb13(0x1ae)],'topK':this[_0x21bb13(0x23b)]['topK']}),console[_0x21bb13(0x1aa)](_0x241c5a[_0x21bb13(0x1ed)],this[_0x21bb13(0x228)]),Logger[_0x21bb13(0x220)](_0x21bb13(0x1c2)+this[_0x21bb13(0x23b)][_0x21bb13(0x1ae)]+_0x21bb13(0x21a)+this[_0x21bb13(0x23b)][_0x21bb13(0x1bb)])):console['log'](_0x241c5a[_0x21bb13(0x239)],this[_0x21bb13(0x228)]);continue;case'4':this[_0x21bb13(0x1de)]=!![];continue;case'5':return{'success':!![],'modelType':ModelTypes[_0x21bb13(0x1cc)]};}break;}}catch(_0x33a918){console['error'](_0x241c5a[_0x21bb13(0x1d2)],_0x33a918),_0x241c5a['uleMf'](displayError,_0x241c5a[_0x21bb13(0x216)]);}}return!this[_0x21bb13(0x1de)]&&(console[_0x21bb13(0x1a4)](_0x241c5a['JkVfK']),this[_0x21bb13(0x21e)]=ModelTypes[_0x21bb13(0x1f9)]),this[_0x21bb13(0x230)]=0x64,this['progressText']=_0x241c5a[_0x21bb13(0x227)],{'success':!![],'modelType':this['modelType']};}catch(_0x540cba){const _0x1de273=_0x241c5a[_0x21bb13(0x1dc)]['split']('|');let _0x308693=0x0;while(!![]){switch(_0x1de273[_0x308693++]){case'0':console[_0x21bb13(0x24c)]('AI\x20Initialization\x20Failure');continue;case'1':return{'success':![],'error':_0x540cba[_0x21bb13(0x232)]};case'2':console['trace'](_0x241c5a[_0x21bb13(0x233)]);continue;case'3':console[_0x21bb13(0x224)](_0x241c5a[_0x21bb13(0x1d7)],_0x540cba);continue;case'4':console[_0x21bb13(0x22a)]();continue;}break;}}}[_0x522149(0x1ca)](_0x283f4f){const _0x3a398=_0x522149,_0x2b3143={'dFztv':_0x3a398(0x208),'PFWOV':function(_0x13291f,_0x4c9174){return _0x13291f===_0x4c9174;},'DUqkV':_0x3a398(0x229),'JGNAE':_0x3a398(0x206)};console[_0x3a398(0x1aa)](_0x2b3143[_0x3a398(0x1c8)],_0x283f4f);let _0x95d239=_0x283f4f;if(_0x2b3143[_0x3a398(0x1b7)](typeof _0x95d239,_0x2b3143['DUqkV']))return console[_0x3a398(0x1aa)](_0x2b3143[_0x3a398(0x1ea)]),_0x95d239;}async[_0x522149(0x242)](_0xd14c25){const _0x39ca72=_0x522149,_0x1cc133={'nALky':_0x39ca72(0x1bd),'UerGi':function(_0x1a08e0,_0x5119d1){return _0x1a08e0(_0x5119d1);},'xzaDQ':'🤖\x20[aiAdapter]\x20Raw\x20AI\x20Response:','hPGkv':_0x39ca72(0x231),'IvLYA':_0x39ca72(0x1ec),'eIAIC':function(_0x301124,_0x149339){return _0x301124(_0x149339);},'vaZqz':_0x39ca72(0x1a2),'lXKhV':'[Fallback]\x20Using\x20default\x20model:','dHwYO':function(_0x2d3377,_0x3cc253,_0x474baf){return _0x2d3377(_0x3cc253,_0x474baf);},'FUdAr':_0x39ca72(0x1d0),'dOgsG':_0x39ca72(0x23f),'mRmvE':_0x39ca72(0x1db)};if(!this[_0x39ca72(0x1de)])throw new Error(_0x1cc133[_0x39ca72(0x1a9)]);if(this[_0x39ca72(0x1c0)]?.['isModelLoaded']())try{return await this[_0x39ca72(0x1c0)][_0x39ca72(0x1c6)](_0xd14c25,{...this[_0x39ca72(0x23b)],...options});}catch(_0x4898d4){console[_0x39ca72(0x224)](_0x39ca72(0x1ad),_0x4898d4),_0x1cc133[_0x39ca72(0x1ac)](displayError,'Error\x20generating\x20response\x20using\x20MLC\x20model.\x20Falling\x20back\x20to\x20alternative.');}if(this[_0x39ca72(0x1a3)]&&this['aiLanguageSession'])try{const _0x2365ae=await this[_0x39ca72(0x228)][_0x39ca72(0x1fe)](_0xd14c25);console[_0x39ca72(0x1aa)](_0x1cc133[_0x39ca72(0x22f)],_0x2365ae);let _0x5091af=this[_0x39ca72(0x1ca)](_0x2365ae);return _0x5091af={'choices':[{'message':{'content':_0x5091af}}]},console[_0x39ca72(0x1aa)](_0x1cc133[_0x39ca72(0x23e)],_0x5091af),_0x5091af;}catch(_0x93b95a){console['error'](_0x1cc133['IvLYA'],_0x93b95a),_0x1cc133[_0x39ca72(0x237)](displayError,_0x1cc133[_0x39ca72(0x241)]);}console['warn'](_0x1cc133[_0x39ca72(0x1df)],this[_0x39ca72(0x236)]);try{const _0x497a1b=await _0x1cc133[_0x39ca72(0x1a7)](fetch,OpenAIURL,{'method':'POST','headers':{'Authorization':_0x39ca72(0x1d9)+apiKey,'Content-Type':_0x1cc133['FUdAr']},'body':JSON['stringify']({'model':this[_0x39ca72(0x236)],'messages':_0xd14c25,'temperature':this[_0x39ca72(0x23b)][_0x39ca72(0x1ae)],'stream':![]})});if(!_0x497a1b['ok'])throw new Error(_0x39ca72(0x20b)+_0x497a1b[_0x39ca72(0x245)]+'\x20'+_0x497a1b['statusText']);return await _0x497a1b['json']();}catch(_0x4e262b){console[_0x39ca72(0x224)](_0x1cc133['dOgsG'],_0x4e262b),_0x1cc133['UerGi'](displayError,_0x1cc133['mRmvE']);}}async[_0x522149(0x213)](_0x340541,_0x8a5e4c,_0x43ad88={}){const _0x4d0ce6=_0x522149,_0x330bc2={'OwXhd':function(_0x2c3fd4,_0x20b0a6,_0x34b017){return _0x2c3fd4(_0x20b0a6,_0x34b017);},'gIcmA':function(_0x4d0073,_0x50c8de){return _0x4d0073(_0x50c8de);},'EEKFW':_0x4d0ce6(0x1ff),'pvKvK':_0x4d0ce6(0x203),'JlZVR':function(_0x68e5b9,_0x10045a,_0x34fbfb){return _0x68e5b9(_0x10045a,_0x34fbfb);},'KIqSE':_0x4d0ce6(0x246),'XkvMn':_0x4d0ce6(0x1a2),'pIxbb':function(_0x571002,_0x4cdd9c,_0x1d387b){return _0x571002(_0x4cdd9c,_0x1d387b);},'MdDhT':_0x4d0ce6(0x22c),'Motai':'application/json','ZXzkR':function(_0x42f752,_0x3f259c,_0x99796a){return _0x42f752(_0x3f259c,_0x99796a);},'MWwmF':_0x4d0ce6(0x1a6),'GstTy':'Error\x20generating\x20response\x20using\x20OpenAI\x20API.'};if(!this[_0x4d0ce6(0x1de)])throw new Error(_0x4d0ce6(0x1bd));const _0x1ba184=async _0xceeb3b=>{const _0x3c3b23=_0x4d0ce6;let _0x2dfee8='';try{for await(const _0x36da2c of _0xceeb3b){const _0x271b44=_0x36da2c[_0x3c3b23(0x1b3)]?.[0x0]?.[_0x3c3b23(0x1c1)]?.[_0x3c3b23(0x1f0)]??'';_0x2dfee8+=_0x271b44;if(_0x8a5e4c)_0x330bc2[_0x3c3b23(0x22e)](_0x8a5e4c,_0x271b44,_0x2dfee8);}}catch(_0x39f80f){console[_0x3c3b23(0x224)](_0x3c3b23(0x1f8),_0x39f80f);}return _0x2dfee8;};if(this[_0x4d0ce6(0x1c0)]?.[_0x4d0ce6(0x1e9)]())try{const _0x1b4452={...this[_0x4d0ce6(0x23b)],..._0x43ad88,'stream':!![]},_0x2fcc6c=await this[_0x4d0ce6(0x1c0)][_0x4d0ce6(0x213)](_0x340541,_0x1b4452);return await _0x330bc2[_0x4d0ce6(0x218)](_0x1ba184,_0x2fcc6c);}catch(_0x528c9e){console[_0x4d0ce6(0x224)](_0x330bc2[_0x4d0ce6(0x226)],_0x528c9e),displayError('Error\x20generating\x20response\x20using\x20MLC\x20model.\x20Falling\x20back\x20to\x20alternative.');}console[_0x4d0ce6(0x1aa)](_0x4d0ce6(0x1cd),this[_0x4d0ce6(0x1a3)],this[_0x4d0ce6(0x228)]);if(this['useBrowserAI']&&this[_0x4d0ce6(0x228)]){console[_0x4d0ce6(0x1aa)](_0x330bc2[_0x4d0ce6(0x1da)]);try{const _0x4d3fc8=await this[_0x4d0ce6(0x228)]['promptStreaming'](JSON['stringify'](_0x340541));let _0x4dcea8='';for await(const _0x5719b1 of _0x4d3fc8){_0x4dcea8+=_0x5719b1,_0x330bc2[_0x4d0ce6(0x21f)](_0x8a5e4c,_0x5719b1,_0x4dcea8);}}catch(_0x351821){console['error'](_0x330bc2[_0x4d0ce6(0x1eb)],_0x351821),_0x330bc2[_0x4d0ce6(0x218)](displayError,_0x330bc2['XkvMn']);}}else try{const _0x22f522=await _0x330bc2[_0x4d0ce6(0x222)](fetch,OpenAIURL,{'method':_0x330bc2[_0x4d0ce6(0x21c)],'headers':{'Authorization':_0x4d0ce6(0x1d9)+apiKey,'Content-Type':_0x330bc2[_0x4d0ce6(0x24f)]},'body':JSON['stringify']({'model':this[_0x4d0ce6(0x236)],'messages':_0x340541,'temperature':this[_0x4d0ce6(0x23b)][_0x4d0ce6(0x1ae)],'stream':!![]})});if(!_0x22f522['ok'])throw new Error(_0x4d0ce6(0x20b)+_0x22f522[_0x4d0ce6(0x245)]+'\x20'+_0x22f522[_0x4d0ce6(0x1e3)]);const _0x1d9fc3=_0x22f522['body'][_0x4d0ce6(0x23c)]();let _0x4ee6bd=new TextDecoder(),_0x151659=![],_0x2f6be2='';while(!_0x151659){const {value:_0x112f97,done:_0x116370}=await _0x1d9fc3[_0x4d0ce6(0x249)]();_0x151659=_0x116370;if(_0x112f97){const _0x39c6b4=_0x4ee6bd[_0x4d0ce6(0x23d)](_0x112f97);_0x2f6be2+=_0x39c6b4,_0x330bc2[_0x4d0ce6(0x1c9)](_0x8a5e4c,_0x39c6b4,_0x2f6be2);}}}catch(_0x397b10){console['error'](_0x330bc2[_0x4d0ce6(0x234)],_0x397b10),displayError(_0x330bc2['GstTy']);}}['isModelCached'](){const _0x1aa336=_0x522149;if(!this['engineWrapper'])return![];return this[_0x1aa336(0x1c0)]['isModelCached']();}[_0x522149(0x1f1)](){const _0xc17e3=_0x522149,_0x44c105={'KDJtd':'[AIAdapter]\x20Cleanup\x20complete.'};this[_0xc17e3(0x228)]&&this[_0xc17e3(0x228)][_0xc17e3(0x1f2)](),this['engineWrapper']&&this[_0xc17e3(0x1c0)]['cleanup'](),console[_0xc17e3(0x1aa)](_0x44c105[_0xc17e3(0x1e4)]);}}export default AIAdapter;