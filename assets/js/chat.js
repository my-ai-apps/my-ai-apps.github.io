
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x34efe1=_0x11ee;(function(_0x26f339,_0x1edd2e){const _0x470bba=_0x11ee,_0x425477=_0x26f339();while(!![]){try{const _0x243d97=-parseInt(_0x470bba(0x19b))/0x1+parseInt(_0x470bba(0x1cb))/0x2*(parseInt(_0x470bba(0x19a))/0x3)+parseInt(_0x470bba(0x1d9))/0x4+-parseInt(_0x470bba(0x1c9))/0x5*(parseInt(_0x470bba(0x1d4))/0x6)+parseInt(_0x470bba(0x1aa))/0x7+-parseInt(_0x470bba(0x1ca))/0x8+parseInt(_0x470bba(0x1ae))/0x9*(parseInt(_0x470bba(0x195))/0xa);if(_0x243d97===_0x1edd2e)break;else _0x425477['push'](_0x425477['shift']());}catch(_0x1f2272){_0x425477['push'](_0x425477['shift']());}}}(_0x31e8,0x7c95f));import{BaseConversationManager}from'./BaseConversationManager.js';import{Logger}from'./common.js';import{aiLanguageSession,initializeLanguageSession,sessionConfig}from'./aiCommon.js';function _0x31e8(){const _0x2d6bfe=['ryVDL','appendChild','getElementById','createNewConversation','querySelector','I\x27m\x20sorry,\x20I\x20couldn\x27t\x20generate\x20a\x20response.\x20Please\x20try\x20again.','SrPkt','zBTcI','keydown','welcomeScreen','classList','add','<div\x20class=\x22message-ai-avatar\x22><i\x20class=\x22fas\x20fa-robot\x22></i></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-content\x22>','loader','textContent','messageInput','errorMessage','BOZPy','div','vCTvA','example2','3|1|2|0|4','content','56315UDjtOl','1810432hJPPeg','2wPiphS','preventDefault','value','Response\x20error:','PhZLC','sendButton','role','AOgpR','messagesContainer','138dwUhLW','.input-container','flex','assistant','sZUNf','3700228WtJIVX','none','stringify','message','newChatButton','promptStreaming','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-ai-avatar\x22><i\x20class=\x22fas\x20fa-robot\x22></i></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-content\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','settingsButton','fXzBM','focus','OpotZ','addEventListener','key','<div\x20class=\x22message-content\x22>','location','Enter','system','dExKj','136250YstyKC','CZOyT','scrollTop','style','user','1475655NXWMvs','530976vStauy','createElement','</div>','qsDdr','uZbZh','micButton','getCurrentConversation','click','shiftKey','innerHTML','systemRole','settings.html','scrollHeight','display','addMessage','290955FhyTau','message-ai','example1','error','45nLAgIn','split','messages','.message-content'];_0x31e8=function(){return _0x2d6bfe;};return _0x31e8();}const welcomeScreen=document['getElementById'](_0x34efe1(0x1bb)),chatContainer=document[_0x34efe1(0x1b4)]('chatContainer'),messagesContainer=document[_0x34efe1(0x1b4)](_0x34efe1(0x1d3)),messageInput=document[_0x34efe1(0x1b4)](_0x34efe1(0x1c1)),sendButton=document['getElementById'](_0x34efe1(0x1d0)),micButton=document['getElementById'](_0x34efe1(0x1a0)),errorMessage=document[_0x34efe1(0x1b4)](_0x34efe1(0x1c2)),loader=document['getElementById'](_0x34efe1(0x1bf)),example1=document[_0x34efe1(0x1b4)](_0x34efe1(0x1ac)),example2=document['getElementById'](_0x34efe1(0x1c6)),newChatButton=document[_0x34efe1(0x1b4)](_0x34efe1(0x1dd)),settingsButton=document[_0x34efe1(0x1b4)](_0x34efe1(0x1e0)),inputContainer=document[_0x34efe1(0x1b6)](_0x34efe1(0x1d5)),conversationManager=new BaseConversationManager();function toggleChatUI(){const _0x30f2ce=_0x34efe1,_0x4ac223={'AOgpR':_0x30f2ce(0x1da),'fXzBM':_0x30f2ce(0x1d6)};if(welcomeScreen)welcomeScreen['style'][_0x30f2ce(0x1a8)]=_0x4ac223[_0x30f2ce(0x1d2)];if(chatContainer)chatContainer[_0x30f2ce(0x198)][_0x30f2ce(0x1a8)]=_0x4ac223[_0x30f2ce(0x1e1)];if(inputContainer)inputContainer[_0x30f2ce(0x198)][_0x30f2ce(0x1a8)]=_0x4ac223[_0x30f2ce(0x1e1)];if(messageInput)messageInput['focus']();}function updateMessagesUI(_0x2af82a){const _0x501bff=_0x34efe1,_0x520f94={'pzFtM':_0x501bff(0x1c4),'PhZLC':function(_0x348c32,_0xc7ba12){return _0x348c32===_0xc7ba12;},'xsQDa':'message-user'};if(!messagesContainer)return;messagesContainer[_0x501bff(0x1a4)]='',_0x2af82a['forEach'](_0x41e37a=>{const _0x3e42d3=_0x501bff,_0x499884=document[_0x3e42d3(0x19c)](_0x520f94['pzFtM']);_0x499884[_0x3e42d3(0x1bc)]['add'](_0x3e42d3(0x1dc),_0x520f94[_0x3e42d3(0x1cf)](_0x41e37a[_0x3e42d3(0x1d1)],_0x3e42d3(0x199))?_0x520f94['xsQDa']:_0x3e42d3(0x1ab)),_0x499884[_0x3e42d3(0x1a4)]=_0x520f94['PhZLC'](_0x41e37a[_0x3e42d3(0x1d1)],_0x3e42d3(0x199))?_0x3e42d3(0x1e6)+_0x41e37a[_0x3e42d3(0x1c8)]+_0x3e42d3(0x19d):_0x3e42d3(0x1be)+_0x41e37a[_0x3e42d3(0x1c8)]+'</div>',messagesContainer[_0x3e42d3(0x1b3)](_0x499884);}),messagesContainer[_0x501bff(0x197)]=messagesContainer[_0x501bff(0x1a7)];}async function sendMessage(){const _0x3b5fd0=_0x34efe1,_0x8dd549={'uZbZh':function(_0x9961bc,_0x20bc91){return _0x9961bc(_0x20bc91);},'ryVDL':function(_0x5613c0){return _0x5613c0();},'OQvwm':_0x3b5fd0(0x1e9),'dExKj':_0x3b5fd0(0x1c4),'JUXxq':_0x3b5fd0(0x1dc),'OpotZ':_0x3b5fd0(0x1b1),'vCTvA':_0x3b5fd0(0x1d7),'zBTcI':_0x3b5fd0(0x1ce),'jaGqb':_0x3b5fd0(0x1b7)},_0x2969eb=messageInput['value']['trim']();if(!_0x2969eb)return;toggleChatUI(),await conversationManager['addMessage'](_0x2969eb,'user');const _0x3e691b=await conversationManager[_0x3b5fd0(0x1a1)]();_0x8dd549[_0x3b5fd0(0x19f)](updateMessagesUI,_0x3e691b[_0x3b5fd0(0x1b0)]),messageInput[_0x3b5fd0(0x1cd)]='',messageInput[_0x3b5fd0(0x198)]['height']='auto';try{if(!aiLanguageSession)await _0x8dd549[_0x3b5fd0(0x1b2)](initializeLanguageSession);const _0x2228b5=[{'role':_0x8dd549['OQvwm'],'content':sessionConfig[_0x3b5fd0(0x1a5)]},..._0x3e691b[_0x3b5fd0(0x1b0)]],_0x27e4b4=await aiLanguageSession[_0x3b5fd0(0x1de)](JSON[_0x3b5fd0(0x1db)](_0x2228b5));let _0x563893='';const _0x4cd37a=document[_0x3b5fd0(0x19c)](_0x8dd549[_0x3b5fd0(0x194)]);_0x4cd37a['classList'][_0x3b5fd0(0x1bd)](_0x8dd549['JUXxq'],_0x3b5fd0(0x1ab)),_0x4cd37a[_0x3b5fd0(0x1a4)]=_0x3b5fd0(0x1df),messagesContainer['appendChild'](_0x4cd37a);const _0x1176b8=_0x4cd37a[_0x3b5fd0(0x1b6)](_0x8dd549[_0x3b5fd0(0x1e3)]);for await(const _0x5d2a1f of _0x27e4b4){_0x563893+=_0x5d2a1f,_0x1176b8[_0x3b5fd0(0x1c0)]=_0x563893,messagesContainer['scrollTop']=messagesContainer['scrollHeight'];}await conversationManager[_0x3b5fd0(0x1a9)](_0x563893,_0x8dd549[_0x3b5fd0(0x1c5)]);}catch(_0xf1ca0){Logger[_0x3b5fd0(0x1ad)](_0x8dd549[_0x3b5fd0(0x1b9)],_0xf1ca0);const _0x1e0f9f=_0x8dd549['jaGqb'];await conversationManager['addMessage'](_0x1e0f9f,_0x8dd549[_0x3b5fd0(0x1c5)]),updateMessagesUI(conversationManager[_0x3b5fd0(0x1a1)]()[_0x3b5fd0(0x1b0)]);}}document[_0x34efe1(0x1e4)]('DOMContentLoaded',async()=>{const _0x564904=_0x34efe1,_0x699115={'BOZPy':function(_0x1a87ca){return _0x1a87ca();},'omPHZ':'Initialization\x20failed'};try{if(!aiLanguageSession)await _0x699115[_0x564904(0x1c3)](initializeLanguageSession);!conversationManager['getCurrentConversation']()&&conversationManager[_0x564904(0x1b5)]();}catch(_0x4923fa){Logger[_0x564904(0x1ad)](_0x699115['omPHZ'],_0x4923fa);}});if(sendButton)sendButton['addEventListener'](_0x34efe1(0x1a2),sendMessage);function _0x11ee(_0x282df0,_0x34cb91){const _0x31e862=_0x31e8();return _0x11ee=function(_0x11ee12,_0x1071a2){_0x11ee12=_0x11ee12-0x194;let _0x1cb96f=_0x31e862[_0x11ee12];return _0x1cb96f;},_0x11ee(_0x282df0,_0x34cb91);}messageInput&&(messageInput[_0x34efe1(0x1e4)](_0x34efe1(0x1ba),_0x4d09ac=>{const _0x4d6e94=_0x34efe1,_0x459cd4={'qsDdr':_0x4d6e94(0x1e8)};_0x4d09ac[_0x4d6e94(0x1e5)]===_0x459cd4[_0x4d6e94(0x19e)]&&!_0x4d09ac[_0x4d6e94(0x1a3)]&&(_0x4d09ac[_0x4d6e94(0x1cc)](),sendMessage());}),messageInput[_0x34efe1(0x1e4)](_0x34efe1(0x1e2),toggleChatUI));newChatButton&&newChatButton[_0x34efe1(0x1e4)](_0x34efe1(0x1a2),()=>{const _0x18bb1b=_0x34efe1,_0x80891e={'SrPkt':_0x18bb1b(0x1c7),'CZOyT':_0x18bb1b(0x1da),'sZUNf':_0x18bb1b(0x1d6)},_0x2c8c36=_0x80891e[_0x18bb1b(0x1b8)][_0x18bb1b(0x1af)]('|');let _0xb5b0eb=0x0;while(!![]){switch(_0x2c8c36[_0xb5b0eb++]){case'0':if(chatContainer)chatContainer[_0x18bb1b(0x198)]['display']=_0x80891e[_0x18bb1b(0x196)];continue;case'1':if(messagesContainer)messagesContainer[_0x18bb1b(0x1a4)]='';continue;case'2':if(welcomeScreen)welcomeScreen[_0x18bb1b(0x198)][_0x18bb1b(0x1a8)]=_0x80891e[_0x18bb1b(0x1d8)];continue;case'3':conversationManager[_0x18bb1b(0x1b5)]();continue;case'4':if(messageInput)messageInput[_0x18bb1b(0x1cd)]='';continue;}break;}});settingsButton&&settingsButton[_0x34efe1(0x1e4)](_0x34efe1(0x1a2),()=>{const _0x434f5c=_0x34efe1;window[_0x434f5c(0x1e7)]['href']=_0x434f5c(0x1a6);});export{conversationManager,sendMessage};