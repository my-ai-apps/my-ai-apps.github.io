
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x5c7580=_0x1962;(function(_0x925420,_0x244f27){const _0x2b37e2=_0x1962,_0x322a0b=_0x925420();while(!![]){try{const _0x4a7631=parseInt(_0x2b37e2(0x22a))/0x1+-parseInt(_0x2b37e2(0x213))/0x2*(-parseInt(_0x2b37e2(0x237))/0x3)+-parseInt(_0x2b37e2(0x1f1))/0x4+-parseInt(_0x2b37e2(0x216))/0x5+-parseInt(_0x2b37e2(0x1ea))/0x6+-parseInt(_0x2b37e2(0x1f6))/0x7*(-parseInt(_0x2b37e2(0x1e8))/0x8)+parseInt(_0x2b37e2(0x225))/0x9*(parseInt(_0x2b37e2(0x21f))/0xa);if(_0x4a7631===_0x244f27)break;else _0x322a0b['push'](_0x322a0b['shift']());}catch(_0x574501){_0x322a0b['push'](_0x322a0b['shift']());}}}(_0x1086,0xd53e5));import{BaseConversationManager}from'./BaseConversationManager.js';import{Logger}from'./common.js';import{aiLanguageSession,initializeLanguageSession,sessionConfig}from'./aiCommon.js';const welcomeScreen=document['getElementById'](_0x5c7580(0x23b)),chatContainer=document['getElementById'](_0x5c7580(0x201)),messagesContainer=document[_0x5c7580(0x1f0)]('messagesContainer'),messageInput=document[_0x5c7580(0x1f0)]('messageInput'),sendButton=document['getElementById'](_0x5c7580(0x20c)),micButton=document[_0x5c7580(0x1f0)](_0x5c7580(0x228)),errorMessage=document[_0x5c7580(0x1f0)](_0x5c7580(0x20f)),loader=document[_0x5c7580(0x1f0)](_0x5c7580(0x223)),example1=document['getElementById'](_0x5c7580(0x21d)),example2=document['getElementById'](_0x5c7580(0x1fd)),newChatButton=document['getElementById'](_0x5c7580(0x238)),settingsButton=document[_0x5c7580(0x1f0)](_0x5c7580(0x1f5)),inputContainer=document[_0x5c7580(0x20d)](_0x5c7580(0x239)),conversationManager=new BaseConversationManager();function toggleChatUI(){const _0xdb11e5=_0x5c7580,_0x288266={'CaBNQ':_0xdb11e5(0x1fb),'TizAt':_0xdb11e5(0x1e9)};if(welcomeScreen)welcomeScreen[_0xdb11e5(0x1ec)][_0xdb11e5(0x209)]=_0x288266[_0xdb11e5(0x20a)];if(chatContainer)chatContainer[_0xdb11e5(0x1ec)][_0xdb11e5(0x209)]=_0x288266[_0xdb11e5(0x23a)];if(inputContainer)inputContainer[_0xdb11e5(0x1ec)][_0xdb11e5(0x209)]=_0x288266[_0xdb11e5(0x23a)];if(messageInput)messageInput['focus']();}function updateMessagesUI(_0x1df186){const _0x3f49e4=_0x5c7580,_0x210519={'mvjmK':_0x3f49e4(0x226),'aYlNo':function(_0x266d4c,_0x536fb6){return _0x266d4c===_0x536fb6;},'FNpyk':_0x3f49e4(0x22c),'QBeTJ':'message-user','zopif':_0x3f49e4(0x218)};if(!messagesContainer)return;messagesContainer['innerHTML']='',_0x1df186[_0x3f49e4(0x236)](_0x10850f=>{const _0x33d482=_0x3f49e4,_0x43fea2=document[_0x33d482(0x207)](_0x210519[_0x33d482(0x1e7)]);_0x43fea2['classList'][_0x33d482(0x1ef)](_0x33d482(0x217),_0x210519['aYlNo'](_0x10850f[_0x33d482(0x20b)],_0x210519[_0x33d482(0x235)])?_0x210519[_0x33d482(0x20e)]:_0x210519[_0x33d482(0x214)]),_0x43fea2[_0x33d482(0x1ed)]=_0x10850f[_0x33d482(0x20b)]===_0x210519[_0x33d482(0x235)]?'<div\x20class=\x22message-content\x22>'+_0x10850f['content']+_0x33d482(0x1f2):_0x33d482(0x1f7)+_0x10850f[_0x33d482(0x220)]+_0x33d482(0x1f2),messagesContainer[_0x33d482(0x1fe)](_0x43fea2);}),messagesContainer['scrollTop']=messagesContainer[_0x3f49e4(0x205)];}function _0x1086(){const _0x7af5e0=['YQMCi','loader','value','12547179CEKnfJ','div','systemRole','micButton','I\x27m\x20sorry,\x20I\x20couldn\x27t\x20generate\x20a\x20response.\x20Please\x20try\x20again.','1638812eNZuUW','click','user','classList','slxMu','focus','height','addMessage','shiftKey','bKHSW','error','FNpyk','forEach','4280997yRmcOp','newChatButton','.input-container','TizAt','welcomeScreen','mvjmK','376SaKjad','flex','5578134CAvWEp','textContent','style','innerHTML','key','add','getElementById','4163508eQdZHB','</div>','DOMContentLoaded','auto','settingsButton','1085sgnBVo','<div\x20class=\x22message-ai-avatar\x22><i\x20class=\x22fas\x20fa-robot\x22></i></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-content\x22>','Initialization\x20failed','EEubf','keydown','none','href','example2','appendChild','getCurrentConversation','oggot','chatContainer','addEventListener','LKHbF','assistant','scrollHeight','createNewConversation','createElement','system','display','CaBNQ','role','sendButton','querySelector','QBeTJ','errorMessage','promptStreaming','tlxTc','location','2leYtBa','zopif','messages','8116080MruXAY','message','message-ai','trim','scrollTop','BtIba','XbdaY','example1','XBzoT','10iihHAU','content','hOQiA'];_0x1086=function(){return _0x7af5e0;};return _0x1086();}async function sendMessage(){const _0x219de8=_0x5c7580,_0x55807b={'XbdaY':function(_0x2838bf){return _0x2838bf();},'EEubf':'user','LKHbF':function(_0x1f4711,_0x1ee982){return _0x1f4711(_0x1ee982);},'bKHSW':_0x219de8(0x1f4),'BtIba':_0x219de8(0x208),'tlxTc':_0x219de8(0x218),'XBzoT':'.message-content','hMhSu':_0x219de8(0x229),'oggot':_0x219de8(0x204)},_0x369251=messageInput[_0x219de8(0x224)][_0x219de8(0x219)]();if(!_0x369251)return;_0x55807b['XbdaY'](toggleChatUI),await conversationManager[_0x219de8(0x231)](_0x369251,_0x55807b[_0x219de8(0x1f9)]);const _0x246d7e=await conversationManager[_0x219de8(0x1ff)]();_0x55807b[_0x219de8(0x203)](updateMessagesUI,_0x246d7e[_0x219de8(0x215)]),messageInput['value']='',messageInput[_0x219de8(0x1ec)][_0x219de8(0x230)]=_0x55807b[_0x219de8(0x233)];try{if(!aiLanguageSession)await _0x55807b[_0x219de8(0x21c)](initializeLanguageSession);const _0x28191d=[{'role':_0x55807b[_0x219de8(0x21b)],'content':sessionConfig[_0x219de8(0x227)]},..._0x246d7e[_0x219de8(0x215)]],_0x39ea8e=await aiLanguageSession[_0x219de8(0x210)](JSON['stringify'](_0x28191d));let _0x251442='';const _0x1e4dec=document[_0x219de8(0x207)](_0x219de8(0x226));_0x1e4dec[_0x219de8(0x22d)][_0x219de8(0x1ef)](_0x219de8(0x217),_0x55807b[_0x219de8(0x211)]),_0x1e4dec[_0x219de8(0x1ed)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-ai-avatar\x22><i\x20class=\x22fas\x20fa-robot\x22></i></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-content\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',messagesContainer[_0x219de8(0x1fe)](_0x1e4dec);const _0x184f65=_0x1e4dec[_0x219de8(0x20d)](_0x55807b[_0x219de8(0x21e)]);for await(const _0x2ee19a of _0x39ea8e){_0x251442+=_0x2ee19a,_0x184f65[_0x219de8(0x1eb)]=_0x251442,messagesContainer[_0x219de8(0x21a)]=messagesContainer['scrollHeight'];}await conversationManager[_0x219de8(0x231)](_0x251442,_0x219de8(0x204));}catch(_0x25876c){Logger[_0x219de8(0x234)]('Response\x20error:',_0x25876c);const _0x15b561=_0x55807b['hMhSu'];await conversationManager[_0x219de8(0x231)](_0x15b561,_0x55807b[_0x219de8(0x200)]),updateMessagesUI(conversationManager['getCurrentConversation']()[_0x219de8(0x215)]);}}document[_0x5c7580(0x202)](_0x5c7580(0x1f3),async()=>{const _0x4d7c66=_0x5c7580,_0x1c9103={'hOQiA':_0x4d7c66(0x1f8)};try{if(!aiLanguageSession)await initializeLanguageSession();!conversationManager[_0x4d7c66(0x1ff)]()&&conversationManager[_0x4d7c66(0x206)]();}catch(_0x2c484e){Logger[_0x4d7c66(0x234)](_0x1c9103[_0x4d7c66(0x221)],_0x2c484e);}});if(sendButton)sendButton['addEventListener']('click',sendMessage);function _0x1962(_0x150ff2,_0xfd4bae){const _0x108617=_0x1086();return _0x1962=function(_0x196249,_0x4daa1d){_0x196249=_0x196249-0x1e7;let _0xbc6057=_0x108617[_0x196249];return _0xbc6057;},_0x1962(_0x150ff2,_0xfd4bae);}messageInput&&(messageInput[_0x5c7580(0x202)](_0x5c7580(0x1fa),_0x3ad4c7=>{const _0x5f30f4=_0x5c7580,_0x1a1d01={'WGyfz':function(_0x570d41,_0x58c10c){return _0x570d41===_0x58c10c;},'slxMu':function(_0x116968){return _0x116968();}};_0x1a1d01['WGyfz'](_0x3ad4c7[_0x5f30f4(0x1ee)],'Enter')&&!_0x3ad4c7[_0x5f30f4(0x232)]&&(_0x3ad4c7['preventDefault'](),_0x1a1d01[_0x5f30f4(0x22e)](sendMessage));}),messageInput[_0x5c7580(0x202)](_0x5c7580(0x22f),toggleChatUI));newChatButton&&newChatButton[_0x5c7580(0x202)](_0x5c7580(0x22b),()=>{const _0x4efcca=_0x5c7580,_0x25998a={'YQMCi':_0x4efcca(0x1e9)},_0x3a271d='3|1|2|0|4'['split']('|');let _0x2efae0=0x0;while(!![]){switch(_0x3a271d[_0x2efae0++]){case'0':if(chatContainer)chatContainer[_0x4efcca(0x1ec)][_0x4efcca(0x209)]=_0x4efcca(0x1fb);continue;case'1':if(messagesContainer)messagesContainer[_0x4efcca(0x1ed)]='';continue;case'2':if(welcomeScreen)welcomeScreen[_0x4efcca(0x1ec)]['display']=_0x25998a[_0x4efcca(0x222)];continue;case'3':conversationManager[_0x4efcca(0x206)]();continue;case'4':if(messageInput)messageInput[_0x4efcca(0x224)]='';continue;}break;}});settingsButton&&settingsButton[_0x5c7580(0x202)]('click',()=>{const _0x4cdde2=_0x5c7580;window[_0x4cdde2(0x212)][_0x4cdde2(0x1fc)]='settings.html';});export{conversationManager,sendMessage};