
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x55be99=_0x3005;(function(_0x5c30ff,_0x5266c9){const _0x43ea32=_0x3005,_0x145bc9=_0x5c30ff();while(!![]){try{const _0x5eb28f=-parseInt(_0x43ea32(0x146))/0x1*(-parseInt(_0x43ea32(0x140))/0x2)+parseInt(_0x43ea32(0x15f))/0x3*(-parseInt(_0x43ea32(0x159))/0x4)+parseInt(_0x43ea32(0x1ce))/0x5+parseInt(_0x43ea32(0x184))/0x6*(-parseInt(_0x43ea32(0x15e))/0x7)+-parseInt(_0x43ea32(0x14c))/0x8*(parseInt(_0x43ea32(0x1c3))/0x9)+-parseInt(_0x43ea32(0x14b))/0xa*(parseInt(_0x43ea32(0x161))/0xb)+parseInt(_0x43ea32(0x17a))/0xc;if(_0x5eb28f===_0x5266c9)break;else _0x145bc9['push'](_0x145bc9['shift']());}catch(_0x143770){_0x145bc9['push'](_0x145bc9['shift']());}}}(_0x5931,0x3d73b));import{BaseConversationManager}from'./baseConversationManager.js';import{Logger,displayError,showStatus}from'./common.js';import{AIAdapter}from'./aiAdapter.js';import{SpeechProcessor}from'./speechProcessor.js';const welcomeScreen=document[_0x55be99(0x1a1)]('welcomeScreen'),chatContainer=document['getElementById'](_0x55be99(0x15c)),messagesContainer=document['getElementById'](_0x55be99(0x13f)),messageInput=document[_0x55be99(0x1a1)](_0x55be99(0x173)),sendButton=document[_0x55be99(0x1a1)](_0x55be99(0x141)),micButton=document[_0x55be99(0x1a1)]('micButton'),errorMessage=document['getElementById'](_0x55be99(0x174)),loader=document['getElementById'](_0x55be99(0x1ca)),example1=document[_0x55be99(0x1a1)](_0x55be99(0x131)),example2=document[_0x55be99(0x1a1)](_0x55be99(0x13d)),newChatButton=document[_0x55be99(0x1a1)](_0x55be99(0x179)),settingsButton=document['getElementById'](_0x55be99(0x124)),inputContainer=document['querySelector']('.input-container');let speechProcessor,isVoiceEnabled=![];const promptLeakagePattern='You\x20are\x20a\x20friendly\x20teacher\x20who\x20uses\x20the\x20Feynman\x20Technique',systemRole1='You\x20are\x20a\x20friendly\x20teacher\x20who\x20uses\x20the\x20Feynman\x20Technique\x20to\x20make\x20any\x20topic\x20easy\x20to\x20understand.\x20\x0aWhen\x20someone\x20asks\x20about\x20a\x20concept:\x0aFirst\x20share\x20the\x20formal\x20definition\x20in\x201-3\x20sentences\x20when\x20possible.\x20If\x20the\x20concept\x20is\x20complex,\x20break\x20it\x20down\x20into\x20simple\x20parts\x20using\x20super\x20simple\x20terms,\x20like\x20you\x20are\x20teaching\x20a\x20beginner.\x0aAfter\x20explaining,\x20ask\x20a\x20few\x20easy,\x20direct\x20questions\x20to\x20check\x20if\x20they\x20really\x20get\x20it\x20\x20focus\x20on\x20the\x20\x27why\x27\x20and\x20\x27how.\x27\x0aIf\x20there\x27s\x20anything\x20they\x20seem\x20unsure\x20about,\x20point\x20it\x20out\x20and\x20suggest\x20simple\x20resources\x20or\x20examples\x20to\x20clear\x20it\x20up.\x0aEncourage\x20them\x20to\x20explain\x20the\x20idea\x20back\x20to\x20you\x20in\x20their\x20own\x20words,\x20and\x20help\x20fix\x20any\x20mistakes\x20or\x20gaps.\x0a'||AIAdapter[_0x55be99(0x14e)][_0x55be99(0x132)],systemRole2='You\x20are\x20an\x20expert\x20teacher\x20who\x20uses\x20the\x20Feynman\x20Technique\x20to\x20help\x20users\x20deeply\x20understand\x20concepts.\x20For\x20any\x20topic\x20or\x20skill\x20presented:\x0aExplain\x20the\x20topic\x20in\x20the\x20simplest\x20terms\x20possible,\x20as\x20if\x20teaching\x20a\x20complete\x20beginner.\x0aAfter\x20explaining,\x20ask\x20simple,\x20direct\x20questions\x20to\x20test\x20the\x20user\x27s\x20understanding\x20-\x20focusing\x20on\x20the\x20\x27why\x27\x20and\x20\x27how\x27\x20behind\x20key\x20ideas.\x0aIf\x20gaps\x20in\x20understanding\x20emerge,\x20highlight\x20them\x20clearly\x20and\x20suggest\x20resources\x20or\x20examples\x20to\x20fill\x20those\x20gaps.\x0aEncourage\x20the\x20user\x20to\x20re-explain\x20the\x20concept\x20back\x20to\x20you\x20in\x20their\x20own\x20words,\x20guiding\x20them\x20gently\x20to\x20correct\x20any\x20errors\x20or\x20misconceptions.\x0a'||AIAdapter['sessionConfig'][_0x55be99(0x132)],aiAdapter=new AIAdapter(_0x55be99(0x1bb));aiAdapter[_0x55be99(0x132)]=systemRole1;const conversationManager=new BaseConversationManager(),voiceButton=document[_0x55be99(0x1a1)]('voiceButton');function toggleChatUI(){const _0x43884f=_0x55be99,_0x14171a={'VEiJd':_0x43884f(0x13b)};if(welcomeScreen)welcomeScreen[_0x43884f(0x129)]['display']=_0x43884f(0x169);if(chatContainer)chatContainer[_0x43884f(0x129)][_0x43884f(0x1c9)]=_0x14171a['VEiJd'];if(inputContainer)inputContainer['style'][_0x43884f(0x1c9)]=_0x14171a[_0x43884f(0x136)];if(messageInput)messageInput[_0x43884f(0x16d)]();}function updateMessagesUI(_0x21b164){const _0x2d56c4=_0x55be99,_0x136e0e={'NrOmo':_0x2d56c4(0x1bf),'mnBST':'message','xMCUL':function(_0x3ec708,_0x228617){return _0x3ec708===_0x228617;},'xkmxc':'message-user','WsYkQ':'message-ai','jqSMy':_0x2d56c4(0x167)};if(!messagesContainer)return;messagesContainer['innerHTML']='',_0x21b164['forEach'](_0x7b73d=>{const _0x16ccae=_0x2d56c4,_0x197f3f=document[_0x16ccae(0x1c1)](_0x136e0e['NrOmo']);_0x197f3f[_0x16ccae(0x144)][_0x16ccae(0x181)](_0x136e0e[_0x16ccae(0x1cb)],_0x136e0e[_0x16ccae(0x15d)](_0x7b73d[_0x16ccae(0x125)],_0x16ccae(0x167))?_0x136e0e[_0x16ccae(0x1b2)]:_0x136e0e[_0x16ccae(0x151)]),_0x197f3f[_0x16ccae(0x18e)]=_0x7b73d['role']===_0x136e0e['jqSMy']?_0x16ccae(0x193)+_0x7b73d[_0x16ccae(0x16b)]+_0x16ccae(0x18b):_0x16ccae(0x1be)+_0x7b73d[_0x16ccae(0x16b)]+_0x16ccae(0x18b),messagesContainer[_0x16ccae(0x1cc)](_0x197f3f);}),messagesContainer[_0x2d56c4(0x180)]=messagesContainer['scrollHeight'];}function initializeSpeechManager(){const _0xeee9f0=_0x55be99,_0x2924a1={'rEZio':function(_0x37bfc3,_0x2d7aa5){return _0x37bfc3||_0x2d7aa5;},'zjyNf':_0xeee9f0(0x162),'iXQjQ':function(_0x2a1994){return _0x2a1994();}};speechProcessor=new SpeechProcessor({'onResult':(_0x712ade,_0x16a848)=>{messageInput['value']=_0x2924a1['rEZio'](_0x712ade,_0x16a848);},'onError':_0x560afe=>displayError(_0x560afe),'onSilence':_0x3588c5=>{const _0x4b2317=_0xeee9f0;(_0x3588c5===_0x4b2317(0x1b1)||_0x3588c5===_0x2924a1[_0x4b2317(0x1b5)])&&_0x2924a1['iXQjQ'](sendMessage);},'onRecordingStart':()=>micButton[_0xeee9f0(0x144)][_0xeee9f0(0x181)]('recording'),'onRecordingStop':()=>micButton[_0xeee9f0(0x144)]['remove'](_0xeee9f0(0x1a5)),'minimumWordCount':0x5,'silenceTimeout':0xbb8,'extendedSilenceTimeout':0xbb8});}function toggleRecording(){const _0x32e938=_0x55be99;speechProcessor['isRecording']?speechProcessor[_0x32e938(0x196)]():speechProcessor[_0x32e938(0x143)]();}function toggleVoiceResponse(){const _0x20d72a=_0x55be99,_0x481fa9={'AvmHP':'Voice\x20response\x20enabled:','yvPTq':_0x20d72a(0x142)};isVoiceEnabled=!isVoiceEnabled,console[_0x20d72a(0x1c0)](_0x481fa9[_0x20d72a(0x17c)],isVoiceEnabled),voiceButton[_0x20d72a(0x144)]['toggle'](_0x481fa9[_0x20d72a(0x1ac)],isVoiceEnabled);}async function initializeAIModel(){const _0x21b985=_0x55be99,_0x5f3cb5={'ZtBsV':_0x21b985(0x13c),'dKQXd':_0x21b985(0x176),'gGWdA':function(_0xc6f3cc,_0xb2c2c9,_0x1a7bd6){return _0xc6f3cc(_0xb2c2c9,_0x1a7bd6);},'whFBx':_0x21b985(0x154),'yGPvK':function(_0x4e0296,_0x1f66ae){return _0x4e0296||_0x1f66ae;},'ntHxY':'progress','EquEv':function(_0x461f25,_0x420fc9){return _0x461f25*_0x420fc9;},'YQrRW':function(_0x8690ab,_0x49f1e4,_0x3fcb4a){return _0x8690ab(_0x49f1e4,_0x3fcb4a);},'rnmCV':_0x21b985(0x138),'ZdqKi':function(_0x540f99,_0x59a7d5,_0x3b05ed){return _0x540f99(_0x59a7d5,_0x3b05ed);},'UgclP':_0x21b985(0x128),'ZarPp':function(_0x3d4f17,_0x5c76fd,_0x461a71){return _0x3d4f17(_0x5c76fd,_0x461a71);},'UKqwv':_0x21b985(0x1c6),'lDhIb':_0x21b985(0x156),'RgWbg':_0x21b985(0x1b0),'sLsBR':function(_0x4b2974,_0x564840){return _0x4b2974(_0x564840);},'KxhHo':_0x21b985(0x16c)};_0x5f3cb5[_0x21b985(0x157)](showStatus,_0x5f3cb5[_0x21b985(0x1c7)],_0x21b985(0x166));function _0x57dce1(_0x51e13d){const _0x531c2a=_0x21b985,{status:_0x733c20,message:_0x10de5a,stage:_0x4f60af,progress:_0x3bef18}=_0x51e13d[_0x531c2a(0x177)];console[_0x531c2a(0x1c0)](_0x5f3cb5[_0x531c2a(0x1b6)],_0x733c20,_0x10de5a);switch(_0x733c20){case _0x5f3cb5['dKQXd']:_0x5f3cb5[_0x531c2a(0x139)](showStatus,_0x5f3cb5[_0x531c2a(0x1c7)],_0x5f3cb5[_0x531c2a(0x1a3)](_0x10de5a,_0x531c2a(0x1a8)));break;case _0x5f3cb5[_0x531c2a(0x183)]:const _0x4e02=Math[_0x531c2a(0x19e)](_0x5f3cb5[_0x531c2a(0x1b7)](_0x3bef18||0x0,0x64));showStatus(_0x5f3cb5[_0x531c2a(0x1c7)],'Loading\x20'+_0x4f60af+':\x20'+_0x4e02+'%');break;case _0x5f3cb5[_0x531c2a(0x1c7)]:_0x5f3cb5[_0x531c2a(0x15a)](showStatus,_0x531c2a(0x154),_0x5f3cb5[_0x531c2a(0x1ad)]);aiModelProgressBar&&(aiModelProgressBar[_0x531c2a(0x129)][_0x531c2a(0x1a7)]=_0x531c2a(0x1b4));break;case _0x531c2a(0x128):_0x5f3cb5['ZdqKi'](showStatus,_0x5f3cb5[_0x531c2a(0x15b)],_0x531c2a(0x172)+_0x10de5a);break;}}aiAdapter[_0x21b985(0x14d)][_0x21b985(0x19b)]&&aiAdapter['engineWrapper']['worker'][_0x21b985(0x13e)](_0x5f3cb5[_0x21b985(0x178)],_0x57dce1);try{const _0x14b38a=await aiAdapter[_0x21b985(0x1b3)]();return showStatus(_0x21b985(0x154),_0x5f3cb5[_0x21b985(0x1c5)]),{'success':!![],'modelType':aiAdapter[_0x21b985(0x18f)]};}catch(_0x44946b){return console[_0x21b985(0x128)](_0x5f3cb5['RgWbg'],_0x44946b),showStatus(_0x5f3cb5['UgclP'],_0x21b985(0x17d)+_0x44946b[_0x21b985(0x1c6)]),_0x5f3cb5['sLsBR'](displayError,_0x5f3cb5[_0x21b985(0x158)]),{'success':![],'modelType':AIAdapter[_0x21b985(0x187)]['NULL']};}}async function sendMessage(){const _0x3e9bf4=_0x55be99,_0x5135f3={'dBztJ':function(_0x3e1199,_0xaf8292){return _0x3e1199||_0xaf8292;},'bmTXk':function(_0x15c53f,_0x4b1336){return _0x15c53f!==_0x4b1336;},'wPbMg':function(_0xd0ee95,_0x1e6d5f){return _0xd0ee95+_0x1e6d5f;},'vyVMu':function(_0x59cdf0,_0x13f20d){return _0x59cdf0===_0x13f20d;},'zPQAB':function(_0x2801e,_0x1caf9d){return _0x2801e>_0x1caf9d;},'REzgT':function(_0x13289a,_0x27fca7){return _0x13289a+_0x27fca7;},'NiNvh':function(_0xaae6da){return _0xaae6da();},'BRrPh':function(_0x3f4c78,_0x4d9934,_0x103d00){return _0x3f4c78(_0x4d9934,_0x103d00);},'BWdKr':function(_0x3cf735,_0x5c569a){return _0x3cf735(_0x5c569a);},'BtiQw':function(_0x2b376b){return _0x2b376b();},'BXbHZ':_0x3e9bf4(0x167),'HDVDp':_0x3e9bf4(0x1b1),'ZEoIr':function(_0x8e569c){return _0x8e569c();},'oEgRv':_0x3e9bf4(0x1a0),'PScMC':_0x3e9bf4(0x1bf),'lkUYe':'message','XJHlM':_0x3e9bf4(0x185),'GqIPG':_0x3e9bf4(0x1c4),'mPYBM':_0x3e9bf4(0x17e),'bWLpY':function(_0x469386,_0x269df2){return _0x469386&&_0x269df2;},'OsjLu':_0x3e9bf4(0x1a9),'vOOGi':_0x3e9bf4(0x1cf)};!speechProcessor&&initializeSpeechManager();const _0x5e1057=messageInput['value'][_0x3e9bf4(0x127)]();if(!_0x5e1057)return;_0x5135f3[_0x3e9bf4(0x1ab)](toggleChatUI),await conversationManager[_0x3e9bf4(0x12e)](_0x5e1057,_0x5135f3[_0x3e9bf4(0x195)]);const _0x85f456=await conversationManager[_0x3e9bf4(0x18c)]();_0x5135f3[_0x3e9bf4(0x170)](updateMessagesUI,_0x85f456[_0x3e9bf4(0x152)]),messageInput[_0x3e9bf4(0x1ae)]='',messageInput[_0x3e9bf4(0x129)]['height']=_0x5135f3[_0x3e9bf4(0x194)];try{if(!aiAdapter['isInitialized']&&!aiAdapter[_0x3e9bf4(0x126)]){const _0x36b348=await _0x5135f3[_0x3e9bf4(0x17b)](initializeAIModel);if(!_0x36b348[_0x3e9bf4(0x154)])throw new Error(_0x5135f3[_0x3e9bf4(0x16e)]);}const _0xb65b9c=[{'role':_0x3e9bf4(0x19d),'content':systemRole1},..._0x85f456[_0x3e9bf4(0x152)]];let _0x4f6092='',_0x255e87='',_0x190cbf=![];const _0x37c67c=document[_0x3e9bf4(0x1c1)](_0x5135f3['PScMC']);_0x37c67c['classList'][_0x3e9bf4(0x181)](_0x5135f3[_0x3e9bf4(0x1aa)],_0x5135f3['XJHlM']),_0x37c67c[_0x3e9bf4(0x18e)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-ai-avatar\x22><i\x20class=\x22fas\x20fa-robot\x22></i></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-content\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',messagesContainer[_0x3e9bf4(0x1cc)](_0x37c67c);const _0x3a8c20=_0x37c67c[_0x3e9bf4(0x188)](_0x5135f3[_0x3e9bf4(0x199)]),_0x1bfd82=async()=>{const _0x232603=_0x3e9bf4;if(_0x5135f3['dBztJ'](!_0x255e87,!isVoiceEnabled))return;const _0x3b7fe1=['.\x20','!\x20','?\x20',';\x20',':\x20','\x0a\x0a'];let _0x543611=-0x1;for(const _0x52cf64 of _0x3b7fe1){const _0x2833b9=_0x255e87['indexOf'](_0x52cf64);if(_0x5135f3['bmTXk'](_0x2833b9,-0x1)){_0x543611=_0x5135f3[_0x232603(0x148)](_0x2833b9,_0x52cf64[_0x232603(0x133)]);break;}}if(_0x5135f3[_0x232603(0x18a)](_0x543611,-0x1)&&_0x5135f3[_0x232603(0x190)](_0x255e87[_0x232603(0x133)],0x50)){const _0x264ccf=_0x255e87[_0x232603(0x19f)](',\x20');if(_0x5135f3[_0x232603(0x182)](_0x264ccf,-0x1))_0x543611=_0x5135f3[_0x232603(0x168)](_0x264ccf,0x2);else{const _0x30ffa5=_0x255e87[_0x232603(0x191)]('\x20',0x50);_0x5135f3[_0x232603(0x190)](_0x30ffa5,0x28)&&(_0x543611=_0x5135f3[_0x232603(0x148)](_0x30ffa5,0x1));}}if(_0x543611!==-0x1){const _0x29056c=_0x255e87['substring'](0x0,_0x543611);_0x255e87=_0x255e87[_0x232603(0x134)](_0x543611),_0x190cbf=!![],await speechProcessor['speakText'](_0x29056c),_0x190cbf=![],await _0x5135f3[_0x232603(0x1c8)](_0x1bfd82);}else{if(_0x5135f3['zPQAB'](_0x255e87[_0x232603(0x133)],0x78)){const _0x1167f2=_0x255e87;_0x255e87='',_0x190cbf=!![],await speechProcessor[_0x232603(0x12c)](_0x1167f2),_0x190cbf=![];}}};await aiAdapter['generateResponseStream'](_0xb65b9c,async _0x33d38d=>{const _0x3e10fc=_0x3e9bf4;let _0x1a90a4=_0x5135f3[_0x3e10fc(0x1bd)](moderationLayer,promptLeakagePattern,_0x33d38d);_0x4f6092+=_0x1a90a4,_0x5135f3['BWdKr'](requestAnimationFrame,()=>{const _0x2f4a6d=_0x3e10fc;_0x3a8c20[_0x2f4a6d(0x12b)]=_0x4f6092,messagesContainer[_0x2f4a6d(0x180)]=messagesContainer[_0x2f4a6d(0x189)];}),isVoiceEnabled&&(_0x255e87+=_0x1a90a4,!_0x190cbf&&setTimeout(_0x1bfd82,0x0));}),await conversationManager[_0x3e9bf4(0x12e)](_0x4f6092,_0x5135f3[_0x3e9bf4(0x16a)]),_0x5135f3['bWLpY'](isVoiceEnabled,_0x255e87)&&await speechProcessor[_0x3e9bf4(0x12c)](_0x255e87);}catch(_0xa0793e){Logger[_0x3e9bf4(0x128)](_0x5135f3[_0x3e9bf4(0x150)],_0xa0793e);const _0x51871f=_0x3e9bf4(0x163);await conversationManager[_0x3e9bf4(0x12e)](_0x51871f,_0x5135f3[_0x3e9bf4(0x16a)]),_0x5135f3['BWdKr'](updateMessagesUI,conversationManager[_0x3e9bf4(0x18c)]()[_0x3e9bf4(0x152)]),displayError(_0x5135f3[_0x3e9bf4(0x155)]);}}function moderationLayer(_0x18478,_0x213cda){const _0x173676=_0x55be99,_0x46355f={'HJYHj':function(_0x1d618f,_0x2b32c4,_0xdc31e8){return _0x1d618f(_0x2b32c4,_0xdc31e8);},'leidl':'Incorrect\x20ask.\x20Please\x20rephrase\x20your\x20query.'};if(_0x46355f[_0x173676(0x1ba)](exactMatch,_0x18478,_0x213cda))return _0x46355f['leidl'];if(_0x46355f[_0x173676(0x1ba)](semanticMatch,_0x18478,_0x213cda))return _0x46355f[_0x173676(0x14f)];return _0x213cda;}function _0x3005(_0x54e8ef,_0x34761d){const _0x59310c=_0x5931();return _0x3005=function(_0x30055b,_0x38c644){_0x30055b=_0x30055b-0x124;let _0x27b602=_0x59310c[_0x30055b];return _0x27b602;},_0x3005(_0x54e8ef,_0x34761d);}function exactMatch(_0x891712,_0x475b81){return _0x475b81['toLowerCase']()['includes'](_0x891712['toLowerCase']());}function semanticMatch(_0x318f79,_0x29b630){const _0x7b4cba=_0x55be99,_0x404103={'nOaCD':function(_0xe45595,_0xb738e8){return _0xe45595>_0xb738e8;}},_0x4bdb7d=_0x318f79[_0x7b4cba(0x13a)]()[_0x7b4cba(0x1a6)]('\x20'),_0x5c71c1=_0x29b630[_0x7b4cba(0x13a)]()[_0x7b4cba(0x1a6)]('\x20'),_0x4ba96c=_0x4bdb7d[_0x7b4cba(0x14a)](_0x4384b8=>_0x5c71c1['includes'](_0x4384b8));return _0x404103['nOaCD'](_0x4ba96c[_0x7b4cba(0x133)],0x3);}function setupExampleClickEvents(){const _0xf5d038=_0x55be99,_0x13072e={'PZWQD':_0xf5d038(0x12a),'BBlGv':function(_0x461e66){return _0x461e66();},'YHCFE':'Example\x20clicked\x20with\x20text:','GgMrV':function(_0x1fbc7f,_0x59ed82,_0x5d5b1e){return _0x1fbc7f(_0x59ed82,_0x5d5b1e);},'Zbpsc':function(_0x21c9a3,_0x2569ac){return _0x21c9a3(_0x2569ac);},'dYwkp':_0xf5d038(0x1c2),'oFfNc':function(_0x1f1340,_0x3dd26c){return _0x1f1340(_0x3dd26c);},'TImPz':_0xf5d038(0x13d),'iZQhz':'messageInput','vjuAg':'Setting\x20up\x20example\x20clicks\x20-\x20example1:','aJOcp':_0xf5d038(0x16f),'uXiuP':function(_0x399034,_0x366a4a){return _0x399034||_0x366a4a;},'RvZGt':_0xf5d038(0x1b9),'GWxTh':_0xf5d038(0x18d)},_0x2e0596=document[_0xf5d038(0x1a1)]('example1'),_0x98c27a=document[_0xf5d038(0x1a1)](_0x13072e[_0xf5d038(0x186)]),_0x390ed5=document[_0xf5d038(0x1a1)](_0x13072e['iZQhz']);console[_0xf5d038(0x1c0)](_0x13072e[_0xf5d038(0x19c)],_0x2e0596),console[_0xf5d038(0x1c0)](_0x13072e[_0xf5d038(0x17f)],_0x98c27a),console['log'](_0xf5d038(0x147),_0x390ed5);if(_0x13072e[_0xf5d038(0x149)](!_0x2e0596,!_0x98c27a)||!_0x390ed5){console[_0xf5d038(0x128)](_0x13072e[_0xf5d038(0x1a2)]);return;}function _0x3b9f81(_0x5e5549){const _0x216c5a=_0xf5d038,_0x2347b1=_0x5e5549['innerText'][_0x216c5a(0x127)]();console['log'](_0x13072e[_0x216c5a(0x192)],_0x2347b1),_0x390ed5['value']=_0x2347b1,_0x390ed5['dispatchEvent'](new Event('focus')),_0x13072e[_0x216c5a(0x197)](setTimeout,()=>{const _0x21a397=_0x216c5a;console[_0x21a397(0x1c0)](_0x13072e[_0x21a397(0x130)],_0x2347b1),_0x13072e['BBlGv'](sendMessage);},0x64);}_0x2e0596[_0xf5d038(0x13e)](_0xf5d038(0x19a),()=>{const _0x2f9aa5=_0xf5d038;console['log'](_0x2f9aa5(0x160)),_0x13072e[_0x2f9aa5(0x165)](_0x3b9f81,_0x2e0596);}),_0x98c27a[_0xf5d038(0x13e)](_0xf5d038(0x19a),()=>{const _0x4aa019=_0xf5d038;console[_0x4aa019(0x1c0)](_0x13072e['dYwkp']),_0x13072e['oFfNc'](_0x3b9f81,_0x98c27a);}),console[_0xf5d038(0x1c0)](_0x13072e['GWxTh']);}document[_0x55be99(0x13e)](_0x55be99(0x12f),async()=>{const _0x25042a=_0x55be99,_0x3d188d={'CAVbU':function(_0x4efb8f){return _0x4efb8f();},'alNBt':'Initialization\x20failed','LPBfe':function(_0x503f31,_0x2f997a){return _0x503f31(_0x2f997a);}};try{!conversationManager[_0x25042a(0x18c)]()&&conversationManager['createNewConversation'](),_0x3d188d[_0x25042a(0x137)](initializeSpeechManager),_0x3d188d[_0x25042a(0x137)](setupExampleClickEvents),_0x3d188d[_0x25042a(0x137)](initializeAIModel);}catch(_0x35fe95){Logger[_0x25042a(0x128)](_0x3d188d['alNBt'],_0x35fe95),_0x3d188d['LPBfe'](displayError,_0x25042a(0x1cd));}});document['readyState']===_0x55be99(0x176)?document[_0x55be99(0x13e)](_0x55be99(0x12f),setupExampleClickEvents):setupExampleClickEvents();if(sendButton)sendButton['addEventListener'](_0x55be99(0x19a),sendMessage);function _0x5931(){const _0x580fcd=['focus','oEgRv','Setting\x20up\x20example\x20clicks\x20-\x20example2:','BWdKr','QNwuc','Model\x20Load\x20Failed:\x20','messageInput','errorMessage','jmSNX','loading','data','UKqwv','newChatButton','12334296CHnmZu','ZEoIr','AvmHP','Initialization\x20Failed:\x20','assistant','aJOcp','scrollTop','add','bmTXk','ntHxY','266088KBmvhx','message-ai','TImPz','ModelTypes','querySelector','scrollHeight','vyVMu','</div>','getCurrentConversation','Example\x20click\x20handlers\x20have\x20been\x20set\x20up','innerHTML','modelType','zPQAB','lastIndexOf','YHCFE','<div\x20class=\x22message-content\x22>','HDVDp','BXbHZ','stopRecording','GgMrV','key','GqIPG','click','worker','vjuAg','system','round','indexOf','[sendMessage]\x20Failed\x20to\x20initialize\x20AI\x20model','getElementById','RvZGt','yGPvK','shiftKey','recording','split','width','Loading\x20model...','Response\x20error:','lkUYe','BtiQw','yvPTq','rnmCV','value','keydown','AI\x20Model\x20Initialization\x20Error:','auto','xkmxc','init','100%','zjyNf','ZtBsV','EquEv','oyFFJ','Failed\x20to\x20find\x20required\x20DOM\x20elements','HJYHj','tinyllama-1.1b-chat-v0.4','HHBSg','BRrPh','<div\x20class=\x22message-ai-avatar\x22><i\x20class=\x22fas\x20fa-robot\x22></i></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-content\x22>','div','log','createElement','Example\x202\x20clicked','239895LkDfsE','.message-content','lDhIb','message','whFBx','NiNvh','display','loader','mnBST','appendChild','Application\x20initialization\x20failed.\x20Some\x20features\x20may\x20be\x20limited.','687665ERuNMt','Unable\x20to\x20send\x20message.\x20Please\x20check\x20your\x20connection\x20and\x20try\x20again.','settingsButton','role','useBrowserAI','trim','error','style','[handleExampleClick]\x20Now\x20sending\x20message:','textContent','speakText','createNewConversation','addMessage','DOMContentLoaded','PZWQD','example1','systemRole','length','substring','iaexB','VEiJd','CAVbU','AI\x20Model\x20Loaded\x20Successfully','gGWdA','toLowerCase','flex','[AI\x20Model\x20Initialization]','example2','addEventListener','messagesContainer','832610HiCeIp','sendButton','active','startRecording','classList','Enter','1xBRwhI','Setting\x20up\x20example\x20clicks\x20-\x20messageInput:','wPbMg','uXiuP','filter','3979890EHSvxP','80MybwjT','engineWrapper','sessionConfig','leidl','OsjLu','WsYkQ','messages','settings.html','success','vOOGi','AI\x20Model\x20Initialization\x20Started','ZarPp','KxhHo','8vysRST','YQrRW','UgclP','chatContainer','xMCUL','28raSJQV','732087ewfIuQ','Example\x201\x20clicked','11PHEzBr','explicit','I\x27m\x20sorry,\x20I\x20couldn\x27t\x20generate\x20a\x20response.\x20Please\x20try\x20again.','href','Zbpsc','Initializing\x20AI\x20Model...','user','REzgT','none','mPYBM','content','Could\x20not\x20initialize\x20AI\x20model.\x20Falling\x20back\x20to\x20alternative\x20methods.'];_0x5931=function(){return _0x580fcd;};return _0x5931();}if(micButton)micButton[_0x55be99(0x13e)]('click',toggleRecording);if(voiceButton)voiceButton[_0x55be99(0x13e)](_0x55be99(0x19a),toggleVoiceResponse);messageInput&&(messageInput[_0x55be99(0x13e)](_0x55be99(0x1af),_0x2cd864=>{const _0x18766e=_0x55be99,_0x4df2e0={'HHBSg':_0x18766e(0x145),'QNwuc':function(_0x64752){return _0x64752();}};_0x2cd864[_0x18766e(0x198)]===_0x4df2e0[_0x18766e(0x1bc)]&&!_0x2cd864[_0x18766e(0x1a4)]&&(_0x2cd864['preventDefault'](),_0x4df2e0[_0x18766e(0x171)](sendMessage));}),messageInput[_0x55be99(0x13e)]('focus',toggleChatUI));newChatButton&&newChatButton[_0x55be99(0x13e)](_0x55be99(0x19a),()=>{const _0x2a9a69=_0x55be99,_0x791303={'iaexB':_0x2a9a69(0x169),'jmSNX':_0x2a9a69(0x13b)},_0x4ff2b0='0|2|4|3|1'[_0x2a9a69(0x1a6)]('|');let _0x1c4a72=0x0;while(!![]){switch(_0x4ff2b0[_0x1c4a72++]){case'0':conversationManager[_0x2a9a69(0x12d)]();continue;case'1':if(messageInput)messageInput['value']='';continue;case'2':if(messagesContainer)messagesContainer['innerHTML']='';continue;case'3':if(chatContainer)chatContainer[_0x2a9a69(0x129)][_0x2a9a69(0x1c9)]=_0x791303[_0x2a9a69(0x135)];continue;case'4':if(welcomeScreen)welcomeScreen[_0x2a9a69(0x129)][_0x2a9a69(0x1c9)]=_0x791303[_0x2a9a69(0x175)];continue;}break;}});settingsButton&&settingsButton[_0x55be99(0x13e)](_0x55be99(0x19a),()=>{const _0x5bbe3c=_0x55be99,_0xb3d2b7={'oyFFJ':_0x5bbe3c(0x153)};window['location'][_0x5bbe3c(0x164)]=_0xb3d2b7[_0x5bbe3c(0x1b8)];});export{conversationManager,sendMessage,initializeAIModel};