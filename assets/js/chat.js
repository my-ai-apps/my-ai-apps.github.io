
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x35baf5=_0x1242;(function(_0xdb157,_0x2d9d58){const _0xe7d1c5=_0x1242,_0x550623=_0xdb157();while(!![]){try{const _0x57728b=parseInt(_0xe7d1c5(0xb7))/0x1*(parseInt(_0xe7d1c5(0x91))/0x2)+-parseInt(_0xe7d1c5(0xaa))/0x3*(-parseInt(_0xe7d1c5(0xa9))/0x4)+-parseInt(_0xe7d1c5(0x7b))/0x5*(-parseInt(_0xe7d1c5(0x83))/0x6)+-parseInt(_0xe7d1c5(0x9e))/0x7*(-parseInt(_0xe7d1c5(0x94))/0x8)+parseInt(_0xe7d1c5(0xac))/0x9+-parseInt(_0xe7d1c5(0x9a))/0xa+-parseInt(_0xe7d1c5(0x89))/0xb*(parseInt(_0xe7d1c5(0x6e))/0xc);if(_0x57728b===_0x2d9d58)break;else _0x550623['push'](_0x550623['shift']());}catch(_0x4b2408){_0x550623['push'](_0x550623['shift']());}}}(_0x525f,0xb60cd));function _0x1242(_0xac60ab,_0x1a44e8){const _0x525ff9=_0x525f();return _0x1242=function(_0x124296,_0xb38aa6){_0x124296=_0x124296-0x6d;let _0x21f927=_0x525ff9[_0x124296];return _0x21f927;},_0x1242(_0xac60ab,_0x1a44e8);}import{BaseConversationManager}from'./BaseConversationManager.js';import{Logger}from'./common.js';import{aiLanguageSession,initializeLanguageSession,sessionConfig}from'./aiCommon.js';const welcomeScreen=document[_0x35baf5(0xbf)](_0x35baf5(0xbd)),chatContainer=document['getElementById']('chatContainer'),messagesContainer=document[_0x35baf5(0xbf)]('messagesContainer'),messageInput=document['getElementById'](_0x35baf5(0x90)),sendButton=document[_0x35baf5(0xbf)](_0x35baf5(0x72)),micButton=document[_0x35baf5(0xbf)](_0x35baf5(0xa4)),errorMessage=document[_0x35baf5(0xbf)]('errorMessage'),loader=document['getElementById'](_0x35baf5(0x95)),example1=document[_0x35baf5(0xbf)]('example1'),example2=document[_0x35baf5(0xbf)](_0x35baf5(0xa2)),newChatButton=document[_0x35baf5(0xbf)](_0x35baf5(0xb2)),settingsButton=document['getElementById'](_0x35baf5(0x8f)),inputContainer=document[_0x35baf5(0x77)]('.input-container'),conversationManager=new BaseConversationManager();function toggleChatUI(){const _0xdcfc5a=_0x35baf5,_0x48a8e0={'sFcKW':'none','iMgwg':'flex'};if(welcomeScreen)welcomeScreen['style'][_0xdcfc5a(0x82)]=_0x48a8e0[_0xdcfc5a(0x7e)];if(chatContainer)chatContainer['style']['display']=_0x48a8e0[_0xdcfc5a(0x7f)];if(inputContainer)inputContainer[_0xdcfc5a(0xb5)][_0xdcfc5a(0x82)]=_0x48a8e0[_0xdcfc5a(0x7f)];if(messageInput)messageInput[_0xdcfc5a(0x74)]();}function _0x525f(){const _0x4480a7=['shiftKey','focus','add','height','querySelector','div','<div\x20class=\x22message-content\x22>','scrollTop','158410xKXCRu','GXAZS','CnQvl','sFcKW','iMgwg','message-ai','</div>','display','168AVwtdr','.message-content','I\x27m\x20sorry,\x20I\x20couldn\x27t\x20generate\x20a\x20response.\x20Please\x20try\x20again.','appendChild','createElement','TvAwT','1153020SWTrHp','rMydy','Initialization\x20failed','cFYPM','addMessage','click','settingsButton','messageInput','1000554AOhVZD','message-user','Enter','8sTwlZU','loader','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-ai-avatar\x22><i\x20class=\x22fas\x20fa-robot\x22></i></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-content\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','value','addEventListener','keydown','10994290cQJtgz','TqOlL','role','xGyQJ','6537643EpjWot','promptStreaming','textContent','error','example2','PvtWD','micButton','aZMrg','qMCni','settings.html','zQSvp','164676sudKJT','78mizoNg','none','7778250uyBJiK','ncZft','classList','lWByF','stringify','messages','newChatButton','innerHTML','Response\x20error:','style','user','1wCynkX','ByAwF','getCurrentConversation','createNewConversation','hEwcN','<div\x20class=\x22message-ai-avatar\x22><i\x20class=\x22fas\x20fa-robot\x22></i></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-content\x22>','welcomeScreen','location','getElementById','OAKSQ','assistant','message','zQNNR','276btdjZr','content','key','ZKuCC','sendButton'];_0x525f=function(){return _0x4480a7;};return _0x525f();}function updateMessagesUI(_0x3f0168){const _0x5e909e=_0x35baf5,_0x680313={'rMydy':'div','ZKuCC':function(_0x492005,_0x3fff96){return _0x492005===_0x3fff96;},'PvtWD':_0x5e909e(0xb6),'zQSvp':_0x5e909e(0x92),'xGKjF':_0x5e909e(0x80)};if(!messagesContainer)return;messagesContainer[_0x5e909e(0xb3)]='',_0x3f0168['forEach'](_0x42b495=>{const _0x5c9209=_0x5e909e,_0x187863=document['createElement'](_0x680313[_0x5c9209(0x8a)]);_0x187863[_0x5c9209(0xae)][_0x5c9209(0x75)](_0x5c9209(0xc2),_0x680313[_0x5c9209(0x71)](_0x42b495[_0x5c9209(0x9c)],_0x680313[_0x5c9209(0xa3)])?_0x680313[_0x5c9209(0xa8)]:_0x680313['xGKjF']),_0x187863[_0x5c9209(0xb3)]=_0x42b495[_0x5c9209(0x9c)]===_0x680313['PvtWD']?_0x5c9209(0x79)+_0x42b495[_0x5c9209(0x6f)]+_0x5c9209(0x81):_0x5c9209(0xbc)+_0x42b495[_0x5c9209(0x6f)]+_0x5c9209(0x81),messagesContainer[_0x5c9209(0x86)](_0x187863);}),messagesContainer[_0x5e909e(0x7a)]=messagesContainer['scrollHeight'];}async function sendMessage(){const _0x435575=_0x35baf5,_0x31b130={'ByAwF':function(_0xbeb186){return _0xbeb186();},'cFYPM':function(_0x4e457c,_0x5c43b9){return _0x4e457c(_0x5c43b9);},'aZMrg':'auto','TqOlL':'system','OAKSQ':'message','TvAwT':'message-ai','CnQvl':_0x435575(0x84),'gamNQ':_0x435575(0xc1),'hEwcN':_0x435575(0xb4),'xGyQJ':_0x435575(0x85)},_0x8662e=messageInput[_0x435575(0x97)]['trim']();if(!_0x8662e)return;_0x31b130[_0x435575(0xb8)](toggleChatUI),await conversationManager[_0x435575(0x8d)](_0x8662e,'user');const _0x3e7005=await conversationManager['getCurrentConversation']();_0x31b130[_0x435575(0x8c)](updateMessagesUI,_0x3e7005['messages']),messageInput[_0x435575(0x97)]='',messageInput[_0x435575(0xb5)][_0x435575(0x76)]=_0x31b130[_0x435575(0xa5)];try{if(!aiLanguageSession)await _0x31b130[_0x435575(0xb8)](initializeLanguageSession);const _0x444424=[{'role':_0x31b130[_0x435575(0x9b)],'content':sessionConfig['systemRole']},..._0x3e7005['messages']],_0x1b3258=await aiLanguageSession[_0x435575(0x9f)](JSON[_0x435575(0xb0)](_0x444424));let _0x3421d5='';const _0xbe4d84=document[_0x435575(0x87)](_0x435575(0x78));_0xbe4d84[_0x435575(0xae)][_0x435575(0x75)](_0x31b130[_0x435575(0xc0)],_0x31b130[_0x435575(0x88)]),_0xbe4d84[_0x435575(0xb3)]=_0x435575(0x96),messagesContainer[_0x435575(0x86)](_0xbe4d84);const _0x40f25a=_0xbe4d84[_0x435575(0x77)](_0x31b130[_0x435575(0x7d)]);for await(const _0x18c0be of _0x1b3258){_0x3421d5+=_0x18c0be,_0x40f25a[_0x435575(0xa0)]=_0x3421d5,messagesContainer[_0x435575(0x7a)]=messagesContainer['scrollHeight'];}await conversationManager[_0x435575(0x8d)](_0x3421d5,_0x31b130['gamNQ']);}catch(_0x4e1faa){Logger[_0x435575(0xa1)](_0x31b130[_0x435575(0xbb)],_0x4e1faa);const _0x29cfb9=_0x31b130[_0x435575(0x9d)];await conversationManager['addMessage'](_0x29cfb9,_0x435575(0xc1)),updateMessagesUI(conversationManager[_0x435575(0xb9)]()[_0x435575(0xb1)]);}}document[_0x35baf5(0x98)]('DOMContentLoaded',async()=>{const _0x388438=_0x35baf5,_0x4cddc1={'lWByF':function(_0x29ed6b){return _0x29ed6b();},'zQNNR':_0x388438(0x8b)};try{if(!aiLanguageSession)await _0x4cddc1[_0x388438(0xaf)](initializeLanguageSession);!conversationManager[_0x388438(0xb9)]()&&conversationManager[_0x388438(0xba)]();}catch(_0x1fb0ed){Logger[_0x388438(0xa1)](_0x4cddc1[_0x388438(0x6d)],_0x1fb0ed);}});if(sendButton)sendButton['addEventListener']('click',sendMessage);messageInput&&(messageInput[_0x35baf5(0x98)](_0x35baf5(0x99),_0x55c996=>{const _0x32997a=_0x35baf5,_0x10ef57={'swBZH':function(_0x53af84,_0x56e554){return _0x53af84===_0x56e554;},'qMCni':_0x32997a(0x93),'ncZft':function(_0x36e7e6){return _0x36e7e6();}};_0x10ef57['swBZH'](_0x55c996[_0x32997a(0x70)],_0x10ef57[_0x32997a(0xa6)])&&!_0x55c996[_0x32997a(0x73)]&&(_0x55c996['preventDefault'](),_0x10ef57[_0x32997a(0xad)](sendMessage));}),messageInput['addEventListener']('focus',toggleChatUI));newChatButton&&newChatButton[_0x35baf5(0x98)](_0x35baf5(0x8e),()=>{const _0x2101bc=_0x35baf5,_0x4719ff={'GXAZS':_0x2101bc(0xab)};conversationManager['createNewConversation']();if(messagesContainer)messagesContainer[_0x2101bc(0xb3)]='';if(welcomeScreen)welcomeScreen['style']['display']='flex';if(chatContainer)chatContainer[_0x2101bc(0xb5)][_0x2101bc(0x82)]=_0x4719ff[_0x2101bc(0x7c)];if(messageInput)messageInput[_0x2101bc(0x97)]='';});settingsButton&&settingsButton[_0x35baf5(0x98)]('click',()=>{const _0x6db79e=_0x35baf5,_0x1b7158={'NofuV':_0x6db79e(0xa7)};window[_0x6db79e(0xbe)]['href']=_0x1b7158['NofuV'];});export{conversationManager,sendMessage};