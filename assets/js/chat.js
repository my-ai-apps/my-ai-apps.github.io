
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x45ab5c=_0x5cb6;(function(_0x47df1b,_0xa825ed){const _0x574039=_0x5cb6,_0x19e5eb=_0x47df1b();while(!![]){try{const _0x247ca2=parseInt(_0x574039(0x98))/0x1+parseInt(_0x574039(0xcc))/0x2*(-parseInt(_0x574039(0xcd))/0x3)+parseInt(_0x574039(0xdb))/0x4+parseInt(_0x574039(0xae))/0x5*(-parseInt(_0x574039(0xc9))/0x6)+parseInt(_0x574039(0xba))/0x7*(parseInt(_0x574039(0xa0))/0x8)+parseInt(_0x574039(0xb5))/0x9+parseInt(_0x574039(0xac))/0xa*(-parseInt(_0x574039(0xbe))/0xb);if(_0x247ca2===_0xa825ed)break;else _0x19e5eb['push'](_0x19e5eb['shift']());}catch(_0x4e943f){_0x19e5eb['push'](_0x19e5eb['shift']());}}}(_0x2611,0x74b75));import{BaseConversationManager}from'./BaseConversationManager.js';function _0x2611(){const _0x5a3e0f=['ikfKt','uIilf','1649092vdJBhX','chatContainer','click','scrollTop','flex','dcaXJ','newChatButton','sendButton','KkbLm','BXShJ','naPMF','BaInT','scrollHeight','display','settingsButton','keydown','NJmmG','focus','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-ai-avatar\x22><i\x20class=\x22fas\x20fa-robot\x22></i></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-content\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','messages','none','welcomeScreen','createNewConversation','81480miMkeR','addEventListener','classList','forEach','getCurrentConversation','Zhqzw','shiftKey','</div>','9608veMZBg','message-ai','ukfNB','createElement','content','example1','aVrtf','href','trim','preventDefault','addMessage','role','110kgogdM','kBKaU','2050PgUNFB','querySelector','yjNPz','JxIfR','user','4|1|2|0|3','div','7720650xgjBPO','Initialization\x20failed','Mjlmg','auto','.input-container','2702yJHDbi','assistant','Enter','messageInput','216106PLzkIM','error','micButton','example2','nDltz','promptStreaming','<div\x20class=\x22message-ai-avatar\x22><i\x20class=\x22fas\x20fa-robot\x22></i></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-content\x22>','message','key','appendChild','IIhUh','3198EIYxRi','iLgrJ','style','8514TmFRKV','636bMCEes','messagesContainer','loader','xgvgT','settings.html','getElementById','errorMessage','innerHTML','LTuGV','GFPWK','message-user','location'];_0x2611=function(){return _0x5a3e0f;};return _0x2611();}import{Logger}from'./common.js';import{aiLanguageSession,initializeLanguageSession,sessionConfig}from'./aiCommon.js';const welcomeScreen=document['getElementById'](_0x45ab5c(0x96)),chatContainer=document[_0x45ab5c(0xd2)](_0x45ab5c(0xdc)),messagesContainer=document[_0x45ab5c(0xd2)](_0x45ab5c(0xce)),messageInput=document[_0x45ab5c(0xd2)](_0x45ab5c(0xbd)),sendButton=document[_0x45ab5c(0xd2)](_0x45ab5c(0x88)),micButton=document[_0x45ab5c(0xd2)](_0x45ab5c(0xc0)),errorMessage=document['getElementById'](_0x45ab5c(0xd3)),loader=document['getElementById'](_0x45ab5c(0xcf)),example1=document['getElementById'](_0x45ab5c(0xa5)),example2=document[_0x45ab5c(0xd2)](_0x45ab5c(0xc1)),newChatButton=document['getElementById'](_0x45ab5c(0x87)),settingsButton=document[_0x45ab5c(0xd2)](_0x45ab5c(0x8f)),inputContainer=document['querySelector'](_0x45ab5c(0xb9)),conversationManager=new BaseConversationManager();function toggleChatUI(){const _0x552607=_0x45ab5c,_0x44f216={'kBKaU':_0x552607(0x95),'fuoAN':_0x552607(0xdf)};if(welcomeScreen)welcomeScreen['style']['display']=_0x44f216[_0x552607(0xad)];if(chatContainer)chatContainer[_0x552607(0xcb)][_0x552607(0x8e)]=_0x552607(0xdf);if(inputContainer)inputContainer['style']['display']=_0x44f216['fuoAN'];if(messageInput)messageInput[_0x552607(0x92)]();}function updateMessagesUI(_0x477d13){const _0x422625=_0x45ab5c,_0x59bf44={'LmkFf':_0x422625(0xb4),'xgvgT':_0x422625(0xc5),'aVrtf':function(_0x35cfe1,_0x26e6bd){return _0x35cfe1===_0x26e6bd;},'naPMF':_0x422625(0xb2),'iLgrJ':_0x422625(0xd7),'qcbgq':_0x422625(0xa1),'GFPWK':function(_0x3ce12c,_0x2fa75f){return _0x3ce12c===_0x2fa75f;}};if(!messagesContainer)return;messagesContainer[_0x422625(0xd4)]='',_0x477d13[_0x422625(0x9b)](_0x255fed=>{const _0x37d8c4=_0x422625,_0x4e7635=document[_0x37d8c4(0xa3)](_0x59bf44['LmkFf']);_0x4e7635['classList']['add'](_0x59bf44[_0x37d8c4(0xd0)],_0x59bf44[_0x37d8c4(0xa6)](_0x255fed[_0x37d8c4(0xab)],_0x59bf44[_0x37d8c4(0x8b)])?_0x59bf44[_0x37d8c4(0xca)]:_0x59bf44['qcbgq']),_0x4e7635['innerHTML']=_0x59bf44[_0x37d8c4(0xd6)](_0x255fed[_0x37d8c4(0xab)],_0x59bf44[_0x37d8c4(0x8b)])?'<div\x20class=\x22message-content\x22>'+_0x255fed[_0x37d8c4(0xa4)]+_0x37d8c4(0x9f):_0x37d8c4(0xc4)+_0x255fed[_0x37d8c4(0xa4)]+'</div>',messagesContainer['appendChild'](_0x4e7635);}),messagesContainer[_0x422625(0xde)]=messagesContainer[_0x422625(0x8d)];}async function sendMessage(){const _0x26d7de=_0x45ab5c,_0x4bd030={'Mjlmg':function(_0x1a8a47){return _0x1a8a47();},'NdSEJ':_0x26d7de(0xb2),'NJmmG':function(_0xe4aff6,_0x24e5df){return _0xe4aff6(_0x24e5df);},'OZoVa':_0x26d7de(0xb8),'dcaXJ':'system','ikfKt':_0x26d7de(0xb4),'nDltz':_0x26d7de(0xc5),'JxIfR':_0x26d7de(0xa1),'IIhUh':'.message-content','Zhqzw':_0x26d7de(0xbb),'BXShJ':'I\x27m\x20sorry,\x20I\x20couldn\x27t\x20generate\x20a\x20response.\x20Please\x20try\x20again.','uIilf':function(_0x1abd36,_0x1e17f5){return _0x1abd36(_0x1e17f5);}},_0x1c4108=messageInput['value'][_0x26d7de(0xa8)]();if(!_0x1c4108)return;_0x4bd030[_0x26d7de(0xb7)](toggleChatUI),await conversationManager['addMessage'](_0x1c4108,_0x4bd030['NdSEJ']);const _0x1e5b07=await conversationManager[_0x26d7de(0x9c)]();_0x4bd030[_0x26d7de(0x91)](updateMessagesUI,_0x1e5b07[_0x26d7de(0x94)]),messageInput['value']='',messageInput[_0x26d7de(0xcb)]['height']=_0x4bd030['OZoVa'];try{if(!aiLanguageSession)await initializeLanguageSession();const _0x6d2e2e=[{'role':_0x4bd030[_0x26d7de(0x86)],'content':sessionConfig['systemRole']},..._0x1e5b07['messages']],_0x4a86fb=await aiLanguageSession[_0x26d7de(0xc3)](JSON['stringify'](_0x6d2e2e));let _0x2ead7a='';const _0x54c2bf=document[_0x26d7de(0xa3)](_0x4bd030[_0x26d7de(0xd9)]);_0x54c2bf[_0x26d7de(0x9a)]['add'](_0x4bd030[_0x26d7de(0xc2)],_0x4bd030[_0x26d7de(0xb1)]),_0x54c2bf[_0x26d7de(0xd4)]=_0x26d7de(0x93),messagesContainer[_0x26d7de(0xc7)](_0x54c2bf);const _0x426122=_0x54c2bf[_0x26d7de(0xaf)](_0x4bd030[_0x26d7de(0xc8)]);for await(const _0x3c5433 of _0x4a86fb){_0x2ead7a+=_0x3c5433,_0x426122['textContent']=_0x2ead7a,messagesContainer[_0x26d7de(0xde)]=messagesContainer[_0x26d7de(0x8d)];}await conversationManager[_0x26d7de(0xaa)](_0x2ead7a,_0x4bd030[_0x26d7de(0x9d)]);}catch(_0x326be8){Logger['error']('Response\x20error:',_0x326be8);const _0x1e11fe=_0x4bd030[_0x26d7de(0x8a)];await conversationManager[_0x26d7de(0xaa)](_0x1e11fe,_0x4bd030[_0x26d7de(0x9d)]),_0x4bd030[_0x26d7de(0xda)](updateMessagesUI,conversationManager[_0x26d7de(0x9c)]()[_0x26d7de(0x94)]);}}document[_0x45ab5c(0x99)]('DOMContentLoaded',async()=>{const _0x3af02e=_0x45ab5c,_0x49c0c9={'gEYNw':function(_0x1696d5){return _0x1696d5();},'ukfNB':_0x3af02e(0xb6)};try{if(!aiLanguageSession)await _0x49c0c9['gEYNw'](initializeLanguageSession);!conversationManager['getCurrentConversation']()&&conversationManager[_0x3af02e(0x97)]();}catch(_0x3d5fbe){Logger[_0x3af02e(0xbf)](_0x49c0c9[_0x3af02e(0xa2)],_0x3d5fbe);}});if(sendButton)sendButton[_0x45ab5c(0x99)](_0x45ab5c(0xdd),sendMessage);messageInput&&(messageInput['addEventListener'](_0x45ab5c(0x90),_0x3e30af=>{const _0x2a4a0a=_0x45ab5c,_0xdb7d1={'LTuGV':_0x2a4a0a(0xbc),'yjNPz':function(_0x1270f6){return _0x1270f6();}};_0x3e30af[_0x2a4a0a(0xc6)]===_0xdb7d1[_0x2a4a0a(0xd5)]&&!_0x3e30af[_0x2a4a0a(0x9e)]&&(_0x3e30af[_0x2a4a0a(0xa9)](),_0xdb7d1[_0x2a4a0a(0xb0)](sendMessage));}),messageInput['addEventListener'](_0x45ab5c(0x92),toggleChatUI));newChatButton&&newChatButton[_0x45ab5c(0x99)]('click',()=>{const _0x35bf83=_0x45ab5c,_0x8ea7dc={'KkbLm':_0x35bf83(0x95)},_0x5d04ff=_0x35bf83(0xb3)['split']('|');let _0x341187=0x0;while(!![]){switch(_0x5d04ff[_0x341187++]){case'0':if(chatContainer)chatContainer[_0x35bf83(0xcb)]['display']=_0x8ea7dc[_0x35bf83(0x89)];continue;case'1':if(messagesContainer)messagesContainer[_0x35bf83(0xd4)]='';continue;case'2':if(welcomeScreen)welcomeScreen[_0x35bf83(0xcb)][_0x35bf83(0x8e)]='flex';continue;case'3':if(messageInput)messageInput['value']='';continue;case'4':conversationManager['createNewConversation']();continue;}break;}});settingsButton&&settingsButton[_0x45ab5c(0x99)]('click',()=>{const _0x2797df=_0x45ab5c,_0xed7121={'BaInT':_0x2797df(0xd1)};window[_0x2797df(0xd8)][_0x2797df(0xa7)]=_0xed7121[_0x2797df(0x8c)];});function _0x5cb6(_0x1c1ad4,_0x1f316b){const _0x261185=_0x2611();return _0x5cb6=function(_0x5cb65c,_0x441d0d){_0x5cb65c=_0x5cb65c-0x86;let _0x15e3fa=_0x261185[_0x5cb65c];return _0x15e3fa;},_0x5cb6(_0x1c1ad4,_0x1f316b);}export{conversationManager,sendMessage};