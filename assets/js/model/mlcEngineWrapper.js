
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x2423d3=_0x9824;(function(_0x581413,_0x3142cd){const _0x1c4b26=_0x9824,_0x1e7855=_0x581413();while(!![]){try{const _0x956e6e=parseInt(_0x1c4b26(0xfd))/0x1+-parseInt(_0x1c4b26(0x146))/0x2*(-parseInt(_0x1c4b26(0xa6))/0x3)+-parseInt(_0x1c4b26(0x13f))/0x4+-parseInt(_0x1c4b26(0xe2))/0x5*(-parseInt(_0x1c4b26(0xc7))/0x6)+parseInt(_0x1c4b26(0xf1))/0x7+-parseInt(_0x1c4b26(0x132))/0x8*(-parseInt(_0x1c4b26(0xc4))/0x9)+-parseInt(_0x1c4b26(0x89))/0xa;if(_0x956e6e===_0x3142cd)break;else _0x1e7855['push'](_0x1e7855['shift']());}catch(_0x2d15aa){_0x1e7855['push'](_0x1e7855['shift']());}}}(_0x490a,0xcf233));import{CreateMLCEngine,CreateWebWorkerMLCEngine,modelLibURLPrefix,modelVersion,prebuiltAppConfig}from'https://esm.run/@mlc-ai/web-llm';function _0x490a(){const _0x2c77ee=['lmtse','QapfI','6ayRXsl','DBXOz','https://esm.run/@mlc-ai/web-llm','modelConfig','[MLCEngine]\x20Error\x20clearing\x20model\x20cache:','\x0aDebug\x20info:','VxpyH','[Worker\x20Status]\x20','formatBytes','data','gOMAT','\x0aModels\x20by\x20LRU\x20order\x20(most\x20recently\x20used\x20last):','iQgkO','stream','terminate','position','OvLfz','repo','uOpgO','LRU\x20Queue\x20order:','eUCOV','jvxwt','toFixed','===\x20MLC\x20MODEL\x20CACHE\x20INFORMATION\x20===','EQpYs','Number\x20of\x20models:\x20','cRrzA','Model\x20queue\x20length:\x20','useWorker','getCacheInfo','117mUpwWN','[MLCEngine]ðŸ“¦\x20Creating\x20new\x20Worker','VGJIm','1313526dpWfEt','GaUeY','createObjectURL','yOveM','appConfig','XFQFP','trim','response_format','vrjqq','HcdlA','[MLCEngine]\x20WorkerInitializationTime','xqmwq','MrTXf','odaeY','[MLCEngine]\x20MLC\x20Engine\x20not\x20initialized.','init','_modelLoaded','ðŸ“¬\x20[Worker\x20Status]\x20','[MLCEngine]\x20Worker\x20message\x20error:','zvrhx','ckXwO','modelLibrary','mHvby','TvSke','with\x20quantization:','debug','start','10wTvzPZ','isModelCached','HbXhS','FJEHp','webllm/model','usedPercent','auto','RYwch','kbbUj','text/javascript','push','href','quantization','removeModelFromCache','iGqSy','4605888VXCrJa','printCacheInfo','UKGNk','clearModelCache','OAaBs','Uupya','GmnkB','Fswkk','rbwCQ','user','module','create','1120064JUKXUx','â°\x20[MLCEngine]\x20Worker\x20initialization\x20timeout','system','LvsWz','[MLCEngine:loadModule]\x20Using\x20module\x20URL:','AsqBA','\x20of\x20','models','dispatchProgressEvent','content','embeddings','[MLCEngine]\x20Model\x20identifier\x20is\x20required','âš ï¸\x20[MLCEngine]\x20Model\x20is\x20already\x20loading\x20or\x20loaded.','type','delete','ready','stringify','startsWith','modelSizesLength','totalSize','json_object','SvhKV','Bytes','tinyllama-1.1b-chat-v0.4','_mlcLoadModelOptions','[MLCEngine]\x20Loading\x20model:','clearSpecificModel','time','onerror','MxQEr','NhooN','getInstance','error','YfBfB','yXwgy','[MLCEngine]\x20Worker\x20not\x20initialized','gemma-2b-it-q4f32_1','system_prompt','{quantization}','includes','pow','embed','IroCf','json_schema','KJgKk','gdsdB','JmIOQ','some','all','Jadoy','filter','ðŸŽ‰[MLCEngine]:\x20Model\x20loaded\x20successfully!','PFweZ','469768jKJGYG','message','eGKDL','defaultQuantization','chat','ZDBBb','friRl','ISBhT','url','completions','onmessage','[MLCEngine]\x20Load\x20error:','lbfyj','1057456UFkdsg','loadModel','âŒ\x20[MLCEngine]\x20Worker\x20Creation\x20error:','uqgAk','webllm/wasm','bUIkx','@mlc-ai/web-llm','659902cvUwqg','stream_options','worker','modelQueue','JITxh','dispatchStatusEvent','touchModel','\x0a\x20\x20//\x20Ensure\x20we\x27re\x20in\x20a\x20worker\x20context\x0a\x20\x20if\x20(typeof\x20self\x20===\x20\x27undefined\x27)\x20{\x0a\x20\x20\x20\x20throw\x20new\x20Error(\x27This\x20script\x20must\x20be\x20run\x20in\x20a\x20Web\x20Worker\x27);\x0a\x20\x20}\x0a\x0a\x20\x20console.log(\x27[Worker]\x20Starting\x20initialization...\x27);\x0a\x0a\x20\x20//\x20Wrap\x20the\x20entire\x20worker\x20code\x20in\x20a\x20try-catch\x0a\x20\x20try\x20{\x0a\x20\x20\x20\x20//\x20Wait\x20for\x20the\x20main\x20thread\x20to\x20send\x20us\x20the\x20module\x20URL\x0a\x20\x20\x20\x20self.onmessage\x20=\x20async\x20(msg)\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20if\x20(msg.data.type\x20===\x20\x27init\x27)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20console.log(\x27ðŸš€\x20[Worker]\x20Received\x20init\x20message\x20with\x20moduleURL:\x20\x27\x20+\x20msg.data.moduleURL);\x0a\x20\x20\x20\x20\x20\x20\x20\x20const\x20moduleURL\x20=\x20msg.data.moduleURL;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20module\x20=\x20await\x20import(moduleURL);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20console.log(\x27[Worker]\x20Module\x20loaded\x20successfully\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20handler\x20=\x20new\x20module.WebWorkerMLCEngineHandler();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20Replace\x20onmessage\x20handler\x20with\x20the\x20actual\x20handler\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20self.onmessage\x20=\x20(msg)\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20console.log(\x27ðŸš€\x20[Worker]\x20Received\x20message:\x27,\x20msg.data);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20handler.onmessage(msg);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20console.error(\x27[Worker]\x20Handler\x20error:\x27,\x20error);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20self.postMessage({\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20type:\x20\x27error\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20error:\x20error\x20instanceof\x20Error\x20?\x20error.message\x20:\x20String(error)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20};\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20self.postMessage({\x20type:\x20\x27ready\x27\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20console.log(\x27ðŸš€\x20[Worker]\x20Handler\x20initialized\x20successfully\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20console.error(\x27[Worker]\x20Failed\x20to\x20load\x20module:\x27,\x20error);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20self.postMessage({\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20type:\x20\x27error\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20error:\x20\x27Failed\x20to\x20initialize\x20worker:\x20\x27\x20+\x20(error\x20instanceof\x20Error\x20?\x20error.message\x20:\x20String(error))\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20};\x0a\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20console.error(\x27[Worker]\x20Initialization\x20error:\x27,\x20error);\x0a\x20\x20\x20\x20self.postMessage({\x0a\x20\x20\x20\x20\x20\x20type:\x20\x27error\x27,\x0a\x20\x20\x20\x20\x20\x20error:\x20\x27Worker\x20initialization\x20failed:\x20\x27\x20+\x20(error\x20instanceof\x20Error\x20?\x20error.message\x20:\x20String(error))\x0a\x20\x20\x20\x20});\x0a\x20\x20}\x0a\x0a\x20\x20self.onerror\x20=\x20(error)\x20=>\x20{\x0a\x20\x20\x20\x20console.error(\x27[Worker]\x20Global\x20error:\x27,\x20error);\x0a\x20\x20\x20\x20self.postMessage({\x0a\x20\x20\x20\x20\x20\x20type:\x20\x27error\x27,\x0a\x20\x20\x20\x20\x20\x20error:\x20error\x20instanceof\x20ErrorEvent\x20?\x20error.message\x20:\x20\x27Unknown\x20worker\x20error\x27\x0a\x20\x20\x20\x20});\x0a\x20\x20};\x0a\x0a\x20\x20self.onmessageerror\x20=\x20(error)\x20=>\x20{\x0a\x20\x20\x20\x20console.error(\x27[Worker]\x20Message\x20error:\x27,\x20error);\x0a\x20\x20\x20\x20self.postMessage({\x0a\x20\x20\x20\x20\x20\x20type:\x20\x27error\x27,\x0a\x20\x20\x20\x20\x20\x20error:\x20\x27Message\x20error:\x20\x27\x20+\x20(error\x20instanceof\x20Error\x20?\x20error.message\x20:\x20String(error))\x0a\x20\x20\x20\x20});\x0a\x20\x20};\x0a\x20\x20\x0a\x20\x20//\x20Signal\x20that\x20the\x20worker\x20is\x20ready\x0a\x20\x20console.log(\x27âœ…\x20\x20[Worker]\x20Worker\x20is\x20READY\x20-\x20Basic\x20initialization\x20complete\x27);\x0a\x20\x20//\x20self.postMessage({\x20status:\x20\x22ready\x22,\x20message:\x20\x22[Worker]\x20Worker\x20is\x20ready.\x20Basic\x20initialization\x20complete\x22\x20});\x0a','kYSQE','Total\x20cache\x20size:\x20','[MLCEngine:loadModule]\x20Using\x20module\x20name\x20as\x20fallback\x20for\x20CJS\x20environment','Model\x20sizes\x20map\x20length:\x20','postMessage','_loadingInProgress','replace','choices','[MLCEngine]\x20Loading\x20model:\x20','25263660OSvofn','modelQueueLength','ðŸ”\x20MLCEngineWrapper\x20Library:','ePtXt','https://huggingface.co/','maxSize','modelPath','cacheManager','fcmRR','floor','You\x20must\x20respond\x20with\x20valid\x20JSON\x20that\x20matches\x20the\x20provided\x20schema.\x20Do\x20not\x20include\x20any\x20explanations\x20or\x20additional\x20text.\x0a\x0a','revokeObjectURL','info','log','size','forEach','KvikT','mlc-worker','mlcEngine','modelIdentifier','[MLCEngine]\x20Worker\x20error:\x20','ðŸŒ\x20MLCEngineWrapper\x20Worker\x20Script\x20Loaded','0\x20Bytes','map','success','dispose','hYpSd'];_0x490a=function(){return _0x2c77ee;};return _0x490a();}import*as _0x40c207 from'https://esm.run/@mlc-ai/web-llm';import{MLCModelCacheManager}from'./mlcModelCacheManager.js';function _0x9824(_0x2e5f4e,_0x3ca535){const _0x490ab9=_0x490a();return _0x9824=function(_0x982453,_0x2675de){_0x982453=_0x982453-0x87;let _0x5bf77b=_0x490ab9[_0x982453];return _0x5bf77b;},_0x9824(_0x2e5f4e,_0x3ca535);}console[_0x2423d3(0x96)](_0x2423d3(0x9e)),console['log'](_0x2423d3(0x8b));const defaultModelName=_0x2423d3(0x114);export class MLCEngineWrapper{constructor(_0xf644f4,_0x3b5aba={}){const _0x2c49ab=_0x2423d3;this[_0x2c49ab(0x9b)]=null,this['appConfig']=null,this[_0x2c49ab(0xa9)]=_0xf644f4,this[_0x2c49ab(0x148)]=null,this[_0x2c49ab(0x90)]=MLCModelCacheManager[_0x2c49ab(0x11c)](),this[_0x2c49ab(0x153)]=![],this['_modelLoaded']=![],this[_0x2c49ab(0x115)]=_0x3b5aba;}async[_0x2423d3(0x140)](_0x425daf,_0x5a199a={}){const _0x3961ff=_0x2423d3,_0x41813e={'YfBfB':_0x3961ff(0x141),'EQpYs':_0x3961ff(0xd9),'gOMAT':_0x3961ff(0xfe),'yOveM':_0x3961ff(0x10c),'NYTub':function(_0x4dedf1,_0x1a0395){return _0x4dedf1===_0x1a0395;},'friRl':'error','iQgkO':function(_0x3c2e31,_0x46944c){return _0x3c2e31(_0x46944c);},'MxQEr':_0x3961ff(0x120),'NhooN':_0x3961ff(0xa8),'Uupya':_0x3961ff(0x101),'ePtXt':_0x3961ff(0x145),'TvSke':_0x3961ff(0x150),'FJEHp':_0x3961ff(0xe1),'XFQFP':_0x3961ff(0xd6),'OvLfz':_0x3961ff(0x95),'gdsdB':_0x3961ff(0x109),'zvrhx':'loading','kbbUj':_0x3961ff(0xe8),'SvhKV':_0x3961ff(0xeb),'eGKDL':_0x3961ff(0xc5),'DBXOz':_0x3961ff(0xfb),'AsqBA':_0x3961ff(0x9a),'yXwgy':_0x3961ff(0x123),'ISBhT':_0x3961ff(0x121),'kYSQE':_0x3961ff(0x116),'QapfI':_0x3961ff(0xdf),'Fswkk':'with\x20worker:','jvxwt':'http','xoksq':function(_0x412a0b,_0x3af5ba){return _0x412a0b+_0x3af5ba;},'iXSNd':function(_0x54665f,_0x5b12f9,_0x1d43ad){return _0x54665f(_0x5b12f9,_0x1d43ad);},'GDUDM':_0x3961ff(0xa1),'fcmRR':_0x3961ff(0x130),'vXqZD':function(_0x561ecb,_0x382f64){return _0x561ecb instanceof _0x382f64;},'bUIkx':function(_0x308af4,_0x3426b5){return _0x308af4(_0x3426b5);},'OAaBs':_0x3961ff(0x13d)};if(this[_0x3961ff(0x153)]||this[_0x3961ff(0xd7)]){this[_0x3961ff(0x14b)](_0x41813e[_0x3961ff(0xb6)],_0x41813e[_0x3961ff(0x12a)]);return;}this[_0x3961ff(0x153)]=!![],this['dispatchStatusEvent'](_0x41813e[_0x3961ff(0xda)],_0x3961ff(0x88)+this['modelConfig']),this[_0x3961ff(0xd7)]=![];const {quantized:quantized=!![],device:device=_0x41813e[_0x3961ff(0xea)],modelPath:modelPath=null,contextWindowSize:contextWindowSize=0x1000,systemPrompt:systemPrompt='',temperature:temperature=0.7,maxGenLength:maxGenLength=0x400,..._0x1926c1}=_0x5a199a;this['modelConfig']=_0x425daf;const _0x42fd05={'model':_0x425daf[_0x3961ff(0x8f)]||modelPath};try{this[_0x3961ff(0x148)]&&(this[_0x3961ff(0x148)][_0x3961ff(0xb4)](),this[_0x3961ff(0x148)]=null);if(_0x5a199a[_0x3961ff(0xc2)]){const _0x376e34=new Blob([workerCode],{'type':_0x41813e[_0x3961ff(0x112)]}),_0x40c195=URL[_0x3961ff(0xc9)](_0x376e34);console[_0x3961ff(0x96)](_0x41813e[_0x3961ff(0x134)]),console[_0x3961ff(0x118)](_0x3961ff(0xd1)),this['worker']=new Worker(_0x40c195,{'type':_0x41813e[_0x3961ff(0xa7)],'name':_0x41813e[_0x3961ff(0x102)]}),URL[_0x3961ff(0x94)](_0x40c195),this[_0x3961ff(0x148)][_0x3961ff(0x119)]=_0x2b344a=>{const _0x490315=_0x3961ff;console[_0x490315(0x11d)](_0x41813e[_0x490315(0x11e)],_0x2b344a),this[_0x490315(0x153)]=![];throw new Error(_0x490315(0x9d)+_0x2b344a[_0x490315(0x133)]);},this[_0x3961ff(0x148)]['onmessageerror']=_0x4777d2=>{const _0x330b77=_0x3961ff;console[_0x330b77(0x11d)](_0x41813e[_0x330b77(0xbe)],_0x4777d2);},await new Promise((_0x40c6d1,_0xcdf35b)=>{const _0x4b329c=_0x3961ff,_0x42187e={'ckXwO':function(_0x3b389d,_0x444a8a){return _0x3b389d===_0x444a8a;},'KvikT':_0x41813e[_0x4b329c(0xca)],'uOpgO':function(_0x4aba4e,_0x4f5bb5){return _0x41813e['NYTub'](_0x4aba4e,_0x4f5bb5);},'JITxh':_0x41813e[_0x4b329c(0x138)],'JmIOQ':function(_0x44f84a,_0x435c1f){const _0x184af5=_0x4b329c;return _0x41813e[_0x184af5(0xb2)](_0x44f84a,_0x435c1f);}};if(!this[_0x4b329c(0x148)])return _0x41813e['iQgkO'](_0xcdf35b,new Error(_0x41813e[_0x4b329c(0x11a)]));const _0x21df50=setTimeout(()=>{const _0x458cc3=_0x4b329c;_0xcdf35b(new Error(_0x41813e[_0x458cc3(0xb0)]));},0x2710);this['worker'][_0x4b329c(0x13c)]=_0x8cbc07=>{const _0x3334e5=_0x4b329c;if(_0x42187e[_0x3334e5(0xdb)](_0x8cbc07['data'][_0x3334e5(0x10a)],_0x42187e[_0x3334e5(0x99)]))clearTimeout(_0x21df50),_0x40c6d1();else _0x42187e[_0x3334e5(0xb8)](_0x8cbc07[_0x3334e5(0xaf)][_0x3334e5(0x10a)],_0x42187e[_0x3334e5(0x14a)])&&(_0x42187e['JmIOQ'](clearTimeout,_0x21df50),_0x42187e[_0x3334e5(0x12b)](_0xcdf35b,new Error(_0x8cbc07[_0x3334e5(0xaf)][_0x3334e5(0x11d)])));};let _0x7858bc;try{_0x7858bc=new URL(_0x41813e[_0x4b329c(0x11b)],import.meta[_0x4b329c(0x13a)])[_0x4b329c(0xed)],console[_0x4b329c(0x96)](_0x41813e[_0x4b329c(0xf6)],_0x7858bc);}catch(_0x43044b){_0x7858bc=_0x41813e[_0x4b329c(0x8c)],console[_0x4b329c(0x96)](_0x41813e[_0x4b329c(0xde)]);}this[_0x4b329c(0x105)](_0x41813e[_0x4b329c(0xe5)],0x0),this[_0x4b329c(0x148)][_0x4b329c(0x152)]({'type':_0x41813e[_0x4b329c(0xcc)],'moduleURL':_0x7858bc});});}const _0x4c1386=_0x5a199a[_0x3961ff(0xee)]||_0x425daf[_0x3961ff(0x135)],_0x25905c=_0x425daf[_0x3961ff(0xb7)]?_0x425daf[_0x3961ff(0xb7)][_0x3961ff(0x154)](_0x41813e[_0x3961ff(0x11f)],_0x4c1386)['split']('/')[0x1]:_0x41813e[_0x3961ff(0x139)];return this[_0x3961ff(0x90)][_0x3961ff(0x14c)](_0x25905c),console[_0x3961ff(0x96)](_0x41813e[_0x3961ff(0x14e)],_0x25905c,_0x41813e[_0x3961ff(0xa5)],_0x4c1386,_0x41813e[_0x3961ff(0xf8)],!!this[_0x3961ff(0x148)]),_0x425daf[_0x3961ff(0xdc)]?this[_0x3961ff(0xcb)]={'model_list':[{'model':_0x3961ff(0x8d)+_0x425daf[_0x3961ff(0xb7)][_0x3961ff(0x154)](_0x41813e[_0x3961ff(0x11f)],_0x4c1386),'model_id':_0x25905c,'model_lib':_0x425daf?.[_0x3961ff(0xdc)]?.[_0x3961ff(0x10e)](_0x41813e[_0x3961ff(0xbb)])?_0x425daf[_0x3961ff(0xdc)]:_0x41813e['xoksq'](_0x41813e['xoksq'](_0x41813e['xoksq'](modelLibURLPrefix,'/'),modelVersion)+'/',_0x425daf[_0x3961ff(0xdc)])}]}:this[_0x3961ff(0xcb)]=prebuiltAppConfig,this[_0x3961ff(0x148)]?this['mlcEngine']=await CreateWebWorkerMLCEngine(this[_0x3961ff(0x148)],_0x25905c,{'initProgressCallback':_0x2c3037=>{_0x5a199a['onProgress']?.(_0x2c3037);},'appConfig':this[_0x3961ff(0xcb)],..._0x5a199a}):this['mlcEngine']=await _0x41813e['iXSNd'](CreateMLCEngine,_0x25905c,{'initProgressCallback':_0x5a199a['onProgress'],'appConfig':this[_0x3961ff(0xcb)],..._0x5a199a}),this[_0x3961ff(0xd7)]=!![],this[_0x3961ff(0x153)]=![],this[_0x3961ff(0x14b)](_0x41813e['GDUDM'],_0x41813e[_0x3961ff(0x91)]),!![];}catch(_0x2c3f4f){this[_0x3961ff(0x148)]&&(this[_0x3961ff(0x148)][_0x3961ff(0xb4)](),this[_0x3961ff(0x148)]=null);const _0x3282d4=_0x41813e['vXqZD'](_0x2c3f4f,Error)?_0x2c3f4f['message']:_0x41813e[_0x3961ff(0x144)](String,_0x2c3f4f);return this['_modelLoaded']=![],this[_0x3961ff(0x153)]=![],this['dispatchStatusEvent'](_0x41813e[_0x3961ff(0x138)],_0x3282d4),console[_0x3961ff(0x11d)](_0x41813e[_0x3961ff(0xf5)],_0x2c3f4f),![];}}[_0x2423d3(0x14b)](_0x25ceeb,_0x5e7c8e){const _0x2d9c90=_0x2423d3;console[_0x2d9c90(0x96)](_0x2d9c90(0xd8)+_0x25ceeb+':\x20'+_0x5e7c8e),self[_0x2d9c90(0x152)]({'status':_0x25ceeb,'message':_0x5e7c8e});}['dispatchProgressEvent'](_0x49acd5,_0x7a744c){const _0x14015d=_0x2423d3;console[_0x14015d(0x96)](_0x14015d(0xad)+_0x49acd5+':\x20'+_0x7a744c+'%'),self['postMessage']({'status':'progress','stage':_0x49acd5,'progress':_0x7a744c});}['isModelLoaded'](){const _0x1aad84=_0x2423d3;return this[_0x1aad84(0xd7)]===!![];}['isModelCached'](){const _0xe090a8=_0x2423d3,_0x15d63d={'VxpyH':function(_0x371eef,_0x3aeb83){return _0x371eef===_0x3aeb83;}};return _0x15d63d[_0xe090a8(0xac)](this[_0xe090a8(0x90)][_0xe090a8(0xe3)](this[_0xe090a8(0x9c)]),!![]);}async['generateText'](_0x1397b1,_0x2b5dad={}){const _0x1e0502=_0x2423d3,_0x1b092d={'IroCf':_0x1e0502(0xd5),'uqgAk':_0x1e0502(0x93),'eUCOV':_0x1e0502(0xff),'iGqSy':'user','vrjqq':function(_0x371407,_0x5469e8){return _0x371407===_0x5469e8;},'rbwCQ':'string','odaeY':_0x1e0502(0x111)};if(!this[_0x1e0502(0x9b)])throw new Error(_0x1b092d[_0x1e0502(0x127)]);let _0x4ec95a=[],_0x15d792='';_0x2b5dad[_0x1e0502(0x128)]&&(_0x15d792+=_0x1b092d[_0x1e0502(0x142)]);_0x2b5dad[_0x1e0502(0x122)]&&(_0x15d792+=_0x2b5dad[_0x1e0502(0x122)]);_0x15d792&&_0x4ec95a[_0x1e0502(0xec)]({'role':_0x1b092d[_0x1e0502(0xba)],'content':_0x15d792[_0x1e0502(0xcd)]()});Array['isArray'](_0x1397b1)?_0x4ec95a[_0x1e0502(0xec)](..._0x1397b1):_0x4ec95a[_0x1e0502(0xec)]({'role':_0x1b092d[_0x1e0502(0xf0)],'content':_0x1397b1});const _0x1d43ed={'max_tokens':0x12c,'temperature':0.6,'top_p':0.95,'frequency_penalty':0.5,'presence_penalty':0.5};if(_0x2b5dad['json_schema']){const _0x326b2d=_0x1b092d[_0x1e0502(0xcf)](typeof _0x2b5dad[_0x1e0502(0x128)],_0x1b092d[_0x1e0502(0xf9)])?_0x2b5dad['json_schema']:JSON[_0x1e0502(0x10d)](_0x2b5dad[_0x1e0502(0x128)]);_0x2b5dad[_0x1e0502(0xce)]={'type':_0x1b092d[_0x1e0502(0xd4)],'schema':_0x326b2d};}const _0x105c58={..._0x1d43ed,..._0x2b5dad,'messages':_0x4ec95a};if(_0x2b5dad[_0x1e0502(0xb3)])return _0x105c58[_0x1e0502(0x147)]={'include_usage':!![]},this[_0x1e0502(0x9b)]['chat'][_0x1e0502(0x13b)][_0x1e0502(0xfc)](_0x105c58);const _0x3dd39f=await this[_0x1e0502(0x9b)]['chat'][_0x1e0502(0x13b)][_0x1e0502(0xfc)](_0x105c58);return _0x3dd39f[_0x1e0502(0x87)][0x0][_0x1e0502(0x133)][_0x1e0502(0x106)];}async['generateResponseStream'](_0x589225,_0x241c9a={}){const _0x3d104b=_0x2423d3,_0x2abafd={'PFweZ':'[MLCEngine]\x20MLC\x20Engine\x20not\x20initialized.','mHvby':'[MLCEngine]\x20generateResponseStream\x20input:\x20','ZDBBb':_0x3d104b(0x93),'grbyu':'system','hYpSd':_0x3d104b(0xfa),'SFHHC':function(_0x80ac47,_0x14503d){return _0x80ac47===_0x14503d;},'tgTJv':'string','LvsWz':_0x3d104b(0x111)};if(!this[_0x3d104b(0x9b)])throw new Error(_0x2abafd[_0x3d104b(0x131)]);console[_0x3d104b(0x96)](_0x2abafd[_0x3d104b(0xdd)],_0x589225,_0x241c9a);let _0x4544ab=[],_0x5747a8='';_0x241c9a[_0x3d104b(0x128)]&&(_0x5747a8+=_0x2abafd[_0x3d104b(0x137)]);_0x241c9a[_0x3d104b(0x122)]&&(_0x5747a8+=_0x241c9a[_0x3d104b(0x122)]);_0x5747a8&&_0x4544ab['push']({'role':_0x2abafd['grbyu'],'content':_0x5747a8[_0x3d104b(0xcd)]()});Array['isArray'](_0x589225)?_0x4544ab[_0x3d104b(0xec)](..._0x589225):_0x4544ab[_0x3d104b(0xec)]({'role':_0x2abafd[_0x3d104b(0xa3)],'content':_0x589225});const _0x43016d={'max_tokens':0x12c,'temperature':0.6,'top_p':0.95,'frequency_penalty':0.5,'presence_penalty':0.5,'stream':!![]};if(_0x241c9a[_0x3d104b(0x128)]){const _0x54f13e=_0x2abafd['SFHHC'](typeof _0x241c9a[_0x3d104b(0x128)],_0x2abafd['tgTJv'])?_0x241c9a[_0x3d104b(0x128)]:JSON[_0x3d104b(0x10d)](_0x241c9a[_0x3d104b(0x128)]);_0x241c9a[_0x3d104b(0xce)]={'type':_0x2abafd[_0x3d104b(0x100)],'schema':_0x54f13e};}const _0x1b8b83={..._0x43016d,..._0x241c9a,'messages':_0x4544ab};return _0x1b8b83[_0x3d104b(0xb3)]=!![],_0x1b8b83[_0x3d104b(0x147)]={'include_usage':!![]},this[_0x3d104b(0x9b)][_0x3d104b(0x136)][_0x3d104b(0x13b)]['create'](_0x1b8b83);}async[_0x2423d3(0x126)](_0x4d63b3,_0x243f4e={}){const _0x332d7d=_0x2423d3,_0x38a51e={'VGJIm':_0x332d7d(0xd5)};if(!this[_0x332d7d(0x9b)])throw new Error(_0x38a51e[_0x332d7d(0xc6)]);const _0x567005=await this[_0x332d7d(0x9b)][_0x332d7d(0x107)][_0x332d7d(0xfc)]({'input':_0x4d63b3,..._0x243f4e});return _0x567005['data'][0x0]['embedding'];}[_0x2423d3(0xa2)](){const _0x401fd7=_0x2423d3;this[_0x401fd7(0x148)]&&(this[_0x401fd7(0x148)][_0x401fd7(0xb4)](),this['worker']=null),this[_0x401fd7(0x9b)]=null;}async[_0x2423d3(0xf4)](){const _0x311ce0=_0x2423d3,_0x4eb250={'lmtse':'webllm/config','blovT':_0x311ce0(0xe6),'GaUeY':'[MLCEngine]\x20Successfully\x20cleared\x20MLC\x20model\x20cache','KJgKk':function(_0x5e99ba){return _0x5e99ba();},'fHrzp':_0x311ce0(0xaa)};return new Promise(async(_0xc4cb7f,_0x516113)=>{const _0x141126=_0x311ce0;try{const _0x5dcd3c=[_0x4eb250[_0x141126(0xa4)],_0x141126(0x143),_0x4eb250['blovT']],_0x4758a5=await caches['keys'](),_0x3f22ef=_0x4758a5[_0x141126(0x12f)](_0x13e9c9=>_0x5dcd3c[_0x141126(0x12c)](_0x7c6944=>_0x13e9c9[_0x141126(0x124)](_0x7c6944)));await Promise[_0x141126(0x12d)](_0x3f22ef[_0x141126(0xa0)](_0x3c538d=>caches[_0x141126(0x10b)](_0x3c538d))),console['log'](_0x4eb250[_0x141126(0xc8)]),_0x4eb250[_0x141126(0x129)](_0xc4cb7f);}catch(_0x399089){console[_0x141126(0x11d)](_0x4eb250['fHrzp'],_0x399089),_0x516113(_0x399089);}});}async[_0x2423d3(0x117)](_0x2dff56){const _0x262f72=_0x2423d3,_0x5dd8e1={'lbfyj':_0x262f72(0x108)};if(!_0x2dff56)throw new Error(_0x5dd8e1[_0x262f72(0x13e)]);return this['cacheManager'][_0x262f72(0xef)](_0x2dff56);}async[_0x2423d3(0xc3)](){const _0x12185a=_0x2423d3;return this[_0x12185a(0x90)][_0x12185a(0xc3)]();}async[_0x2423d3(0xf2)](){const _0x58c3c5=_0x2423d3,_0x44c925={'Jadoy':function(_0x19c5ec,_0x300c1a){return _0x19c5ec+_0x300c1a;},'RYwch':_0x58c3c5(0xbd),'MrTXf':_0x58c3c5(0xab),'HcdlA':_0x58c3c5(0xb9)},_0x1914c0=await this[_0x58c3c5(0x90)][_0x58c3c5(0xc3)]();console['log'](_0x44c925[_0x58c3c5(0xe9)]),console[_0x58c3c5(0x96)](_0x58c3c5(0x14f)+this[_0x58c3c5(0xae)](_0x1914c0[_0x58c3c5(0x110)])+_0x58c3c5(0x103)+this[_0x58c3c5(0xae)](_0x1914c0[_0x58c3c5(0x8e)])+'\x20('+_0x1914c0[_0x58c3c5(0xe7)][_0x58c3c5(0xbc)](0x2)+'%)'),console[_0x58c3c5(0x96)](_0x58c3c5(0xbf)+_0x1914c0['models']['length']),console['log'](_0x58c3c5(0xb1));const _0x2d68df=[..._0x1914c0[_0x58c3c5(0x104)]]['sort']((_0x1881fe,_0x3438fc)=>_0x1881fe[_0x58c3c5(0xb5)]-_0x3438fc[_0x58c3c5(0xb5)]);_0x2d68df[_0x58c3c5(0x98)]((_0x161064,_0x39ae92)=>{const _0x1b6abc=_0x58c3c5;console['log'](_0x44c925[_0x1b6abc(0x12e)](_0x39ae92,0x1)+'.\x20'+_0x161064['id']+':\x20'+this[_0x1b6abc(0xae)](_0x161064[_0x1b6abc(0x97)]));}),console['log'](_0x44c925[_0x58c3c5(0xd3)]),console[_0x58c3c5(0x96)](_0x58c3c5(0xc1)+_0x1914c0[_0x58c3c5(0xe0)][_0x58c3c5(0x8a)]),console[_0x58c3c5(0x96)](_0x58c3c5(0x151)+_0x1914c0['debug'][_0x58c3c5(0x10f)]),console['log'](_0x44c925[_0x58c3c5(0xd0)],_0x1914c0['debug'][_0x58c3c5(0x149)]);}[_0x2423d3(0xae)](_0x5606e1){const _0x4bdbf=_0x2423d3,_0x923caa={'HbXhS':_0x4bdbf(0x113),'GmnkB':function(_0x3be801,_0x798f5a){return _0x3be801/_0x798f5a;},'cRrzA':function(_0x4d04d0,_0x73260e){return _0x4d04d0+_0x73260e;},'xqmwq':function(_0x584aca,_0x12d41a){return _0x584aca(_0x12d41a);},'UKGNk':function(_0x3f9191,_0x315ea9){return _0x3f9191/_0x315ea9;}};if(_0x5606e1===0x0)return _0x4bdbf(0x9f);const _0x3e789d=0x400,_0xfb9e10=[_0x923caa[_0x4bdbf(0xe4)],'KB','MB','GB','TB'],_0x28691c=Math[_0x4bdbf(0x92)](_0x923caa[_0x4bdbf(0xf7)](Math[_0x4bdbf(0x96)](_0x5606e1),Math['log'](_0x3e789d)));return _0x923caa[_0x4bdbf(0xc0)](_0x923caa[_0x4bdbf(0xd2)](parseFloat,_0x923caa[_0x4bdbf(0xf3)](_0x5606e1,Math[_0x4bdbf(0x125)](_0x3e789d,_0x28691c))['toFixed'](0x2)),'\x20')+_0xfb9e10[_0x28691c];}}const workerCode=_0x2423d3(0x14d);