
/*!
Copyright © 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x144b0e=_0x3c3b;(function(_0x444765,_0x75f3b2){const _0x25202f=_0x3c3b,_0xe43467=_0x444765();while(!![]){try{const _0x4d5750=parseInt(_0x25202f(0x1df))/0x1*(-parseInt(_0x25202f(0x142))/0x2)+parseInt(_0x25202f(0x1d8))/0x3+-parseInt(_0x25202f(0x167))/0x4+parseInt(_0x25202f(0x13c))/0x5*(-parseInt(_0x25202f(0x16f))/0x6)+parseInt(_0x25202f(0x164))/0x7+-parseInt(_0x25202f(0x1b4))/0x8*(parseInt(_0x25202f(0x1a5))/0x9)+parseInt(_0x25202f(0x144))/0xa*(parseInt(_0x25202f(0x157))/0xb);if(_0x4d5750===_0x75f3b2)break;else _0xe43467['push'](_0xe43467['shift']());}catch(_0x1f080e){_0xe43467['push'](_0xe43467['shift']());}}}(_0x5542,0x5319b));import{CreateMLCEngine,CreateWebWorkerMLCEngine,modelLibURLPrefix,modelVersion,prebuiltAppConfig}from'https://esm.run/@mlc-ai/web-llm';import*as _0x2a2eb4 from'https://esm.run/@mlc-ai/web-llm';import{MLCModelCacheManager}from'./mlcModelCacheManager.js';console[_0x144b0e(0x1a8)]('🌐\x20MLCEngineWrapper\x20Worker\x20Script\x20Loaded'),console['log'](_0x144b0e(0x152));const defaultModelName=_0x144b0e(0x191);export class MLCEngineWrapper{constructor(_0x432b05,_0x138916={}){const _0x34e106=_0x144b0e;this[_0x34e106(0x1c5)]=null,this['appConfig']=null,this[_0x34e106(0x1de)]=_0x432b05,this[_0x34e106(0x1b3)]=null,this[_0x34e106(0x17c)]=MLCModelCacheManager[_0x34e106(0x1c7)](),this[_0x34e106(0x1aa)]=![],this['_modelLoaded']=![],this[_0x34e106(0x168)]=_0x138916;}async[_0x144b0e(0x18b)](_0x48cabc,_0x436aa2={}){const _0x4094ab=_0x144b0e,_0x10833f={'kRusE':_0x4094ab(0x1ae),'rdMaj':_0x4094ab(0x17a),'SxTyl':function(_0x2f6eb0,_0x5ba757){return _0x2f6eb0(_0x5ba757);},'lxmBf':_0x4094ab(0x138),'ZWIWO':function(_0x2e960c,_0x560d4e){return _0x2e960c===_0x560d4e;},'lUnEO':function(_0x2a189a){return _0x2a189a();},'KEWlB':function(_0x476aab,_0x3a0646){return _0x476aab===_0x3a0646;},'OuAfL':'error','lhTeu':function(_0x41c6e3,_0x413002){return _0x41c6e3(_0x413002);},'ukJes':function(_0x10f23f,_0x3533d4){return _0x10f23f(_0x3533d4);},'Wjcoi':function(_0x47feb4,_0x507a32,_0x1b06f8){return _0x47feb4(_0x507a32,_0x1b06f8);},'VZvPm':'https://esm.run/@mlc-ai/web-llm','oCpCZ':'[MLCEngine:loadModule]\x20Using\x20module\x20URL:','gFqDP':'@mlc-ai/web-llm','nJTjr':'[MLCEngine:loadModule]\x20Using\x20module\x20name\x20as\x20fallback\x20for\x20CJS\x20environment','gKfsl':_0x4094ab(0x198),'DCELi':_0x4094ab(0x1ab),'wVaor':_0x4094ab(0x165),'Mtpaw':_0x4094ab(0x1d6),'hujrU':_0x4094ab(0x183),'BEmEu':'text/javascript','ADxbQ':'[MLCEngine]📦\x20Creating\x20new\x20Worker','dbhjs':'[MLCEngine]\x20WorkerInitializationTime','suMvh':_0x4094ab(0x1b6),'LvffF':_0x4094ab(0x130),'rzdHq':_0x4094ab(0x140),'gBneM':'gemma-2b-it-q4f32_1','OkKnu':_0x4094ab(0x184),'LoffN':_0x4094ab(0x16a),'sLqce':_0x4094ab(0x1e0),'tRibw':'https://huggingface.co/','AVxWz':function(_0xc93e19,_0x3b5056){return _0xc93e19+_0x3b5056;},'xnJXZ':function(_0x4ff667,_0xd4c7fd,_0x4eb4c6,_0x23c9ad){return _0x4ff667(_0xd4c7fd,_0x4eb4c6,_0x23c9ad);},'xTqNa':function(_0x26077d,_0x1a6a5b,_0x478a2c){return _0x26077d(_0x1a6a5b,_0x478a2c);},'EnISr':_0x4094ab(0x1d1),'HZYVY':_0x4094ab(0x196),'HaaRC':function(_0x3e59da,_0x398a65){return _0x3e59da instanceof _0x398a65;},'Yovel':function(_0xa53d7f,_0x25672e){return _0xa53d7f(_0x25672e);},'mbYlx':_0x4094ab(0x16e)};if(this[_0x4094ab(0x1aa)]||this['_modelLoaded']){this['dispatchStatusEvent'](_0x10833f[_0x4094ab(0x139)],_0x10833f[_0x4094ab(0x1a4)]);return;}this['_loadingInProgress']=!![],this[_0x4094ab(0x181)](_0x10833f[_0x4094ab(0x1be)],'[MLCEngine]\x20Loading\x20model:\x20'+this[_0x4094ab(0x1de)]),this['_modelLoaded']=![];const {quantized:quantized=!![],device:device=_0x10833f[_0x4094ab(0x1c2)],modelPath:modelPath=null,contextWindowSize:contextWindowSize=0x1000,systemPrompt:systemPrompt='',temperature:temperature=0.7,maxGenLength:maxGenLength=0x400,..._0x1daedd}=_0x436aa2;this['modelConfig']=_0x48cabc;const _0x299e04={'model':_0x48cabc[_0x4094ab(0x1b2)]||modelPath};try{this[_0x4094ab(0x1b3)]&&(this[_0x4094ab(0x1b3)][_0x4094ab(0x1c0)](),this['worker']=null);if(_0x436aa2[_0x4094ab(0x155)]){const _0x806a01=new Blob([workerCode],{'type':_0x10833f['BEmEu']}),_0x20845c=URL['createObjectURL'](_0x806a01);console['log'](_0x10833f['ADxbQ']),console[_0x4094ab(0x16c)](_0x10833f['dbhjs']),this['worker']=new Worker(_0x20845c,{'type':_0x10833f[_0x4094ab(0x1dc)],'name':_0x10833f['LvffF']}),URL[_0x4094ab(0x171)](_0x20845c),this['worker'][_0x4094ab(0x1ba)]=_0x2ea01e=>{const _0x54ad90=_0x4094ab;console['error'](_0x10833f[_0x54ad90(0x1b9)],_0x2ea01e),this[_0x54ad90(0x1aa)]=![];throw new Error(_0x54ad90(0x15f)+_0x2ea01e[_0x54ad90(0x14f)]);},this[_0x4094ab(0x1b3)]['onmessageerror']=_0x3a7819=>{const _0x178312=_0x4094ab;console[_0x178312(0x1b8)](_0x10833f[_0x178312(0x1d0)],_0x3a7819);},await new Promise((_0x420ab2,_0x2f0829)=>{const _0x5adeff=_0x4094ab;if(!this['worker'])return _0x10833f[_0x5adeff(0x131)](_0x2f0829,new Error(_0x5adeff(0x185)));const _0x4057b0=_0x10833f[_0x5adeff(0x12f)](setTimeout,()=>{const _0x2d2b43=_0x5adeff;_0x10833f[_0x2d2b43(0x143)](_0x2f0829,new Error(_0x10833f['lxmBf']));},0x2710);this[_0x5adeff(0x1b3)][_0x5adeff(0x13a)]=_0x19d402=>{const _0x13e9f3=_0x5adeff;if(_0x10833f[_0x13e9f3(0x1cf)](_0x19d402[_0x13e9f3(0x170)]['type'],_0x13e9f3(0x1c1)))_0x10833f[_0x13e9f3(0x143)](clearTimeout,_0x4057b0),_0x10833f['lUnEO'](_0x420ab2);else _0x10833f[_0x13e9f3(0x14c)](_0x19d402[_0x13e9f3(0x170)]['type'],_0x10833f[_0x13e9f3(0x1d2)])&&(clearTimeout(_0x4057b0),_0x10833f[_0x13e9f3(0x1a2)](_0x2f0829,new Error(_0x19d402[_0x13e9f3(0x170)][_0x13e9f3(0x1b8)])));};let _0x1a2440;try{_0x1a2440=new URL(_0x10833f[_0x5adeff(0x156)],import.meta[_0x5adeff(0x1bb)])[_0x5adeff(0x18e)],console[_0x5adeff(0x1a8)](_0x10833f[_0x5adeff(0x12d)],_0x1a2440);}catch(_0x3b176e){_0x1a2440=_0x10833f[_0x5adeff(0x16b)],console[_0x5adeff(0x1a8)](_0x10833f[_0x5adeff(0x133)]);}this[_0x5adeff(0x151)]('start',0x0),this[_0x5adeff(0x1b3)][_0x5adeff(0x1a9)]({'type':_0x10833f['gKfsl'],'moduleURL':_0x1a2440});});}const _0x4c8a0d=_0x436aa2['quantization']||_0x48cabc[_0x4094ab(0x18c)],_0x2c9c01=_0x48cabc[_0x4094ab(0x193)]?_0x48cabc[_0x4094ab(0x193)][_0x4094ab(0x1cc)](_0x10833f[_0x4094ab(0x150)],_0x4c8a0d)[_0x4094ab(0x145)]('/')[0x1]:_0x10833f[_0x4094ab(0x186)];return this[_0x4094ab(0x17c)]['touchModel'](_0x2c9c01),console[_0x4094ab(0x1a8)](_0x10833f['OkKnu'],_0x2c9c01,_0x10833f[_0x4094ab(0x159)],_0x4c8a0d,_0x10833f['sLqce'],!!this[_0x4094ab(0x1b3)]),_0x48cabc[_0x4094ab(0x19e)]?this[_0x4094ab(0x1bc)]={'model_list':[{'model':_0x10833f['tRibw']+_0x48cabc['repo'][_0x4094ab(0x1cc)](_0x10833f[_0x4094ab(0x150)],_0x4c8a0d),'model_id':_0x2c9c01,'model_lib':_0x48cabc?.['modelLibrary']?.['startsWith'](_0x4094ab(0x175))?_0x48cabc[_0x4094ab(0x19e)]:_0x10833f[_0x4094ab(0x169)](modelLibURLPrefix+'/'+modelVersion+'/',_0x48cabc[_0x4094ab(0x19e)])}]}:this['appConfig']=prebuiltAppConfig,this['worker']?this[_0x4094ab(0x1c5)]=await _0x10833f[_0x4094ab(0x1d4)](CreateWebWorkerMLCEngine,this[_0x4094ab(0x1b3)],_0x2c9c01,{'initProgressCallback':_0x546014=>{const _0x6bdd97=_0x4094ab;_0x436aa2[_0x6bdd97(0x174)]?.(_0x546014);},'appConfig':this['appConfig'],..._0x436aa2}):this[_0x4094ab(0x1c5)]=await _0x10833f[_0x4094ab(0x160)](CreateMLCEngine,_0x2c9c01,{'initProgressCallback':_0x436aa2[_0x4094ab(0x174)],'appConfig':this['appConfig'],..._0x436aa2}),this[_0x4094ab(0x161)]=!![],this['_loadingInProgress']=![],this[_0x4094ab(0x181)](_0x10833f[_0x4094ab(0x172)],_0x10833f[_0x4094ab(0x19f)]),!![];}catch(_0x4bdc43){this['worker']&&(this[_0x4094ab(0x1b3)]['terminate'](),this[_0x4094ab(0x1b3)]=null);const _0x18ee34=_0x10833f['HaaRC'](_0x4bdc43,Error)?_0x4bdc43[_0x4094ab(0x14f)]:_0x10833f[_0x4094ab(0x166)](String,_0x4bdc43);return this[_0x4094ab(0x161)]=![],this[_0x4094ab(0x1aa)]=![],this['dispatchStatusEvent'](_0x10833f[_0x4094ab(0x1d2)],_0x18ee34),console[_0x4094ab(0x1b8)](_0x10833f[_0x4094ab(0x182)],_0x4bdc43),![];}}[_0x144b0e(0x181)](_0x532ef1,_0x12a111){const _0x2566be=_0x144b0e;console[_0x2566be(0x1a8)](_0x2566be(0x1db)+_0x532ef1+':\x20'+_0x12a111),self[_0x2566be(0x1a9)]({'status':_0x532ef1,'message':_0x12a111});}[_0x144b0e(0x151)](_0x450e40,_0x158350){const _0x5d55e5=_0x144b0e,_0x582175={'fiDLH':_0x5d55e5(0x1da)};console[_0x5d55e5(0x1a8)](_0x5d55e5(0x1c8)+_0x450e40+':\x20'+_0x158350+'%'),self['postMessage']({'status':_0x582175[_0x5d55e5(0x197)],'stage':_0x450e40,'progress':_0x158350});}[_0x144b0e(0x19c)](){const _0x3eb17d={'alKMk':function(_0x55d93c,_0x233278){return _0x55d93c===_0x233278;}};return _0x3eb17d['alKMk'](this['_modelLoaded'],!![]);}[_0x144b0e(0x1ce)](){const _0x39ea29=_0x144b0e,_0x597b9c={'qyriy':function(_0x12de09,_0x2abe4a){return _0x12de09===_0x2abe4a;}};return _0x597b9c[_0x39ea29(0x14d)](this['cacheManager'][_0x39ea29(0x1ce)](this[_0x39ea29(0x1b0)]),!![]);}async[_0x144b0e(0x12e)](_0x136664,_0x50061d={}){const _0x38087d=_0x144b0e,_0x6138e0={'cvtwt':_0x38087d(0x192),'WkfMT':'You\x20must\x20respond\x20with\x20valid\x20JSON\x20that\x20matches\x20the\x20provided\x20schema.\x20Do\x20not\x20include\x20any\x20explanations\x20or\x20additional\x20text.\x0a\x0a','ZmSqT':_0x38087d(0x195),'tTDbE':function(_0x4578ac,_0x19c526){return _0x4578ac===_0x19c526;},'YtPBn':_0x38087d(0x154),'rOKyY':_0x38087d(0x1d5)};if(!this[_0x38087d(0x1c5)])throw new Error(_0x6138e0[_0x38087d(0x15d)]);let _0x277d3d=[],_0x36d514='';_0x50061d[_0x38087d(0x15a)]&&(_0x36d514+=_0x6138e0[_0x38087d(0x153)]);_0x50061d[_0x38087d(0x15c)]&&(_0x36d514+=_0x50061d['system_prompt']);_0x36d514&&_0x277d3d[_0x38087d(0x1a6)]({'role':_0x38087d(0x17e),'content':_0x36d514[_0x38087d(0x1a0)]()});Array['isArray'](_0x136664)?_0x277d3d[_0x38087d(0x1a6)](..._0x136664):_0x277d3d[_0x38087d(0x1a6)]({'role':_0x6138e0[_0x38087d(0x162)],'content':_0x136664});const _0x85b0c2={'max_tokens':0x12c,'temperature':0.6,'top_p':0.95,'frequency_penalty':0.5,'presence_penalty':0.5};if(_0x50061d[_0x38087d(0x15a)]){const _0x5d5b0b=_0x6138e0[_0x38087d(0x15e)](typeof _0x50061d[_0x38087d(0x15a)],_0x6138e0[_0x38087d(0x1cd)])?_0x50061d[_0x38087d(0x15a)]:JSON[_0x38087d(0x1bf)](_0x50061d[_0x38087d(0x15a)]);_0x50061d[_0x38087d(0x1dd)]={'type':_0x6138e0[_0x38087d(0x14e)],'schema':_0x5d5b0b};}const _0x49313c={..._0x85b0c2,..._0x50061d,'messages':_0x277d3d};if(_0x50061d[_0x38087d(0x1a1)])return _0x49313c[_0x38087d(0x176)]={'include_usage':!![]},this['mlcEngine'][_0x38087d(0x1bd)][_0x38087d(0x1b1)]['create'](_0x49313c);const _0x34c099=await this[_0x38087d(0x1c5)][_0x38087d(0x1bd)][_0x38087d(0x1b1)]['create'](_0x49313c);return _0x34c099[_0x38087d(0x1cb)][0x0][_0x38087d(0x14f)][_0x38087d(0x1ac)];}async[_0x144b0e(0x19d)](_0x57c696,_0x58eac2={}){const _0x17c9b4=_0x144b0e,_0x22c3a1={'uVlsB':_0x17c9b4(0x192),'PwAJd':_0x17c9b4(0x158),'VNyme':'You\x20must\x20respond\x20with\x20valid\x20JSON\x20that\x20matches\x20the\x20provided\x20schema.\x20Do\x20not\x20include\x20any\x20explanations\x20or\x20additional\x20text.\x0a\x0a','DZsfX':_0x17c9b4(0x17e),'oQHTj':function(_0x4f2c14,_0x1ff671){return _0x4f2c14===_0x1ff671;},'TwyBj':_0x17c9b4(0x154)};if(!this['mlcEngine'])throw new Error(_0x22c3a1['uVlsB']);console[_0x17c9b4(0x1a8)](_0x22c3a1[_0x17c9b4(0x1c6)],_0x57c696,_0x58eac2);let _0x5e234f=[],_0x11871f='';_0x58eac2['json_schema']&&(_0x11871f+=_0x22c3a1[_0x17c9b4(0x177)]);_0x58eac2[_0x17c9b4(0x15c)]&&(_0x11871f+=_0x58eac2[_0x17c9b4(0x15c)]);_0x11871f&&_0x5e234f[_0x17c9b4(0x1a6)]({'role':_0x22c3a1[_0x17c9b4(0x149)],'content':_0x11871f[_0x17c9b4(0x1a0)]()});Array['isArray'](_0x57c696)?_0x5e234f[_0x17c9b4(0x1a6)](..._0x57c696):_0x5e234f[_0x17c9b4(0x1a6)]({'role':_0x17c9b4(0x195),'content':_0x57c696});const _0x16652c={'max_tokens':0x12c,'temperature':0.6,'top_p':0.95,'frequency_penalty':0.5,'presence_penalty':0.5,'stream':!![]};if(_0x58eac2[_0x17c9b4(0x15a)]){const _0x1a6f92=_0x22c3a1[_0x17c9b4(0x147)](typeof _0x58eac2[_0x17c9b4(0x15a)],_0x22c3a1[_0x17c9b4(0x1a7)])?_0x58eac2[_0x17c9b4(0x15a)]:JSON[_0x17c9b4(0x1bf)](_0x58eac2[_0x17c9b4(0x15a)]);_0x58eac2[_0x17c9b4(0x1dd)]={'type':'json_object','schema':_0x1a6f92};}const _0xeeb8dd={..._0x16652c,..._0x58eac2,'messages':_0x5e234f};return _0xeeb8dd[_0x17c9b4(0x1a1)]=!![],_0xeeb8dd[_0x17c9b4(0x176)]={'include_usage':!![]},this['mlcEngine'][_0x17c9b4(0x1bd)]['completions'][_0x17c9b4(0x148)](_0xeeb8dd);}async[_0x144b0e(0x1d7)](_0x45d6ff,_0x4753d1={}){const _0x18560d=_0x144b0e,_0x1709d6={'QHUXl':_0x18560d(0x192)};if(!this[_0x18560d(0x1c5)])throw new Error(_0x1709d6[_0x18560d(0x173)]);const _0x347407=await this[_0x18560d(0x1c5)]['embeddings'][_0x18560d(0x148)]({'input':_0x45d6ff,..._0x4753d1});return _0x347407[_0x18560d(0x170)][0x0][_0x18560d(0x18f)];}[_0x144b0e(0x1c4)](){const _0x126641=_0x144b0e;this[_0x126641(0x1b3)]&&(this[_0x126641(0x1b3)]['terminate'](),this['worker']=null),this[_0x126641(0x1c5)]=null;}async[_0x144b0e(0x178)](){const _0x4a69b4=_0x144b0e,_0x256564={'qQcVX':_0x4a69b4(0x19a),'fbnuN':_0x4a69b4(0x189),'HdnQO':'webllm/model','fHldL':function(_0x155baa){return _0x155baa();},'sLpgu':function(_0x15fa21,_0x5531b2){return _0x15fa21(_0x5531b2);}};return new Promise(async(_0x5ec25f,_0x386660)=>{const _0x5815f1=_0x4a69b4;try{const _0x5c4f62=[_0x256564[_0x5815f1(0x136)],_0x256564['fbnuN'],_0x256564['HdnQO']],_0x402ef0=await caches['keys'](),_0x2a520b=_0x402ef0['filter'](_0x317fe5=>_0x5c4f62[_0x5815f1(0x13e)](_0x33aed0=>_0x317fe5[_0x5815f1(0x13f)](_0x33aed0)));await Promise[_0x5815f1(0x180)](_0x2a520b[_0x5815f1(0x199)](_0x4adb88=>caches[_0x5815f1(0x17f)](_0x4adb88))),console[_0x5815f1(0x1a8)]('[MLCEngine]\x20Successfully\x20cleared\x20MLC\x20model\x20cache'),_0x256564['fHldL'](_0x5ec25f);}catch(_0x1352fe){console[_0x5815f1(0x1b8)](_0x5815f1(0x132),_0x1352fe),_0x256564[_0x5815f1(0x1b7)](_0x386660,_0x1352fe);}});}async[_0x144b0e(0x134)](_0x440b63){const _0x497942=_0x144b0e,_0x379f49={'CdjTC':'[MLCEngine]\x20Model\x20identifier\x20is\x20required'};if(!_0x440b63)throw new Error(_0x379f49[_0x497942(0x17b)]);return this[_0x497942(0x17c)]['removeModelFromCache'](_0x440b63);}async['getCacheInfo'](){const _0x56bc21=_0x144b0e;return this[_0x56bc21(0x17c)]['getCacheInfo']();}async['printCacheInfo'](){const _0x3fb129=_0x144b0e,_0xdc8da8={'fspUG':_0x3fb129(0x187),'nxSAe':'\x0aModels\x20by\x20LRU\x20order\x20(most\x20recently\x20used\x20last):','LfBDm':_0x3fb129(0x15b)},_0x478026=await this[_0x3fb129(0x17c)][_0x3fb129(0x13d)]();console[_0x3fb129(0x1a8)](_0xdc8da8[_0x3fb129(0x163)]),console['log'](_0x3fb129(0x1af)+this[_0x3fb129(0x1e2)](_0x478026[_0x3fb129(0x1ca)])+_0x3fb129(0x18d)+this[_0x3fb129(0x1e2)](_0x478026[_0x3fb129(0x1a3)])+'\x20('+_0x478026[_0x3fb129(0x13b)][_0x3fb129(0x17d)](0x2)+'%)'),console[_0x3fb129(0x1a8)](_0x3fb129(0x188)+_0x478026[_0x3fb129(0x135)][_0x3fb129(0x14b)]),console['log'](_0xdc8da8[_0x3fb129(0x19b)]);const _0x76469f=[..._0x478026[_0x3fb129(0x135)]][_0x3fb129(0x137)]((_0x5230d4,_0x469e4c)=>_0x5230d4[_0x3fb129(0x146)]-_0x469e4c[_0x3fb129(0x146)]);_0x76469f[_0x3fb129(0x16d)]((_0x2fa426,_0x5d0ab1)=>{const _0x47158b=_0x3fb129;console[_0x47158b(0x1a8)](_0x5d0ab1+0x1+'.\x20'+_0x2fa426['id']+':\x20'+this['formatBytes'](_0x2fa426[_0x47158b(0x1c3)]));}),console[_0x3fb129(0x1a8)](_0xdc8da8['LfBDm']),console[_0x3fb129(0x1a8)](_0x3fb129(0x1d3)+_0x478026['debug']['modelQueueLength']),console[_0x3fb129(0x1a8)](_0x3fb129(0x18a)+_0x478026[_0x3fb129(0x141)][_0x3fb129(0x1c9)]),console[_0x3fb129(0x1a8)](_0x3fb129(0x14a),_0x478026[_0x3fb129(0x141)][_0x3fb129(0x194)]);}[_0x144b0e(0x1e2)](_0xaa83ea){const _0x20adc0=_0x144b0e,_0x2d5e1b={'BUpnE':function(_0x3689a8,_0xd145a6){return _0x3689a8===_0xd145a6;},'qEFUr':_0x20adc0(0x1d9),'icRXH':function(_0x4bc84f,_0x52ccf0){return _0x4bc84f/_0x52ccf0;}};if(_0x2d5e1b[_0x20adc0(0x190)](_0xaa83ea,0x0))return _0x2d5e1b[_0x20adc0(0x1e1)];const _0x2d2731=0x400,_0x47a533=[_0x20adc0(0x1ad),'KB','MB','GB','TB'],_0x461674=Math[_0x20adc0(0x1b5)](Math['log'](_0xaa83ea)/Math['log'](_0x2d2731));return parseFloat(_0x2d5e1b[_0x20adc0(0x179)](_0xaa83ea,Math['pow'](_0x2d2731,_0x461674))['toFixed'](0x2))+'\x20'+_0x47a533[_0x461674];}}const workerCode='\x0a\x20\x20//\x20Ensure\x20we\x27re\x20in\x20a\x20worker\x20context\x0a\x20\x20if\x20(typeof\x20self\x20===\x20\x27undefined\x27)\x20{\x0a\x20\x20\x20\x20throw\x20new\x20Error(\x27This\x20script\x20must\x20be\x20run\x20in\x20a\x20Web\x20Worker\x27);\x0a\x20\x20}\x0a\x0a\x20\x20console.log(\x27[Worker]\x20Starting\x20initialization...\x27);\x0a\x0a\x20\x20//\x20Wrap\x20the\x20entire\x20worker\x20code\x20in\x20a\x20try-catch\x0a\x20\x20try\x20{\x0a\x20\x20\x20\x20//\x20Wait\x20for\x20the\x20main\x20thread\x20to\x20send\x20us\x20the\x20module\x20URL\x0a\x20\x20\x20\x20self.onmessage\x20=\x20async\x20(msg)\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20if\x20(msg.data.type\x20===\x20\x27init\x27)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20console.log(\x27🚀\x20[Worker]\x20Received\x20init\x20message\x20with\x20moduleURL:\x20\x27\x20+\x20msg.data.moduleURL);\x0a\x20\x20\x20\x20\x20\x20\x20\x20const\x20moduleURL\x20=\x20msg.data.moduleURL;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20module\x20=\x20await\x20import(moduleURL);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20console.log(\x27[Worker]\x20Module\x20loaded\x20successfully\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20handler\x20=\x20new\x20module.WebWorkerMLCEngineHandler();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20Replace\x20onmessage\x20handler\x20with\x20the\x20actual\x20handler\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20self.onmessage\x20=\x20(msg)\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20console.log(\x27🚀\x20[Worker]\x20Received\x20message:\x27,\x20msg.data);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20handler.onmessage(msg);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20console.error(\x27[Worker]\x20Handler\x20error:\x27,\x20error);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20self.postMessage({\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20type:\x20\x27error\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20error:\x20error\x20instanceof\x20Error\x20?\x20error.message\x20:\x20String(error)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20};\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20self.postMessage({\x20type:\x20\x27ready\x27\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20console.log(\x27🚀\x20[Worker]\x20Handler\x20initialized\x20successfully\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20console.error(\x27[Worker]\x20Failed\x20to\x20load\x20module:\x27,\x20error);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20self.postMessage({\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20type:\x20\x27error\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20error:\x20\x27Failed\x20to\x20initialize\x20worker:\x20\x27\x20+\x20(error\x20instanceof\x20Error\x20?\x20error.message\x20:\x20String(error))\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20};\x0a\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20console.error(\x27[Worker]\x20Initialization\x20error:\x27,\x20error);\x0a\x20\x20\x20\x20self.postMessage({\x0a\x20\x20\x20\x20\x20\x20type:\x20\x27error\x27,\x0a\x20\x20\x20\x20\x20\x20error:\x20\x27Worker\x20initialization\x20failed:\x20\x27\x20+\x20(error\x20instanceof\x20Error\x20?\x20error.message\x20:\x20String(error))\x0a\x20\x20\x20\x20});\x0a\x20\x20}\x0a\x0a\x20\x20self.onerror\x20=\x20(error)\x20=>\x20{\x0a\x20\x20\x20\x20console.error(\x27[Worker]\x20Global\x20error:\x27,\x20error);\x0a\x20\x20\x20\x20self.postMessage({\x0a\x20\x20\x20\x20\x20\x20type:\x20\x27error\x27,\x0a\x20\x20\x20\x20\x20\x20error:\x20error\x20instanceof\x20ErrorEvent\x20?\x20error.message\x20:\x20\x27Unknown\x20worker\x20error\x27\x0a\x20\x20\x20\x20});\x0a\x20\x20};\x0a\x0a\x20\x20self.onmessageerror\x20=\x20(error)\x20=>\x20{\x0a\x20\x20\x20\x20console.error(\x27[Worker]\x20Message\x20error:\x27,\x20error);\x0a\x20\x20\x20\x20self.postMessage({\x0a\x20\x20\x20\x20\x20\x20type:\x20\x27error\x27,\x0a\x20\x20\x20\x20\x20\x20error:\x20\x27Message\x20error:\x20\x27\x20+\x20(error\x20instanceof\x20Error\x20?\x20error.message\x20:\x20String(error))\x0a\x20\x20\x20\x20});\x0a\x20\x20};\x0a\x20\x20\x0a\x20\x20//\x20Signal\x20that\x20the\x20worker\x20is\x20ready\x0a\x20\x20console.log(\x27✅\x20\x20[Worker]\x20Worker\x20is\x20READY\x20-\x20Basic\x20initialization\x20complete\x27);\x0a\x20\x20//\x20self.postMessage({\x20status:\x20\x22ready\x22,\x20message:\x20\x22[Worker]\x20Worker\x20is\x20ready.\x20Basic\x20initialization\x20complete\x22\x20});\x0a';function _0x3c3b(_0x50f608,_0x1786e9){const _0x554213=_0x5542();return _0x3c3b=function(_0x3c3b93,_0x541446){_0x3c3b93=_0x3c3b93-0x12d;let _0x4e4046=_0x554213[_0x3c3b93];return _0x4e4046;},_0x3c3b(_0x50f608,_0x1786e9);}function _0x5542(){const _0x2a2ba2=['WkfMT','string','useWorker','VZvPm','5387701DgDHwR','[MLCEngine]\x20generateResponseStream\x20input:\x20','LoffN','json_schema','\x0aDebug\x20info:','system_prompt','cvtwt','tTDbE','[MLCEngine]\x20Worker\x20error:\x20','xTqNa','_modelLoaded','ZmSqT','fspUG','979601plwLZw','⚠️\x20[MLCEngine]\x20Model\x20is\x20already\x20loading\x20or\x20loaded.','Yovel','1465680iHGWOX','_mlcLoadModelOptions','AVxWz','with\x20quantization:','gFqDP','time','forEach','[MLCEngine]\x20Load\x20error:','24ERcHrj','data','revokeObjectURL','EnISr','QHUXl','onProgress','http','stream_options','VNyme','clearModelCache','icRXH','[MLCEngine]\x20Worker\x20message\x20error:','CdjTC','cacheManager','toFixed','system','delete','all','dispatchStatusEvent','mbYlx','auto','[MLCEngine]\x20Loading\x20model:','[MLCEngine]\x20Worker\x20not\x20initialized','gBneM','===\x20MLC\x20MODEL\x20CACHE\x20INFORMATION\x20===','Number\x20of\x20models:\x20','webllm/wasm','Model\x20sizes\x20map\x20length:\x20','loadModel','defaultQuantization','\x20of\x20','href','embedding','BUpnE','tinyllama-1.1b-chat-v0.4','[MLCEngine]\x20MLC\x20Engine\x20not\x20initialized.','repo','modelQueue','user','🎉[MLCEngine]:\x20Model\x20loaded\x20successfully!','fiDLH','init','map','webllm/config','nxSAe','isModelLoaded','generateResponseStream','modelLibrary','HZYVY','trim','stream','lhTeu','maxSize','wVaor','666qpmlRk','push','TwyBj','log','postMessage','_loadingInProgress','info','content','Bytes','❌\x20[MLCEngine]\x20Worker\x20Creation\x20error:','Total\x20cache\x20size:\x20','modelIdentifier','completions','modelPath','worker','21448UUEhKA','floor','module','sLpgu','error','kRusE','onerror','url','appConfig','chat','Mtpaw','stringify','terminate','ready','hujrU','size','dispose','mlcEngine','PwAJd','getInstance','[Worker\x20Status]\x20','modelSizesLength','totalSize','choices','replace','YtPBn','isModelCached','ZWIWO','rdMaj','success','OuAfL','Model\x20queue\x20length:\x20','xnJXZ','json_object','loading','embed','1654929YqFZzP','0\x20Bytes','progress','📬\x20[Worker\x20Status]\x20','suMvh','response_format','modelConfig','86168yooqiH','with\x20worker:','qEFUr','formatBytes','oCpCZ','generateText','Wjcoi','mlc-worker','ukJes','[MLCEngine]\x20Error\x20clearing\x20model\x20cache:','nJTjr','clearSpecificModel','models','qQcVX','sort','⏰\x20[MLCEngine]\x20Worker\x20initialization\x20timeout','DCELi','onmessage','usedPercent','129810GBOynv','getCacheInfo','some','includes','{quantization}','debug','4hMBUUN','SxTyl','10FXzVeA','split','position','oQHTj','create','DZsfX','LRU\x20Queue\x20order:','length','KEWlB','qyriy','rOKyY','message','rzdHq','dispatchProgressEvent','🔍\x20MLCEngineWrapper\x20Library:'];_0x5542=function(){return _0x2a2ba2;};return _0x5542();}