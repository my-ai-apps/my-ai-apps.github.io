
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
const _0x1a24d0=_0x4d70;(function(_0x11700f,_0x10f46c){const _0x221b6f=_0x4d70,_0x10c822=_0x11700f();while(!![]){try{const _0x5677af=parseInt(_0x221b6f(0x1e8))/0x1+parseInt(_0x221b6f(0x1de))/0x2*(parseInt(_0x221b6f(0x1ba))/0x3)+-parseInt(_0x221b6f(0x1c4))/0x4*(parseInt(_0x221b6f(0x1cd))/0x5)+parseInt(_0x221b6f(0x20e))/0x6+-parseInt(_0x221b6f(0x24e))/0x7*(parseInt(_0x221b6f(0x23d))/0x8)+parseInt(_0x221b6f(0x212))/0x9*(parseInt(_0x221b6f(0x1d0))/0xa)+parseInt(_0x221b6f(0x274))/0xb*(-parseInt(_0x221b6f(0x227))/0xc);if(_0x5677af===_0x10f46c)break;else _0x10c822['push'](_0x10c822['shift']());}catch(_0x9e94c7){_0x10c822['push'](_0x10c822['shift']());}}}(_0x181f,0xc3985));import{CreateMLCEngine,CreateWebWorkerMLCEngine,modelLibURLPrefix,modelVersion,prebuiltAppConfig}from'https://esm.run/@mlc-ai/web-llm';function _0x4d70(_0x4af9c7,_0x194565){const _0x181f9b=_0x181f();return _0x4d70=function(_0x4d7075,_0x463688){_0x4d7075=_0x4d7075-0x1b9;let _0x4b6784=_0x181f9b[_0x4d7075];return _0x4b6784;},_0x4d70(_0x4af9c7,_0x194565);}import*as _0x40f6be from'https://esm.run/@mlc-ai/web-llm';function _0x181f(){const _0x1627e1=['âš ï¸\x20[MLCEngine]\x20Model\x20is\x20already\x20loading\x20or\x20loaded.','formatBytes','models','postMessage','system_prompt','ðŸŒ\x20MLCEngineWrapper\x20Worker\x20Script\x20Loaded','_mlcLoadModelOptions','dispose','useWorker','message','https://esm.run/@mlc-ai/web-llm','LsENo','Model\x20queue\x20length:\x20','debug','THFLy','[MLCEngine:loadModule]\x20Using\x20module\x20URL:','_modelLoaded','6881478cfzMIA','keys','progress','ZMuos','1431QVYirf','\x0aModels\x20by\x20LRU\x20order\x20(most\x20recently\x20used\x20last):','gemma-2b-it-q4f32_1','[MLCEngine]\x20Loading\x20model:\x20','\x0aDebug\x20info:','fTzbB','usedPercent','maxSize','stream_options','XXAMb','AplNU','JqQjr','iGxwK','ðŸŽ‰[MLCEngine]:\x20Model\x20loaded\x20successfully!','kKsGl','You\x20must\x20respond\x20with\x20valid\x20JSON\x20that\x20matches\x20the\x20provided\x20schema.\x20Do\x20not\x20include\x20any\x20explanations\x20or\x20additional\x20text.\x0a\x0a','ouhJK','[MLCEngine]\x20Load\x20error:','auto','onProgress','data','5931732FQDJQs','toFixed','modelSizesLength','SKPWK','string','pTGwa','replace','modelQueue','ready','split','totalSize','YWphR','MOecO','isModelCached','[MLCEngine]\x20Loading\x20model:','keOIa','push','zuvmf','system','lsCVF','create','rPFQk','8PGbJzn','KyVba','modelConfig','âŒ\x20[MLCEngine]\x20Worker\x20Creation\x20error:','[MLCEngine]\x20Error\x20clearing\x20model\x20cache:','json_schema','Bcyro','CZdyf','dispatchStatusEvent','trim','generateText','[MLCEngine]\x20generateResponseStream\x20input:\x20','tOEum','EjflS','response_format','\x20of\x20','getInstance','7016401Hrffol','[MLCEngine]\x20Worker\x20error:\x20','start','XqXCC','TBBud','lnGkS','init','jwpjt','user','position','modelQueueLength','â°\x20[MLCEngine]\x20Worker\x20initialization\x20timeout','oReFD','worker','KLnKF','onmessageerror','Model\x20sizes\x20map\x20length:\x20','clearModelCache','huLBR','type','jnuqS','ðŸ“¬\x20[Worker\x20Status]\x20','qmPjT','CCYQC','printCacheInfo','===\x20MLC\x20MODEL\x20CACHE\x20INFORMATION\x20===','mlc-worker','webllm/model','https://huggingface.co/','mlcEngine','generateResponseStream','_loadingInProgress','[MLCEngine]\x20Model\x20identifier\x20is\x20required','embeddings','modelIdentifier','isArray','onmessage','defaultQuantization','66sllFsS','ZWNYS','[MLCEngine]\x20MLC\x20Engine\x20not\x20initialized.','delete','map','737679nqzUsL','cacheManager','GvCpL','error','LRU\x20Queue\x20order:','dJDUo','dispatchProgressEvent','quantization','DOIkb','[MLCEngine]\x20Worker\x20message\x20error:','10576GfxnqX','filter','[MLCEngine]\x20Successfully\x20cleared\x20MLC\x20model\x20cache','getCacheInfo','revokeObjectURL','FUGMn','xMWer','webllm/wasm','createObjectURL','45yhORbR','NDRvt','stream','66930igAphb','embed','time','IqmRi','with\x20worker:','FfLmq','sEtOQ','content','gPgot','some','@mlc-ai/web-llm','log','\x0a\x20\x20//\x20Ensure\x20we\x27re\x20in\x20a\x20worker\x20context\x0a\x20\x20if\x20(typeof\x20self\x20===\x20\x27undefined\x27)\x20{\x0a\x20\x20\x20\x20throw\x20new\x20Error(\x27This\x20script\x20must\x20be\x20run\x20in\x20a\x20Web\x20Worker\x27);\x0a\x20\x20}\x0a\x0a\x20\x20console.log(\x27[Worker]\x20Starting\x20initialization...\x27);\x0a\x0a\x20\x20//\x20Wrap\x20the\x20entire\x20worker\x20code\x20in\x20a\x20try-catch\x0a\x20\x20try\x20{\x0a\x20\x20\x20\x20//\x20Wait\x20for\x20the\x20main\x20thread\x20to\x20send\x20us\x20the\x20module\x20URL\x0a\x20\x20\x20\x20self.onmessage\x20=\x20async\x20(msg)\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20if\x20(msg.data.type\x20===\x20\x27init\x27)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20console.log(\x27ðŸš€\x20[Worker]\x20Received\x20init\x20message\x20with\x20moduleURL:\x20\x27\x20+\x20msg.data.moduleURL);\x0a\x20\x20\x20\x20\x20\x20\x20\x20const\x20moduleURL\x20=\x20msg.data.moduleURL;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20module\x20=\x20await\x20import(moduleURL);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20console.log(\x27[Worker]\x20Module\x20loaded\x20successfully\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20handler\x20=\x20new\x20module.WebWorkerMLCEngineHandler();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20Replace\x20onmessage\x20handler\x20with\x20the\x20actual\x20handler\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20self.onmessage\x20=\x20(msg)\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20console.log(\x27ðŸš€\x20[Worker]\x20Received\x20message:\x27,\x20msg.data);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20handler.onmessage(msg);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20console.error(\x27[Worker]\x20Handler\x20error:\x27,\x20error);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20self.postMessage({\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20type:\x20\x27error\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20error:\x20error\x20instanceof\x20Error\x20?\x20error.message\x20:\x20String(error)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20};\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20self.postMessage({\x20type:\x20\x27ready\x27\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20console.log(\x27ðŸš€\x20[Worker]\x20Handler\x20initialized\x20successfully\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20console.error(\x27[Worker]\x20Failed\x20to\x20load\x20module:\x27,\x20error);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20self.postMessage({\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20type:\x20\x27error\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20error:\x20\x27Failed\x20to\x20initialize\x20worker:\x20\x27\x20+\x20(error\x20instanceof\x20Error\x20?\x20error.message\x20:\x20String(error))\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20};\x0a\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20console.error(\x27[Worker]\x20Initialization\x20error:\x27,\x20error);\x0a\x20\x20\x20\x20self.postMessage({\x0a\x20\x20\x20\x20\x20\x20type:\x20\x27error\x27,\x0a\x20\x20\x20\x20\x20\x20error:\x20\x27Worker\x20initialization\x20failed:\x20\x27\x20+\x20(error\x20instanceof\x20Error\x20?\x20error.message\x20:\x20String(error))\x0a\x20\x20\x20\x20});\x0a\x20\x20}\x0a\x0a\x20\x20self.onerror\x20=\x20(error)\x20=>\x20{\x0a\x20\x20\x20\x20console.error(\x27[Worker]\x20Global\x20error:\x27,\x20error);\x0a\x20\x20\x20\x20self.postMessage({\x0a\x20\x20\x20\x20\x20\x20type:\x20\x27error\x27,\x0a\x20\x20\x20\x20\x20\x20error:\x20error\x20instanceof\x20ErrorEvent\x20?\x20error.message\x20:\x20\x27Unknown\x20worker\x20error\x27\x0a\x20\x20\x20\x20});\x0a\x20\x20};\x0a\x0a\x20\x20self.onmessageerror\x20=\x20(error)\x20=>\x20{\x0a\x20\x20\x20\x20console.error(\x27[Worker]\x20Message\x20error:\x27,\x20error);\x0a\x20\x20\x20\x20self.postMessage({\x0a\x20\x20\x20\x20\x20\x20type:\x20\x27error\x27,\x0a\x20\x20\x20\x20\x20\x20error:\x20\x27Message\x20error:\x20\x27\x20+\x20(error\x20instanceof\x20Error\x20?\x20error.message\x20:\x20String(error))\x0a\x20\x20\x20\x20});\x0a\x20\x20};\x0a\x20\x20\x0a\x20\x20//\x20Signal\x20that\x20the\x20worker\x20is\x20ready\x0a\x20\x20console.log(\x27âœ…\x20\x20[Worker]\x20Worker\x20is\x20READY\x20-\x20Basic\x20initialization\x20complete\x27);\x0a\x20\x20//\x20self.postMessage({\x20status:\x20\x22ready\x22,\x20message:\x20\x22[Worker]\x20Worker\x20is\x20ready.\x20Basic\x20initialization\x20complete\x22\x20});\x0a','mYIxd','10uLYiww','appConfig','url','nTgNt','href','fCINT','json_object','modelLibrary','yCjDu','isModelLoaded','1352597lbRVck','{quantization}','repo','stringify','UxztU','asOuf','[Worker\x20Status]\x20','Total\x20cache\x20size:\x20','touchModel','aPjoi','lmoxR','onerror','pow','tWSXK','loading','info','TANoz','jaHbw','completions','size','includes'];_0x181f=function(){return _0x1627e1;};return _0x181f();}import{MLCModelCacheManager}from'./mlcModelCacheManager.js';console['log'](_0x1a24d0(0x202)),console['log']('ðŸ”\x20MLCEngineWrapper\x20Library:');const defaultModelName='tinyllama-1.1b-chat-v0.4';export class MLCEngineWrapper{constructor(_0x57b23,_0x22a6ec={}){const _0x5607ca=_0x1a24d0,_0x30ba81={'FUGMn':'5|3|4|1|6|7|0|2'},_0x20821a=_0x30ba81[_0x5607ca(0x1c9)][_0x5607ca(0x230)]('|');let _0x372045=0x0;while(!![]){switch(_0x20821a[_0x372045++]){case'0':this['_modelLoaded']=![];continue;case'1':this[_0x5607ca(0x25b)]=null;continue;case'2':this[_0x5607ca(0x203)]=_0x22a6ec;continue;case'3':this[_0x5607ca(0x1df)]=null;continue;case'4':this[_0x5607ca(0x23f)]=_0x57b23;continue;case'5':this[_0x5607ca(0x26b)]=null;continue;case'6':this[_0x5607ca(0x1bb)]=MLCModelCacheManager[_0x5607ca(0x24d)]();continue;case'7':this[_0x5607ca(0x26d)]=![];continue;}break;}}async['loadModel'](_0x388107,_0x36c9df={}){const _0xcd8e71=_0x1a24d0,_0x39801c={'jwpjt':_0xcd8e71(0x240),'THFLy':_0xcd8e71(0x1c3),'EfDNe':function(_0x4ef512,_0x511eff){return _0x4ef512(_0x511eff);},'aPjoi':_0xcd8e71(0x259),'NDRvt':function(_0x5bcd6f,_0x42c482){return _0x5bcd6f===_0x42c482;},'yCjDu':'error','jnuqS':function(_0x4f7c39,_0x477ba3){return _0x4f7c39(_0x477ba3);},'DOIkb':'[MLCEngine]\x20Worker\x20not\x20initialized','IqmRi':function(_0x111080,_0x24b8ab,_0x2208d8){return _0x111080(_0x24b8ab,_0x2208d8);},'syxGQ':_0xcd8e71(0x207),'nTgNt':_0xcd8e71(0x20c),'asOuf':'[MLCEngine:loadModule]\x20Using\x20module\x20name\x20as\x20fallback\x20for\x20CJS\x20environment','fCINT':_0xcd8e71(0x250),'lmoxR':_0xcd8e71(0x1fd),'pTGwa':_0xcd8e71(0x1f6),'fTzbB':_0xcd8e71(0x224),'MIWHL':'text/javascript','qkBSX':'[MLCEngine]ðŸ“¦\x20Creating\x20new\x20Worker','MqYGo':'module','iGxwK':_0xcd8e71(0x214),'CZdyf':_0xcd8e71(0x235),'kKsGl':'with\x20quantization:','FfLmq':_0xcd8e71(0x26a),'VKYLd':_0xcd8e71(0x1e9),'XXAMb':'http','mYIxd':function(_0x31f032,_0x39f070){return _0x31f032+_0x39f070;},'SKPWK':function(_0x139f7a,_0xe97cf0){return _0x139f7a+_0xe97cf0;},'zFIap':function(_0x16bb56,_0x3584f3){return _0x16bb56+_0x3584f3;},'vsmUw':function(_0x40e95a,_0x376dcd,_0x8819bf,_0x5c13a0){return _0x40e95a(_0x376dcd,_0x8819bf,_0x5c13a0);},'qmPjT':function(_0x595dcd,_0x549a1b,_0x26025d){return _0x595dcd(_0x549a1b,_0x26025d);},'gPgot':'success','YWphR':function(_0x40a5a5,_0xb3250c){return _0x40a5a5 instanceof _0xb3250c;}};if(this[_0xcd8e71(0x26d)]||this['_modelLoaded']){this['dispatchStatusEvent'](_0xcd8e71(0x1f7),_0x39801c[_0xcd8e71(0x1f2)]);return;}this['_loadingInProgress']=!![],this[_0xcd8e71(0x245)](_0x39801c[_0xcd8e71(0x22c)],_0xcd8e71(0x215)+this[_0xcd8e71(0x23f)]),this[_0xcd8e71(0x20d)]=![];const {quantized:quantized=!![],device:device=_0x39801c[_0xcd8e71(0x217)],modelPath:modelPath=null,contextWindowSize:contextWindowSize=0x1000,systemPrompt:systemPrompt='',temperature:temperature=0.7,maxGenLength:maxGenLength=0x400,..._0x3be322}=_0x36c9df;this['modelConfig']=_0x388107;const _0x4a04ca={'model':_0x388107['modelPath']||modelPath};try{this[_0xcd8e71(0x25b)]&&(this['worker']['terminate'](),this[_0xcd8e71(0x25b)]=null);if(_0x36c9df[_0xcd8e71(0x205)]){const _0x827f85=new Blob([workerCode],{'type':_0x39801c['MIWHL']}),_0x31fdea=URL[_0xcd8e71(0x1cc)](_0x827f85);console[_0xcd8e71(0x1db)](_0x39801c['qkBSX']),console[_0xcd8e71(0x1d2)]('[MLCEngine]\x20WorkerInitializationTime'),this[_0xcd8e71(0x25b)]=new Worker(_0x31fdea,{'type':_0x39801c['MqYGo'],'name':_0xcd8e71(0x268)}),URL[_0xcd8e71(0x1c8)](_0x31fdea),this[_0xcd8e71(0x25b)][_0xcd8e71(0x1f3)]=_0x32fbdf=>{const _0x2a0e3e=_0xcd8e71;console[_0x2a0e3e(0x1bd)](_0x39801c[_0x2a0e3e(0x255)],_0x32fbdf),this[_0x2a0e3e(0x26d)]=![];throw new Error(_0x2a0e3e(0x24f)+_0x32fbdf[_0x2a0e3e(0x206)]);},this[_0xcd8e71(0x25b)][_0xcd8e71(0x25d)]=_0x291c89=>{const _0x376496=_0xcd8e71;console[_0x376496(0x1bd)](_0x39801c[_0x376496(0x20b)],_0x291c89);},await new Promise((_0x13ab0d,_0x369101)=>{const _0x30f4e3=_0xcd8e71,_0xe35547={'KLnKF':function(_0x19a2c6,_0x4690bf){const _0xe86a41=_0x4d70;return _0x39801c[_0xe86a41(0x1ce)](_0x19a2c6,_0x4690bf);},'keOIa':_0x30f4e3(0x22f),'EYjAX':_0x39801c[_0x30f4e3(0x1e6)],'lsCVF':function(_0x292e69,_0x13cbde){const _0x29b54b=_0x30f4e3;return _0x39801c[_0x29b54b(0x262)](_0x292e69,_0x13cbde);}};if(!this[_0x30f4e3(0x25b)])return _0x369101(new Error(_0x39801c[_0x30f4e3(0x1c2)]));const _0x4ef37=_0x39801c[_0x30f4e3(0x1d3)](setTimeout,()=>{const _0x4aa5bb=_0x30f4e3;_0x39801c['EfDNe'](_0x369101,new Error(_0x39801c[_0x4aa5bb(0x1f1)]));},0x2710);this[_0x30f4e3(0x25b)][_0x30f4e3(0x272)]=_0x3dd4d6=>{const _0x24105e=_0x30f4e3;if(_0xe35547[_0x24105e(0x25c)](_0x3dd4d6[_0x24105e(0x226)][_0x24105e(0x261)],_0xe35547[_0x24105e(0x236)]))clearTimeout(_0x4ef37),_0x13ab0d();else _0xe35547['KLnKF'](_0x3dd4d6[_0x24105e(0x226)][_0x24105e(0x261)],_0xe35547['EYjAX'])&&(_0xe35547[_0x24105e(0x23a)](clearTimeout,_0x4ef37),_0xe35547[_0x24105e(0x23a)](_0x369101,new Error(_0x3dd4d6[_0x24105e(0x226)][_0x24105e(0x1bd)])));};let _0x5b1553;try{_0x5b1553=new URL(_0x39801c['syxGQ'],import.meta[_0x30f4e3(0x1e0)])[_0x30f4e3(0x1e2)],console[_0x30f4e3(0x1db)](_0x39801c[_0x30f4e3(0x1e1)],_0x5b1553);}catch(_0x3b0563){_0x5b1553=_0x30f4e3(0x1da),console['log'](_0x39801c[_0x30f4e3(0x1ed)]);}this['dispatchProgressEvent'](_0x39801c[_0x30f4e3(0x1e3)],0x0),this['worker'][_0x30f4e3(0x200)]({'type':_0x30f4e3(0x254),'moduleURL':_0x5b1553});});}const _0x336b8c=_0x36c9df[_0xcd8e71(0x1c1)]||_0x388107[_0xcd8e71(0x273)],_0xf66dc5=_0x388107['repo']?_0x388107[_0xcd8e71(0x1ea)]['replace']('{quantization}',_0x336b8c)['split']('/')[0x1]:_0x39801c[_0xcd8e71(0x21e)];return this['cacheManager'][_0xcd8e71(0x1f0)](_0xf66dc5),console[_0xcd8e71(0x1db)](_0x39801c[_0xcd8e71(0x244)],_0xf66dc5,_0x39801c[_0xcd8e71(0x220)],_0x336b8c,_0xcd8e71(0x1d4),!!this['worker']),_0x388107[_0xcd8e71(0x1e5)]?this[_0xcd8e71(0x1df)]={'model_list':[{'model':_0x39801c[_0xcd8e71(0x1d5)]+_0x388107[_0xcd8e71(0x1ea)][_0xcd8e71(0x22d)](_0x39801c['VKYLd'],_0x336b8c),'model_id':_0xf66dc5,'model_lib':_0x388107?.['modelLibrary']?.['startsWith'](_0x39801c[_0xcd8e71(0x21b)])?_0x388107[_0xcd8e71(0x1e5)]:_0x39801c[_0xcd8e71(0x1dd)](_0x39801c[_0xcd8e71(0x22a)](_0x39801c['zFIap'](modelLibURLPrefix,'/')+modelVersion,'/'),_0x388107[_0xcd8e71(0x1e5)])}]}:this[_0xcd8e71(0x1df)]=prebuiltAppConfig,this[_0xcd8e71(0x25b)]?this[_0xcd8e71(0x26b)]=await _0x39801c['vsmUw'](CreateWebWorkerMLCEngine,this['worker'],_0xf66dc5,{'initProgressCallback':_0x51afcc=>{const _0xecb877=_0xcd8e71;_0x36c9df[_0xecb877(0x225)]?.(_0x51afcc);},'appConfig':this['appConfig'],..._0x36c9df}):this['mlcEngine']=await _0x39801c[_0xcd8e71(0x264)](CreateMLCEngine,_0xf66dc5,{'initProgressCallback':_0x36c9df[_0xcd8e71(0x225)],'appConfig':this[_0xcd8e71(0x1df)],..._0x36c9df}),this[_0xcd8e71(0x20d)]=!![],this[_0xcd8e71(0x26d)]=![],this[_0xcd8e71(0x245)](_0x39801c[_0xcd8e71(0x1d8)],_0xcd8e71(0x21f)),!![];}catch(_0x316387){this['worker']&&(this[_0xcd8e71(0x25b)]['terminate'](),this['worker']=null);const _0x456ad3=_0x39801c[_0xcd8e71(0x232)](_0x316387,Error)?_0x316387[_0xcd8e71(0x206)]:_0x39801c[_0xcd8e71(0x262)](String,_0x316387);return this[_0xcd8e71(0x20d)]=![],this[_0xcd8e71(0x26d)]=![],this['dispatchStatusEvent'](_0x39801c[_0xcd8e71(0x1e6)],_0x456ad3),console[_0xcd8e71(0x1bd)](_0xcd8e71(0x223),_0x316387),![];}}[_0x1a24d0(0x245)](_0x1b8ff4,_0x3e99ee){const _0x2c5731=_0x1a24d0;console[_0x2c5731(0x1db)](_0x2c5731(0x263)+_0x1b8ff4+':\x20'+_0x3e99ee),self[_0x2c5731(0x200)]({'status':_0x1b8ff4,'message':_0x3e99ee});}[_0x1a24d0(0x1c0)](_0xb9f56c,_0x3b2f49){const _0x55f2f6=_0x1a24d0,_0x4b059b={'Bcyro':_0x55f2f6(0x210)};console['log'](_0x55f2f6(0x1ee)+_0xb9f56c+':\x20'+_0x3b2f49+'%'),self[_0x55f2f6(0x200)]({'status':_0x4b059b[_0x55f2f6(0x243)],'stage':_0xb9f56c,'progress':_0x3b2f49});}[_0x1a24d0(0x1e7)](){const _0xff9288=_0x1a24d0,_0x50619b={'lnGkS':function(_0x22b16f,_0x1ff1fc){return _0x22b16f===_0x1ff1fc;}};return _0x50619b[_0xff9288(0x253)](this['_modelLoaded'],!![]);}[_0x1a24d0(0x234)](){const _0x43d15d=_0x1a24d0,_0x4e466b={'Jclxh':function(_0x883ebc,_0x301709){return _0x883ebc===_0x301709;}};return _0x4e466b['Jclxh'](this['cacheManager'][_0x43d15d(0x234)](this[_0x43d15d(0x270)]),!![]);}async[_0x1a24d0(0x247)](_0x435478,_0x4e4d48={}){const _0x4b55cd=_0x1a24d0,_0x89feae={'AplNU':_0x4b55cd(0x276),'LsENo':_0x4b55cd(0x239),'jsAkm':function(_0xe2c80b,_0x4697cb){return _0xe2c80b===_0x4697cb;},'sEtOQ':_0x4b55cd(0x22b),'UxztU':_0x4b55cd(0x1e4)};if(!this[_0x4b55cd(0x26b)])throw new Error(_0x89feae[_0x4b55cd(0x21c)]);let _0xe6c513=[],_0x46eb32='';_0x4e4d48[_0x4b55cd(0x242)]&&(_0x46eb32+=_0x4b55cd(0x221));_0x4e4d48[_0x4b55cd(0x201)]&&(_0x46eb32+=_0x4e4d48[_0x4b55cd(0x201)]);_0x46eb32&&_0xe6c513[_0x4b55cd(0x237)]({'role':_0x89feae[_0x4b55cd(0x208)],'content':_0x46eb32[_0x4b55cd(0x246)]()});Array[_0x4b55cd(0x271)](_0x435478)?_0xe6c513[_0x4b55cd(0x237)](..._0x435478):_0xe6c513['push']({'role':_0x4b55cd(0x256),'content':_0x435478});const _0x3bb3ac={'max_tokens':0x12c,'temperature':0.6,'top_p':0.95,'frequency_penalty':0.5,'presence_penalty':0.5};if(_0x4e4d48[_0x4b55cd(0x242)]){const _0x4ca4b6=_0x89feae['jsAkm'](typeof _0x4e4d48['json_schema'],_0x89feae[_0x4b55cd(0x1d6)])?_0x4e4d48[_0x4b55cd(0x242)]:JSON[_0x4b55cd(0x1eb)](_0x4e4d48['json_schema']);_0x4e4d48[_0x4b55cd(0x24b)]={'type':_0x89feae[_0x4b55cd(0x1ec)],'schema':_0x4ca4b6};}const _0x52ffd9={..._0x3bb3ac,..._0x4e4d48,'messages':_0xe6c513};if(_0x4e4d48['stream'])return _0x52ffd9[_0x4b55cd(0x21a)]={'include_usage':!![]},this['mlcEngine']['chat']['completions'][_0x4b55cd(0x23b)](_0x52ffd9);const _0x53b36c=await this[_0x4b55cd(0x26b)]['chat']['completions'][_0x4b55cd(0x23b)](_0x52ffd9);return _0x53b36c['choices'][0x0]['message'][_0x4b55cd(0x1d7)];}async[_0x1a24d0(0x26c)](_0x4c42c6,_0x103d6f={}){const _0x33d3da=_0x1a24d0,_0x3ee0ed={'rPFQk':_0x33d3da(0x276),'TBBud':_0x33d3da(0x221),'tOEum':'system','KyVba':_0x33d3da(0x256),'tWSXK':function(_0x36fe2a,_0x650619){return _0x36fe2a===_0x650619;},'ZMuos':'string','GvCpL':_0x33d3da(0x1e4)};if(!this[_0x33d3da(0x26b)])throw new Error(_0x3ee0ed[_0x33d3da(0x23c)]);console[_0x33d3da(0x1db)](_0x33d3da(0x248),_0x4c42c6,_0x103d6f);let _0x368766=[],_0x366ff9='';_0x103d6f[_0x33d3da(0x242)]&&(_0x366ff9+=_0x3ee0ed[_0x33d3da(0x252)]);_0x103d6f[_0x33d3da(0x201)]&&(_0x366ff9+=_0x103d6f['system_prompt']);_0x366ff9&&_0x368766[_0x33d3da(0x237)]({'role':_0x3ee0ed[_0x33d3da(0x249)],'content':_0x366ff9[_0x33d3da(0x246)]()});Array[_0x33d3da(0x271)](_0x4c42c6)?_0x368766['push'](..._0x4c42c6):_0x368766['push']({'role':_0x3ee0ed[_0x33d3da(0x23e)],'content':_0x4c42c6});const _0x39d920={'max_tokens':0x12c,'temperature':0.6,'top_p':0.95,'frequency_penalty':0.5,'presence_penalty':0.5,'stream':!![]};if(_0x103d6f['json_schema']){const _0x49db78=_0x3ee0ed[_0x33d3da(0x1f5)](typeof _0x103d6f[_0x33d3da(0x242)],_0x3ee0ed[_0x33d3da(0x211)])?_0x103d6f[_0x33d3da(0x242)]:JSON[_0x33d3da(0x1eb)](_0x103d6f['json_schema']);_0x103d6f[_0x33d3da(0x24b)]={'type':_0x3ee0ed[_0x33d3da(0x1bc)],'schema':_0x49db78};}const _0x1be70b={..._0x39d920,..._0x103d6f,'messages':_0x368766};return _0x1be70b[_0x33d3da(0x1cf)]=!![],_0x1be70b[_0x33d3da(0x21a)]={'include_usage':!![]},this[_0x33d3da(0x26b)]['chat'][_0x33d3da(0x1fa)][_0x33d3da(0x23b)](_0x1be70b);}async[_0x1a24d0(0x1d1)](_0x327c94,_0x44e8c3={}){const _0xf6edb2=_0x1a24d0,_0x178a51={'EjflS':'[MLCEngine]\x20MLC\x20Engine\x20not\x20initialized.'};if(!this['mlcEngine'])throw new Error(_0x178a51[_0xf6edb2(0x24a)]);const _0x1e3068=await this[_0xf6edb2(0x26b)][_0xf6edb2(0x26f)][_0xf6edb2(0x23b)]({'input':_0x327c94,..._0x44e8c3});return _0x1e3068[_0xf6edb2(0x226)][0x0]['embedding'];}[_0x1a24d0(0x204)](){const _0xc95d2a=_0x1a24d0;this['worker']&&(this['worker']['terminate'](),this[_0xc95d2a(0x25b)]=null),this['mlcEngine']=null;}async[_0x1a24d0(0x25f)](){const _0x5857be=_0x1a24d0,_0x101b6c={'ZWNYS':_0x5857be(0x1cb),'XqXCC':_0x5857be(0x269),'jaHbw':_0x5857be(0x1c6),'xMWer':function(_0x32d549){return _0x32d549();},'ISQHu':_0x5857be(0x241),'BeXHs':function(_0x4b1413,_0x204b26){return _0x4b1413(_0x204b26);}};return new Promise(async(_0x34e907,_0x1cfb30)=>{const _0x2ecfa1=_0x5857be;try{const _0x3aadea=['webllm/config',_0x101b6c[_0x2ecfa1(0x275)],_0x101b6c[_0x2ecfa1(0x251)]],_0x126f0e=await caches[_0x2ecfa1(0x20f)](),_0x3244f6=_0x126f0e[_0x2ecfa1(0x1c5)](_0x992b66=>_0x3aadea[_0x2ecfa1(0x1d9)](_0x1721ea=>_0x992b66[_0x2ecfa1(0x1fc)](_0x1721ea)));await Promise['all'](_0x3244f6[_0x2ecfa1(0x1b9)](_0x2d24b5=>caches[_0x2ecfa1(0x277)](_0x2d24b5))),console['log'](_0x101b6c[_0x2ecfa1(0x1f9)]),_0x101b6c[_0x2ecfa1(0x1ca)](_0x34e907);}catch(_0x384cc4){console[_0x2ecfa1(0x1bd)](_0x101b6c['ISQHu'],_0x384cc4),_0x101b6c['BeXHs'](_0x1cfb30,_0x384cc4);}});}async['clearSpecificModel'](_0x49e47e){const _0xabd0a3=_0x1a24d0,_0x192d87={'zuvmf':_0xabd0a3(0x26e)};if(!_0x49e47e)throw new Error(_0x192d87[_0xabd0a3(0x238)]);return this[_0xabd0a3(0x1bb)]['removeModelFromCache'](_0x49e47e);}async['getCacheInfo'](){const _0x48120a=_0x1a24d0;return this[_0x48120a(0x1bb)][_0x48120a(0x1c7)]();}async[_0x1a24d0(0x266)](){const _0x33d6ba=_0x1a24d0,_0x523129={'oReFD':function(_0x5d0a7b,_0x203458){return _0x5d0a7b+_0x203458;},'JqQjr':_0x33d6ba(0x267),'ouhJK':_0x33d6ba(0x213),'CCYQC':_0x33d6ba(0x216),'IiOkN':_0x33d6ba(0x1be)},_0x3ec68e=await this[_0x33d6ba(0x1bb)][_0x33d6ba(0x1c7)]();console[_0x33d6ba(0x1db)](_0x523129[_0x33d6ba(0x21d)]),console[_0x33d6ba(0x1db)](_0x33d6ba(0x1ef)+this[_0x33d6ba(0x1fe)](_0x3ec68e[_0x33d6ba(0x231)])+_0x33d6ba(0x24c)+this[_0x33d6ba(0x1fe)](_0x3ec68e[_0x33d6ba(0x219)])+'\x20('+_0x3ec68e[_0x33d6ba(0x218)][_0x33d6ba(0x228)](0x2)+'%)'),console[_0x33d6ba(0x1db)]('Number\x20of\x20models:\x20'+_0x3ec68e[_0x33d6ba(0x1ff)]['length']),console[_0x33d6ba(0x1db)](_0x523129[_0x33d6ba(0x222)]);const _0x8bc9a2=[..._0x3ec68e[_0x33d6ba(0x1ff)]]['sort']((_0x47e03,_0x3063db)=>_0x47e03[_0x33d6ba(0x257)]-_0x3063db[_0x33d6ba(0x257)]);_0x8bc9a2['forEach']((_0x2c7b1a,_0x45c0ea)=>{const _0x1c62ce=_0x33d6ba;console[_0x1c62ce(0x1db)](_0x523129[_0x1c62ce(0x25a)](_0x45c0ea,0x1)+'.\x20'+_0x2c7b1a['id']+':\x20'+this[_0x1c62ce(0x1fe)](_0x2c7b1a[_0x1c62ce(0x1fb)]));}),console[_0x33d6ba(0x1db)](_0x523129[_0x33d6ba(0x265)]),console[_0x33d6ba(0x1db)](_0x33d6ba(0x209)+_0x3ec68e[_0x33d6ba(0x20a)][_0x33d6ba(0x258)]),console['log'](_0x33d6ba(0x25e)+_0x3ec68e[_0x33d6ba(0x20a)][_0x33d6ba(0x229)]),console[_0x33d6ba(0x1db)](_0x523129['IiOkN'],_0x3ec68e[_0x33d6ba(0x20a)][_0x33d6ba(0x22e)]);}[_0x1a24d0(0x1fe)](_0x2efd9e){const _0x325c47=_0x1a24d0,_0x2e6018={'huLBR':function(_0x384ce2,_0x5e40b3){return _0x384ce2===_0x5e40b3;},'vZCMy':'Bytes','MOecO':function(_0x5e2a07,_0x22ff78){return _0x5e2a07/_0x22ff78;},'TANoz':function(_0x4336d1,_0x20006d){return _0x4336d1+_0x20006d;},'dJDUo':function(_0x121f67,_0x255ef0){return _0x121f67(_0x255ef0);}};if(_0x2e6018[_0x325c47(0x260)](_0x2efd9e,0x0))return'0\x20Bytes';const _0xf63783=0x400,_0x17d4c9=[_0x2e6018['vZCMy'],'KB','MB','GB','TB'],_0x5682eb=Math['floor'](_0x2e6018[_0x325c47(0x233)](Math[_0x325c47(0x1db)](_0x2efd9e),Math[_0x325c47(0x1db)](_0xf63783)));return _0x2e6018[_0x325c47(0x1f8)](_0x2e6018[_0x325c47(0x1f8)](_0x2e6018[_0x325c47(0x1bf)](parseFloat,(_0x2efd9e/Math[_0x325c47(0x1f4)](_0xf63783,_0x5682eb))[_0x325c47(0x228)](0x2)),'\x20'),_0x17d4c9[_0x5682eb]);}}const workerCode=_0x1a24d0(0x1dc);