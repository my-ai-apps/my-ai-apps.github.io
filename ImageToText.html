<!--
/*!
Copyright Â© 2024 Saisha Pandit. All Rights Reserved.
Unauthorized use, modification, or distribution is strictly prohibited.
*/
-->
<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Image Text Extractor</title><script src="https://cdnjs.cloudflare.com/ajax/libs/tesseract.js/2.1.5/tesseract.min.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"><style>body{font-family:Arial,sans-serif;margin:0;padding:0;background-color:#f4f4f9;color:#333;text-align:center}.container{max-width:500px;margin:20px auto;padding:20px;background:#fff;border-radius:8px;box-shadow:0 4px 6px rgba(0,0,0,.1)}h1{font-size:24px;margin-bottom:10px}h2{font-size:18px;margin-bottom:20px;color:#555}.file-input-wrapper{display:flex;justify-content:center;align-items:center;margin:15px 0;position:relative}.file-input-wrapper input[type=file]{position:absolute;opacity:0;width:100%;height:100%;cursor:pointer}.btn{background-color:#007bff;color:#fff;padding:10px 20px;border:none;border-radius:5px;font-size:14px;cursor:pointer;display:inline-block;min-width:160px}.btn:hover{background-color:#0056b3}#image-preview{max-width:100%;max-height:250px;margin:20px auto;display:none;border-radius:5px;cursor:pointer}#extracted-text{width:100%;min-height:120px;margin-top:20px;padding:10px;border:1px solid #ddd;border-radius:5px;background:#f9f9f9;font-family:monospace;font-size:14px;resize:none}select{width:100%;padding:10px;margin:10px 0;border:1px solid #ddd;border-radius:5px;font-size:14px}.footer{margin-top:20px;font-size:12px;color:#888}@media (max-width:480px){h1{font-size:20px}.btn{padding:10px;font-size:12px}#extracted-text{font-size:12px}}</style></head><body><div class="container"><h1>Image Text Extractor</h1><h2>Upload, paste, or capture an image to extract text</h2><div class="file-input-wrapper"><button class="btn">Upload Image</button> <input type="file" id="image-upload" accept="image/*"></div><button class="btn" onclick="captureImageFromCamera()">Scan <i class="fas fa-camera"></i></button> <select id="language-select"><option value="eng" selected="selected">English</option><option value="fra">French</option><option value="deu">German</option><option value="spa">Spanish</option><option value="chi_sim">Chinese (Simplified)</option><option value="jpn">Japanese</option><option value="ara">Arabic</option></select> <button id="extract-btn" class="btn">Extract Text</button> <img id="image-preview" onclick="extractTextFromImage()" alt="Preview of uploaded image"> <textarea id="extracted-text" readonly="readonly" placeholder="Extracted text will appear here"></textarea></div><div class="footer">Powered by Tesseract.js</div><script>const imageUpload=document.getElementById("image-upload"),languageSelect=document.getElementById("language-select"),extractBtn=document.getElementById("extract-btn"),extractedText=document.getElementById("extracted-text");let currentStream=null,isCapturing=!1;async function checkCameraPermissions(){if("granted"!==(await navigator.permissions.query({name:"camera"})).state)throw new Error("Camera permission not granted.")}function stopCamera(){currentStream&&(currentStream.getTracks().forEach((e=>e.stop())),currentStream=null,console.log("Camera stopped."))}async function captureImageFromCamera(){if(isCapturing)console.warn("Camera is already in use.");else try{isCapturing=!0,console.log("Checking camera permissions..."),await checkCameraPermissions(),console.log("Stopping any existing streams..."),stopCamera();let e={video:{facingMode:{exact:"environment"}}};try{console.log("Requesting rear camera access..."),currentStream=await navigator.mediaDevices.getUserMedia(e)}catch(t){console.warn("Rear camera not accessible, switching to default camera.",t.message),e={video:!0},currentStream=await navigator.mediaDevices.getUserMedia(e)}console.log("Camera stream started:",currentStream);const t=document.createElement("video");t.srcObject=currentStream,await new Promise(((e,a)=>{t.addEventListener("canplay",e,{once:!0}),t.addEventListener("error",a,{once:!0})})),console.log("Video feed is ready."),await t.play();const a=document.createElement("canvas"),r=a.getContext("2d");a.width=t.videoWidth,a.height=t.videoHeight,r.drawImage(t,0,0,a.width,a.height),console.log("Image captured from camera.");const n=document.getElementById("image-preview");n.src=a.toDataURL("image/jpeg"),n.style.display="block",stopCamera(),t.remove(),a.remove()}catch(e){console.error("Camera capture error:",e.message),alert("Error accessing the camera: "+e.message),stopCamera()}finally{isCapturing=!1}}async function extractTextFromImage(){const e=languageSelect.value,t=document.getElementById("image-preview").src;if(t){extractedText.value="Extracting text...";try{const a=Tesseract.createWorker();await a.load(),await a.loadLanguage(e),await a.initialize(e);const{data:{text:r}}=await a.recognize(t);extractedText.value=r||"No text could be extracted",await a.terminate()}catch(e){extractedText.value="Error extracting text: "+e.message}}else alert("Please upload or capture an image first")}imageUpload.addEventListener("change",(function(e){const t=e.target.files[0];if(t){const e=new FileReader;e.onload=function(e){const t=document.getElementById("image-preview");t.src=e.target.result,t.style.display="block"},e.readAsDataURL(t)}})),extractBtn.addEventListener("click",extractTextFromImage),window.addEventListener("beforeunload",(()=>{currentStream&&currentStream.getTracks().forEach((e=>e.stop()))}))</script></body></html>